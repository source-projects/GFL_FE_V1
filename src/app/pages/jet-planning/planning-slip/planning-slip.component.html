<nb-card class="nb-style pr-mr-0">
    <nb-card-header class="nb-header">
        <div class="row">
            <div class="col-md-11" *ngIf="additionSlipFlag && !directSlipFlag">
                <h2 class="nb-text">Generate slip</h2>
            </div>
            <div class="col-md-11" *ngIf="directSlipFlag">
                <h2 class="nb-text">Direct slip</h2>
            </div>
            <div class="col-md-6" *ngIf="!additionSlipFlag && !directSlipFlag">
                <h2 class="nb-text">Jet planning steps</h2>

            </div>
            <div class="col-md-5 display-flex-end" *ngIf="!additionSlipFlag &&
                !directSlipFlag">
                <button type="button" (click)="approveByClicked();"
                    class="btn btn-primary btn-sm btn-edit">Edit</button>
            </div>
            <div class="col-md-1 user-per-check-display">
                <button class="close btn-foucs-none" aria-label="Close" (click)="activeModal.close(false)">
                    <span aria-hidden="true" class="close-icon">&times;</span>
                </button>
            </div>

        </div>

    </nb-card-header>


    <div *ngIf="!additionSlipFlag" id="editable-slip">

        <div *ngIf="slipData != null || slipData != undefined" class="container">
            <div *ngIf="slipData.dyeingSlipDataList != null">
                <form #myForm='ngForm'>
                    <fieldset class="pd-mr-0">
                        <nb-card class="padding-box border-0 pd-0">
                            <div *ngFor="let process of
                                slipData.dyeingSlipDataList; let i=index;">
                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="display-flex-between">
                                            <h3 class="name-print">{{process.processType}}</h3>
                                            <nb-icon icon="trash" status="danger" *ngIf="approveByFlag" [options]="{ animation: { type:
                                                'zoom' } }" (click)="removeProcess(i)">
                                            </nb-icon>
                                        </div>

                                    </div>
                                    <div class="form-group col-md-3">
                                        <label class="required font-13">Temperature</label>
                                        <input type="number" (keypress)="numberOnly($event)" class="form-control"
                                            min="0" #temp1="ngModel" [(ngModel)]="process.temp"
                                            name="Scouring-temp{{i}}" [ngClass]="{'is-invalid':(temp1.invalid)&&(formSubmitted
                                            || temp1.touched) }" required [disabled]="!approveByFlag">

                                        <div class="input-required" *ngIf="(temp1.invalid)&&(formSubmitted
                                            || temp1.touched)">
                                            <span>Temperarture is required</span>
                                        </div>
                                    </div>
                                    <div class="form-group col-md-3">
                                        <label class="required font-13">Hold
                                            Time</label>
                                        <input type="number" (keypress)="numberOnly($event)" class="form-control"
                                            min="0" #hTime1="ngModel" [(ngModel)]="process.holdTime"
                                            name="Scouring-holdTime{{i}}" [ngClass]="{'is-invalid':(hTime1.invalid)&&(formSubmitted
                                            || hTime1.touched) }" required [disabled]="!approveByFlag">
                                        <div class="input-required" *ngIf="(hTime1.invalid)&&(formSubmitted
                                            || hTime1.touched)">
                                            <span>Hold Time is required</span>
                                        </div>
                                    </div>
                                    <div class="form-group col-md-3">
                                        <label class="required font-13">Liquer
                                            Ratio</label>
                                        <input type="number" (keypress)="numberOnly($event)" class="form-control"
                                            min="0" #lRatio1="ngModel" [(ngModel)]="process.liquerRation"
                                            name="Scouring-lRatio{{i}}" [ngClass]="{'is-invalid':(lRatio1.invalid)&&(formSubmitted
                                            || lRatio1.touched) }" required [disabled]="!approveByFlag">
                                        <div class="input-required" *ngIf="(lRatio1.invalid)&&(formSubmitted
                                            || lRatio1.touched)">
                                            <span>Liqure ratio is required</span>
                                        </div>
                                    </div>
                                    <div class="form-group col-md-3
                                        jus-con-center" *ngIf="process.processType == 'Dyeing'
                                        || process.processType == 'Addition'">
                                        <nb-checkbox class="status-basic
                                            nb-transition" id="iscolor{{i}}" [disabled]="false"
                                            [(ngModel)]="process.isColor" name="isColor{{i}}" (checkedChange)="colorSelected($event,
                                            i)">
                                        </nb-checkbox>
                                        &nbsp;<label>Color</label>
                                    </div>

                                    <div class="form-group col-md-12">
                                        <fieldset [disabled]="!approveByFlag">
                                            <table class="table table-bordered
                                                table-striped table-process-fnt
                                                text-center">
                                                <tr>
                                                    <th>Item name</th>
                                                    <th>Quantity</th>
                                                    <th>Action</th>
                                                </tr>
                                                <ng-container>
                                                    <tr *ngFor='let dc of
                                                        (process.dyeingSlipItemData
                                                        | filterByIsColor :
                                                        process.isColor :
                                                        refreshPipe);let
                                                        i1=index;trackBy:trackByFn'>
                                                        <td>
                                                            <select name="dcId{{dc._id}}_{{i1}}_{{i}}"
                                                                [(ngModel)]="dc.itemId" class="tableForm" required
                                                                (change)="itemSelected($event.target.value,i1,i)"
                                                                [disabled]="!approveByFlag">
                                                                <option *ngFor="let
                                                                    item of
                                                                    itemListArray" [value]="item.itemId" placeholder="Select
                                                                    Item">
                                                                    {{item.itemName}}-{{item.supplierName}}
                                                                </option>
                                                            </select>
                                                        </td>
                                                        <td>
                                                            <input type="number" (keypress)="numberOnly($event)"
                                                                name='dcqty{{dc._id}}_{{i1}}_{{i}}' class="tableForm"
                                                                [(ngModel)]="dc.qty" [id]="'itemList'+i+i1+'-'+1"
                                                                (keyup)="onKeyUp($event,i1,1,'quantity',i)" min="0">
                                                        </td>

                                                        <td>
                                                            <nb-icon icon="trash" status="danger" *ngIf="approveByFlag"
                                                                [options]="{
                                                                animation: {
                                                                type: 'zoom' }
                                                                }" (click)="removeItem(i1,i)">
                                                            </nb-icon>
                                                        </td>
                                                    </tr>
                                                </ng-container>

                                            </table>
                                        </fieldset>
                                    </div>
                                </div>
                            </div>
                        </nb-card>
                        <div class="row" *ngIf="approveByFlag">
                            <div class="col-md-3">
                                <div class="nb-icon-add">
                                    <nb-icon icon="plus-circle" status="primary" [options]="{ animation: { type: 'zoom' }
                                        }" (click)="addNew()" class="plus-add add-modal width-40
                                        height-100"></nb-icon>
                                    <div class="tooltip">Add Process</div>
                                </div>
                            </div>

                            <div *ngIf="addNewFlag">
                                <form #innerForm="ngForm">
                                    <div class="modal-body">
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label class="required">Process
                                                        Type</label>
                                                    <ng-select [(ngModel)]="dyeingProcessStepNew.processType"
                                                        appendTo="body" placeholder="Select
                                                        Process-type" name="processType" #processType1="ngModel"
                                                        [ngClass]="{'is-invalid':(processType1.invalid)&&(formSubmitted
                                                        ||
                                                        processType1.touched)}" required>
                                                        <ng-option *ngFor="let p of
                                                            processTypes |
                                                            processFilterPipe:slipData.dyeingSlipDataList" [value]="p">
                                                            {{p}}
                                                        </ng-option>
                                                    </ng-select>
                                                    <div class="input-required" *ngIf="(processType1.invalid)&&(formSubmitted
                                                        ||
                                                        processType1.touched)">
                                                        Process Type is
                                                        required.
                                                    </div>
                                                </div>
                                            </div>


                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label class="required">Temprature</label>
                                                    <input class="form-control
                                                        input-group" (keypress)="numberOnly($event)" type="number"
                                                        min="0" name="temp" [(ngModel)]="dyeingProcessStepNew.temp"
                                                        #temp1="ngModel" [ngClass]="{'is-invalid':(temp1.invalid)&&(formSubmitted
                                                        || temp1.touched)}" required placeholder="Temprature" required>
                                                    <div class="input-required" *ngIf="(temp1.invalid)&&(formSubmitted
                                                        || temp1.touched)">
                                                        Temprature is required.
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label class="required">Hold
                                                        Time</label>
                                                    <input class="form-control
                                                        input-group" (keypress)="numberOnly($event)" min="0"
                                                        type="number" name="holdTime"
                                                        [(ngModel)]="dyeingProcessStepNew.holdTime" #holdTime1="ngModel"
                                                        [ngClass]="{'is-invalid':(holdTime1.invalid)&&(formSubmitted
                                                        || holdTime1.touched)}" required>
                                                    <div class="input-required" *ngIf="(holdTime1.invalid)&&(formSubmitted
                                                        || holdTime1.touched)">
                                                        Hold Time is required.
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label class="required">Liqour
                                                        Ratio</label>
                                                    <input type="number" class="form-control"
                                                        (keypress)="numberOnly($event)" min="0" #lRatio1="ngModel"
                                                        [(ngModel)]="liquorRatio" name="liquorRatio" placeholder="Liqour
                                                        Ratio" [ngClass]="{'is-invalid':(lRatio1.invalid)&&(formSubmitted
                                                        || lRatio1.touched) }" required>
                                                    <div class="input-required" *ngIf="(lRatio1.invalid)&&(formSubmitted
                                                        || lRatio1.touched)">
                                                        <span>Liquor ratio is
                                                            required</span>
                                                    </div>
                                                </div>
                                            </div>


                                            <div class="form-group col-md-4" *ngIf="dyeingProcessStepNew.processType
                                                == 'Dyeing' ||
                                                dyeingProcessStepNew.processType
                                                == 'Addition'">
                                                <nb-checkbox class="status-basic
                                                    nb-transition" id="iscolor" [(ngModel)]="isColor" name="isColor">
                                                </nb-checkbox>
                                                &nbsp;<label>Color</label>
                                            </div>

                                            <div class="col-md-12">
                                                <table class="table
                                                    table-responsive
                                                    table-bordered table-striped
                                                    table-process-fnt">
                                                    <tr>
                                                        <th>Item name</th>
                                                        <th>Quantity</th>
                                                        <th>Action</th>
                                                    </tr>

                                                    <tr *ngFor='let dc of
                                                        dyeingChemicalData;let
                                                        dcIndex=index;trackBy:trackByFn'>
                                                        <td>
                                                            <select #data name="dcId{{dc._id}}" [(ngModel)]="dc.itemId"
                                                                class="tableForm" required
                                                                (change)="itemSelected($event.target.value,dcIndex)">
                                                                <option *ngFor="let
                                                                    item of
                                                                    itemListArray" [value]="item.itemId" placeholder="Select
                                                                    Item">
                                                                    {{item.itemName}}
                                                                    -
                                                                    {{item.supplierName}}
                                                                </option>
                                                            </select>
                                                        </td>
                                                        <td>
                                                            <input type="number" name='dcqty{{dc._id}}'
                                                                (keypress)="numberOnly($event)" class="tableForm
                                                                line-height-subtable" required [(ngModel)]="dc.qty"
                                                                (keyup)="onEnter($event,dcIndex,1)" min="0"
                                                                [id]="'addList'+dcIndex+'-1'">
                                                        </td>
                                                        <td>
                                                            <nb-icon icon="trash" status="danger" [options]="{
                                                                animation: {
                                                                type: 'zoom' }
                                                                }" (click)="removeChemicalData(dcIndex)"></nb-icon>
                                                        </td>
                                                    </tr>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn
                                            btn-primary btn-sm btn-design-save"
                                            (click)="onCreate(innerForm)">ADD</button>
                                        <button type="button" class="btn
                                            btn-primary btn-sm
                                            btn-design-cancel" (click)="onCancel(innerForm)">Cancel</button>
                                    </div>
                                </form>

                            </div>
                        </div>
                    </fieldset>
                    <div class="col-md-12 mobile-btn-center text-btn-right">
                        <button class="btn btn-primary btn-sm btn-design-cancel" type="button"
                            (click)="activeModal.close(false)">CANCEL</button>
                        <button *ngIf="" type="button" (click)="saveClicked=true;saveSlipData(myForm);"
                            class="btn btn-primary btn-sm btn-design-save" [disabled]="disableButton">UPDATE</button>

                        <button type="button" class="btn btn-primary btn-sm
                            btn-design-save" [disabled]="disableButton"
                            (click)="saveClicked=true;saveSlipData(myForm)">CONFIRM
                            &
                            SAVE</button>
                        <button *ngIf="!saveAndPrintFlag" type="button" class="btn btn-primary btn-sm btn-design-save"
                            [disabled]="disableButton" (click)="printSlip(myForm)">Confirm, Save And
                            Print</button>

                    </div>
                </form>
            </div>
        </div>

    </div>




    <div *ngIf="additionSlipFlag || directSlipFlag" id="addition-slip">
        <nb-card-body class="pr-pd-0">
            <div>
                <div class="container">
                    <div>
                        <form #myForm='ngForm'>
                            <div>
                                <div class="row">
                                    <div class="col-md-12" *ngIf="additionSlipFlag">
                                        <h3 class="name-print">Addition</h3>
                                    </div>
                                    <div class="col-md-12" *ngIf="directSlipFlag">
                                        <h3 class="name-print">Direct</h3>
                                    </div>
                                    <div class="form-group col-md-3">
                                        <label class="required font-13">Temperature</label>
                                        <input type="number" class="form-control" (keypress)="numberOnly($event)"
                                            min="0" #temp1="ngModel" [(ngModel)]="temp" name="temp" [ngClass]="{'is-invalid':(temp1.invalid)&&(formSubmitted
                                            || temp1.touched) }" required>

                                        <div class="required-class" *ngIf="(temp1.invalid)&&(formSubmitted
                                            || temp1.touched)">
                                            <span>Temperarture is required</span>
                                        </div>
                                    </div>
                                    <div class="form-group col-md-3">
                                        <label class="required font-13">Hold
                                            Time</label>
                                        <input type="number" class="form-control" (keypress)="numberOnly($event)"
                                            min="0" #hTime1="ngModel" [(ngModel)]="holdTime" name="holdTime" [ngClass]="{'is-invalid':(hTime1.invalid)&&(formSubmitted
                                            || hTime1.touched) }" required>
                                        <div class="required-class" *ngIf="(hTime1.invalid)&&(formSubmitted
                                            || hTime1.touched)">
                                            <span>Hold Time is required</span>
                                        </div>
                                    </div>
                                    <div class="form-group col-md-3">
                                        <label class="required font-13">Liqure
                                            Ratio</label>
                                        <input type="number" class="form-control" (keypress)="numberOnly($event)"
                                            min="0" #lRatio1="ngModel" [(ngModel)]="liquorRatio" name="liquorRatio"
                                            [ngClass]="{'is-invalid':(lRatio1.invalid)&&(formSubmitted
                                            || lRatio1.touched) }" required>
                                        <div class="required-class" *ngIf="(lRatio1.invalid)&&(formSubmitted
                                            || lRatio1.touched)">
                                            <span>Liquor ratio is required</span>
                                        </div>
                                    </div>
                                    <div class="form-group col-md-3
                                        display-flex-start">
                                        <nb-checkbox class="status-basic
                                            nb-transition" id="iscolor" [(ngModel)]="isColor" name="isColor">
                                        </nb-checkbox>
                                        &nbsp;<label class="font-13">Color</label>
                                    </div>

                                    <div class="form-group col-md-12">
                                        <table class="table table-bordered
                                            table-striped table-process-fnt
                                            text-center">
                                            <tr>
                                                <th>Item name</th>
                                                <th>Quantity</th>

                                                <th>Action</th>
                                            </tr>

                                            <tr *ngFor='let item of itemList |
                                            filterByIsColor : isColor : directSlipFlag;let
                                                i1=index;trackBy:trackByFn'>
                                                <td>
                                                    <ng-select #data name="itemId{{item._id}}{{i1}}" itemId1="ngModel"
                                                        appendTo="body" [(ngModel)]="item.itemId" #itemId1="ngModel"
                                                        class="tableForm" (change)="itemSelected1($event,i1)" required
                                                        appendTo="body" class="ng-select-br-none" required>
                                                        <ng-option
                                                            *ngFor="let
                                                            item of
                                                            itemListArray | filterOutSelectedSupplier : itemList : item.itemId"
                                                            [value]="item.itemId" placeholder="Select Item">
                                                            {{item.itemName}} -
                                                            {{item.supplierName}}</ng-option>
                                                    </ng-select>
                                                </td>
                                                <td>
                                                    <input type="number" #quantity1="ngModel"
                                                        (keypress)="numberOnly($event)" name='qty{{item._id}}{{i1}}'
                                                        class="tableForm
                                                        line-height-subtable" [(ngModel)]="item.qty"
                                                        (keyup)="onKeyUp1($event,i1,1,'quantity')"
                                                        [id]="'itemList'+i1+'-1'" min="0" required>
                                                </td>



                                                <td>
                                                    <nb-icon icon="trash" status="danger" [options]="{ animation:
                                                        { type: 'zoom' } }" (click)="removeItem1(i1)">
                                                    </nb-icon>
                                                </td>
                                            </tr>
                                        </table>
                                    </div>


                                    <div *ngIf="directSlipFlag" class="col-md-6">
                                        <div class="form-group">
                                            <div class="form-group">
                                                <button class="btn btn-primary
                                                    btn-sm btn-design-save" type="button"
                                                    (click)="pickColor($event)">Pick
                                                    color from</button>
                                            </div>

                                            <ng-template #selectShadeDialog let-modal>
                                                <nb-card class="nb-style
                                                    pr-mr-0">
                                                    <nb-card-header class="nb-header">
                                                        <div class="row">
                                                            <div class="col-md-11">
                                                                <h2 class="nb-text">Select
                                                                    Shade</h2>
                                                            </div>
                                                            <div class="col-md-1
                                                                user-per-check-display">
                                                                <button class="close
                                                                    btn-foucs-none" aria-label="Close"
                                                                    (click)="modal.dismiss('Cross click')">
                                                                    <span aria-hidden="true"
                                                                        class="close-icon">&times;</span>
                                                                </button>
                                                            </div>
                                                        </div>

                                                    </nb-card-header>
                                                    <nb-card-body>
                                                        <div class="row">
                                                            <div class="col-md-6">
                                                                <div class="form-group
                                                                    mr-bt-0">
                                                                    <label class="">Party
                                                                        Name:</label>
                                                                    <ng-select name="partyId" placeholder="Select
                                                                        Party
                                                                        Name" appendTo="body" appe
                                                                        [(ngModel)]='directSlipShadeObj.partyId'
                                                                        #partyId1="ngModel"
                                                                        (change)="setQualityByParty($event)" class="required-error-dropdown
                                                                        dropdown-name">
                                                                        <ng-option disabled="true">
                                                                            <div class="row">
                                                                                <div class="col-md-6
                                                                                    col-6">
                                                                                    <div class="text-left
                                                                                        txt-ov-elips">
                                                                                        Party
                                                                                        Name
                                                                                    </div>
                                                                                </div>
                                                                                <div class="col-md-6
                                                                                    col-6">
                                                                                    <div class="text-right
                                                                                        txt-ov-elips">
                                                                                        Party
                                                                                        Code</div>
                                                                                </div>
                                                                            </div>
                                                                        </ng-option>
                                                                        <ng-option *ngFor="let
                                                                            party
                                                                            of
                                                                            partyList" [value]="party.id">
                                                                            <div class="row">
                                                                                <div class="col-md-6
                                                                                    col-6">
                                                                                    <div class="text-left
                                                                                        txt-ov-elips">
                                                                                        {{party.partyName}}</div>
                                                                                </div>
                                                                                <div class="col-md-6
                                                                                    col-6">
                                                                                    <div class="text-right
                                                                                        txt-ov-elips">
                                                                                        {{party.partyCode}}</div>
                                                                                </div>
                                                                            </div>
                                                                        </ng-option>
                                                                    </ng-select>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-6">
                                                                <div class="form-group
                                                                    mr-bt-0">
                                                                    <label class="">Quality:</label>
                                                                    <ng-select name="qualityId" placeholder="Select
                                                                        Quality
                                                                        Name" appendTo="body"
                                                                        [(ngModel)]='directSlipShadeObj.qualityId'
                                                                        #qualityId1="ngModel"
                                                                        (change)="getSHadeFromQuality($event)" class="required-error-dropdown
                                                                        dropdown-name">
                                                                        <ng-option disabled="true">
                                                                            <div class="row">
                                                                                <div class="col-md-6
                                                                                    col-6">
                                                                                    <div class="text-left
                                                                                        txt-ov-elips">
                                                                                        Quality
                                                                                        Id</div>
                                                                                </div>
                                                                                <div class="col-md-6
                                                                                    col-6">
                                                                                    <div class="text-right
                                                                                        txt-ov-elips">
                                                                                        Quality
                                                                                        Name</div>
                                                                                </div>
                                                                            </div>
                                                                        </ng-option>
                                                                        <ng-option *ngFor="let
                                                                            q of
                                                                            qualityList"
                                                                            [value]="q.id?q.id:q.qualityEntryId">
                                                                            <div class="row">
                                                                                <div class="col-md-6
                                                                                    col-6">
                                                                                    <div class="text-left
                                                                                        txt-ov-elips">
                                                                                        {{q.qualityId}}</div>
                                                                                </div>
                                                                                <div class="col-md-6
                                                                                    col-6">
                                                                                    <div class="text-right
                                                                                        txt-ov-elips">
                                                                                        {{q.qualityName}}</div>
                                                                                </div>
                                                                            </div>
                                                                        </ng-option>
                                                                    </ng-select>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-12">
                                                                <div class="form-group
                                                                    mr-bt-0">
                                                                    <label class="required
                                                                        mt-3">Shade</label>
                                                                    <ng-select name="shadeId" appendTo="body"
                                                                        [(ngModel)]='directSlipShadeObj.shadeId'
                                                                        required #shadeId1="ngModel" [ngClass]="{'is-invalid':
                                                                        (shadeId1.invalid)&&(formSubmitted1
                                                                        ||
                                                                        shadeId1.touched)}" placeholder="Select
                                                                        Shade" class="required-error-dropdown">
                                                                        <ng-option disabled="true">
                                                                            <div class="row">
                                                                                <div class="col-md-4
                                                                                    col-4">
                                                                                    <div class="text-left
                                                                                        txt-ov-elips">
                                                                                        Party
                                                                                        Shade
                                                                                        No
                                                                                    </div>
                                                                                </div>
                                                                                <div class="col-md-4
                                                                                    col-4">
                                                                                    <div class="text-center
                                                                                        txt-ov-elips">
                                                                                        Party
                                                                                        Code
                                                                                    </div>
                                                                                </div>
                                                                                <div class="col-md-4
                                                                                    col-4">
                                                                                    <div class="text-right
                                                                                        txt-ov-elips">
                                                                                        Color
                                                                                        Tone
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </ng-option>
                                                                        <ng-option *ngFor="let
                                                                            s of
                                                                            shadeList" [value]="s.id">
                                                                            <div class="row">
                                                                                <div class="col-md-4
                                                                                    col-4">
                                                                                    <div class="text-left
                                                                                        txt-ov-elips">
                                                                                        {{s.partyShadeNo}}
                                                                                    </div>
                                                                                </div>
                                                                                <div class="col-md-4
                                                                                    col-4">
                                                                                    <div class="text-center
                                                                                        txt-ov-elips">
                                                                                        {{s.partyCode}}</div>
                                                                                </div>
                                                                                <div class="col-md-4
                                                                                    col-4
                                                                                    jus-con-center">
                                                                                    <div class="text-right
                                                                                        txt-ov-elips
                                                                                        width-70">
                                                                                        <input
                                                                                            [(colorPicker)]="s.colorTone"
                                                                                            [style.background]="s.colorTone"
                                                                                            [value]="s.colorTone"
                                                                                            disabled="true"
                                                                                            class="width-100" />
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </ng-option>
                                                                    </ng-select>
                                                                </div>
                                                            </div>
                                                        </div>

                                                    </nb-card-body>
                                                    <nb-card-footer class="pd-8">
                                                        <div class="row">
                                                            <div class="col-md-12">
                                                                <div class="text-right">
                                                                    <button class="btn
                                                                        btn-primary
                                                                        btn-sm
                                                                        btn-design-cancel" type="button"
                                                                        (click)="modal.dismiss()">CANCEL</button>
                                                                    <button class="btn
                                                                        btn-primary
                                                                        btn-sm
                                                                        btn-design-save"
                                                                        (click)="directSlipShadeObj.shadeId?modal.close():formSubmitted1=true;">Save</button>
                                                                </div>

                                                            </div>
                                                        </div>
                                                    </nb-card-footer>
                                                </nb-card>
                                            </ng-template>

                                        </div>
                                    </div>
                                    <div *ngIf="shadeSelectedFlag" class="row col-md-12">
                                        <div class="col-md-6">
                                            <span>Party Shade No:</span>{{shadeObj.partyShadeNo}}
                                        </div>
                                        <div class="col-md-6">
                                            <span class="col-md-3">Color:</span>
                                            <input style="width: 25%;" [(colorPicker)]="shadeObj.color"
                                                [style.background]="shadeObj.color" disabled="true" class="width-100" />
                                        </div>
                                    </div>

                                    <div *ngIf="directSlipFlag" class="form-group col-md-12">
                                        <div class="form-group">
                                            <label class="required">Select Jet:
                                            </label>
                                            <ng-select name="jet" appendTo="body" [(ngModel)]='jetid' required
                                                #jet1="ngModel" (change)="jetSelected($event)" placeholder="Jet Number">
                                                <ng-option *ngFor="let jet of
                                                    jetList" [value]="jet.id">{{jet.name}}
                                                    -
                                                    {{jet.capacity}}
                                                </ng-option>
                                            </ng-select>
                                            <div class="required-class" *ngIf="jetCapacity && jetid">
                                                <span>Weight is greater than
                                                    selected jet capacity</span>
                                            </div>
                                        </div>
                                        <div class="row" *ngIf="jetSelectedFlag">
                                            <div class="col-md-12">
                                                <div class="form-group mb-0">
                                                    <div cdkDropList [cdkDropListData]="selectedJetData"
                                                        cdkDropListOrientation="horizontal" class="example-list
                                                        main-table-drag jet-plan
                                                        bg-addition-color">
                                                        <div class="example-box
                                                            trans-box-drop
                                                            jet-box
                                                            addition-jet-batch" *ngFor="let jetData
                                                            of selectedJetData" cdkDrag>
                                                            <button nbContextMenuTag="my-context-menu"
                                                                nbContextMenuTrigger="click" class="btn-bg-color">
                                                                {{jetData.batchId}}
                                                            </button>
                                                        </div>
                                                    </div>


                                                </div>
                                            </div>
                                        </div>
                                    </div>



                                    <ng-template #selectShadeDialog let-modal>
                                        <nb-card class="nb-header">
                                            <nb-card-header>
                                                <span>Select Shade</span>
                                            </nb-card-header>
                                            <nb-card-body>
                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <label class="">Party
                                                            Name</label>
                                                        <ng-select name="partyId"
                                                            [(ngModel)]='directSlipShadeObj.partyId' #partyId1="ngModel"
                                                            (change)="setQualityByParty($event)" class="required-error-dropdown
                                                            dropdown-name">
                                                            <ng-option disabled="true">
                                                                <div class="row">
                                                                    <div class="col-md-6
                                                                        col-6">
                                                                        <div class="text-left
                                                                            txt-ov-elips">Party
                                                                            Name
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-md-6
                                                                        col-6">
                                                                        <div class="text-right
                                                                            txt-ov-elips">
                                                                            Party
                                                                            Code</div>
                                                                    </div>
                                                                </div>
                                                            </ng-option>
                                                            <ng-option *ngFor="let
                                                                party of
                                                                partyList" [value]="party.id">
                                                                <div class="row">
                                                                    <div class="col-md-6
                                                                        col-6">
                                                                        <div class="text-left
                                                                            txt-ov-elips">
                                                                            {{party.partyName}}</div>
                                                                    </div>
                                                                    <div class="col-md-6
                                                                        col-6">
                                                                        <div class="text-right
                                                                            txt-ov-elips">
                                                                            {{party.partyCode}}</div>
                                                                    </div>
                                                                </div>
                                                            </ng-option>
                                                        </ng-select>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <label class="">Quality:</label>
                                                        <ng-select name="qualityId"
                                                            [(ngModel)]='directSlipShadeObj.qualityId'
                                                            #qualityId1="ngModel" (change)="getSHadeFromQuality($event)"
                                                            class="required-error-dropdown
                                                            dropdown-name">
                                                            <ng-option disabled="true">
                                                                <div class="row">
                                                                    <div class="col-md-6
                                                                        col-6">
                                                                        <div class="text-left
                                                                            txt-ov-elips">Quality
                                                                            Id
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-md-6
                                                                        col-6">
                                                                        <div class="text-right
                                                                            txt-ov-elips">Quality
                                                                            Name</div>
                                                                    </div>
                                                                </div>
                                                            </ng-option>
                                                            <ng-option *ngFor="let q of
                                                                qualityList" [value]="q.id?q.id:q.qualityEntryId">
                                                                <div class="row">
                                                                    <div class="col-md-6
                                                                        col-6">
                                                                        <div class="text-left
                                                                            txt-ov-elips">
                                                                            {{q.qualityId}}</div>
                                                                    </div>
                                                                    <div class="col-md-6
                                                                        col-6">
                                                                        <div class="text-right
                                                                            txt-ov-elips">
                                                                            {{q.qualityName}}</div>
                                                                    </div>
                                                                </div>
                                                            </ng-option>
                                                        </ng-select>
                                                    </div>
                                                </div>
                                                <label class="required mt-3">Shade</label>
                                                <ng-select name="shadeId" [(ngModel)]='directSlipShadeObj.shadeId'
                                                    required #shadeId1="ngModel" [ngClass]="{'is-invalid':
                                                    (shadeId1.invalid)&&(formSubmitted1
                                                    || shadeId1.touched)}" placeholder="Select Shade"
                                                    class="required-error-dropdown">
                                                    <ng-option disabled="true">
                                                        <div class="row">
                                                            <div class="col-md-4
                                                                col-4">
                                                                <div class="text-left
                                                                    txt-ov-elips">Party
                                                                    Shade
                                                                    No</div>
                                                            </div>
                                                            <div class="col-md-4
                                                                col-4">
                                                                <div class="text-center
                                                                    txt-ov-elips">Party
                                                                    Code
                                                                </div>
                                                            </div>
                                                            <div class="col-md-4
                                                                col-4">
                                                                <div class="text-right
                                                                    txt-ov-elips">Color
                                                                    Tone
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </ng-option>
                                                    <ng-option *ngFor="let s of
                                                        shadeList" [value]="s.id">
                                                        <div class="row">
                                                            <div class="col-md-4
                                                                col-4">
                                                                <div class="text-left
                                                                    txt-ov-elips">
                                                                    {{s.partyShadeNo}}
                                                                </div>
                                                            </div>
                                                            <div class="col-md-4
                                                                col-4">
                                                                <div class="text-center
                                                                    txt-ov-elips">
                                                                    {{s.partyCode}}</div>
                                                            </div>
                                                            <div class="col-md-4
                                                                col-4
                                                                jus-con-center">
                                                                <div class="text-right
                                                                    txt-ov-elips
                                                                    width-70">
                                                                    <input [(colorPicker)]="s.colorTone"
                                                                        [style.background]="s.colorTone"
                                                                        [value]="s.colorTone" disabled="true"
                                                                        class="width-100" />
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </ng-option>
                                                </ng-select>
                                            </nb-card-body>
                                            <nb-card-footer>
                                                <div class="row" style="float:
                                                    right;">
                                                    <div class="col-md-12">
                                                        <button class="btn
                                                            btn-primary btn-sm
                                                            btn-design-save"
                                                            (click)="directSlipShadeObj.shadeId?modal.close():formSubmitted1=true;">Save</button>
                                                    </div>
                                                </div>
                                            </nb-card-footer>
                                        </nb-card>
                                    </ng-template>

                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12 mobile-btn-center
                                    text-btn-right">

                                    <button class="btn btn-primary btn-sm
                                        btn-design-cancel" type="button"
                                        (click)="activeModal.close(false)">CANCEL</button>
                                    <button *ngIf="!directSlipFlag" type="button" class="btn btn-primary
                                        btn-sm btn-design-save" (click)="additionSlipSaveFlag=
                                        true;saveSlipData(myForm)">SAVE</button>
                                    <button *ngIf="!directSlipFlag" type="button" class="btn btn-primary
                                        btn-sm btn-design-save" (click)="printFlag= true;
                                        printSlip(myForm)">Save And
                                        Print</button>

                                    <button *ngIf="directSlipFlag" type="button" class="btn btn-primary btn-sm
                                        btn-design-save" (click)="directSlipSaveFlag=
                                        true;saveSlipData(myForm)">SAVE</button>
                                    <button *ngIf="directSlipFlag" type="button" class="btn btn-primary btn-sm
                                        btn-design-save" (click)="printFlag=
                                        true;printSlip(myForm)">Save And
                                        Print</button>

                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </nb-card-body>
    </div>

    <div id="print-slip" [hidden]="isPrinting" class="jet-slip size-A5">
        <nb-card-body *ngIf="!additionSlipFlag">
            <div *ngIf="slipData != null || slipData != undefined">
                <div *ngIf="slipData.dyeingSlipDataList != null">
                    <div class="container print-container mr-top-30 mr-bottom-30
                        border-style-solid pd-top-10">
                        <div class="mb-1 print-text-center pd-bt-25">
                            <div class="row">
                                <div class="col-md-4 wth-50">
                                    <label class="font-25">Lot No:</label> <span style="color: red !important;"
                                        class="slip-value rd-color">{{slipData.batchId}}</span>
                                </div>
                                <div class="col-md-8 wth-50">
                                    <label class="font-25">Mc No:</label> <span style="color: red !important;"
                                        class="slip-value rd-color">{{slipData.jetName}}</span>
                                </div>
                            </div>
                        </div>


                        <div class="mb-1 print-text-center pd-bt-25">
                            <div class="row">
                                <div class="col-md-4 wth-50">
                                    <label class="font-25">Lot Meter :</label> <span
                                        class="slip-value">{{slipData.totalMeter | number : '1.2-2'}}</span>
                                </div>
                                <div class="col-md-8 wth-50">
                                    <label class="font-25">Date:</label> <span class="slip-value">{{myDate}}</span>
                                </div>
                            </div>
                        </div>
                        <div class="mb-1 print-text-center pd-bt-25">
                            <div class="row">
                                <div class="col-md-4 wth-50">
                                    <label class="font-25">Lot Wt:</label> <span
                                        class="slip-value">{{slipData.totalWt | number : '1.2-2'}}</span>
                                </div>
                                <div class="col-md-8 wth-50">
                                    <label class="font-25">Party Name:</label> <span class="slip-value">{{slipData.partyName}}</span>
                                </div>
                            </div>
                        </div>

                        <div class="mb-1 print-text-center pd-bt-25">
                            <div class="row">
                                <div class="col-md-4 wth-50">
                                    <label class="font-25">QualityId:</label>
                                    <span class="slip-value">{{slipData.qualityId}}</span>
                                </div>
                                <div class="col-md-8 wth-50">
                                    <label class="font-25">Party Shade No:</label>
                                    <span class="slip-value">{{slipData.partyShadeNo}}</span>
                                </div>
                            </div>
                        </div>

                        <div class="mb-1 print-text-center pd-bt-25">
                            <div class="row">
                                <div class="col-md-4 wth-50">
                                    <label class="font-25">Taka/Cone:</label>
                                    <span class="slip-value">{{slipData.batchCount}}</span>
                                </div>
                                <div class="col-md-8 wth-50">
                                    <label class="font-25">Color Name:</label>
                                    <span class="slip-value">{{slipData.colorName}}</span>
                                </div>
                            </div>
                        </div>


                    </div>

                    <div *ngFor="let process of slipData.dyeingSlipDataList; let
                        i=index;" style="background-color: rgb(144, 179, 212) !important;" class="container print-container mr-bt-50 width-100
                        main-jet-p-changes">
                        <div class="row print-wth-100">
                            <div class="col-md-12 width-100 pd-15">
                                <div class="form-group col-md-3 width-20
                                    form-style-print">
                                    <h3 class="font-40" *ngIf="process.processType !=
                                        'directDyeing'">
                                        {{process.processType}}</h3>
                                    <h3 class="font-40" *ngIf="process.processType ==
                                        'directDyeing'">Direct</h3>
                                </div>
                                <div class="form-group col-md-3 width-28
                                    form-style-print">
                                    <label class="mr-right font-25
                                        font-weight-bold">Temperature:</label>&nbsp;
                                    <div class="print-data print-text-center
                                        print-color-media">
                                        {{process.temp}}</div>

                                </div>
                                <div class="form-group col-md-3 width-25
                                    form-style-print">
                                    <label class="mr-righ font-25
                                        font-weight-boldt">Hold
                                        Time:</label>&nbsp;
                                    <div class="print-data print-text-center
                                        print-color-media">
                                        {{process.holdTime}}</div>

                                </div>
                                <div class="form-group col-md-3 width-27
                                    form-style-print">
                                    <label class="mr-right font-25
                                        font-weight-bold">Liquor
                                        Ratio:</label>&nbsp;
                                    <div class="print-data print-text-center
                                        print-color-media border-left-1px">
                                        {{process.liquerRation}}</div>

                                </div>
                            </div>

                            <div class="form-group col-md-12 wth-100">
                                <table class="table table-bordered
                                    table-process-fnt text-center wth-100" style="border-radius: 5px;">
                                    <tr>
                                        <th class="font-25">Item name</th>
                                        <th class="font-25">Quantity</th>
                                        <th class="font-25">Supplier name</th>
                                    </tr>

                                    <tr *ngFor='let dc of
                                        process.dyeingSlipItemData;let
                                        i1=index;'>
                                        <td class="pd-bt mr-top-5">
                                            <p class="font-25">{{dc.itemName}}</p>
                                        </td>
                                        <td class="pd-bt mr-top-5">
                                            <p class="font-25">{{dc.qty | number : '1.3-3'}}</p>
                                        </td>
                                        <td class="pd-bt mr-top-5">
                                            <p class="font-25">{{dc.supplierName}}</p>
                                        </td>

                                    </tr>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </nb-card-body>

        <nb-card-body *ngIf="additionSlipFlag">

            <div *ngIf="slipData != null || slipData != undefined">
                <div *ngIf="slipData.dyeingSlipDataList != null">
                    <div class="container print-container mr-bt-50">
                        <div class="mb-1 print-text-center pd-bt-25">
                            <div class="row">
                                <div class="col-md-6 wth-50">
                                    <label class="font-25">Lot No:</label> <span
                                        class="slip-value rd-color">{{slipData.batchId}}</span>
                                </div>
                                <div class="col-md-6 wth-50">
                                    <label class="font-25">Mc No:</label> <span
                                        class="slip-value rd-color">{{slipData.jetId}}</span>
                                </div>
                            </div>
                        </div>


                        <div class="mb-1 print-text-center pd-bt-25">
                            <div class="row">
                                <div class="col-md-6 wth-50">
                                    <label class="font-25">Lot Wt:</label> <span
                                        class="slip-value">{{slipData.totalWt}}</span>
                                </div>
                                <div class="col-md-6 wth-50">
                                    <label class="font-25">Date:</label> <span class="slip-value">{{myDate}}</span>
                                </div>
                            </div>
                        </div>

                        <div class="mb-1 print-text-center pd-bt-25">
                            <div class="row">
                                <div class="col-md-6 wth-50">
                                    <label class="font-25">QualityId:</label>
                                    <span class="slip-value">{{slipData.qualityId}}</span>
                                </div>
                                <div class="col-md-6 wth-50">
                                    <label class="font-25">Party Shade No:</label>
                                    <span class="slip-value">{{slipData.partyShadeNo}}</span>
                                </div>
                            </div>
                        </div>

                        <div class="mb-1 print-text-center pd-bt-25">
                            <div class="row">
                                <div class="col-md-6 wth-50">
                                    <label class="font-25">Taka/Cone:</label>
                                    <span class="slip-value">{{slipData.batchCount}}</span>
                                </div>
                                <div class="col-md-6 wth-50">
                                    <label class="font-25">Color Tone:</label>
                                    <span class="slip-value">{{slipData.colorTone}}</span>
                                </div>
                            </div>
                        </div>


                    </div>

                    <div class="container print-container mr-bt-50
                        jet-print-style-changes">

                        <div class="row print-wth-100 background-c6daf0
                            mr-top-bottom-15">
                            <div class="col-md-12 width-100">
                                <div class="form-group col-md-4 width-20
                                    form-style-print">
                                    <h3 class="font-30">Addition</h3>
                                </div>

                                <div class="form-group col-md-4 width-28
                                    form-style-print">
                                    <label class="mr-right font-25
                                        font-weight-bold">Temperature:</label>&nbsp;
                                    <div class="print-data width-30 color-000">
                                        {{temp}}</div>&nbsp;

                                </div>


                                <div class="form-group col-md-4 width-25
                                    form-style-print">
                                    <label class="mr-right font-25
                                        font-weight-bold">Hold
                                        Time:</label>
                                    <div class="print-data width-30 color-000">
                                        {{holdTime}}</div>
                                </div>
                                <div class="form-group col-md-4 form-style-print
                                    width-27">
                                    <label class="mr-right font-25
                                        font-weight-bold">Liquor
                                        Ratio:</label>
                                    <div class="print-data width-30 color-000
                                        border-left-1px">
                                        {{liquorRatio}}</div>

                                </div>
                            </div>

                            <div class="form-group col-md-12">

                                <table class="table table-bordered
                                    table-process-fnt text-center
                                    print-bg-transperent" id="border-table">
                                    <tr>
                                        <th class="font-25">Item name</th>
                                        <th class="font-25">Quantity</th>
                                        <th class="font-25">Supplier Name</th>
                                    </tr>

                                    <tr *ngFor='let item of itemList;let
                                        i1=index;'>
                                        <td class="pd-bt mr-top-5">
                                            <p class="font-25">{{item.itemName}}</p>
                                        </td>
                                        <td class="pd-bt mr-top-5">
                                            <p class="font-25">{{item.qty}}</p>
                                        </td>
                                        <td class="pd-bt mr-top-5">
                                            <p class="font-25">{{item.supplierName}}</p>
                                        </td>

                                    </tr>
                                </table>
                            </div>
                        </div>
                    </div>

                </div>
            </div>

        </nb-card-body>
    </div>

</nb-card>