(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{"7YGY":function(t,e,i){"use strict";i.r(e),i.d(e,"AttendanceModule",(function(){return M}));var c=i("ofXK"),n=i("tyNb"),s=i("rrQ7"),a=i("1G5W"),d=i("O1SP"),o=i("Nd6e"),r=i("XNiG"),l=i("fXoL"),m=i("5eHb"),h=i("qC+V"),u=i("aceb"),p=i("3Pt+"),g=i("IyRd");function j(t,e){if(1&t){const t=l.kc();l.jc(0,"section",19),l.jc(1,"div"),l.jc(2,"small"),l.jd(3,"Result"),l.ic(),l.jc(4,"strong"),l.jd(5),l.ic(),l.ic(),l.jc(6,"button",20),l.uc("click",(function(){return l.Xc(t),l.yc(2).clearResult()})),l.jd(7,"\xd7"),l.ic(),l.ic()}if(2&t){const t=l.yc(2);l.Pb(5),l.kd(t.qrResultString)}}function b(t,e){if(1&t){const t=l.kc();l.hc(0),l.jc(1,"zxing-scanner",17),l.uc("scanSuccess",(function(e){return l.Xc(t),l.yc().onCodeResult(e)})),l.ic(),l.hd(2,j,8,1,"section",18),l.gc()}if(2&t){const t=l.yc();l.Pb(2),l.Hc("ngIf",t.qrResultString)}}function v(t,e){1&t&&(l.hc(0),l.jc(1,"a",21),l.jd(2,"No Permission"),l.ic(),l.gc())}let f=(()=>{class t{constructor(t,e,i){this.registrationService=t,this.route=e,this.toastr=i,this.loading=!1,this.formSubmitted=!1,this.list=[],this.permissionDenied=!1,this.destroy$=new r.a}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}ngOnInit(){navigator.permissions.query({name:"camera"}).then(t=>{this.permissionDenied="denied"===t.state}).catch(t=>{})}clearResult(){this.qrResultString=null}onCodeResult(t){this.qrResultString=t,window.location.href=this.qrResultString}searchSelected(t){Number(t.value.empid)&&this.registrationService.empIdExistOrNot(t.value.empid).pipe(Object(a.a)(this.destroy$)).subscribe(t=>{t.success?t.data[0]?this.route.navigate(["/pages/attendance/",this.employee]):(this.employee="",this.toastr.error("Employee does not exist")):this.toastr.error(t.msg)},t=>{this.toastr.error(d.Serever_Error)})}}return t.\u0275fac=function(e){return new(e||t)(l.dc(o.a),l.dc(n.c),l.dc(m.b))},t.\u0275cmp=l.Xb({type:t,selectors:[["ngx-scan-qr"]],decls:28,vars:4,consts:[[3,"show"],["id","target"],[1,"nb-style"],[1,"nb-header"],[1,"row"],[1,"col-md-7","col-5","display-flex-start","max-width-device"],[1,"nb-text","mobile-mr-lf-0"],["empForm","ngForm"],[1,"col-md-4","col-12"],[1,"form-group","mobile-txt-center"],["type","number","name","empid",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-md-2","col-12","jus-con-center"],[1,"text-center","or-style"],[1,"col-md-4","col-12","jus-con-center"],[4,"ngIf"],[1,"col-md-4"],["type","submit",1,"btn","btn-primary","btn-sm","btn-design-save","button-base","ripple",3,"click"],[3,"scanSuccess"],["class","results",4,"ngIf"],[1,"results"],["mat-icon-button","",3,"click"],["href","https://support.google.com/chrome/answer/2693767?co=GENIE.Platform%3DDesktop&hl=en"]],template:function(t,e){if(1&t){const t=l.kc();l.ec(0,"ngx-loading",0),l.ec(1,"div",1),l.jc(2,"nb-card",2),l.jc(3,"nb-card-header",3),l.jc(4,"div",4),l.jc(5,"div",5),l.jc(6,"div"),l.jc(7,"h2",6),l.jd(8,"Scan"),l.ic(),l.ic(),l.ic(),l.ic(),l.ic(),l.jc(9,"nb-card-body"),l.jc(10,"div"),l.jc(11,"form",null,7),l.jc(13,"div",4),l.jc(14,"div",8),l.jc(15,"div",9),l.jc(16,"input",10),l.uc("ngModelChange",(function(t){return e.employee=t})),l.ic(),l.ic(),l.ic(),l.jc(17,"div",11),l.jc(18,"span",12),l.jc(19,"b"),l.jd(20,"OR"),l.ic(),l.ic(),l.ic(),l.jc(21,"div",13),l.hd(22,b,3,1,"ng-container",14),l.hd(23,v,3,0,"ng-container",14),l.ic(),l.ic(),l.jc(24,"div",4),l.jc(25,"div",15),l.jc(26,"button",16),l.uc("click",(function(){l.Xc(t);const i=l.Uc(12);return e.searchSelected(i)})),l.jd(27,"ENTER"),l.ic(),l.ic(),l.ic(),l.ic(),l.ic(),l.ic(),l.ic()}2&t&&(l.Hc("show",e.loading),l.Pb(16),l.Hc("ngModel",e.employee),l.Pb(6),l.Hc("ngIf",!e.permissionDenied),l.Pb(1),l.Hc("ngIf",e.permissionDenied))},directives:[h.a,u.u,u.x,u.t,p.x,p.m,p.n,p.q,p.a,p.l,p.o,c.n,g.a],styles:["zxing-scanner[_ngcontent-%COMP%]{max-width:50%}header[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;top:0;padding:10px;background:#333;display:flex}header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:8px}header[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:25%;font-weight:700}header[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]     .mat-form-field-wrapper{padding:0}header[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]     .mat-form-field-wrapper .mat-form-field-flex{padding-top:0}header[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]     .mat-form-field-underline{bottom:0}header[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{padding:10px;line-height:2;background:#474747;color:#fff}.results[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;bottom:0;padding:15px;background:#02c3c3;color:#fff;display:flex;align-items:center;justify-content:space-between}.results[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-weight:bolder;display:block;font-size:60%;margin:-.6em 0 0}.results[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:none;border:none;line-height:1;font-weight:bolder;font-size:120%;float:right;color:#fff;margin:-8px -8px -8px 8px}h2[_ngcontent-%COMP%]{padding:0 16px}"]}),t})();var y=i("4/8P");const w=function(){return["/pages/attendance"]};function D(t,e){if(1&t){const t=l.kc();l.jc(0,"nb-card",3),l.jc(1,"nb-card-header",4),l.jc(2,"div",5),l.jc(3,"div",6),l.jc(4,"button",7),l.jd(5,"Scan"),l.ic(),l.ic(),l.jc(6,"div",8),l.jc(7,"div",9),l.jc(8,"h2",10),l.jd(9,"Add Attendance"),l.ic(),l.ic(),l.ic(),l.ic(),l.ic(),l.jc(10,"nb-card-body",11),l.jc(11,"div"),l.jc(12,"form",null,12),l.jc(14,"div",5),l.jc(15,"div",13),l.jc(16,"div",5),l.jc(17,"div",14),l.jc(18,"div",15),l.jc(19,"div",16),l.ec(20,"img",17),l.ic(),l.ic(),l.ic(),l.ic(),l.ic(),l.jc(21,"div",18),l.jc(22,"div",5),l.jc(23,"div",19),l.jc(24,"div",20),l.jc(25,"div",5),l.jc(26,"div",21),l.jc(27,"span",22),l.jd(28,"Employee Name: "),l.ic(),l.ic(),l.jc(29,"div",21),l.jc(30,"span",23),l.jd(31),l.ic(),l.ic(),l.ic(),l.ic(),l.ic(),l.jc(32,"div",19),l.jc(33,"div",20),l.jc(34,"div",5),l.jc(35,"div",21),l.jc(36,"span",22),l.jd(37,"Phone No: "),l.ic(),l.ic(),l.jc(38,"div",21),l.jc(39,"span",23),l.jd(40),l.ic(),l.ic(),l.ic(),l.ic(),l.ic(),l.jc(41,"div",19),l.jc(42,"div",20),l.jc(43,"div",5),l.jc(44,"div",21),l.jc(45,"span",22),l.jd(46,"Aadhar Card No: "),l.ic(),l.ic(),l.jc(47,"div",21),l.jc(48,"span",23),l.jd(49),l.ic(),l.ic(),l.ic(),l.ic(),l.ic(),l.jc(50,"div",19),l.jc(51,"div",20),l.jc(52,"div",5),l.jc(53,"div",21),l.jc(54,"span",22),l.jd(55,"Date: "),l.ic(),l.ic(),l.jc(56,"div",21),l.jc(57,"label"),l.jd(58),l.ic(),l.ic(),l.ic(),l.ic(),l.ic(),l.jc(59,"div",19),l.jc(60,"div",24),l.jc(61,"div",5),l.jc(62,"div",21),l.jc(63,"span",22),l.jd(64,"In Time: "),l.ic(),l.ic(),l.jc(65,"div",21),l.jc(66,"span",23),l.jd(67),l.zc(68,"date"),l.ic(),l.ic(),l.ic(),l.ic(),l.ic(),l.jc(69,"div",19),l.jc(70,"div",24),l.jc(71,"div",5),l.jc(72,"div",21),l.jc(73,"span",22),l.jd(74,"Out Time: "),l.ic(),l.ic(),l.jc(75,"div",21),l.jc(76,"span",23),l.jd(77),l.zc(78,"date"),l.ic(),l.ic(),l.ic(),l.ic(),l.ic(),l.ic(),l.ic(),l.jc(79,"div",13),l.jc(80,"div",5),l.jc(81,"div",14),l.jc(82,"div",25),l.jc(83,"div",26),l.jc(84,"button",27),l.uc("click",(function(){return l.Xc(t),l.yc().inClick()})),l.jd(85,"In"),l.ic(),l.ic(),l.jc(86,"div",26),l.jc(87,"button",28),l.uc("click",(function(){return l.Xc(t),l.yc().outClick()})),l.jd(88,"Out"),l.ic(),l.ic(),l.ic(),l.ic(),l.ic(),l.ic(),l.ic(),l.ic(),l.ic(),l.ic(),l.ic()}if(2&t){const t=l.yc();l.Pb(4),l.Hc("routerLink",l.Mc(16,w)),l.Pb(16),l.Hc("src",t.profileUrl,l.Zc),l.Pb(11),l.kd(t.employeeDetail.name),l.Pb(9),l.kd(t.employeeDetail.contact),l.Pb(9),l.kd(t.employeeDetail.aadhaar),l.Pb(9),l.kd(t.maxDate),l.Pb(9),l.kd(l.Bc(68,10,t.attendance.inTime,"shortTime")),l.Pb(10),l.kd(l.Bc(78,13,t.attendance.outTime,"shortTime")),l.Pb(7),l.Hc("disabled",t.disableIn),l.Pb(3),l.Hc("disabled",t.disableOut)}}class P{constructor(){this.date=new Date,this.shift=!1}}const k=[{path:":id",component:(()=>{class t{constructor(t,e,i,c,n){this.commonService=t,this._route=e,this.registrationService=i,this.toastr=c,this.route=n,this.loading=!1,this.formSubmitted=!1,this.disableButton=!1,this.disableIn=!1,this.disableOut=!1,this.currentDate=new Date,this.dateForPicker=new Date,this.attendance=new P,this.destroy$=new r.a}ngOnInit(){this.getUserId()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}getUserId(){this.user=this.commonService.getUser(),this.attendance.createdBy=this.user.userId,this.currentEmpId=this._route.snapshot.paramMap.get("id"),this.maxDate=new Date;var t=String(this.maxDate.getDate()).padStart(2,"0"),e=String(this.maxDate.getMonth()+1).padStart(2,"0"),i=this.maxDate.getFullYear();this.maxDate=t+"-"+e+"-"+i,this.modifiedToday=e+"-"+t+"-"+i,this.attendance.date=new Date(this.modifiedToday),this.selectedDate=this.modifiedToday,this.getEmployeeById()}getEmployeeById(){let t={date:this.setTimeAndDateForInAndOut(),empId:this.currentEmpId,saveFlag:!1};this.registrationService.getAttendanceByDateAndSaveeFlag(t).pipe(Object(a.a)(this.destroy$)).subscribe(t=>{t.success?(this.employeeDetail=t.data.employeeMast,this.attendance=t.data.attendanceLatest,this.disableIn=!!this.attendance.inTime,this.disableOut=!!this.attendance.outTime,this.employeeDetail.employeeDocumentList.forEach(t=>{"profile"==t.type&&(this.profileUrl=t.url)})):this.toastr.error(t.msg)})}setTimeAndDateForInAndOut(){let t=new Date;return t.setDate(new Date(this.selectedDate).getDate()),t.setMonth(new Date(this.selectedDate).getMonth()),t.setFullYear(new Date(this.selectedDate).getFullYear()),t.setHours(t.getHours()),t.setMinutes(t.getMinutes()),t.setSeconds(t.getSeconds()),t}inClick(){this.attendance.date=new Date(this.selectedDate),this.attendance.inTime=this.setTimeAndDateForInAndOut(),this.addAttendance(),this.disableIn=!0,this.route.navigate(["/pages/attendance/"])}outClick(){this.attendance.outTime=this.setTimeAndDateForInAndOut(),this.addAttendance(),this.disableOut=!0,this.route.navigate(["/pages/attendance/"])}addAttendance(){let t={date:this.setTimeAndDateForInAndOut(),empId:this.currentEmpId,saveFlag:!0,url:"photoUrl"};this.registrationService.getAttendanceByDateAndSaveeFlag(t).pipe(Object(a.a)(this.destroy$)).subscribe(t=>{t.success&&(this.toastr.success(t.msg),this.attendance.id=t.data)},t=>{})}}return t.\u0275fac=function(e){return new(e||t)(l.dc(y.a),l.dc(n.a),l.dc(o.a),l.dc(m.b),l.dc(n.c))},t.\u0275cmp=l.Xb({type:t,selectors:[["ngx-attendance"]],decls:3,vars:2,consts:[[3,"show"],["id","target"],["class","nb-style",4,"ngIf"],[1,"nb-style"],[1,"nb-header"],[1,"row"],[1,"col-md-1","col-4","display-flex-start","max-width-device"],[1,"btn","btn-md","btn-design",3,"routerLink"],[1,"col-md-11","col-8"],[1,""],[1,"nb-text"],[1,"view-registrations-style"],["empForm","ngForm"],[1,"col-md-2"],[1,"col-md-12"],[1,"form-group","text-center"],[1,"profile-img"],["width","100","height","100",3,"src"],[1,"col-md-8","display-fl-center"],[1,"col-md-3","col-12"],[1,"form-group","pd-bt"],[1,"col-md-12","col-6","mobile-pdl-0"],[1,"view-title"],[1,"view-ans"],[1,"pd-bt"],[1,"display-space-evenly","desktop-display-block"],[1,"reg-inout"],[1,"btn-reg-inout","btn","btn-success",3,"disabled","click"],[1,"btn-reg-inout","btn","btn-danger",3,"disabled","click"]],template:function(t,e){1&t&&(l.ec(0,"ngx-loading",0),l.ec(1,"div",1),l.hd(2,D,89,17,"nb-card",2)),2&t&&(l.Hc("show",e.loading),l.Pb(2),l.Hc("ngIf",e.employeeDetail&&e.attendance))},directives:[h.a,c.n,u.u,u.x,n.d,u.t,p.x,p.m,p.n],pipes:[c.e],styles:[""]}),t})(),canActivate:[s.a],canLoad:[s.a],data:{PermissionName:["view","view all","view group"]}},{path:"",component:f,canActivate:[s.a],canLoad:[s.a],data:{PermissionName:["view","view all","view group"]}}];let x=(()=>{class t{}return t.\u0275mod=l.bc({type:t}),t.\u0275inj=l.ac({factory:function(e){return new(e||t)},imports:[[n.g.forChild(k)],n.g]}),t})();var O=i("yzeJ");let M=(()=>{class t{}return t.\u0275mod=l.bc({type:t}),t.\u0275inj=l.ac({factory:function(e){return new(e||t)},imports:[[c.c,x,O.a]]}),t})()}}]);