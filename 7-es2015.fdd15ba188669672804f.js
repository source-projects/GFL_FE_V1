(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{ENVk:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var i=n("4/8P"),c=n("fXoL"),o=n("tk/3");let a=(()=>{class t{constructor(t,e){this.httpClient=t,this.commonService=e}getAllQualityByParty(t){return this.httpClient.get(this.commonService.envUrl()+"api/Quality/ByParty/"+t)}getAllUserHeads(){return this.httpClient.get(this.commonService.envUrl()+"api/userHead")}getPartyQualityByMaster(t){return this.httpClient.get(this.commonService.envUrl()+"api/QualityAndParty/ByMaster/"+t)}getBatchByMasterId(t){return this.httpClient.get(this.commonService.envUrl()+"api/batch/ByMaster/"+t)}getBatchDataBybatchNo(t,e){return this.httpClient.get(this.commonService.envUrl()+"api/batch/"+e+"/"+t)}addFinishedMeter(t){return this.httpClient.put(this.commonService.envUrl()+"api/batch/finishMtr",t)}getBatchesByPartyQuality(t,e){return this.httpClient.get(this.commonService.envUrl()+"api/stockBatch/batch/ByQualityAndPartyWithProductionPlan/"+t+"/"+e)}getAllBatchForFinishMeter(){return this.httpClient.get(this.commonService.envUrl()+"api/stockBatch/getAllBatchForFinishMtr")}getAllBatchForFinishMeterPaginated(t){return this.httpClient.post(this.commonService.envUrl()+"api/stockBatch/getAllBatchForFinishMtr/allPaginated",t)}removeBatch(t){return this.httpClient.delete(this.commonService.envUrl()+"api/batch/removeBy?productionId="+t)}}return t.\u0275fac=function(e){return new(e||t)(c.rc(o.b),c.rc(i.a))},t.\u0275prov=c.Zb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},IO9Y:function(t,e,n){"use strict";n.r(e),n.d(e,"StockBatchModule",(function(){return dn}));var i=n("ofXK"),c=n("tyNb"),o=n("yGZr"),a=n("mrSG"),s=n("1G5W"),r=n("XNiG"),l=n("O1SP"),d=n("LvDl"),h=n("1kSV");class g{constructor(){this.stockInType="Fabric",this.stockInType="Fabric"}}class p{constructor(t,e,n,i,c){this.controlId=c||null,this.id=i||null,t&&(this.mtr=t),e&&(this.wt=e),this.isProductionPlanned=n||!1,this.batchId=null,this.color="",this.sequence=null}}class u{constructor(t){this.isNotUnique=!1,this.batchId=t||null,this.batchMW=[],this.backColor=""}}var b=n("8k+d"),m=n("RNo3"),f=n("SapW"),P=n("4/8P"),M=n("tcrU"),j=n("fXoL"),C=n("aceb");function v(t,e){if(1&t&&(j.jc(0,"tr"),j.jc(1,"td",30),j.jd(2),j.ic(),j.jc(3,"td",31),j.jd(4),j.zc(5,"number"),j.ic(),j.jc(6,"td",31),j.jd(7),j.zc(8,"number"),j.ic(),j.ec(9,"td",32),j.ic()),2&t){const t=e.$implicit;j.Pb(2),j.kd(t.sr),j.Pb(2),j.ld("",j.Bc(5,3,t.mtr,"1.2-2")," "),j.Pb(3),j.ld("",j.Bc(8,6,t.wt,"1.2-2")," ")}}function y(t,e){if(1&t&&(j.jc(0,"tr"),j.jc(1,"td",30),j.jd(2),j.ic(),j.jc(3,"td",31),j.jd(4),j.zc(5,"number"),j.ic(),j.jc(6,"td",31),j.jd(7),j.zc(8,"number"),j.ic(),j.ec(9,"td",32),j.ic()),2&t){const t=e.$implicit;j.Pb(2),j.kd(t.sr),j.Pb(2),j.ld("",j.Bc(5,3,t.mtr,"1.2-2")," "),j.Pb(3),j.ld("",j.Bc(8,6,t.wt,"1.2-2")," ")}}function O(t,e){if(1&t&&(j.jc(0,"div"),j.jc(1,"div",2),j.jc(2,"div",3),j.jc(3,"div",4),j.jc(4,"div",5),j.jc(5,"div",6),j.jc(6,"div",7),j.jc(7,"div",8),j.jc(8,"h2",9),j.jc(9,"b"),j.jd(10,"JOB CARD"),j.ic(),j.ic(),j.ic(),j.ic(),j.ic(),j.ic(),j.jc(11,"div",10),j.jc(12,"div",11),j.jc(13,"div",12),j.jc(14,"div",7),j.jc(15,"div",13),j.jc(16,"label",14),j.jd(17,"Party Name:"),j.ic(),j.jc(18,"span",15),j.jd(19),j.ic(),j.ic(),j.jc(20,"div",16),j.jc(21,"label",14),j.jd(22,"Master Name:"),j.ic(),j.jc(23,"span",15),j.jd(24),j.ic(),j.ic(),j.ic(),j.ic(),j.jc(25,"div",12),j.jc(26,"div",7),j.jc(27,"div",16),j.jc(28,"label",14),j.jd(29,"P Chl No:"),j.ic(),j.jc(30,"span",17),j.jd(31),j.ic(),j.ic(),j.jc(32,"div",16),j.jc(33,"label",14),j.jd(34,"Date:"),j.ic(),j.jc(35,"span",17),j.jd(36),j.zc(37,"date"),j.ic(),j.ic(),j.ic(),j.ic(),j.jc(38,"div",12),j.jc(39,"div",7),j.jc(40,"div",13),j.jc(41,"label",14),j.jd(42,"Grey Mtr:"),j.ic(),j.jc(43,"span",17),j.jd(44),j.zc(45,"number"),j.ic(),j.ic(),j.jc(46,"div",16),j.jc(47,"label",14),j.jd(48,"Grey Wt:"),j.ic(),j.jc(49,"span",17),j.jd(50),j.zc(51,"number"),j.ic(),j.ic(),j.ic(),j.ic(),j.jc(52,"div",12),j.jc(53,"div",7),j.jc(54,"div",13),j.jc(55,"label",14),j.jd(56,"Lot No:"),j.ic(),j.jc(57,"span",15),j.jd(58),j.ic(),j.ic(),j.jc(59,"div",16),j.jc(60,"label",14),j.jd(61,"Quality ID:"),j.ic(),j.jc(62,"span",17),j.jd(63),j.ic(),j.ic(),j.ic(),j.ic(),j.jc(64,"div",12),j.jc(65,"div",7),j.jc(66,"div",13),j.jc(67,"label",14),j.jd(68,"Party Code:"),j.ic(),j.jc(69,"span",18),j.jd(70),j.ic(),j.ic(),j.jc(71,"div",16),j.jc(72,"label",14),j.jd(73,"Quality Name:"),j.ic(),j.jc(74,"span",17),j.jd(75),j.ic(),j.ic(),j.ic(),j.ic(),j.ic(),j.jc(76,"div",6),j.jc(77,"div",19),j.jc(78,"div",20),j.jc(79,"div",21),j.jc(80,"table",22),j.jc(81,"thead"),j.jc(82,"tr"),j.jc(83,"th",23),j.jc(84,"b"),j.jd(85,"Sr"),j.ic(),j.ic(),j.jc(86,"th",24),j.jc(87,"b"),j.jd(88,"Grey Mtr"),j.ic(),j.ic(),j.jc(89,"th",24),j.jc(90,"b"),j.jd(91,"Grey Wt"),j.ic(),j.ic(),j.jc(92,"th",25),j.jc(93,"b"),j.jd(94,"Finish Mtr"),j.ic(),j.ic(),j.ic(),j.ic(),j.jc(95,"tbody"),j.hd(96,v,10,9,"tr",1),j.jc(97,"tr"),j.jc(98,"td",26),j.jc(99,"b"),j.jd(100,"TTL"),j.ic(),j.ic(),j.jc(101,"td",27),j.jc(102,"b"),j.jd(103),j.zc(104,"number"),j.ic(),j.ic(),j.jc(105,"td",27),j.jc(106,"b"),j.jd(107),j.zc(108,"number"),j.ic(),j.ic(),j.jc(109,"td",28),j.ec(110,"b"),j.ic(),j.ic(),j.ic(),j.ic(),j.ic(),j.ic(),j.jc(111,"div",29),j.jc(112,"div",21),j.jc(113,"table",22),j.jc(114,"thead"),j.jc(115,"tr"),j.jc(116,"th",23),j.jc(117,"b"),j.jd(118,"Sr"),j.ic(),j.ic(),j.jc(119,"th",24),j.jc(120,"b"),j.jd(121,"Grey Mtr"),j.ic(),j.ic(),j.jc(122,"th",24),j.jc(123,"b"),j.jd(124,"Grey Wt"),j.ic(),j.ic(),j.jc(125,"th",25),j.jc(126,"b"),j.jd(127,"Finish Mtr"),j.ic(),j.ic(),j.ic(),j.ic(),j.jc(128,"tbody"),j.hd(129,y,10,9,"tr",1),j.jc(130,"tr"),j.jc(131,"td",26),j.jc(132,"b"),j.jd(133,"TTL"),j.ic(),j.ic(),j.jc(134,"td",27),j.jc(135,"b"),j.jd(136),j.zc(137,"number"),j.ic(),j.ic(),j.jc(138,"td",27),j.jc(139,"b"),j.jd(140),j.zc(141,"number"),j.ic(),j.ic(),j.jc(142,"td",28),j.ec(143,"b"),j.ic(),j.ic(),j.ic(),j.ic(),j.ic(),j.ic(),j.ic(),j.ic(),j.ic(),j.ic(),j.ic(),j.ic(),j.ic()),2&t){const t=e.$implicit,n=e.index;j.Pb(1),j.Jc("id","print-jobCard",n,""),j.Pb(18),j.kd(t.partyName),j.Pb(5),j.kd(t.masterName),j.Pb(7),j.kd(t.chalNo),j.Pb(5),j.kd(j.Bc(37,17,t.chlDate,"dd/MM/yyyy")),j.Pb(8),j.kd(j.Bc(45,20,t.totalMtr,"1.2-2")),j.Pb(6),j.kd(j.Bc(51,23,t.totalWt,"1.2-2")),j.Pb(8),j.kd(t.batchId),j.Pb(5),j.kd(t.qualityId),j.Pb(7),j.kd(t.partyCode),j.Pb(5),j.kd(t.qualityName),j.Pb(21),j.Hc("ngForOf",t.batchDataList),j.Pb(7),j.kd(j.Bc(104,26,t.totalMtrList1,"1.2-2")),j.Pb(4),j.kd(j.Bc(108,29,t.totalWtList1,"1.2-2")),j.Pb(22),j.Hc("ngForOf",t.batchDataList2),j.Pb(7),j.kd(j.Bc(137,32,t.totalMtrList2,"1.2-2")),j.Pb(4),j.kd(j.Bc(141,35,t.totalWtList2,"1.2-2"))}}let k=(()=>{class t{constructor(t,e){this.activeModal=t,this.stockBatchService=e,this.printBatchData=[],this.tempGr={sr:"",mtr:"",wt:""},this.destroy$=new r.a}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}ngOnInit(){this.isDirectPrintFlag&&this.getstockDataById()}getstockDataById(){let t,e=[];e.push(String(this.batchId)),this.batchId?t=e:(this.stockBatchData.batchData=this.stockBatchData.batchData.filter(t=>t.batchId),t=this.stockBatchData.batchData.map(t=>t.batchId).filter((t,e,n)=>n.indexOf(t)===e));for(let n of t)this.stockBatchService.getJobCardData(n).pipe(Object(s.a)(this.destroy$)).subscribe(e=>{e.success&&(this.printBatchData.push(e.data),this.printBatchData.length==t.length&&(this.printBatchData.forEach(t=>{if(t.batchDataList.length>24){let e=[],n=t.batchDataList.length;for(let i=24;i<n;i++)e.push(Object.assign({},t.batchDataList[24])),t.batchDataList.splice(24,1);if(t.batchDataList2=[...e],t.batchDataList2.length<24)for(let i=0;i<24;i++)t.batchDataList2[i]||t.batchDataList2.push(Object.assign({},this.tempGr))}else if(t.batchDataList.length<24)for(let a=0;a<24;a++)t.batchDataList[a]||t.batchDataList.push(Object.assign({},this.tempGr));if(!t.batchDataList2){t.batchDataList2=[];for(let e=0;e<24;e++)t.batchDataList2.push(Object.assign({},this.tempGr))}let e=1;for(let a=0;a<24;a++)t.batchDataList[a].sr=e,t.batchDataList2[a].sr=e+24,e+=1;let n=0;n=t.batchDataList.map(t=>t.mtr).reduce((function(t,e){return t+e}));let i=0;i=t.batchDataList2.map(t=>t.mtr).reduce((function(t,e){return t+e}));let c=0;c=t.batchDataList.map(t=>t.wt).reduce((function(t,e){return t+e}));let o=0;o=t.batchDataList2.map(t=>t.wt).reduce((function(t,e){return t+e})),t.totalMtrList1=Number(n),t.totalMtrList2=Number(i),t.totalWtList1=Number(c),t.totalWtList2=Number(o)}),this.printNow()))})}printNow(){let t=new M.PrintDocument({title:""});t.append('<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/paper-css/0.3.0/paper.css">'),t.append('<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">'),t.append('<link href="https://cdn.grapecity.com/wijmo/5.latest/styles/wijmo.min.css" rel="stylesheet">'),t.append('<link href="./job-card.component.scss" rel="stylesheet">'),this.printBatchData.forEach((e,n)=>{let i=setInterval(()=>{let e=document.getElementById("print-jobCard"+n);null!=e&&(t.append(e),clearInterval(i))},10)}),setTimeout(()=>{t.print(),this.activeModal.close(!0)},1e3)}}return t.\u0275fac=function(e){return new(e||t)(j.dc(h.a),j.dc(f.a))},t.\u0275cmp=j.Xb({type:t,selectors:[["ngx-job-card"]],inputs:{isDirectPrintFlag:"isDirectPrintFlag",stockBatchData:"stockBatchData",stockId:"stockId",batchId:"batchId"},decls:2,vars:1,consts:[[1,"nb-style","pr-mr-0"],[4,"ngFor","ngForOf"],[1,"jet-slip","size-A5","mr-top-0",3,"id"],[1,"pd-t-b"],[1,"border-whole"],[1,"mr-top-0","nb-c-pd-b"],[1,"container"],[1,"row"],[1,"text-center","mr-top-0","nb-c-pd-b","col-md-12"],[1,"font-30","mr-top-0","nb-c-pd-b"],[1,"nb-c-pd-t"],[1,"container","print-container","mr-top-bottom-15"],[1,"mb-1","print-text-center","pd-bt-25"],[1,"col-md-4","wth-50"],[1,"font-25"],[1,"slip-value","rd-color",2,"color","red !important"],[1,"col-md-8","wth-50"],[1,"slip-value"],[1,"slip-value",2,"color","red !important"],[1,"row","main-invoice-row"],[1,"col-md-6","pd-lf-0"],["id","invoice-table"],[1,"table","print-invoice-table","border-bootom-none","table-bordered","lot-border"],["scope","col",1,"pd-top-bottom-2","width-15"],["scope","col",1,"pd-top-bottom-2","width-30"],["scope","col",1,"pd-top-bottom-2","width-60"],[1,"pd-top-bottom-1","width-15","pd-t-b-5"],[1,"pd-top-bottom-1","width-30","pd-t-b-5"],[1,"pd-top-bottom-1","width-60","pd-t-b-5"],[1,"col-md-6","pd-right-0"],[1,"pd-top-bottom-1","width-15"],[1,"pd-top-bottom-1","width-30"],[1,"pd-top-bottom-1","width-60"]],template:function(t,e){1&t&&(j.jc(0,"nb-card",0),j.hd(1,O,144,38,"div",1),j.ic()),2&t&&(j.Pb(1),j.Hc("ngForOf",e.printBatchData))},directives:[C.u,i.m],pipes:[i.e,i.f],styles:[".print-slip[_ngcontent-%COMP%]{width:100%;height:100%;padding-top:10%}@page{size[_ngcontent-%COMP%]:A5;margin:0}.wth-50[_ngcontent-%COMP%]{width:50%;display:flex;justify-content:space-between}.pd-bt[_ngcontent-%COMP%]{padding-top:0;padding-bottom:0}.slip-value[_ngcontent-%COMP%]{border-style:groove;width:150px}.slip-background[_ngcontent-%COMP%]{display:flex;background-color:#5f9ea0!important}.print-data[_ngcontent-%COMP%]{color:#aa3634!important;border-style:groove;width:50px}@media print{.size-A5[_ngcontent-%COMP%]{size:A5}.mr-top-30[_ngcontent-%COMP%]{margin-top:30px}.mr-bottom-30[_ngcontent-%COMP%]{margin-bottom:30px}.border-style-solid[_ngcontent-%COMP%]{border-style:solid}.pd-top-10[_ngcontent-%COMP%]{padding-top:10px}.slip-value[_ngcontent-%COMP%]{width:60%}.rd-color[_ngcontent-%COMP%]{color:red}.jet-print-style-changes[_ngcontent-%COMP%]{margin:0!important}.jet-print-style-changes[_ngcontent-%COMP%], .main-jet-p-changes[_ngcontent-%COMP%]{width:100%!important;border-style:solid;background-color:c6daf0}.main-jet-p-changes[_ngcontent-%COMP%]{margin-bottom:20px!important}.width-100[_ngcontent-%COMP%]{width:100%!important}.width-20[_ngcontent-%COMP%]{width:20%!important}.width-28[_ngcontent-%COMP%]{width:28%!important}.width-25[_ngcontent-%COMP%]{width:25%!important}.width-27[_ngcontent-%COMP%]{width:27%!important}.width-30[_ngcontent-%COMP%]{width:30%!important}.color-000[_ngcontent-%COMP%]{color:#000!important}.form-style-print[_ngcontent-%COMP%]{padding:0;display:inline-flex;justify-content:flex-start;align-items:center}.pd-15[_ngcontent-%COMP%]{padding-top:15px;padding-bottom:15px}.font-25[_ngcontent-%COMP%]{font-size:25px!important}.mr-top-bottom-15[_ngcontent-%COMP%]{padding-top:20px;padding-bottom:20px}.nb-c-pd-t[_ngcontent-%COMP%]{padding-top:0!important}.nb-c-pd-b[_ngcontent-%COMP%]{padding-bottom:0!important}.font-weight-bold[_ngcontent-%COMP%]{font-weight:700}.font-30[_ngcontent-%COMP%]{font-size:30px}.border-left-1px[_ngcontent-%COMP%]{border-left:1px solid}.print-bg-transperent[_ngcontent-%COMP%]{background-color:transparent}.print-color-media[_ngcontent-%COMP%]{width:auto;color:#000!important}.font-40[_ngcontent-%COMP%]{font-size:40px}}@media print{.section[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{margin:0;box-shadow:0}.img[_ngcontent-%COMP%]{max-width:500px}.col-sm-1[_ngcontent-%COMP%], .col-sm-2[_ngcontent-%COMP%], .col-sm-3[_ngcontent-%COMP%], .col-sm-4[_ngcontent-%COMP%], .col-sm-5[_ngcontent-%COMP%], .col-sm-6[_ngcontent-%COMP%], .col-sm-7[_ngcontent-%COMP%], .col-sm-8[_ngcontent-%COMP%], .col-sm-9[_ngcontent-%COMP%], .col-sm-10[_ngcontent-%COMP%], .col-sm-11[_ngcontent-%COMP%], .col-sm-12[_ngcontent-%COMP%]{float:left}.col-sm-12[_ngcontent-%COMP%]{width:100%}.col-sm-11[_ngcontent-%COMP%]{width:91.66666666666666%}.col-sm-10[_ngcontent-%COMP%]{width:83.33333333333334%}.col-sm-9[_ngcontent-%COMP%]{width:75%}.col-sm-8[_ngcontent-%COMP%]{width:66.66666666666666%}.col-sm-7[_ngcontent-%COMP%]{width:58.333333333333336%}.col-md-6[_ngcontent-%COMP%], .col-sm-6[_ngcontent-%COMP%]{width:50%}.col-sm-5[_ngcontent-%COMP%]{width:41.66666666666667%}.col-sm-4[_ngcontent-%COMP%]{width:33.33333333333333%}.col-sm-3[_ngcontent-%COMP%]{width:25%}.col-sm-2[_ngcontent-%COMP%]{width:16.666666666666664%}.col-sm-1[_ngcontent-%COMP%]{width:8.333333333333332%}.col-md-3[_ngcontent-%COMP%]{width:25%}.lot-border[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border:1px solid #8f8f8f}.lot-border[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:23px!important}.lot-border[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-bottom:2px solid #8f8f8f!important}.footer-border[_ngcontent-%COMP%]{border:1px solid #8f8f8f}.border-top-none[_ngcontent-%COMP%], .footer-bottom[_ngcontent-%COMP%]{padding:5px 15px}.border-top[_ngcontent-%COMP%]{border-top:1px solid;padding:15px}.terms-cond[_ngcontent-%COMP%]{list-style:none}.terms-cond[_ngcontent-%COMP%], .terms-cond[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-left:0!important;padding-left:0!important}.footer-bottom[_ngcontent-%COMP%]{padding-left:15px;border:1px solid #8f8f8f}.border-top-none[_ngcontent-%COMP%]{border:1px solid #8f8f8f;border-top:none}.border-whole[_ngcontent-%COMP%]{border-top:2px solid #8f8f8f;border-right:2px solid #8f8f8f!important;border-left:2px solid #8f8f8f!important}.pd-t-b[_ngcontent-%COMP%]{padding-top:25px!important;padding-bottom:16px!important}.display-flex[_ngcontent-%COMP%]{display:flex}.display-flex[_ngcontent-%COMP%], .display-flex-end[_ngcontent-%COMP%]{justify-content:center;align-items:flex-end}.height-100[_ngcontent-%COMP%]{height:100%}.company-ltd[_ngcontent-%COMP%]{margin-top:30px}#invoice-table[_ngcontent-%COMP%]{border:1px solid #8f8f8f;border-spacing:0;clear:both;margin:0;height:297mm;width:100%}.lot-border[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding-top:6px;padding-bottom:6px;font-size:20px}#invoice-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border-left:2px solid #8f8f8f}#invoice-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child, td[_ngcontent-%COMP%]:first-child{border-left:none}#invoice-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-bottom:1px solid #8f8f8f}#invoice-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle;font-size:6pt}th[_ngcontent-%COMP%]{font-weight:400}.amount[_ngcontent-%COMP%], .spacing-low[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{text-align:center}.auth-font[_ngcontent-%COMP%], .font-big[_ngcontent-%COMP%], .font-big[_ngcontent-%COMP%]   .terms-cond[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .font-big[_ngcontent-%COMP%]   b[_ngcontent-%COMP%], .invoice_line[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:15px}.company-ltd[_ngcontent-%COMP%]{font-size:18px}.amount[_ngcontent-%COMP%], .invoice_line[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .site[_ngcontent-%COMP%]{font-size:40px;font-weight:600}.invoice_line[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .invoice_line[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:1mm;text-align:center}.lot-border[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 0;font-size:40px}.card-block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:2px}.card-block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:first-child{margin-bottom:1px}.border-margin[_ngcontent-%COMP%]{padding:5px 0 15px}.border-margin-d-t[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:5px}.top-print-head[_ngcontent-%COMP%]{text-align:right;display:inline-block;font-size:15px;padding-top:0;margin-top:0}.spacing-low[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#90ee90!important}.border-r-l[_ngcontent-%COMP%], .border-r-l-t[_ngcontent-%COMP%], .spacing-low[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .spacing-low[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .spacing-low[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-left:1px solid #8f8f8f!important;border-right:1px solid #8f8f8f!important}.border-r-l-t[_ngcontent-%COMP%]{border-top:1px solid #8f8f8f!important}.spacing-low[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .spacing-low[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child, .spacing-low[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-top:1px solid #8f8f8f!important;border-bottom:1px solid #8f8f8f!important}.spacing-low[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .spacing-low[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:1px .75rem!important}.border-width[_ngcontent-%COMP%], .spacing-low[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{border-width:2px!important}.lot-border[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], table.lot-border[_ngcontent-%COMP%], table.spacing-low[_ngcontent-%COMP%]{margin-bottom:1px!important}.border[_ngcontent-%COMP%], .border-dark[_ngcontent-%COMP%], .border-top[_ngcontent-%COMP%]{border:1px solid #8f8f8f!important}.border-bootom-none[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child, .border-zero[_ngcontent-%COMP%]{border:0!important}.border-bootom-none[_ngcontent-%COMP%]{border-bottom:1px solid #8f8f8f!important}.display-between[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.spacing-low[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;bottom:0}tfoot.spacing-low[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #8f8f8f!important}tfoot.spacing-low[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child{text-align:center!important}.print-invoice-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{height:290mm;overflow:hidden;overflow-x:hidden;display:block;width:100%}.print-invoice-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%], .print-invoice-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}.pd-t-b-5[_ngcontent-%COMP%]{padding-top:5px!important;padding-bottom:10px!important}.print-invoice-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%], .print-invoice-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:inline;width:100%}.print-invoice-table[_ngcontent-%COMP%], .print-invoice-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .print-invoice-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:1px solid #8f8f8f!important;padding-top:7px!important;padding-bottom:7px!important}.print-invoice-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:solid #8f8f8f!important;border-width:1px 1px 2px!important}.print-invoice-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-left:0!important;border-right:0!important}.width-63[_ngcontent-%COMP%]{width:63%}.width-60[_ngcontent-%COMP%]{width:60%}.width-37[_ngcontent-%COMP%]{width:37%}.width-10[_ngcontent-%COMP%]{width:10%}.width-30[_ngcontent-%COMP%]{width:30%}.width-4px[_ngcontent-%COMP%]{width:4px}.width-4[_ngcontent-%COMP%]{width:4%}.width-15[_ngcontent-%COMP%]{width:15%}.width-9[_ngcontent-%COMP%]{width:9%}.duplicate-border[_ngcontent-%COMP%]{border-top-width:3px!important;border-left-width:3px!important;border-right-width:3px!important}.pd-0[_ngcontent-%COMP%]{padding:0}.mr-0[_ngcontent-%COMP%]{margin:0}.display-flex-end[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center}.font-20[_ngcontent-%COMP%]{font-size:20px}.font-30[_ngcontent-%COMP%]{font-size:30px}.font-15[_ngcontent-%COMP%]{font-size:15px}.jus-con-center[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.print-logo-style[_ngcontent-%COMP%]{width:130px;height:auto}.font-bold[_ngcontent-%COMP%]{font-weight:700}.disc-style[_ngcontent-%COMP%]{font-size:15px;border-top:0!important}.main-invoice-row[_ngcontent-%COMP%]{margin-top:3px;margin-bottom:5px}.pd-top-bottom-2[_ngcontent-%COMP%]{padding-top:2px!important;padding-bottom:2px!important}.pd-top-bottom-1[_ngcontent-%COMP%]{font-size:16px!important;padding-top:5px!important;padding-bottom:5px!important;text-align:center!important}.pd-top-bottom-0[_ngcontent-%COMP%]{padding-top:0!important;padding-bottom:0!important}.pd-top-60[_ngcontent-%COMP%]{padding-top:60px!important}.printpage[_ngcontent-%COMP%]{background:#fff;display:block;margin:0 auto .5cm;box-shadow:0 0 .5cm rgba(0,0,0,.5)}.print-in-border[_ngcontent-%COMP%]{border:3px solid #8f8f8f}.border-margin[_ngcontent-%COMP%]{padding:1rem 4rem}.t-table[_ngcontent-%COMP%]{height:800px}.table-left-right[_ngcontent-%COMP%]{border-left:0!important;border-right:0!important}.tr[_ngcontent-%COMP%]::nth-child(2){height:100vh}.table-left-right[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:3px .75rem;vertical-align:top;text-align:center;width:100%;border-collapse:collapse;height:100%}.table-left-right[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table-left-right[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-left:1px solid #c3c3c3;border-right:1px solid #c3c3c3}.table-left-right[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-top:1px solid #c3c3c3;border-bottom:1px solid #c3c3c3}.pd-lf-0[_ngcontent-%COMP%]{padding-left:0!important}.pd-right-0[_ngcontent-%COMP%]{padding-right:0!important}.text-center[_ngcontent-%COMP%]{text-align:center}.mr-top-0[_ngcontent-%COMP%]{padding-top:0!important;margin-top:0!important}}"]}),t})();var _=n("z17N"),x=n("3Pt+");let w=(()=>{class t{constructor(t,e){this.activeModal=t,this.modalService=e,this.disableButton=!1,this.isDirectPrintFlag=!1,this.destroy$=new r.a}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}ngOnInit(){}printJobCard(){if(this.batchId){this.disableButton=!0,this.isDirectPrintFlag=!0;const t=this.modalService.open(k);t.componentInstance.isDirectPrintFlag=this.isDirectPrintFlag,t.componentInstance.batchId=this.batchId,t.result.then(t=>{this.activeModal.close(),this.disableButton=!1})}}closeModal(){this.activeModal.close()}}return t.\u0275fac=function(e){return new(e||t)(j.dc(h.a),j.dc(h.e))},t.\u0275cmp=j.Xb({type:t,selectors:[["ngx-input-batch"]],decls:19,vars:2,consts:[[1,"nbStyle"],[1,"nb-header"],[1,"row"],[1,"col-md-12"],[1,"nb-text","txt-ov-elips"],[1,"col-md-6"],[1,"form-group"],["type","number","name","batchId","id","batchId",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-md-9","mobile-btn-center","text-btn-right","mt-50"],["type","button",1,"btn","btn-primary","btn-sm","btn-design-cancel",3,"click"],["type","button",1,"btn","btn-primary","btn-sm","btn-design-save","mob-stock","button-base","ripple",3,"disabled","click"]],template:function(t,e){1&t&&(j.jc(0,"nb-card",0),j.jc(1,"nb-card-header",1),j.jc(2,"div",2),j.jc(3,"div",3),j.jc(4,"h2",4),j.jd(5,"Add Batch"),j.ic(),j.ic(),j.ic(),j.ic(),j.jc(6,"nb-card-body"),j.jc(7,"div",2),j.jc(8,"div",5),j.jc(9,"div",6),j.jc(10,"label"),j.jd(11,"Batch Id"),j.ic(),j.jc(12,"input",7),j.uc("ngModelChange",(function(t){return e.batchId=t})),j.ic(),j.ic(),j.ic(),j.ic(),j.jc(13,"div",2),j.jc(14,"div",8),j.jc(15,"button",9),j.uc("click",(function(){return e.closeModal()})),j.jd(16,"CANCEL"),j.ic(),j.jc(17,"button",10),j.uc("click",(function(){return e.printJobCard()})),j.jd(18,"SAVE"),j.ic(),j.ic(),j.ic(),j.ic(),j.ic()),2&t&&(j.Pb(12),j.Hc("ngModel",e.batchId),j.Pb(5),j.Hc("disabled",e.disableButton))},directives:[C.u,C.x,C.t,x.q,x.a,x.l,x.o],styles:[""]}),t})();var D=n("5eHb"),B=n("qC+V"),S=n("ZOsW"),I=n("lDzL");const L=["forFocus"];function N(t,e){1&t&&(j.jc(0,"div"),j.jc(1,"h2",63),j.jd(2,"Add Stock-Batch"),j.ic(),j.ic())}function H(t,e){1&t&&(j.jc(0,"div"),j.jc(1,"h2",63),j.jd(2,"Update Stock-Batch"),j.ic(),j.ic())}function R(t,e){if(1&t&&(j.jc(0,"ng-option",64),j.jc(1,"div",4),j.jc(2,"div",22),j.jc(3,"div",23),j.jd(4),j.ic(),j.ic(),j.jc(5,"div",22),j.jc(6,"div",24),j.jd(7),j.ic(),j.ic(),j.ic(),j.ic()),2&t){const t=e.$implicit;j.Hc("value",t.id),j.Pb(4),j.ld(" ",t.partyName,""),j.Pb(3),j.ld(" ",t.partyCode,"")}}function q(t,e){1&t&&(j.jc(0,"div",65),j.jc(1,"span"),j.jd(2,"Party name is required"),j.ic(),j.ic())}function F(t,e){if(1&t&&(j.jc(0,"ng-option",64),j.jc(1,"div",4),j.jc(2,"div",22),j.jc(3,"div",23),j.jd(4),j.ic(),j.ic(),j.jc(5,"div",22),j.jc(6,"div",24),j.jd(7),j.ic(),j.ic(),j.ic(),j.ic()),2&t){const t=e.$implicit;j.Hc("value",t.id?t.id:t.qualityEntryId),j.Pb(4),j.ld(" ",t.qualityId,""),j.Pb(3),j.ld(" ",t.qualityName,"")}}function W(t,e){1&t&&(j.jc(0,"div",65),j.jc(1,"span"),j.jd(2,"Quality is required."),j.ic(),j.ic())}function A(t,e){1&t&&(j.jc(0,"div",65),j.jc(1,"span"),j.jd(2,"Receive date is required"),j.ic(),j.ic())}function V(t,e){1&t&&(j.jc(0,"div",65),j.jc(1,"span"),j.jd(2,"Challan no. is required"),j.ic(),j.ic())}function E(t,e){1&t&&(j.jc(0,"div",65),j.jc(1,"span"),j.jd(2,"Challan date is required"),j.ic(),j.ic())}function z(t,e){1&t&&(j.jc(0,"div",82),j.jc(1,"span"),j.jd(2,"Pchallan already exists"),j.ic(),j.ic())}function T(t,e){1&t&&(j.jc(0,"div",82),j.jc(1,"span"),j.jd(2,"Pchallan is required"),j.ic(),j.ic())}const U=function(){return{type:"zoom"}},G=function(t){return{animation:t}};function $(t,e){if(1&t){const t=j.kc();j.jc(0,"div",83),j.jc(1,"nb-icon",84),j.uc("click",(function(){j.Xc(t);const e=j.yc().index;return j.yc().removeBatch(e)})),j.ic(),j.ic()}2&t&&(j.Pb(1),j.Hc("options",j.Nc(2,G,j.Mc(1,U))))}function X(t,e){1&t&&(j.jc(0,"div",88),j.jc(1,"span"),j.jd(2,"Required"),j.ic(),j.ic())}const Q=function(t){return{"is-invalid":t}};function J(t,e){if(1&t){const t=j.kc();j.jc(0,"input",85,86),j.uc("keyup",(function(n){j.Xc(t);const i=e.rowIndex,c=j.yc().index;return j.yc().onKeyUp(n,i,0,"mtr",c)}))("ngModelChange",(function(n){return j.Xc(t),e.row.mtr=n}))("input",(function(){j.Xc(t);const n=e.rowIndex,i=j.Uc(2),c=j.yc().index;return j.yc().calculateWt(i.value,c,n,0)})),j.ic(),j.hd(3,X,3,0,"div",87)}if(2&t){const t=e.row,n=e.rowIndex,i=j.Uc(2),c=j.yc().index,o=j.yc();j.Kc("name","mtr",n,"",c,""),j.Hc("ngModel",t.mtr)("id","grData"+n+"-0"+c)("ngClass",j.Nc(7,Q,o.formSubmitted&&i.invalid))("disabled",o.flag||t.isProductionPlanned||o.weightFlag),j.Pb(3),j.Hc("ngIf",o.formSubmitted&&i.invalid)}}function Z(t,e){1&t&&(j.jc(0,"div",88),j.jc(1,"span"),j.jd(2,"Required"),j.ic(),j.ic())}function K(t,e){if(1&t){const t=j.kc();j.jc(0,"input",89,90),j.uc("ngModelChange",(function(n){return j.Xc(t),e.row.wt=n}))("keyup",(function(n){j.Xc(t);const i=e.rowIndex,c=j.yc().index;return j.yc().onKeyUp(n,i,1,"wt",c)}))("input",(function(){j.Xc(t);const n=e.rowIndex,i=j.Uc(1),c=j.yc().index;return j.yc().calculateMtr(i.value,c,n,1)})),j.ic(),j.hd(2,Z,3,0,"div",87)}if(2&t){const t=e.row,n=e.rowIndex,i=j.Uc(1),c=j.yc().index,o=j.yc();j.Kc("name","wt",n,"",c,""),j.Hc("ngModel",t.wt)("id","grData"+n+"-1"+c)("ngClass",j.Nc(7,Q,o.formSubmitted&&i.invalid))("disabled",o.flag||t.isProductionPlanned||!o.weightFlag),j.Pb(2),j.Hc("ngIf",o.formSubmitted&&i.invalid)}}function Y(t,e){if(1&t){const t=j.kc();j.jc(0,"nb-icon",91),j.uc("click",(function(){j.Xc(t);const n=e.rowIndex,i=j.yc().index;return j.yc().removeItem(n,i)})),j.ic()}if(2&t){const t=e.row,n=j.yc(2);j.Hc("hidden",n.flag||t.isProductionPlanned)("options",j.Nc(3,G,j.Mc(2,U)))}}function tt(t,e){if(1&t&&(j.jc(0,"div",27),j.jc(1,"div",92),j.jd(2),j.zc(3,"number"),j.ic(),j.ic(),j.jc(4,"div",27),j.jc(5,"div",92),j.jd(6),j.zc(7,"number"),j.ic(),j.ic(),j.jc(8,"div",27),j.jc(9,"div",92),j.jd(10),j.ic(),j.ic()),2&t){const t=e.rowCount,n=j.yc().$implicit;j.Pb(2),j.ld(" Total mtr: ",j.Bc(3,3,n.totalMt,"1.2-2")," "),j.Pb(4),j.ld(" Total wt: ",j.Bc(7,6,n.totalWt,"1.2-2")," "),j.Pb(4),j.ld(" Total GR: ",t," ")}}function et(t,e){if(1&t){const t=j.kc();j.jc(0,"div",66),j.jc(1,"fieldset",67),j.jc(2,"nb-card",68),j.jc(3,"div",15),j.jc(4,"div",4),j.jc(5,"div",69),j.jc(6,"label"),j.jd(7,"PChallan No"),j.ic(),j.jc(8,"input",70),j.uc("ngModelChange",(function(n){return j.Xc(t),e.$implicit.pchallanRef=n}))("change",(function(){j.Xc(t);const n=e.index;return j.yc().checkPChallanUniq(n)}))("click",(function(){return j.Xc(t),j.yc().batchInsertCheck()})),j.ic(),j.hd(9,z,3,0,"div",71),j.hd(10,T,3,0,"div",71),j.ic(),j.hd(11,$,2,4,"div",72),j.ic(),j.ic(),j.jc(12,"div",73),j.jc(13,"div",4),j.jc(14,"div",74),j.jc(15,"div"),j.jc(16,"fieldset",67),j.jc(17,"ngx-datatable",75,76),j.jc(19,"ngx-datatable-column",77),j.hd(20,J,4,9,"ng-template",78),j.ic(),j.jc(21,"ngx-datatable-column",79),j.hd(22,K,3,9,"ng-template",78),j.ic(),j.jc(23,"ngx-datatable-column",80),j.hd(24,Y,1,5,"ng-template",78),j.ic(),j.jc(25,"ngx-datatable-footer"),j.hd(26,tt,11,9,"ng-template",81),j.ic(),j.ic(),j.ic(),j.ic(),j.ic(),j.ic(),j.ic(),j.ic(),j.ic(),j.ic()}if(2&t){const t=e.$implicit,n=e.index,i=j.yc();j.Qb("id","repeat"+n),j.Pb(1),j.Hc("disabled",i.production_flag[n]),j.Pb(1),j.Qb("id","new"+n),j.Pb(6),j.Jc("name","pchallanRef",n,""),j.Hc("ngModel",t.pchallanRef)("disabled",!i.addFlag&&t.old),j.Qb("id","pchallanRef"+n),j.Pb(1),j.Hc("ngIf",t.isNotUnique),j.Pb(1),j.Hc("ngIf",i.formSubmitted&&!t.pchallanRef),j.Pb(1),j.Hc("ngIf",!i.production_flag[n]),j.Pb(5),j.Hc("disabled",!i.stockBatch.qualityId),j.Pb(1),j.Hc("rows",t.batchMW)("headerHeight",31)("footerHeight",50)("scrollbarV",!0),j.Pb(2),j.Hc("sortable",!1)("width",300),j.Pb(2),j.Hc("sortable",!1)("width",300)}}function nt(t,e){if(1&t){const t=j.kc();j.jc(0,"button",93),j.uc("click",(function(){j.Xc(t);const e=j.yc(),n=j.Uc(23);return e.reset(n)})),j.jd(1,"CANCEL"),j.ic()}}const it=function(){return["/pages/stock-batch/view"]};function ct(t,e){1&t&&(j.jc(0,"button",94),j.jd(1,"CANCEL"),j.ic()),2&t&&j.Hc("routerLink",j.Mc(1,it))}function ot(t,e){if(1&t){const t=j.kc();j.jc(0,"button",62),j.uc("click",(function(){j.Xc(t);const e=j.yc(),n=j.Uc(23);return e.addUpdateStockBatch(n,!1)})),j.jd(1,"SAVE"),j.ic()}if(2&t){const t=j.yc();j.Hc("disabled",t.disableButton)}}function at(t,e){if(1&t){const t=j.kc();j.jc(0,"button",95),j.uc("click",(function(){j.Xc(t);const e=j.yc(),n=j.Uc(23);return e.addUpdateStockBatch(n,!1)})),j.jd(1,"UPDATE"),j.ic()}if(2&t){const t=j.yc();j.Hc("disabled",t.disableButton)}}function st(t,e){if(1&t){const t=j.kc();j.jc(0,"button",62),j.uc("click",(function(){return j.Xc(t),j.yc().gotoNextPage()})),j.jd(1,"NEXT"),j.ic()}if(2&t){const t=j.yc();j.Hc("disabled",t.disableButton)}}let rt=(()=>{class t{constructor(t,e,n,i,c,o,a,s,d,h){this.partyService=t,this.toastr=e,this.route=n,this.qualityService=i,this.stockBatchService=c,this._route=o,this.commonService=a,this.modalService=s,this.ckd=h,this.loading=!1,this.disableButton=!1,this.formSubmitted=!1,this.addFlag=!0,this.zeroValueBatch=!1,this.production_flag=[],this.errorData=l,this.qualityList=[],this.partyList=[],this.dateForPicker=new Date,this.deleteFlag=0,this.validationCardRowIndex=0,this.flag=0,this.stockDataValues1=[{batchId:null,pchallanRef:null,totalWt:null,totalMt:null,isNotUnique:!1,isProductionPlanned:!1,batchMW:[{mtr:null,wt:null}]}],this.stockDataValues=[],this.stockBatchArray=[],this.stockBatch=new g,this.batchIdArray=[],this.totalMtr=0,this.wtArray=[],this.mtArray=[],this.totalWt=0,this.weightFlag=!1,this.weight=[],this.MtWtIndex=0,this.isDirectPrintFlag=!1,this.currentBatchSequence=0,this.currentBatchSeqId=0,this.totalGrs=0,this.totalMeters=0,this.totalWeights=0,this.destroy$=new r.a,d.setLocale("en-IN")}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}ngOnInit(){return Object(a.a)(this,void 0,void 0,(function*(){yield this.getQualityList(),yield this.getPartyList(),yield this.getQualityList(),this.currentStockBatchId=this._route.snapshot.paramMap.get("id"),this.currentStockBatchId&&(this.addFlag=!1,this.getStockBatchById()),this.maxDate=new Date(this.dateForPicker.getFullYear(),this.dateForPicker.getMonth(),this.dateForPicker.getDate(),23,59),this.stockBatch.receiveDate=this.maxDate,this.stockBatch.chlDate=this.maxDate,this.user=this.commonService.getUser(),this.userHead=this.commonService.getUserHeadId()}))}getPartyList(){this.loading=!0,this.partyService.getAllPartyNameList().pipe(Object(s.a)(this.destroy$)).subscribe(t=>{t.success&&(this.partyList=t.data),this.loading=!1},t=>{this.loading=!1})}getQualityList(){this.loading=!0,this.qualityService.getQualityNameData().pipe(Object(s.a)(this.destroy$)).subscribe(t=>{t.success&&t.data&&t.data.length>0&&(this.qualityList=t.data),this.loading=!1},t=>{this.loading=!1})}setQualityByParty(t){this.loading=!0,null!=t?this.stockBatch.partyId?(this.qualityList=[],this.qualityService.getQualityByParty(this.stockBatch.partyId).pipe(Object(s.a)(this.destroy$)).subscribe(t=>{t.success&&(this.qualityList=t.data.qualityDataList),this.qualityList&&this.qualityList.length&&(this.stockBatch.qualityId=null)},t=>{this.loading=!1}),this.loading=!1):this.loading=!1:(this.stockBatch.partyId=null,this.stockBatch.qualityId=null,this.stockBatch.unit=null,this.getPartyList(),this.getQualityList(),this.loading=!1)}getUnit(t){this.weightFlag=!1,null!=t?null==this.stockBatch.qualityId?(this.flag=1,this.toastr.error("Please select quality first")):(this.flag=0,this.weightFlag=!1,this.qualityList.forEach(t=>{(t.id?t.id:t.qualityEntryId)==this.stockBatch.qualityId&&(this.stockBatch.partyId=t.partyId,this.stockBatch.unit=t.unit,this.weightFlag="weight"===this.stockBatch.unit,this.wtPer100mtrCopy=t.wtPer100m,this.addFlag&&(this.stockBatch.wtPer100m=t.wtPer100m))}),this.reCalcMTWTValue()):(this.stockBatch.partyId=null,this.stockBatch.unit=null,this.getQualityList())}reCalcMTWTValue(){this.stockDataValues.forEach((t,e)=>{this.weight=[],t.batchMW.forEach(t=>{this.weight.push({w:t.wt,meter:t.mtr})}),this.calculateTotalMtrWt(this.stockBatch.unit,t)}),this.totalMeters=0,this.totalWeights=0,this.totalGrs=0,this.stockDataValues.forEach(t=>{this.totalMeters+=t.totalMt,this.totalWeights+=t.totalWt,t.batchMW.forEach(t=>{this.totalGrs++})})}getStockBatchById(){this.loading=!0,this.stockBatchService.getStockBatchById(this.currentStockBatchId).pipe(Object(s.a)(this.destroy$)).subscribe(t=>{t.success&&(this.stockBatch.receiveDate=new Date(t.data.receiveDate),this.stockBatch.qualityId=t.data.qualityId,this.stockBatch=t.data,this.stockBatch.chlDate=new Date(this.stockBatch.chlDate),this.stockBatch.receiveDate=new Date(this.stockBatch.receiveDate),this.stockBatch.batchData.length&&(this.stockBatch.batchData=d.sortBy(t.data.batchData,"pchallanRef"),this.stockBatch.batchData.map(t=>{}),this.setStockDataValues1())),this.loading=!1},t=>{this.loading=!1})}setStockDataValues1(){let t=[...new Set(this.stockBatch.batchData.map(t=>t.pchallanRef))];this.stockDataValues=[],t.forEach((e,n)=>{this.stockDataValues.push(new u),this.stockDataValues[n].pchallanRef=t[n],this.stockDataValues[n].old=!0}),0!=this.qualityList.length&&this.qualityList.forEach(t=>{t.id==this.stockBatch.qualityId&&(this.wtPer100mtrCopy=t.wtPer100m,this.addFlag&&(this.stockBatch.wtPer100m=t.wtPer100m),this.stockBatch.unit=t.unit,this.weightFlag="weight"===this.stockBatch.unit)}),this.stockDataValues.forEach((t,e)=>{this.production_flag[e]=!1,this.stockBatch.batchData.forEach((n,i)=>{n.pchallanRef==t.pchallanRef&&(t.batchMW.push(new p(n.mtr,n.wt,n.isProductionPlanned,n.id,n.controlId)),n.isProductionPlanned&&(this.production_flag[e]=!0))})}),this.reCalcMTWTValue()}batchInsertCheck(){null==this.stockBatch.qualityId?(this.flag=1,this.toastr.error("Please select quality first")):this.flag=0}onKeyUp(t,e,n,i,c){if(13==(t.keyCode?t.keyCode:t.which))if(this.index=this.weightFlag?"grData"+(e+1)+"-1"+c:"grData"+(e+1)+"-0"+c,e===this.stockDataValues[c].batchMW.length-1){let t=this.stockDataValues[c].batchMW[e];if("mtr"==i){if(!t.mtr)return void this.toastr.error("Enter Meter","Meter Field required")}else if("wt"==i&&!t.wt)return void this.toastr.error("Enter Weight","Weight Field required");let n=this.stockDataValues[c].batchMW;n.push(Object.assign({},{id:null,controlId:null,mtr:null,wt:null,isProductionPlanned:!1})),this.stockDataValues[c].batchMW=[...n],this.stockDataValues[c].batchMW=[...this.stockDataValues[c].batchMW],this.ckd.detectChanges();let o=setInterval(()=>{let t=document.getElementById(this.index);null!=t&&(t.focus(),clearInterval(o));let e=document.querySelectorAll(".datatable-body");e&&e.length&&(e[c].scrollTop=e[c].scrollHeight)},10)}else{let t=setInterval(()=>{let e=document.getElementById(this.index);null!=e&&(e.focus(),clearInterval(t))},10)}}removeItem(t,e){let n=this.stockDataValues[e].batchMW;1==this.stockDataValues[e].batchMW.length?(n[0].mtr=null,n[0].wt=null,this.stockDataValues[e].batchMW=[...n],this.reCalcMTWTValue()):(n.splice(t,1),this.stockDataValues[e].batchMW=[...n],this.reCalcMTWTValue())}addNewBatch(t){if(this.stockBatch.qualityId)if((e=new u).batchMW.push(new p),this.stockDataValues.length)if(this.stockDataValues.findIndex(t=>null==t.pchallanRef)>-1||this.flag)this.toastr.error("Please fill all the required fields");else{let n=[...this.stockDataValues];n=d.sortBy(n,"pchallanRef","asc"),this.wtArray=[],this.mtArray=[],this.stockDataValues.push(Object.assign({},e));const i="collapsible-panel--expanded";t.target.classList.contains(i)?t.target.classList.remove(i):t.target.classList.add(i)}else{var e;this.stockDataValues=[],(e=new u).batchMW.push(new p),this.stockDataValues.push(Object.assign({},e))}else this.toastr.warning("Please select quality first")}removeBatch(t){this.stockDataValues.splice(t,1)}calculateWt(t,e,n,i){let c;c=t/100*this.stockBatch.wtPer100m,this.stockDataValues[e].batchMW[n].wt=c.toFixed(2),this.weight=[],this.stockDataValues[e].batchMW.forEach(t=>{this.weight.push({meter:t.mtr,w:t.wt})}),this.MtWtIndex==e?(this.weight[n]={meter:t,w:c},this.calculateTotalMtrWt("meter"),this.stockDataValues[e].totalMt=Number(Number(this.totalMtr).toFixed(2)),this.stockDataValues[e].totalWt=Number(Number(this.totalWt).toFixed(2))):(this.MtWtIndex=e,this.weight[n]={meter:t,w:c},this.calculateTotalMtrWt("meter"),this.stockDataValues[this.MtWtIndex].totalMt=Number(Number(this.totalMtr).toFixed(2)),this.stockDataValues[this.MtWtIndex].totalWt=Number(Number(this.totalWt).toFixed(2))),this.totalGrs=0,this.totalMeters=0,this.totalWeights=0,this.stockDataValues.forEach(t=>{this.totalMeters+=t.totalMt,this.totalWeights+=t.totalWt,this.totalGrs+=t.batchMW.length})}calculateTotalMtrWt(t,e){this.totalWt=0,this.totalMtr=0,Object.keys(this.weight).forEach(t=>{this.totalWt+=+this.weight[t].w,this.totalMtr+=+this.weight[t].meter}),e&&(e.totalMt=this.totalMtr,e.totalWt=this.totalWt)}calculateMtr(t,e,n,i){let c;c=100*t/this.stockBatch.wtPer100m,this.stockDataValues[e].batchMW[n].mtr=c.toFixed(2),this.weight=[],this.stockDataValues[e].batchMW.forEach(t=>{this.weight.push({meter:t.mtr,w:t.wt})}),this.MtWtIndex==e?(this.weight[n]={meter:c,w:t},this.calculateTotalMtrWt("weight"),this.stockDataValues[e].totalMt=Number(Number(this.totalMtr).toFixed(2)),this.stockDataValues[e].totalWt=Number(Number(this.totalWt).toFixed(2))):(this.MtWtIndex=e,this.weight[n]={meter:c,w:t},this.calculateTotalMtrWt("weight"),this.stockDataValues[this.MtWtIndex].totalMt=Number(Number(this.totalMtr).toFixed(2)),this.stockDataValues[this.MtWtIndex].totalWt=Number(Number(this.totalWt).toFixed(2))),this.totalGrs=0,this.totalMeters=0,this.totalWeights=0,this.stockDataValues.forEach(t=>{this.totalMeters+=t.totalMt,this.totalWeights+=t.totalWt,this.totalGrs+=t.batchMW.length})}checkValidation(t){let e=!0;if(this.stockDataValues&&this.stockDataValues.length){if(1==this.stockDataValues.length&&!this.stockDataValues[0].pchallanRef&&!this.stockDataValues[0].batchMW[0].mtr&&!this.stockDataValues[0].batchMW[0].wt&&(e=!1,this.stockBatch.receiveDate&&this.stockBatch.chlDate&&this.stockBatch.chlNo&&this.stockBatch.stockInType&&this.stockBatch.partyId&&this.stockBatch.qualityId))return e=!0,e;this.stockDataValues.forEach(t=>t.pchallanRef?t.batchMW&&t.batchMW.length&&1==t.batchMW.length&&t.batchMW.findIndex(t=>!(null!=t.wt&&null!=t.wt&&""!=t.wt||null!=t.mtr&&null!=t.mtr&&""!=t.mtr))>-1?(this.toastr.warning("Batch should have mtr/wt."),e=!1,!1):t.batchMW&&t.batchMW.length&&t.batchMW.findIndex(t=>0==t.wt||0==t.mtr)>-1?(this.toastr.warning("Batch mtr/wt. cannot be 0."),e=!1,!1):void 0:(e=!1,!1))}return e&&(e=!1,this.stockBatch.receiveDate&&this.stockBatch.chlDate&&this.stockBatch.chlNo&&this.stockBatch.stockInType&&this.stockBatch.partyId&&this.stockBatch.qualityId&&(e=!0)),e}reset(t){t.reset(),this.totalGrs=0,this.totalMeters=0,this.totalWeights=0,this.formSubmitted=!1,this.stockDataValues=[{batchId:null,pchallanRef:null,totalWt:null,totalMt:null,isNotUnique:!1,isProductionPlanned:!1,batchMW:[{mtr:null,wt:null}]}],this.stockBatch.chlDate=new Date,this.stockBatch.receiveDate=new Date,this.stockBatch.stockInType="Fabric"}checkPChallanUniq(t){let e=!1;this.stockDataValues.forEach((n,i)=>{i!=t&&this.stockDataValues[t].pchallanRef==n.pchallanRef&&(this.stockDataValues[t].isNotUnique=!0,e=!0)}),e||this.stockBatchService.isPchallanExists(this.stockBatch.partyId,this.stockDataValues[t].pchallanRef).pipe(Object(s.a)(this.destroy$)).subscribe(e=>{e.success&&(this.stockDataValues[t].isNotUnique=e.data)},t=>{})}addUpdateStockBatch(t,e){this.disableButton=!0,this.formSubmitted=!0;let n=!1;this.stockDataValues.forEach(t=>{t.isNotUnique&&(n=!0)}),!t.valid&&!this.checkValidation(t)||n?this.disableButton=!1:(this.loading=!0,this.stockBatchArray=[],this.stockBatch.createdBy=this.user.userId,this.stockBatch.userHeadId=this.userHead.userHeadId,this.stockDataValues.forEach(t=>{t.batchMW&&t.batchMW.length&&t.batchMW.forEach(e=>{if(e.mtr&&e.wt){let n={id:0,batchId:0,pchallanRef:0,mtr:0,wt:0,totalMt:0,isNotUnique:!1,totalWt:0,isProductionPlanned:!1,controlId:0};n.id=e.id,n.pchallanRef=t.pchallanRef,n.batchId=t.batchId,n.mtr=e.mtr,n.wt=e.wt,n.totalMt=t.totalMt,n.totalWt=t.totalWt,n.isProductionPlanned=e.isProductionPlanned,n.controlId=e.controlId,this.stockBatchArray.push(n)}})}),this.stockBatch.batchData=this.stockBatchArray,this.addFlag?this.stockBatchService.addPchallan(this.stockBatch).pipe(Object(s.a)(this.destroy$)).subscribe(n=>{n.success?(this.loading=!1,this.reset(t),this.stockDataValues=[],this.disableButton=!1,this.toastr.success(n.msg),e&&this.route.navigate(["/pages/stock-batch/stock-in"],{queryParams:{id:n.data}})):(this.loading=!1,this.disableButton=!1,this.stockBatchArray=[])},t=>{this.loading=!1,this.disableButton=!1,this.stockBatchArray=[]}):(this.stockBatch.updatedBy=this.user.userId,this.stockBatchService.updatePchallan(this.stockBatch).pipe(Object(s.a)(this.destroy$)).subscribe(t=>{t.success?(this.toastr.success(t.msg),e?this.route.navigate(["/pages/stock-batch/stock-in"],{queryParams:{id:t.data}}):this.route.navigate(["/pages/stock-batch"])):(this.disableButton=!1,this.stockBatchArray=[]),this.loading=!1},t=>{this.stockBatchArray=[],this.toastr.error(l.Update_Error),this.loading=!1,this.disableButton=!1,this.loading=!1}),this.loading=!1))}setViewJobValue(t){"view table"===t?this.route.navigate(["/pages/stock-batch/view"]):"job card"===t?(this.selectedTableChange=null,this.modalService.open(w)):"pending"===t?this.route.navigate(["/pages/stock-batch/pending"]):"report"==t&&this.route.navigate(["/pages/all-report"])}gotoNextPage(){this.currentStockBatchId&&this.route.navigate(["/pages/stock-batch/stock-in"],{queryParams:{id:this.currentStockBatchId}})}printJobCard(t,e){this.isDirectPrintFlag=!0;const n=this.modalService.open(k);n.componentInstance.isDirectPrintFlag=this.isDirectPrintFlag,n.componentInstance.stockBatchData=this.stockBatch,n.componentInstance.stockId=Number(e),n.result.then(t=>{this.disableButton=!1})}}return t.\u0275fac=function(e){return new(e||t)(j.dc(b.a),j.dc(D.b),j.dc(c.c),j.dc(m.a),j.dc(f.a),j.dc(c.a),j.dc(P.a),j.dc(h.e),j.dc(_.a),j.dc(j.i))},t.\u0275cmp=j.Xb({type:t,selectors:[["ngx-add-edit-stock-batch"]],viewQuery:function(t,e){var n;1&t&&j.nd(L,!0),2&t&&j.Tc(n=j.vc())&&(e.searchElement=n.first)},features:[j.Ob([{provide:h.b,useClass:h.c}])],decls:138,vars:68,consts:[[3,"show"],["id","target"],[1,"nb-style"],[1,"nb-header"],[1,"row"],[1,"col-md-5","col-6","display-flex-start","max-width-device"],["placeholder","Select",1,"btn","btn-md",3,"ngModel","change","ngModelChange"],["value","pending"],["value","view table"],["value","job card"],["value","return"],["value","report"],[1,"col-md-7","col-6"],[4,"ngIf"],["myForm","ngForm"],[1,"form-group"],[1,"col-md-4","mobile-mr-bt"],[1,"required"],["type","text","name","stockInType","fieldsize","small","nbinput","","value","Fabric","required","","readonly","",1,"form-control","size-small"],["name","partyId","required","",3,"ngModel","ngClass","disabled","ngModelChange","change"],["partyId1","ngModel"],["disabled","true"],[1,"col-md-6","col-6"],[1,"text-left","txt-ov-elips"],[1,"text-right","txt-ov-elips"],[3,"value",4,"ngFor","ngForOf"],["class","input-required",4,"ngIf"],[1,"col-md-4"],["name","qualityId","required","",1,"required-error-dropdown","dropdown-name",3,"ngModel","ngClass","disabled","ngModelChange","change"],["qualityId1","ngModel"],["name","receiveDate","fieldsize","small","nbinput","","required","","placeholder","MM-DD-YYYY",1,"form-control","size-small",3,"ngModel","owlDateTimeTrigger","owlDateTime","max","ngClass","ngModelChange"],["receiveDate1","ngModel"],[3,"pickerType"],["dt2",""],["type","text","name","chlNo","fieldsize","small","nbinput","","required","","min","0",1,"form-control","size-small",3,"ngModel","ngClass","ngModelChange"],["chlNo1","ngModel"],["name","chlDate","fieldsize","small","fullwidth","","nbinput","","required","","placeholder","MM-DD-YYYY",1,"form-control","size-small",3,"ngModel","owlDateTimeTrigger","owlDateTime","max","ngClass","ngModelChange"],["chlDate1","ngModel"],["dt1",""],["type","text","name","unit","fieldsize","small","nbinput","","readonly","",1,"form-control","size-small",3,"ngModel","ngModelChange"],["unit1","ngModel"],["type","text","name","wtPer100M","fieldsize","small","nbinput","",1,"form-control","size-small",3,"ngModel","readOnly","ngModelChange"],["wtPer100M1","ngModel"],["type","text","name","remark",1,"form-control",3,"ngModel","ngModelChange"],["remark1","ngModel"],[1,"batch-header","batch-card-margin"],[1,"batch-heading","display-inline"],[1,"col-md-8"],[1,"row","totals"],[1,"col-md-4","pt-2"],[2,"color","white"],["class","col-md-6",4,"ngFor","ngForOf"],[1,"col-md-3"],[1,"nb-icon-add"],["media","Linkedin",1,"link-fab","linkedin"],[1,"tooltip"],["icon","plus",1,"add-icon","display-inline",3,"options","click"],[1,"col-md-9","mobile-btn-center","text-btn-right","mt-50"],["class","btn btn-primary btn-sm btn-design-cancel","type","button",3,"click",4,"ngIf"],["class","btn btn-primary btn-sm btn-design-cancel","type","button",3,"routerLink",4,"ngIf"],["type","button","class","btn btn-primary btn-sm btn-design-save mob-stock button-base ripple",3,"disabled","click",4,"ngIf"],["type","button","class","btn btn-primary btn-sm btn-design-save button-base ripple",3,"disabled","click",4,"ngIf"],["type","button",1,"btn","btn-primary","btn-sm","btn-design-save","mob-stock","button-base","ripple",3,"disabled","click"],[1,"nb-text","txt-ov-elips"],[3,"value"],[1,"input-required"],[1,"col-md-6"],[3,"disabled"],[1,"padding-box"],[1,"col-md-6","col-8"],["required","","type","text","fieldsize","small","nbinput","","min","0",1,"form-control","size-small",3,"ngModel","disabled","name","ngModelChange","change","click"],["class","input-required","style","display: block !important;",4,"ngIf"],["class","col-md-6 col-4 display-flex-end",4,"ngIf"],[1,"form-group","mr-0"],[1,"col-md-12","col-12"],[1,"material","common-table","datatable-auto-height","box-shadow-none","box-mr-bt","stock-table-body-height",3,"rows","headerHeight","footerHeight","scrollbarV"],["table",""],["name","Meter","prop","mtr",1,"table-row",3,"sortable","width"],["ngx-datatable-cell-template",""],["name","Weight","prop","wt",3,"sortable","width"],["name","Action","sortable","false"],["ngx-datatable-footer-template",""],[1,"input-required",2,"display","block !important"],[1,"col-md-6","col-4","display-flex-end"],["status","danger","icon","trash",3,"options","click"],["type","number","required","","min","0",1,"tableForm",3,"ngModel","id","name","ngClass","disabled","keyup","ngModelChange","input"],["forFocus","","meter1","ngModel"],["class","input-required display-inlineblock","min","0",4,"ngIf"],["min","0",1,"input-required","display-inlineblock"],["type","number","required","","min","0",1,"tableForm",3,"name","ngModel","id","ngClass","disabled","ngModelChange","keyup","input"],["weight1","ngModel"],["icon","trash","status","danger",3,"hidden","options","click"],[1,"toal-finish-mtr"],["type","button",1,"btn","btn-primary","btn-sm","btn-design-cancel",3,"click"],["type","button",1,"btn","btn-primary","btn-sm","btn-design-cancel",3,"routerLink"],["type","button",1,"btn","btn-primary","btn-sm","btn-design-save","button-base","ripple",3,"disabled","click"]],template:function(t,e){if(1&t){const t=j.kc();j.ec(0,"ngx-loading",0),j.ec(1,"div",1),j.jc(2,"nb-card",2),j.jc(3,"nb-card-header",3),j.jc(4,"div",4),j.jc(5,"div",5),j.jc(6,"ng-select",6),j.uc("change",(function(t){return e.setViewJobValue(t)}))("ngModelChange",(function(t){return e.selectedTableChange=t})),j.jc(7,"ng-option",7),j.jd(8,"Pending batches"),j.ic(),j.jc(9,"ng-option",8),j.jd(10,"View Table"),j.ic(),j.jc(11,"ng-option",9),j.jd(12,"Job Card"),j.ic(),j.jc(13,"ng-option",10),j.jd(14,"Lot return"),j.ic(),j.jc(15,"ng-option",11),j.jd(16,"Report"),j.ic(),j.ic(),j.ic(),j.jc(17,"div",12),j.hd(18,N,3,0,"div",13),j.hd(19,H,3,0,"div",13),j.ic(),j.ic(),j.ic(),j.jc(20,"nb-card-body"),j.jc(21,"div"),j.jc(22,"form",null,14),j.jc(24,"div",15),j.jc(25,"div",4),j.jc(26,"div",16),j.jc(27,"label",17),j.jd(28,"Stock In Type"),j.ic(),j.ec(29,"input",18),j.ic(),j.jc(30,"div",16),j.jc(31,"label",17),j.jd(32,"Party Name"),j.ic(),j.jc(33,"ng-select",19,20),j.uc("ngModelChange",(function(t){return e.stockBatch.partyId=t}))("change",(function(t){return e.setQualityByParty(t)})),j.jc(35,"ng-option",21),j.jc(36,"div",4),j.jc(37,"div",22),j.jc(38,"div",23),j.jd(39,"Party Name "),j.ic(),j.ic(),j.jc(40,"div",22),j.jc(41,"div",24),j.jd(42," Party Code"),j.ic(),j.ic(),j.ic(),j.ic(),j.hd(43,R,8,3,"ng-option",25),j.ic(),j.hd(44,q,3,0,"div",26),j.ic(),j.jc(45,"div",27),j.jc(46,"label",17),j.jd(47,"Quality:"),j.ic(),j.jc(48,"ng-select",28,29),j.uc("ngModelChange",(function(t){return e.stockBatch.qualityId=t}))("change",(function(t){return e.getUnit(t)})),j.jc(50,"ng-option",21),j.jc(51,"div",4),j.jc(52,"div",22),j.jc(53,"div",23),j.jd(54,"Quality Id"),j.ic(),j.ic(),j.jc(55,"div",22),j.jc(56,"div",24),j.jd(57,"Quality Name"),j.ic(),j.ic(),j.ic(),j.ic(),j.hd(58,F,8,3,"ng-option",25),j.ic(),j.hd(59,W,3,0,"div",26),j.ic(),j.ic(),j.ic(),j.jc(60,"div",15),j.jc(61,"div",4),j.jc(62,"div",16),j.jc(63,"label",17),j.jd(64,"Receive Date:"),j.ic(),j.jc(65,"input",30,31),j.uc("ngModelChange",(function(t){return e.stockBatch.receiveDate=t})),j.ic(),j.ec(67,"owl-date-time",32,33),j.hd(69,A,3,0,"div",26),j.ic(),j.jc(70,"div",27),j.jc(71,"label",17),j.jd(72,"Challan No"),j.ic(),j.jc(73,"input",34,35),j.uc("ngModelChange",(function(t){return e.stockBatch.chlNo=t})),j.ic(),j.hd(75,V,3,0,"div",26),j.ic(),j.jc(76,"div",16),j.jc(77,"label",17),j.jd(78,"Challan Date:"),j.ic(),j.jc(79,"input",36,37),j.uc("ngModelChange",(function(t){return e.stockBatch.chlDate=t})),j.ic(),j.ec(81,"owl-date-time",32,38),j.hd(83,E,3,0,"div",26),j.ic(),j.ic(),j.ic(),j.jc(84,"div",15),j.jc(85,"div",4),j.jc(86,"div",16),j.jc(87,"label"),j.jd(88,"Unit:"),j.ic(),j.jc(89,"input",39,40),j.uc("ngModelChange",(function(t){return e.stockBatch.unit=t})),j.ic(),j.ic(),j.jc(91,"div",16),j.jc(92,"label"),j.jd(93,"Wt / 100 mtrs:"),j.ic(),j.jc(94,"input",41,42),j.uc("ngModelChange",(function(t){return e.stockBatch.wtPer100m=t})),j.ic(),j.ic(),j.jc(96,"div",27),j.jc(97,"label"),j.jd(98,"Remark"),j.ic(),j.jc(99,"input",43,44),j.uc("ngModelChange",(function(t){return e.stockBatch.remark=t})),j.ic(),j.ic(),j.ic(),j.ic(),j.jc(101,"div"),j.jc(102,"header",45),j.jc(103,"div",4),j.jc(104,"div",27),j.jc(105,"h2",46),j.jd(106,"BATCH"),j.ic(),j.ic(),j.jc(107,"div",47),j.jc(108,"div",48),j.jc(109,"div",49),j.jc(110,"h6",50),j.jd(111),j.zc(112,"number"),j.ic(),j.ic(),j.jc(113,"div",49),j.jc(114,"h6",50),j.jd(115),j.zc(116,"number"),j.ic(),j.ic(),j.jc(117,"div",49),j.jc(118,"h6",50),j.jd(119),j.zc(120,"number"),j.ic(),j.ic(),j.ic(),j.ic(),j.ic(),j.ic(),j.jc(121,"div",4),j.hd(122,et,27,19,"div",51),j.ic(),j.jc(123,"div",4),j.jc(124,"div",52),j.jc(125,"div",53),j.jc(126,"a",54),j.jc(127,"div",55),j.jd(128,"Add Batch"),j.ic(),j.jc(129,"nb-icon",56),j.uc("click",(function(t){return e.addNewBatch(t)})),j.ic(),j.ic(),j.ic(),j.ic(),j.jc(130,"div",57),j.hd(131,nt,2,0,"button",58),j.hd(132,ct,2,2,"button",59),j.hd(133,ot,2,1,"button",60),j.hd(134,at,2,1,"button",61),j.jc(135,"button",62),j.uc("click",(function(){j.Xc(t);const n=j.Uc(23);return e.addUpdateStockBatch(n,!0)})),j.jd(136,"SAVE & NEXT"),j.ic(),j.hd(137,st,2,1,"button",60),j.ic(),j.ic(),j.ic(),j.ic(),j.ic(),j.ic(),j.ic()}if(2&t){const t=j.Uc(34),n=j.Uc(49),i=j.Uc(66),c=j.Uc(68),o=j.Uc(74),a=j.Uc(80),s=j.Uc(82);j.Hc("show",e.loading),j.Pb(6),j.Hc("ngModel",e.selectedTableChange),j.Pb(12),j.Hc("ngIf",e.addFlag),j.Pb(1),j.Hc("ngIf",!e.addFlag),j.Pb(14),j.Hc("ngModel",e.stockBatch.partyId)("ngClass",j.Nc(55,Q,t.invalid&&(e.formSubmitted||t.touched)))("disabled",e.stockDataValues&&e.stockDataValues[0]),j.Pb(10),j.Hc("ngForOf",e.partyList),j.Pb(1),j.Hc("ngIf",t.invalid&&(e.formSubmitted||t.touched)),j.Pb(4),j.Hc("ngModel",e.stockBatch.qualityId)("ngClass",j.Nc(57,Q,n.invalid&&(e.formSubmitted||n.touched)))("disabled",e.stockDataValues&&e.stockDataValues[0]),j.Pb(10),j.Hc("ngForOf",e.qualityList),j.Pb(1),j.Hc("ngIf",n.invalid&&(e.formSubmitted||n.touched)),j.Pb(6),j.Hc("ngModel",e.stockBatch.receiveDate)("owlDateTimeTrigger",c)("owlDateTime",c)("max",e.maxDate)("ngClass",j.Nc(59,Q,e.formSubmitted&&i.invalid||i.invalid&&i.touched)),j.Pb(2),j.Hc("pickerType","calendar"),j.Pb(2),j.Hc("ngIf",e.formSubmitted&&i.invalid||i.invalid&&i.touched),j.Pb(4),j.Hc("ngModel",e.stockBatch.chlNo)("ngClass",j.Nc(61,Q,e.formSubmitted&&o.invalid||o.invalid&&o.touched)),j.Pb(2),j.Hc("ngIf",e.formSubmitted&&o.invalid||o.invalid&&o.touched),j.Pb(4),j.Hc("ngModel",e.stockBatch.chlDate)("owlDateTimeTrigger",s)("owlDateTime",s)("max",e.maxDate)("ngClass",j.Nc(63,Q,e.formSubmitted&&a.invalid||a.invalid&&a.touched)),j.Pb(2),j.Hc("pickerType","calendar"),j.Pb(2),j.Hc("ngIf",e.formSubmitted&&a.invalid||a.invalid&&a.touched),j.Pb(6),j.Hc("ngModel",e.stockBatch.unit),j.Pb(5),j.Hc("ngModel",e.stockBatch.wtPer100m)("readOnly",e.stockDataValues&&e.stockDataValues[0]),j.Pb(5),j.Hc("ngModel",e.stockBatch.remark),j.Pb(12),j.ld("Total Mtr: ",j.Bc(112,46,e.totalMeters,"1.2-2"),""),j.Pb(4),j.ld("Total Wt : ",j.Bc(116,49,e.totalWeights,"1.2-2"),""),j.Pb(4),j.ld("Total Gr : ",j.Bc(120,52,e.totalGrs,"1.2-2"),""),j.Pb(3),j.Hc("ngForOf",e.stockDataValues),j.Pb(7),j.Hc("options",j.Nc(66,G,j.Mc(65,U))),j.Pb(2),j.Hc("ngIf",e.addFlag),j.Pb(1),j.Hc("ngIf",!e.addFlag),j.Pb(1),j.Hc("ngIf",e.addFlag),j.Pb(1),j.Hc("ngIf",!e.addFlag),j.Pb(1),j.Hc("disabled",e.disableButton),j.Pb(2),j.Hc("ngIf",!e.addFlag)}},directives:[B.a,C.u,C.x,S.a,x.l,x.o,S.c,i.n,C.t,x.x,x.m,x.n,x.t,i.l,i.m,x.a,_.c,_.e,_.b,C.I,I.e,I.b,I.a,I.f,I.d,x.q,c.d],pipes:[i.f],styles:[".display[_ngcontent-%COMP%]{border-color:transparent}.required-class[_ngcontent-%COMP%]{display:contents!important;width:100%;margin-top:.25rem;font-size:80%;color:#dc3545}"]}),t})();var lt=n("kF6S"),dt=n("Cma1"),ht=n("mTc1");function gt(t,e){if(1&t){const t=j.kc();j.jc(0,"nb-radio",27),j.uc("valueChange",(function(e){return j.Xc(t),j.yc().onChange(e)})),j.jd(1),j.ic()}if(2&t){const t=e.$implicit;j.Hc("value",t.id)("disabled",t.disabled),j.Pb(1),j.ld(" ",t.value,"")}}const pt=function(){return{type:"zoom"}},ut=function(t){return{animation:t}},bt=function(t){return["/pages/stock-batch/edit",t]};function mt(t,e){if(1&t){const t=j.kc();j.ec(0,"nb-icon",29),j.jc(1,"nb-icon",30),j.uc("click",(function(){j.Xc(t);const n=e.row;return j.yc(2).deleteStockBatch(n.id)})),j.zc(2,"disableStockBatchPipe"),j.ic(),j.jc(3,"nb-icon",31),j.uc("click",(function(){j.Xc(t);const n=e.row;return j.yc(2).printJobCard(n)})),j.zc(4,"disableStockBatchPipe"),j.ic()}if(2&t){const t=e.row,n=j.yc(2);j.Hc("options",j.Nc(12,ut,j.Mc(11,pt)))("hidden",n.hiddenEdit)("routerLink",j.Nc(14,bt,t.id)),j.Pb(1),j.Hc("options",j.Nc(17,ut,j.Mc(16,pt)))("hidden",n.hidden||j.Ac(2,7,t)),j.Pb(2),j.Hc("hidden",j.Ac(4,9,t))("options",j.Nc(20,ut,j.Mc(19,pt)))}}function ft(t,e){1&t&&(j.jc(0,"ngx-datatable-column",28),j.hd(1,mt,5,22,"ng-template",25),j.ic()),2&t&&j.Hc("maxWidth",90)}function Pt(t,e){if(1&t&&(j.hc(0),j.jc(1,"span",33),j.jd(2),j.ic(),j.gc()),2&t){const t=e.$implicit;j.Pb(2),j.ld("",t.batchId," ")}}function Mt(t,e){1&t&&j.hd(0,Pt,3,1,"ng-container",32),2&t&&j.Hc("ngForOf",e.row.batchList)}const jt=function(){return["/pages/stock-batch"]};let Ct=(()=>{class t{constructor(t,e,n,i,c,o){this.route=t,this.modalService=e,this.toastr=n,this.stockBatchGuard=i,this.stockBatchService=c,this.commonService=o,this.errorData=l,this.loading=!1,this.copyStockList=[],this.stock=[],this.headers=["Stock In Type","Party Name","Bill No","Bill Date","Chl No","Chl Date"],this.module="stock-batch",this.flag=!1,this.disabled=!1,this.tablestyle="bootstrap",this.radioSelect=0,this.radioArray=[{id:1,value:"View Own",disabled:!1},{id:2,value:"View Group",disabled:!1},{id:3,value:"View All",disabled:!1}],this.hidden=!0,this.hiddenEdit=!0,this.hiddenView=!0,this.ownDelete=!0,this.allDelete=!0,this.groupDelete=!0,this.ownEdit=!0,this.allEdit=!0,this.groupEdit=!0,this.destroy$=new r.a}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}ngOnInit(){this.userId=this.commonService.getUser(),this.userId=this.userId.userId,this.userHeadId=this.commonService.getUserHeadId(),this.userHeadId=this.userHeadId.userHeadId,this.getAddAcess(),this.getViewAccess(),this.getDeleteAccess(),this.getDeleteAccess1(),this.getEditAccess(),this.getEditAccess1(),this.stockBatchGuard.accessRights("view all")?(this.getStockBatchList(0,"all"),this.hidden=this.allDelete,this.hiddenEdit=this.allEdit,this.radioSelect=3):this.stockBatchGuard.accessRights("view group")?(this.getStockBatchList(this.userId,"group"),this.hidden=this.groupDelete,this.hiddenEdit=this.groupEdit,this.radioSelect=2):this.stockBatchGuard.accessRights("view")&&(this.getStockBatchList(this.userId,"own"),this.hidden=this.ownDelete,this.hiddenEdit=this.ownEdit,this.radioSelect=1)}getAddAcess(){this.disabled=!this.stockBatchGuard.accessRights("add")}open(){let t=/([A-Z])([A-Z])([a-z])|([a-z])([A-Z])/g;this.flag=!0;let e=Object.keys(this.stockList[0]),n=[];e.forEach((e,i)=>{n.push(e.replace(t,"$1$4 $2$3$5")),n[i]=n[i].charAt(0).toUpperCase()+n[i].slice(1)});const i=this.modalService.open(dt.a);i.componentInstance.headers=n,i.componentInstance.list=this.stockList,i.componentInstance.moduleName=this.module}onChange(t){switch(this.stockList=[],t){case 1:this.getStockBatchList(this.userId,"own"),this.hidden=this.ownDelete,this.hiddenEdit=this.ownEdit;break;case 2:this.getStockBatchList(this.userId,"group"),this.hidden=this.groupDelete,this.hiddenEdit=this.groupEdit;break;case 3:this.getStockBatchList(0,"all"),this.hidden=this.allDelete,this.hiddenEdit=this.allEdit}}deleteStockBatch(t){this.modalService.open(lt.a,{size:"sm"}).result.then(e=>{e&&this.stockBatchService.deleteStockBatchById(t).pipe(Object(s.a)(this.destroy$)).subscribe(t=>{t.success&&(this.toastr.success(l.Delete),this.onChange(this.radioSelect))},t=>{this.toastr.error(l.Internal_Error)})})}filter(t){const e=t.toString().toLowerCase().trim();this.stockList=e?this.copyStockList.filter(t=>this.matchString(t,"partyName",e)||this.matchString(t,"qualityName",e)||this.matchString(t,"chlNo",e)||this.matchString(t,"batchId",e)||this.matchString(t,"stockInType",e)):Object(d.cloneDeep)(this.copyStockList)}matchString(t,e,n){return"batchId"==e?t.batchData.filter(t=>t.batchId.toLowerCase().includes(n)).length>0:t[e].toLowerCase().includes(n)}getStockBatchList(t,e){this.loading=!0,this.stockBatchService.getAvailableStockBatchList(t,e).pipe(Object(s.a)(this.destroy$)).subscribe(t=>{if(t.success){this.stockList=t.data,this.stockList=this.stockList.map(t=>({id:t.id,stockInType:t.stockInType,partyName:t.partyName,qualityName:t.qualityName,batchList:t.batchList,chlNo:t.chlNo}));let e=0;this.stockList.forEach(t=>{this.stockList[e].billDate=new Date(t.billDate).toDateString(),this.stockList[e].chlDate=new Date(t.chlDate).toDateString(),e++}),this.copyStockList=Object(d.cloneDeep)(this.stockList)}this.loading=!1},t=>{this.loading=!1})}getViewAccess(){this.radioArray[0].disabled=!this.stockBatchGuard.accessRights("view"),this.radioArray[1].disabled=!this.stockBatchGuard.accessRights("view group"),this.radioArray[2].disabled=!this.stockBatchGuard.accessRights("view all")}getDeleteAccess(){this.stockBatchGuard.accessRights("delete")&&(this.ownDelete=!1,this.hidden=this.ownDelete),this.stockBatchGuard.accessRights("delete group")&&(this.groupDelete=!1,this.hidden=this.groupDelete),this.stockBatchGuard.accessRights("delete all")&&(this.allDelete=!1,this.hidden=this.allDelete)}getDeleteAccess1(){this.stockBatchGuard.accessRights("delete")?(this.ownDelete=!1,this.hidden=this.ownDelete):this.hidden=!0}getEditAccess(){this.stockBatchGuard.accessRights("edit")&&(this.ownEdit=!1,this.hiddenEdit=this.ownEdit),this.stockBatchGuard.accessRights("edit group")&&(this.groupEdit=!1,this.hiddenEdit=this.groupEdit),this.stockBatchGuard.accessRights("edit all")&&(this.allEdit=!1,this.hiddenEdit=this.allEdit)}getEditAccess1(){this.stockBatchGuard.accessRights("edit")?(this.ownEdit=!1,this.hiddenEdit=this.ownEdit):this.hiddenEdit=!0}printJobCard(t){const e=this.modalService.open(k);e.componentInstance.isDirectPrintFlag=!0,e.componentInstance.stockBatchData=t,e.componentInstance.stockId=Number(t.id),e.result.then(t=>{})}setViewJobValue(t){"view table"===t?this.route.navigate(["/pages/stock-batch/view"]):"add"===t&&this.route.navigate(["/pages/stock-batch"])}}return t.\u0275fac=function(e){return new(e||t)(j.dc(c.c),j.dc(h.e),j.dc(D.b),j.dc(o.a),j.dc(f.a),j.dc(P.a))},t.\u0275cmp=j.Xb({type:t,selectors:[["ngx-available-batches"]],decls:36,vars:13,consts:[[3,"show"],[1,"row"],[1,"col-lg-12"],[1,"nb-style"],[1,"nb-header"],[1,"col-md-3","col-5","display-flex-start","max-width-device"],["placeholder","Select",1,"btn","btn-md",2,"width","170px",3,"change"],["value","view table"],["value","add"],[1,"col-md-2","col-2","display-flex-start"],[1,"btn","btn-primary","btn-md","btn-design",3,"routerLink","disabled"],[1,"col-md-5","col-5"],[1,"nb-text"],[1,"col-md-2","col-2","display-flex-start","desktop-justify-flexend"],[1,"btn","btn-primary","btn-md","btn-design",3,"click"],[1,"col-md-6"],[1,"nb-radio",3,"ngModel","ngModelChange"],[3,"value","disabled","valueChange",4,"ngFor","ngForOf"],["type","text","placeholder","Search","aria-label","Search","aria-describedby","basic-addon1",1,"form-control",3,"keyup"],[1,"material","table-responsive",3,"rows","ngClass","headerHeight","footerHeight"],["name","Actions","sortable","false","prop","id",3,"maxWidth",4,"ngIf"],["name","Stock In Type","props","stockInType",3,"maxWidth"],["name","Party Name","props","partyName"],["name","Quality Name","props","qualityName"],["name","Batch","prop","batchList"],["ngx-datatable-cell-template",""],["name","Chl No","props","chlNo",3,"maxWidth"],[3,"value","disabled","valueChange"],["name","Actions","sortable","false","prop","id",3,"maxWidth"],["status","primary","icon","edit",3,"options","hidden","routerLink"],["status","danger","icon","trash",3,"options","hidden","click"],["icon","clipboard","nbTooltip","Print","nbTooltipStatus","primary","status","danger",3,"hidden","options","click"],[4,"ngFor","ngForOf"],[1,"invpice-batch-style"]],template:function(t,e){1&t&&(j.ec(0,"ngx-loading",0),j.jc(1,"div",1),j.jc(2,"div",2),j.jc(3,"nb-card",3),j.jc(4,"nb-card-header",4),j.jc(5,"div",1),j.jc(6,"div",5),j.jc(7,"ng-select",6),j.uc("change",(function(t){return e.setViewJobValue(t)})),j.jc(8,"ng-option",7),j.jd(9,"View Table"),j.ic(),j.jc(10,"ng-option",8),j.jd(11,"Add Stock-batch"),j.ic(),j.ic(),j.ic(),j.jc(12,"div",9),j.jc(13,"button",10),j.jd(14,"ADD"),j.ic(),j.ic(),j.jc(15,"div",11),j.jc(16,"h2",12),j.jd(17,"Pending Stock-Batch"),j.ic(),j.ic(),j.jc(18,"div",13),j.jc(19,"button",14),j.uc("click",(function(){return e.open()})),j.jd(20,"EXPORT"),j.ic(),j.ic(),j.ic(),j.ic(),j.jc(21,"nb-card-body"),j.jc(22,"div",1),j.jc(23,"div",15),j.jc(24,"nb-radio-group",16),j.uc("ngModelChange",(function(t){return e.radioSelect=t})),j.hd(25,gt,2,3,"nb-radio",17),j.ic(),j.ic(),j.jc(26,"div",15),j.jc(27,"input",18),j.uc("keyup",(function(t){return e.filter(t.target.value)})),j.ic(),j.ic(),j.ic(),j.jc(28,"ngx-datatable",19),j.hd(29,ft,2,1,"ngx-datatable-column",20),j.ec(30,"ngx-datatable-column",21),j.ec(31,"ngx-datatable-column",22),j.ec(32,"ngx-datatable-column",23),j.jc(33,"ngx-datatable-column",24),j.hd(34,Mt,1,1,"ng-template",25),j.ic(),j.ec(35,"ngx-datatable-column",26),j.ic(),j.ic(),j.ic(),j.ic(),j.ic()),2&t&&(j.Hc("show",e.loading),j.Pb(13),j.Hc("routerLink",j.Mc(12,jt))("disabled",e.disabled),j.Pb(11),j.Hc("ngModel",e.radioSelect),j.Pb(1),j.Hc("ngForOf",e.radioArray),j.Pb(3),j.Hc("rows",e.stockList)("ngClass",e.tablestyle)("headerHeight",31)("footerHeight",40),j.Pb(1),j.Hc("ngIf",!e.hiddenEdit||!e.hidden),j.Pb(1),j.Hc("maxWidth",130),j.Pb(5),j.Hc("maxWidth",130))},directives:[B.a,C.u,C.x,S.a,S.c,c.d,C.t,C.eb,x.l,x.o,i.m,I.e,i.l,i.n,I.b,I.a,C.db,C.I,C.yb],pipes:[ht.a],styles:[""]}),t})();var vt=n("3jao"),yt=n("qZsz"),Ot=n("dfbw"),kt=n("+lss");const _t=["searchfilter"];function xt(t,e){if(1&t){const t=j.kc();j.jc(0,"div",42),j.jc(1,"span",43),j.jd(2),j.ic(),j.jd(3," : "),j.jc(4,"span",44),j.jd(5),j.ic(),j.jc(6,"span",45),j.uc("click",(function(){j.Xc(t);const n=e.$implicit;return j.yc(2).onClear(n.field[0])})),j.jc(7,"strong"),j.jd(8,"x"),j.ic(),j.ic(),j.ic()}if(2&t){const t=e.$implicit;j.Pb(2),j.kd(t.field[0]),j.Pb(3),j.kd(t.value)}}function wt(t,e){if(1&t){const t=j.kc();j.hc(0),j.jc(1,"div",36),j.jc(2,"label",37),j.jd(3,"Filter By : "),j.ic(),j.jc(4,"div",38),j.jc(5,"div",39),j.hd(6,xt,9,2,"div",40),j.jc(7,"div",41),j.uc("click",(function(){return j.Xc(t),j.yc().onClearFilter()})),j.jd(8,"Clear All"),j.ic(),j.ic(),j.ic(),j.ic(),j.gc()}if(2&t){const t=j.yc();j.Pb(6),j.Hc("ngForOf",t.requestData.data.parameters)}}const Dt=function(){return{type:"zoom"}},Bt=function(t){return{animation:t}};function St(t,e){if(1&t){const t=j.kc();j.jc(0,"nb-icon",46),j.uc("click",(function(){j.Xc(t);const n=e.row;return j.yc().print(n)})),j.ic()}2&t&&j.Hc("options",j.Nc(2,Bt,j.Mc(1,Dt)))}function It(t,e){if(1&t){const t=j.kc();j.jd(0,"Chl No "),j.jc(1,"div",47),j.jc(2,"nb-icon",48),j.uc("click",(function(){return j.Xc(t),j.yc().onOpenFilter("chlNo")})),j.ic(),j.ic()}if(2&t){j.yc();const t=j.Uc(56);j.Pb(2),j.Hc("nbPopover",t)}}function Lt(t,e){if(1&t){const t=j.kc();j.jd(0,"Party Name "),j.jc(1,"div",47),j.jc(2,"nb-icon",48),j.uc("click",(function(){return j.Xc(t),j.yc().onOpenFilter("partyName")})),j.ic(),j.ic()}if(2&t){j.yc();const t=j.Uc(56);j.Pb(2),j.Hc("nbPopover",t)}}function Nt(t,e){if(1&t){const t=j.kc();j.jd(0,"Quality Name "),j.jc(1,"div",47),j.jc(2,"nb-icon",48),j.uc("click",(function(){return j.Xc(t),j.yc().onOpenFilter("qualityName")})),j.ic(),j.ic()}if(2&t){j.yc();const t=j.Uc(56);j.Pb(2),j.Hc("nbPopover",t)}}function Ht(t,e){if(1&t&&(j.hc(0),j.jc(1,"span",50),j.jd(2),j.ic(),j.gc()),2&t){const t=e.$implicit;j.Pb(2),j.md("",t.mtr," Mtr. (",t.wt," Wt.) ")}}function Rt(t,e){1&t&&j.hd(0,Ht,3,2,"ng-container",49),2&t&&j.Hc("ngForOf",e.row.batchReturnList)}function qt(t,e){if(1&t){const t=j.kc();j.jd(0,"Delivery Person "),j.jc(1,"div",47),j.jc(2,"nb-icon",48),j.uc("click",(function(){return j.Xc(t),j.yc().onOpenFilter("broker")})),j.ic(),j.ic()}if(2&t){j.yc();const t=j.Uc(56);j.Pb(2),j.Hc("nbPopover",t)}}function Ft(t,e){if(1&t){const t=j.kc();j.jd(0,"Tempo No "),j.jc(1,"div",47),j.jc(2,"nb-icon",48),j.uc("click",(function(){return j.Xc(t),j.yc().onOpenFilter("tempoNo")})),j.ic(),j.ic()}if(2&t){j.yc();const t=j.Uc(56);j.Pb(2),j.Hc("nbPopover",t)}}function Wt(t,e){if(1&t&&(j.jc(0,"option",51),j.jd(1),j.ic()),2&t){const t=e.$implicit;j.Hc("value",t),j.Pb(1),j.kd(t)}}function At(t,e){if(1&t){const t=j.kc();j.hc(0),j.jc(1,"ng-select",63),j.uc("ngModelChange",(function(e){return j.Xc(t),j.yc(2).operatorSelected=e})),j.jc(2,"ng-option",64),j.jd(3,"Conatins"),j.ic(),j.jc(4,"ng-option",65),j.jd(5,"Equals"),j.ic(),j.jc(6,"ng-option",66),j.jd(7,"Not Equals"),j.ic(),j.jc(8,"ng-option",67),j.jd(9,"Starts With"),j.ic(),j.jc(10,"ng-option",68),j.jd(11,"Ends With"),j.ic(),j.ic(),j.gc()}if(2&t){const t=j.yc(2);j.Pb(1),j.Hc("ngModel",t.operatorSelected)}}function Vt(t,e){if(1&t){const t=j.kc();j.hc(0),j.jc(1,"ng-select",63),j.uc("ngModelChange",(function(e){return j.Xc(t),j.yc(2).operatorSelected=e})),j.jc(2,"ng-option",69),j.jd(3,"Greater Than"),j.ic(),j.jc(4,"ng-option",70),j.jd(5,"Less Than"),j.ic(),j.jc(6,"ng-option",65),j.jd(7,"Equals"),j.ic(),j.jc(8,"ng-option",66),j.jd(9,"Not Equals"),j.ic(),j.ic(),j.gc()}if(2&t){const t=j.yc(2);j.Pb(1),j.Hc("ngModel",t.operatorSelected)}}function Et(t,e){if(1&t){const t=j.kc();j.jc(0,"div",52),j.jc(1,"div",53),j.jc(2,"div",54),j.jc(3,"span",55),j.jd(4,"Filter"),j.ic(),j.ic(),j.jc(5,"div",56),j.jc(6,"div",57),j.uc("click",(function(){return j.Xc(t),j.yc().closeFilterPopover()})),j.jc(7,"strong"),j.jd(8,"X"),j.ic(),j.ic(),j.ic(),j.ic(),j.jc(9,"div",58),j.jc(10,"div",59),j.hd(11,At,12,1,"ng-container",21),j.hd(12,Vt,10,1,"ng-container",21),j.ic(),j.jc(13,"div",59),j.jc(14,"input",60),j.uc("ngModelChange",(function(e){return j.Xc(t),j.yc().filterWord=e})),j.ic(),j.ic(),j.ic(),j.jc(15,"button",61),j.uc("click",(function(){return j.Xc(t),j.yc().onApplyFilter()})),j.jd(16,"Apply"),j.ic(),j.jc(17,"button",62),j.uc("click",(function(){return j.Xc(t),j.yc().closeFilterPopover()})),j.jd(18,"Close"),j.ic(),j.ic()}if(2&t){const t=j.yc();j.Pb(11),j.Hc("ngIf",t.stringFlag),j.Pb(1),j.Hc("ngIf",t.numberFlag),j.Pb(2),j.Hc("ngModel",t.filterWord)}}let zt=(()=>{class t{constructor(t,e,n){this.lotReturnService=t,this.route=e,this.modalService=n,this.loading=!1,this.disabled=!1,this.tablestyle="bootstrap",this.searchStr="",this.radioSelect=0,this.radioArray=[{id:1,value:"View Own",disabled:!1},{id:2,value:"View Group",disabled:!1},{id:3,value:"View All",disabled:!1}],this.stockList=[],this.copyStockList=[],this.tableHeaders=["chlNo","partyName","qualityName","batchReturnList","broker","tempoNo"],this.numberFlag=!1,this.stringFlag=!1,this.pageSizes=[10,20,50,100],this.selectedPageSize=20,this.requestData=new Ot.a,this.filterWord="",this.selectedColumnForFilter="",this.operatorSelected=null,this.destroy$=new r.a}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}ngOnInit(){this.requestData.data=new vt.a,this.requestData.getBy="all",this.getAllReturnLots()}getAllReturnLots(){this.loading=!0,this.lotReturnService.returnLotgetAllPaginated(this.requestData).pipe(Object(s.a)(this.destroy$)).subscribe(t=>{if(t.success){const e=t.data;this.copyStockList=this.stockList=e.data,this.requestData.data.total=e.total}this.loading=!1},t=>{this.loading=!1})}filter(t){const e=t.toString().toLowerCase().trim();this.stockList=e?this.copyStockList.filter(t=>this.matchString(t,"partyName",e)||this.matchString(t,"qualityName",e)||this.matchString(t,"chlNo",e)||this.matchString(t,"batchId",e)||this.matchString(t,"broker",e)||this.matchString(t,"tempoNo",e)):Object(d.cloneDeep)(this.copyStockList)}matchString(t,e,n){return"batchId"==e?t.batchReturnList.filter(t=>t.mtr.toString().toLowerCase().includes(n)||t.wt.toString().toLowerCase().includes(n)).length>0:t[e].toString().toLowerCase().includes(n)}print(t){this.route.navigate(["pages/stock-batch/return-lot/print"],{queryParams:{chlNo:t.chlNo}})}setViewJobValue(t){"view table"===t?this.route.navigate(["/pages/stock-batch/view"]):"job card"===t?this.modalService.open(w):"pending"===t?this.route.navigate(["/pages/stock-batch/pending"]):"return"==t&&this.route.navigate(["/pages/stock-batch/return-lot"])}setPage(t){this.requestData.data.pageIndex=t.offset,this.getAllReturnLots()}pageSizeChanged(){this.requestData.data.pageSize=Number(this.selectedPageSize),this.getAllReturnLots()}onOpenFilter(t){this.stringFlag=!0,this.numberFlag=!1;const e=this.requestData.data.parameters.findIndex(e=>e.field.find(e=>e==t));e>-1?(this.filterWord=this.requestData.data.parameters[e].value,this.operatorSelected=this.requestData.data.parameters[e].operator):(this.filterWord="",this.operatorSelected=null),this.selectedColumnForFilter=t,this.popover.show()}onApplyFilter(){this.popover.hide();const t=this.requestData.data.parameters.findIndex(t=>t.field.find(t=>t==this.selectedColumnForFilter));if(t>-1)this.requestData.data.parameters[t].operator=this.operatorSelected,this.requestData.data.parameters[t].value=this.filterWord;else{let t=new yt.a;t.field=[this.selectedColumnForFilter],t.value=this.filterWord,t.operator=this.operatorSelected,this.requestData.data.parameters.push(t)}this.requestData.data.pageIndex=0,this.getAllReturnLots()}onClear(t){let e;e=this.requestData.data.parameters.findIndex(t?e=>e.field.find(e=>e==t):t=>t.field.find(t=>t==this.selectedColumnForFilter)),e>-1&&(this.filterWord="",this.operatorSelected=null,this.requestData.data.parameters.splice(e,1),this.requestData.data.pageIndex=0,this.getAllReturnLots())}closeFilterPopover(){this.popover.hide()}onClearFilter(){this.popover.hide(),this.requestData.data.parameters.length>0&&(this.requestData.data.parameters=[],this.getAllReturnLots())}}return t.\u0275fac=function(e){return new(e||t)(j.dc(f.a),j.dc(c.c),j.dc(h.e))},t.\u0275cmp=j.Xb({type:t,selectors:[["ngx-lot-return-view"]],viewQuery:function(t,e){var n;1&t&&(j.cd(_t,!0),j.nd(C.ab,!0)),2&t&&(j.Tc(n=j.vc())&&(e.filterTextBox=n.first),j.Tc(n=j.vc())&&(e.popover=n.first))},decls:57,vars:22,consts:[[3,"show"],[1,"row"],[1,"col-lg-12"],[1,"nb-style"],[1,"nb-header"],[1,"col-md-5","col-6","display-flex-start","max-width-device"],["placeholder","Select",1,"btn","btn-md",3,"change"],["value","pending"],["value","view table"],["value","job card"],["value","return"],[1,"col-md-7","col-6"],[1,"nb-text"],[1,"col-md-6"],[1,"col-md-4"],[2,"display","flex"],[2,"margin-top","4px","margin-right","2px"],["status","primary","labelPosition","start","name","shift",3,"ngModel","ngModelChange"],[2,"margin-top","4px","margin-left","2px"],[1,"col-md-8"],["type","text","placeholder","Search","aria-label","Search","aria-describedby","basic-addon1",1,"form-control",3,"ngModel","ngModelChange"],[4,"ngIf"],[1,"material","table-responsive",3,"rows","ngClass","headerHeight","footerHeight","externalPaging","count","offset","limit","page"],["name","Actions","sortable","false","prop","id",3,"maxWidth"],["ngx-datatable-cell-template",""],["name","Chl No","props","chlNo",3,"maxWidth"],["ngx-datatable-header-template",""],["name","Party Name","props","partyName"],["name","Quality Name","props","qualityName"],["name","GR List","prop","batchReturnList",3,"maxWidth"],["name","Broker","props","broker"],["name","Tempo No","props","tempoNo"],[1,"page-sizer","d-flex"],["name","pageSizer",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],["templateRef",""],[1,"filter-by-row"],["for",""],[1,"filter-by-col"],[1,"tag-style-con"],["class","tag-style",4,"ngFor","ngForOf"],[1,"filter-by-clear-all",3,"click"],[1,"tag-style"],[1,"filter-by-title"],[1,"filter-by-val"],[2,"cursor","pointer",3,"click"],["icon","clipboard","nbTooltip","Print","nbTooltipStatus","primary","status","danger",3,"options","click"],[1,"filter-icon"],["icon","menu-outline","nbPopoverTrigger","noop",1,"nb-icon-filter",3,"nbPopover","click"],[4,"ngFor","ngForOf"],[1,"invpice-batch-style"],[3,"value"],["id","filterDiv",2,"padding","2px 14px","width","250px"],[1,"row",2,"background-color","#aa3634"],[1,"col-md-10"],[2,"color","white"],[1,"col-md-2",2,"margin-top","3px","color","white"],[2,"cursor","pointer","text-align","center",3,"click"],[1,"row",2,"margin-top","8px"],[1,"col-md-12","mb-1"],["type","text","placeholder","Filter...",1,"form-control",3,"ngModel","ngModelChange"],["nbButton","","status","primary",2,"margin-right","5px",3,"click"],["nbButton","","status","danger",3,"click"],["appendTo","body","placeholder","Select Filter",1,"popup-select",3,"ngModel","ngModelChange"],["value","LIKE"],["value","EQUALS"],["value","NOT_EQUALS"],["value","START_WITH"],["value","END_WITH"],["value","GREATER_THAN"],["value","LESS_THAN"]],template:function(t,e){1&t&&(j.ec(0,"ngx-loading",0),j.jc(1,"div",1),j.jc(2,"div",2),j.jc(3,"nb-card",3),j.jc(4,"nb-card-header",4),j.jc(5,"div",1),j.jc(6,"div",5),j.jc(7,"ng-select",6),j.uc("change",(function(t){return e.setViewJobValue(t)})),j.jc(8,"ng-option",7),j.jd(9,"Pending batches"),j.ic(),j.jc(10,"ng-option",8),j.jd(11,"View Table"),j.ic(),j.jc(12,"ng-option",9),j.jd(13,"Job Card"),j.ic(),j.jc(14,"ng-option",10),j.jd(15,"Lot return"),j.ic(),j.ic(),j.ic(),j.jc(16,"div",11),j.jc(17,"h2",12),j.jd(18,"Lot Return"),j.ic(),j.ic(),j.ic(),j.ic(),j.jc(19,"nb-card-body"),j.jc(20,"div",1),j.jc(21,"div",13),j.jc(22,"div",1),j.jc(23,"div",14),j.jc(24,"div",15),j.jc(25,"p",16),j.jd(26,"OR"),j.ic(),j.jc(27,"nb-toggle",17),j.uc("ngModelChange",(function(){return e.getAllReturnLots()}))("ngModelChange",(function(t){return e.requestData.data.isAnd=t})),j.ic(),j.jc(28,"p",18),j.jd(29,"AND"),j.ic(),j.ic(),j.ic(),j.jc(30,"div",19),j.jc(31,"input",20),j.uc("ngModelChange",(function(t){return e.searchStr=t})),j.ic(),j.ic(),j.ic(),j.ic(),j.ic(),j.jc(32,"div",1),j.hd(33,wt,9,1,"ng-container",21),j.ic(),j.jc(34,"ngx-datatable",22),j.uc("page",(function(t){return e.setPage(t)})),j.zc(35,"searchInTable"),j.jc(36,"ngx-datatable-column",23),j.hd(37,St,1,4,"ng-template",24),j.ic(),j.jc(38,"ngx-datatable-column",25),j.hd(39,It,3,1,"ng-template",26),j.ic(),j.jc(40,"ngx-datatable-column",27),j.hd(41,Lt,3,1,"ng-template",26),j.ic(),j.jc(42,"ngx-datatable-column",28),j.hd(43,Nt,3,1,"ng-template",26),j.ic(),j.jc(44,"ngx-datatable-column",29),j.hd(45,Rt,1,1,"ng-template",24),j.ic(),j.jc(46,"ngx-datatable-column",30),j.hd(47,qt,3,1,"ng-template",26),j.ic(),j.jc(48,"ngx-datatable-column",31),j.hd(49,Ft,3,1,"ng-template",26),j.ic(),j.ic(),j.jc(50,"div",32),j.jc(51,"span"),j.jd(52,"Page Size: "),j.ic(),j.jc(53,"select",33),j.uc("ngModelChange",(function(t){return e.selectedPageSize=t}))("change",(function(){return e.pageSizeChanged()})),j.hd(54,Wt,2,2,"option",34),j.ic(),j.ic(),j.ic(),j.ic(),j.ic(),j.ic(),j.hd(55,Et,19,3,"ng-template",null,35,j.id)),2&t&&(j.Hc("show",e.loading),j.Pb(27),j.Hc("ngModel",e.requestData.data.isAnd),j.Pb(4),j.Hc("ngModel",e.searchStr),j.Pb(2),j.Hc("ngIf",e.requestData.data.parameters&&e.requestData.data.parameters.length),j.Pb(1),j.Hc("rows",j.Dc(35,17,e.stockList,e.searchStr,e.requestData.data.isAnd,e.tableHeaders))("ngClass","bootstrap")("headerHeight",31)("footerHeight",40)("externalPaging",!0)("count",e.requestData.data.total)("offset",e.requestData.data.pageIndex)("limit",e.requestData.data.pageSize),j.Pb(2),j.Hc("maxWidth",90),j.Pb(2),j.Hc("maxWidth",100),j.Pb(6),j.Hc("maxWidth",230),j.Pb(9),j.Hc("ngModel",e.selectedPageSize),j.Pb(1),j.Hc("ngForOf",e.pageSizes))},directives:[B.a,C.u,C.x,S.a,S.c,C.t,C.wb,x.l,x.o,x.a,i.n,I.e,i.l,I.b,I.a,I.c,x.u,i.m,C.I,C.yb,C.ab,x.p,x.w,C.q],pipes:[kt.a],styles:[""]}),t})();var Tt=n("ENVk"),Ut=n("R0b5");function Gt(t,e){if(1&t&&(j.jc(0,"ng-option",55),j.jc(1,"div",1),j.jc(2,"div",20),j.jc(3,"div",21),j.jd(4),j.ic(),j.ic(),j.jc(5,"div",20),j.jc(6,"div",22),j.jd(7),j.ic(),j.ic(),j.ic(),j.ic()),2&t){const t=e.$implicit;j.Hc("value",t.id),j.Pb(4),j.ld(" ",t.partyName,""),j.Pb(3),j.ld(" ",t.partyCode,"")}}function $t(t,e){if(1&t&&(j.jc(0,"ng-option",55),j.jd(1),j.ic()),2&t){const t=e.$implicit;j.Hc("value",t.id?t.id:t.qualityEntryId),j.Pb(1),j.ld(" ",t.qualityId," ")}}function Xt(t,e){1&t&&(j.jc(0,"div",56),j.jc(1,"span"),j.jd(2,"Broker is required"),j.ic(),j.ic())}function Qt(t,e){1&t&&(j.jc(0,"div",56),j.jc(1,"span"),j.jd(2,"Tempo No is required"),j.ic(),j.ic())}function Jt(t,e){1&t&&(j.jc(0,"div",56),j.jc(1,"span"),j.jd(2,"Party name is required"),j.ic(),j.ic())}const Zt=function(t){return{"is-invalid":t}};function Kt(t,e){if(1&t){const t=j.kc();j.jc(0,"div",27),j.jc(1,"div",24),j.jc(2,"label",28),j.jd(3,"Party Name"),j.ic(),j.jc(4,"input",57,58),j.uc("ngModelChange",(function(e){return j.Xc(t),j.yc().diffPartyName=e})),j.ic(),j.hd(6,Jt,3,0,"div",31),j.ic(),j.ic()}if(2&t){const t=j.Uc(5),e=j.yc();j.Pb(4),j.Hc("ngModel",e.diffPartyName)("ngClass",j.Nc(3,Zt,e.formSubmitted&&t.invalid||t.invalid&&t.touched)),j.Pb(2),j.Hc("ngIf",e.formSubmitted&&t.invalid||t.invalid&&t.touched)}}function Yt(t,e){1&t&&(j.jc(0,"div",56),j.jc(1,"span"),j.jd(2,"Party address is required"),j.ic(),j.ic())}function te(t,e){if(1&t){const t=j.kc();j.jc(0,"div",27),j.jc(1,"div",24),j.jc(2,"label",28),j.jd(3,"Party Address"),j.ic(),j.jc(4,"input",59,60),j.uc("ngModelChange",(function(e){return j.Xc(t),j.yc().diffPartyAddr=e})),j.ic(),j.hd(6,Yt,3,0,"div",31),j.ic(),j.ic()}if(2&t){const t=j.Uc(5),e=j.yc();j.Pb(4),j.Hc("ngModel",e.diffPartyAddr)("ngClass",j.Nc(3,Zt,e.formSubmitted&&t.invalid||t.invalid&&t.touched)),j.Pb(2),j.Hc("ngIf",e.formSubmitted&&t.invalid||t.invalid&&t.touched)}}function ee(t,e){1&t&&(j.jc(0,"div",56),j.jc(1,"span"),j.jd(2,"Please enter valid gst number"),j.ic(),j.ic())}function ne(t,e){if(1&t){const t=j.kc();j.jc(0,"div",27),j.jc(1,"div",24),j.jc(2,"label"),j.jd(3,"Gst"),j.ic(),j.jc(4,"input",61,62),j.uc("ngModelChange",(function(e){return j.Xc(t),j.yc().diffPartyGst=e})),j.ic(),j.hd(6,ee,3,0,"div",31),j.ic(),j.ic()}if(2&t){const t=j.Uc(5),e=j.yc();j.Pb(4),j.Hc("pattern",e.pattern)("ngModel",e.diffPartyGst)("ngClass",j.Nc(4,Zt,e.diffPartyGst&&e.formSubmitted&&t.invalid)),j.Pb(2),j.Hc("ngIf",e.diffPartyGst&&e.formSubmitted&&t.invalid)}}const ie=function(t,e,n){return{"active-button":t,"inactive-button":e,disabled:n}};function ce(t,e){if(1&t){const t=j.kc();j.jc(0,"button",63),j.uc("click",(function(){j.Xc(t);const n=e.$implicit;return j.yc().batchSelected(n.batchId)})),j.jd(1),j.ic()}if(2&t){const t=e.$implicit,n=j.yc();j.Hc("ngClass",j.Pc(4,ie,t.batchId==n.selectedBatch,t.batchId!=n.selectedBatch,t.productionPlanned))("disabled",t.productionPlanned)("value",t.batchId),j.Pb(1),j.ld(" ",t.batchId," ")}}const oe=function(){return{type:"zoom"}},ae=function(t){return{animation:t}};function se(t,e){if(1&t){const t=j.kc();j.jc(0,"nb-icon",64),j.uc("click",(function(){j.Xc(t);const n=e.row;return j.yc().removeFromSelectedGr(n.id)})),j.ic()}2&t&&j.Hc("options",j.Nc(2,ae,j.Mc(1,oe)))}let re=(()=>{class t{constructor(t,e,n,i,c,o,a,s){this.toastr=t,this.stockBatchService=e,this.mergeBatchService=n,this.commonService=i,this.route=c,this.finishedMeterService=o,this.qualityService=a,this.partyService=s,this.loading=!1,this.selectedGRList=[],this.selectedGRListTemp=[],this.partyList=[],this.qualityList=[],this.batchList=[],this.grList=[],this.disableFields=!1,this.formSubmitted=!1,this.isDiffParty=!1,this.pattern=/^([0][1-9]|[1-2][0-9]|[3][0-7])([a-zA-Z]{5}[0-9]{4}[a-zA-Z]{1}[1-9a-zA-Z]{1}[zZ]{1}[0-9a-zA-Z]{1})+$/,this.destroy$=new r.a}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}ngOnInit(){this.userId=this.commonService.getUser().userId,this.userHeadId=this.commonService.getUserHeadId().userHeadId,this.getAllParty(),this.getAllQuality()}getAllParty(){this.partyService.getAllPartyWithNameOnly().pipe(Object(s.a)(this.destroy$)).subscribe(t=>{t.success&&(this.partyList=t.data)},t=>{})}selectionChanges(t){"view table"===t||"job card"===t?this.route.navigate(["/pages/stock-batch/view"]):"pending"===t||"add"==t?this.route.navigate(["/pages/stock-batch/pending"]):"view"==t&&this.route.navigate(["/pages/stock-batch/return-lot/view"])}enableQuality(t){this.qualityList=null,this.selectedQuality=null,null!=t?this.finishedMeterService.getAllQualityByParty(this.selectedParty).pipe(Object(s.a)(this.destroy$)).subscribe(t=>{t.success?(this.qualityList=t.data.qualityDataList,this.qualityList.forEach(e=>{e.partyName=t.data.partyName,e.partyId=t.data.partyId})):this.toastr.error(t.msg)},t=>{}):(this.batchList=[],this.grList=[],this.getAllQuality())}getAllBatchByQuality(){this.batchList=[],this.mergeBatchService.getBatchesByPartyQuality(this.selectedQuality,this.selectedParty).pipe(Object(s.a)(this.destroy$)).subscribe(t=>{t.success&&(this.batchList=t.data)},t=>{})}getAllQuality(){this.qualityService.getAllQualityWithNameOnly().pipe(Object(s.a)(this.destroy$)).subscribe(t=>{t.success&&(this.qualityList=t.data)},t=>{})}qualitySelected(t){if(null!=t){let t,e;if(this.selectedBatch=null,this.batchList=[],!this.selectedParty){let t=this.qualityList.find(t=>t.id===this.selectedQuality);this.selectedParty=t.partyId}this.qualityList.forEach(n=>{let i=n.id?n.id:n.qualityEntryId;i==this.selectedQuality&&(t=n.partyId,e=i)}),this.getAllBatchByQuality()}else this.selectedBatch=null,this.batchList=[],this.grList=[],this.getAllQuality()}batchSelected(t){this.selectedBatch=t,this.grList=[],this.stockBatchService.getBatchGRById(this.selectedBatch).pipe(Object(s.a)(this.destroy$)).subscribe(t=>{t.success&&(this.grList=t.data)})}geSelected(t){this.selectedGRListTemp=[],this.selectedGRListTemp=t.selected}onSelection(){this.selectedGRListTemp.forEach(t=>{this.selectedGRList.filter(e=>e.id===t.id).length||this.selectedGRList.push(Object(d.cloneDeep)(t))}),this.selectedGRList=Object(d.sortBy)(this.selectedGRList,"batchId"),this.disableFields=!!this.selectedGRList.length}removeFromSelectedGr(t){this.selectedGRList=this.selectedGRList.filter(e=>e.id!==t),this.selectedGRListTemp=this.selectedGRListTemp.filter(e=>e.id!==t),this.disableFields=!!this.selectedGRList.length}saveReturnLot(t,e){if(this.formSubmitted=!0,this.selectedGRList.length&&this.broker&&this.tempoNo){if(e.valid){this.loading=!0;let n={broker:this.broker,tempoNo:this.tempoNo,createdBy:this.commonService.getUser().userId,batchDataList:[],diffDeliveryParty:this.isDiffParty,diffPartyName:this.diffPartyName,diffPartyAddress:this.diffPartyAddr,diffGst:this.diffPartyGst};n.batchDataList=this.selectedGRList.map(t=>({id:t.id,controlId:t.controlId})),this.stockBatchService.returnLotPost(n).pipe(Object(s.a)(this.destroy$)).subscribe(n=>{n.success?(this.toastr.success(n.msg),this.resetForm(e),t&&this.route.navigate(["pages/stock-batch/return-lot/print"],{queryParams:{chlNo:n.data}})):this.toastr.error(n.msg),this.loading=!1},t=>{this.loading=!1})}}else this.toastr.error("Select atleast one GR-data to return")}resetForm(t){this.selectedGRList=[],this.selectedGRListTemp=[],this.batchList=[],this.selectedBatch=null,this.selectedParty=null,this.selectedQuality=null,this.grList=[],this.disableFields=!1,this.formSubmitted=!1,this.broker=null,this.tempoNo=null,this.diffPartyGst=null,this.diffPartyAddr=null,this.diffPartyName=null,this.isDiffParty=null,t.reset()}}return t.\u0275fac=function(e){return new(e||t)(j.dc(D.b),j.dc(f.a),j.dc(Ut.a),j.dc(P.a),j.dc(c.c),j.dc(Tt.a),j.dc(m.a),j.dc(b.a))},t.\u0275cmp=j.Xb({type:t,selectors:[["ngx-lot-return"]],decls:104,vars:31,consts:[[3,"show"],[1,"row"],[1,"col-lg-12"],[1,"nb-style"],[1,"nb-header"],[1,"col-md-5","col-6","display-flex-start","max-width-device"],["placeholder","Select",1,"btn","btn-md",3,"change"],["value","view"],["value","add"],["value","view table"],["value","job card"],["value","pending"],[1,"col-md-7","col-6"],[1,"nb-text","txt-ov-elips"],["myForm","ngForm"],[1,"col-md-6"],[1,"form-group","mb-1"],["name","partyId","appendTo","body","placeholder","Select Party",3,"disabled","ngModel","ngModelChange","change"],["partyId1","ngModel"],["disabled","true"],[1,"col-md-6","col-6"],[1,"text-left","txt-ov-elips"],[1,"text-right","txt-ov-elips"],[3,"value",4,"ngFor","ngForOf"],[1,"form-group"],["name","qualityId","appendTo","body","placeholder","Select Quality",3,"disabled","ngModel","ngModelChange","change"],["qualityId1","ngModel"],[1,"col-md-4"],[1,"required"],["name","broker","required","","placeholder","Enter delivery person",1,"form-control",3,"ngModel","ngClass","ngModelChange"],["broker1","ngModel"],["class","input-required",4,"ngIf"],["name","tempo","required","","placeholder","Enter tempo no",1,"form-control",3,"ngModel","ngClass","ngModelChange"],["tempo","ngModel"],[1,"col-md-4",2,"margin","auto"],["name","isDiffParty",1,"user-all-check",3,"ngModel","ngModelChange"],["class","col-md-4",4,"ngIf"],[1,"col-md-12"],[1,"batch-list-3line"],["type","button","style","z-index: 999;","nbButton","","size","small","class","p-badge-design",3,"ngClass","disabled","value","click",4,"ngFor","ngForOf"],["id","fmtr-table",1,"col-md-3","pb-2",2,"border","1px solid #c3c3c3"],[1,"material","common-table","datatable-auto-height","fm-table-body-height",2,"height","200px",3,"rows","scrollbarV","selectionType","selected","select"],["name","Meter","prop","mtr",3,"headerCheckboxable","checkboxable"],["name","Weight","prop","wt"],[1,"col-md-3","center"],[1,""],["type","button",1,"btn","btn-primary","btn-sm","btn-design-save","mob-stock","button-base","ripple",3,"click"],["id","fmtr-table",1,"col-md-6","pb-2",2,"border","1px solid #c3c3c3"],[1,"material","common-table","datatable-auto-height","fm-table-body-height",2,"height","200px",3,"rows","scrollbarV"],["name","Action","sortable","false",3,"maxWidth"],["ngx-datatable-cell-template",""],["name","Batch Id","prop","batchId"],["name","Meter","prop","mtr"],[1,"row","pt-2"],[1,"col-md-12","text-btn-right"],[3,"value"],[1,"input-required"],["name","diffPartyName","required","","placeholder","Party Name",1,"form-control",3,"ngModel","ngClass","ngModelChange"],["diffPartyName1","ngModel"],["name","diffPartyAddr","required","","placeholder","Party Name",1,"form-control",3,"ngModel","ngClass","ngModelChange"],["diffPartyAddr1","ngModel"],["name","diffPartyGst","placeholder","Gst",1,"form-control",3,"pattern","ngModel","ngClass","ngModelChange"],["diffPartyGst1","ngModel"],["type","button","nbButton","","size","small",1,"p-badge-design",2,"z-index","999",3,"ngClass","disabled","value","click"],["icon","trash","status","danger",3,"options","click"]],template:function(t,e){if(1&t){const t=j.kc();j.ec(0,"ngx-loading",0),j.jc(1,"div",1),j.jc(2,"div",2),j.jc(3,"nb-card",3),j.jc(4,"nb-card-header",4),j.jc(5,"div",1),j.jc(6,"div",5),j.jc(7,"ng-select",6),j.uc("change",(function(t){return e.selectionChanges(t)})),j.jc(8,"ng-option",7),j.jd(9,"View Table"),j.ic(),j.jc(10,"ng-option",8),j.jd(11,"Add Stock-batch"),j.ic(),j.jc(12,"ng-option",9),j.jd(13,"View Stock-batch"),j.ic(),j.jc(14,"ng-option",10),j.jd(15,"Job Card"),j.ic(),j.jc(16,"ng-option",11),j.jd(17,"Pending batches"),j.ic(),j.ic(),j.ic(),j.jc(18,"div",12),j.jc(19,"h2",13),j.jd(20,"Lot Return"),j.ic(),j.ic(),j.ic(),j.ic(),j.jc(21,"nb-card-body"),j.jc(22,"form",null,14),j.jc(24,"div",1),j.jc(25,"div",15),j.jc(26,"div",16),j.jc(27,"label"),j.jd(28,"Party"),j.ic(),j.jc(29,"ng-select",17,18),j.uc("ngModelChange",(function(t){return e.selectedParty=t}))("change",(function(t){return e.enableQuality(t)})),j.jc(31,"ng-option",19),j.jc(32,"div",1),j.jc(33,"div",20),j.jc(34,"div",21),j.jd(35,"Party Name "),j.ic(),j.ic(),j.jc(36,"div",20),j.jc(37,"div",22),j.jd(38," Party Code"),j.ic(),j.ic(),j.ic(),j.ic(),j.hd(39,Gt,8,3,"ng-option",23),j.ic(),j.ic(),j.ic(),j.jc(40,"div",15),j.jc(41,"div",24),j.jc(42,"label"),j.jd(43,"Quality"),j.ic(),j.jc(44,"ng-select",25,26),j.uc("ngModelChange",(function(t){return e.selectedQuality=t}))("change",(function(t){return e.qualitySelected(t)})),j.hd(46,$t,2,2,"ng-option",23),j.ic(),j.ic(),j.ic(),j.ic(),j.jc(47,"div",1),j.jc(48,"div",27),j.jc(49,"div",24),j.jc(50,"label",28),j.jd(51,"Delivery Person"),j.ic(),j.jc(52,"input",29,30),j.uc("ngModelChange",(function(t){return e.broker=t})),j.ic(),j.hd(54,Xt,3,0,"div",31),j.ic(),j.ic(),j.jc(55,"div",27),j.jc(56,"div",24),j.jc(57,"label",28),j.jd(58,"Tempo No"),j.ic(),j.jc(59,"input",32,33),j.uc("ngModelChange",(function(t){return e.tempoNo=t})),j.ic(),j.hd(61,Qt,3,0,"div",31),j.ic(),j.ic(),j.jc(62,"div",34),j.jc(63,"div",24),j.jc(64,"nb-checkbox",35),j.uc("ngModelChange",(function(t){return e.isDiffParty=t})),j.jd(65," Is Delivery-Party Different "),j.ic(),j.ic(),j.ic(),j.ic(),j.jc(66,"div",1),j.hd(67,Kt,7,5,"div",36),j.hd(68,te,7,5,"div",36),j.hd(69,ne,7,6,"div",36),j.ic(),j.jc(70,"div",37),j.jc(71,"div",16),j.jc(72,"div",1),j.jc(73,"div",37),j.jc(74,"div",38),j.hd(75,ce,2,8,"button",39),j.ic(),j.ic(),j.ic(),j.ic(),j.ic(),j.jc(76,"div",1),j.jc(77,"div",40),j.hc(78),j.jc(79,"h5"),j.jd(80,"GR List"),j.ic(),j.jc(81,"ngx-datatable",41),j.uc("select",(function(t){return e.geSelected(t)})),j.ec(82,"ngx-datatable-column",42),j.ec(83,"ngx-datatable-column",43),j.ic(),j.gc(),j.ic(),j.jc(84,"div",44),j.jc(85,"div",45),j.jc(86,"button",46),j.uc("click",(function(){return e.onSelection()})),j.jd(87,"Transfer ->"),j.ic(),j.ic(),j.ic(),j.jc(88,"div",47),j.hc(89),j.jc(90,"h5",28),j.jd(91,"Selected GR List"),j.ic(),j.jc(92,"ngx-datatable",48),j.jc(93,"ngx-datatable-column",49),j.hd(94,se,1,4,"ng-template",50),j.ic(),j.ec(95,"ngx-datatable-column",51),j.ec(96,"ngx-datatable-column",52),j.ec(97,"ngx-datatable-column",43),j.ic(),j.gc(),j.ic(),j.ic(),j.jc(98,"div",53),j.jc(99,"div",54),j.jc(100,"button",46),j.uc("click",(function(){j.Xc(t);const n=j.Uc(23);return e.saveReturnLot(!1,n)})),j.jd(101,"SAVE"),j.ic(),j.jc(102,"button",46),j.uc("click",(function(){j.Xc(t);const n=j.Uc(23);return e.saveReturnLot(!0,n)})),j.jd(103,"SAVE AND PRINT"),j.ic(),j.ic(),j.ic(),j.ic(),j.ic(),j.ic(),j.ic(),j.ic()}if(2&t){const t=j.Uc(53),n=j.Uc(60);j.Hc("show",e.loading),j.Pb(29),j.Hc("disabled",e.disableFields)("ngModel",e.selectedParty),j.Pb(10),j.Hc("ngForOf",e.partyList),j.Pb(5),j.Hc("disabled",e.disableFields)("ngModel",e.selectedQuality),j.Pb(2),j.Hc("ngForOf",e.qualityList),j.Pb(6),j.Hc("ngModel",e.broker)("ngClass",j.Nc(27,Zt,e.formSubmitted&&t.invalid||t.invalid&&t.touched)),j.Pb(2),j.Hc("ngIf",e.formSubmitted&&t.invalid||t.invalid&&t.touched),j.Pb(5),j.Hc("ngModel",e.tempoNo)("ngClass",j.Nc(29,Zt,e.formSubmitted&&n.invalid||n.invalid&&n.touched)),j.Pb(2),j.Hc("ngIf",e.formSubmitted&&n.invalid||n.invalid&&n.touched),j.Pb(3),j.Hc("ngModel",e.isDiffParty),j.Pb(3),j.Hc("ngIf",e.isDiffParty),j.Pb(1),j.Hc("ngIf",e.isDiffParty),j.Pb(1),j.Hc("ngIf",e.isDiffParty),j.Pb(6),j.Hc("ngForOf",e.batchList),j.Pb(6),j.Hc("rows",e.grList)("scrollbarV",!0)("selectionType","checkbox")("selected",e.selectedGRListTemp),j.Pb(1),j.Hc("headerCheckboxable",!0)("checkboxable",!0),j.Pb(10),j.Hc("rows",e.selectedGRList)("scrollbarV",!0),j.Pb(1),j.Hc("maxWidth",100)}},directives:[B.a,C.u,C.x,S.a,S.c,C.t,x.x,x.m,x.n,x.l,x.o,i.m,x.a,x.t,i.l,i.n,C.A,I.e,I.b,I.a,x.r,C.q,C.I],styles:[".active-button[_ngcontent-%COMP%]{background-color:#274fc4!important}.inactive-button[_ngcontent-%COMP%]{background-color:#5e5b5e!important}.disabled[_ngcontent-%COMP%]{background-color:#dad6da!important}.center[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}"]}),t})();function le(t,e){if(1&t&&(j.jc(0,"div",12),j.jc(1,"p",13),j.jd(2,"Delivery Party :"),j.ic(),j.jc(3,"p",13),j.jd(4,"To. \xa0\xa0"),j.jc(5,"b"),j.jd(6),j.ic(),j.ic(),j.jc(7,"p",13),j.jd(8),j.ic(),j.jc(9,"p",13),j.jd(10),j.ic(),j.ic()),2&t){const t=j.yc(2);j.Pb(6),j.kd(t.lotReturnData.partyName),j.Pb(2),j.kd(t.lotReturnData.address),j.Pb(2),j.ld("GST NO.:",t.lotReturnData.gst,"")}}function de(t,e){if(1&t&&(j.jc(0,"div",12),j.jc(1,"p",13),j.jd(2,"Delivery Party :"),j.ic(),j.jc(3,"p",13),j.jd(4,"To. \xa0\xa0"),j.jc(5,"b"),j.jd(6),j.ic(),j.ic(),j.jc(7,"p",13),j.jd(8),j.ic(),j.jc(9,"p",13),j.jd(10),j.ic(),j.ic()),2&t){const t=j.yc(2);j.Pb(6),j.kd(t.lotReturnData.diffPartyName),j.Pb(2),j.kd(t.lotReturnData.diffPartyAddress),j.Pb(2),j.ld("GST NO.:",t.lotReturnData.diffGst,"")}}function he(t,e){if(1&t&&(j.hc(0),j.jc(1,"div",15),j.jd(2),j.ic(),j.jc(3,"div",15),j.jd(4),j.ic(),j.jc(5,"div",15),j.jd(6),j.zc(7,"number"),j.ic(),j.gc()),2&t){const t=e.$implicit;j.Pb(2),j.kd(t.idx),j.Pb(2),j.kd(t.batchId),j.Pb(2),j.kd(j.Bc(7,3,t.mtr,"1.2-2"))}}function ge(t,e){if(1&t&&(j.hc(0),j.jc(1,"div",15),j.jd(2),j.ic(),j.jc(3,"div",15),j.jd(4),j.ic(),j.jc(5,"div",15),j.jd(6),j.zc(7,"number"),j.ic(),j.gc()),2&t){const t=e.$implicit;j.Pb(2),j.kd(t.idx),j.Pb(2),j.kd(t.batchId),j.Pb(2),j.kd(j.Bc(7,3,t.mtr,"1.2-2"))}}function pe(t,e){if(1&t&&(j.hc(0),j.jc(1,"div",15),j.jd(2),j.ic(),j.jc(3,"div",15),j.jd(4),j.ic(),j.jc(5,"div",15),j.jd(6),j.zc(7,"number"),j.ic(),j.gc()),2&t){const t=e.$implicit;j.Pb(2),j.kd(t.idx),j.Pb(2),j.kd(t.batchId),j.Pb(2),j.kd(j.Bc(7,3,t.mtr,"1.2-2"))}}function ue(t,e){if(1&t&&(j.hc(0),j.jc(1,"div",15),j.jd(2),j.ic(),j.jc(3,"div",15),j.jd(4),j.ic(),j.jc(5,"div",15),j.jd(6),j.zc(7,"number"),j.ic(),j.gc()),2&t){const t=e.$implicit;j.Pb(2),j.kd(t.idx),j.Pb(2),j.kd(t.batchId),j.Pb(2),j.kd(j.Bc(7,3,t.mtr,"1.2-2"))}}function be(t,e){if(1&t&&(j.hc(0),j.jc(1,"div",1),j.jc(2,"table",2),j.jc(3,"tr",3),j.jc(4,"th"),j.jc(5,"div",4),j.jc(6,"p",5),j.jc(7,"b"),j.jd(8,"GLORY DYEING MILLS PVT. LTD."),j.ic(),j.ic(),j.ic(),j.jc(9,"div",6),j.jc(10,"p",7),j.jd(11," FORMALLY KNOWN AS : MUKESH PROCESSORS PVT. LTD. "),j.ic(),j.ic(),j.jc(12,"div",6),j.jc(13,"p",8),j.jd(14,"A-31, G.E.T.P, (Kala Ghoda), Palsana, Surat E-Mail : dyeing@gloryfab.com "),j.ic(),j.ic(),j.jc(15,"div",6),j.jc(16,"p",8),j.jd(17,"GSTIN :- 24AAFCM5028A1Z1 Place Of Supply : Surat"),j.ic(),j.ic(),j.ic(),j.ic(),j.jc(18,"tr",3),j.jc(19,"th",9),j.jc(20,"div",10),j.jc(21,"p",11),j.jc(22,"b"),j.jd(23,"!! GOODS RETURN CHALLAN !!"),j.ic(),j.ic(),j.ic(),j.ic(),j.ic(),j.jc(24,"tr",3),j.jc(25,"th"),j.jc(26,"div",6),j.jc(27,"div",12),j.jc(28,"p",13),j.jd(29,"M/s. Party :"),j.ic(),j.jc(30,"p",13),j.jd(31,"To. \xa0\xa0"),j.jc(32,"b"),j.jd(33),j.ic(),j.ic(),j.jc(34,"p",13),j.jd(35),j.ic(),j.jc(36,"p",13),j.jd(37),j.ic(),j.ic(),j.hd(38,le,11,3,"div",14),j.hd(39,de,11,3,"div",14),j.jc(40,"div",15),j.jc(41,"p",13),j.jd(42,"Challan No \xa0: "),j.jc(43,"b",16),j.jd(44),j.ic(),j.ic(),j.jc(45,"p",13),j.jd(46),j.zc(47,"date"),j.ic(),j.jc(48,"p",13),j.jd(49,"Delivery Person: "),j.jc(50,"b"),j.jd(51),j.ic(),j.ic(),j.jc(52,"p",13),j.jd(53,"Tempo No \xa0\xa0: "),j.jc(54,"b"),j.jd(55),j.ic(),j.ic(),j.jc(56,"p",13),j.jd(57,"Quality \xa0: "),j.jc(58,"b"),j.jd(59),j.ic(),j.ic(),j.jc(60,"p",13),j.jd(61,"Party Chl No\xa0: "),j.jc(62,"b"),j.jd(63),j.ic(),j.ic(),j.ic(),j.ic(),j.ic(),j.ic(),j.jc(64,"tr",3),j.jc(65,"td"),j.jc(66,"div",6),j.jc(67,"div",17),j.jc(68,"div",15),j.jd(69,"Sr."),j.ic(),j.jc(70,"div",15),j.jd(71,"BatchId."),j.ic(),j.jc(72,"div",15),j.jd(73,"Meters."),j.ic(),j.ic(),j.jc(74,"div",17),j.jc(75,"div",15),j.jd(76,"Sr."),j.ic(),j.jc(77,"div",15),j.jd(78,"BatchId."),j.ic(),j.jc(79,"div",15),j.jd(80,"Meters."),j.ic(),j.ic(),j.jc(81,"div",17),j.jc(82,"div",15),j.jd(83,"Sr."),j.ic(),j.jc(84,"div",15),j.jd(85,"BatchId."),j.ic(),j.jc(86,"div",15),j.jd(87,"Meters."),j.ic(),j.ic(),j.jc(88,"div",18),j.jc(89,"div",15),j.jd(90,"Sr."),j.ic(),j.jc(91,"div",15),j.jd(92,"BatchId."),j.ic(),j.jc(93,"div",15),j.jd(94,"Meters."),j.ic(),j.ic(),j.ic(),j.ic(),j.ic(),j.jc(95,"tr",3),j.jc(96,"td"),j.jc(97,"div",6),j.jc(98,"div",17),j.hd(99,he,8,6,"ng-container",19),j.ic(),j.jc(100,"div",17),j.hd(101,ge,8,6,"ng-container",19),j.ic(),j.jc(102,"div",17),j.hd(103,pe,8,6,"ng-container",19),j.ic(),j.jc(104,"div",18),j.hd(105,ue,8,6,"ng-container",19),j.ic(),j.ic(),j.ic(),j.ic(),j.jc(106,"tr",3),j.jc(107,"td"),j.jc(108,"div",6),j.jc(109,"div",17),j.jc(110,"div",20),j.jc(111,"b"),j.jd(112),j.zc(113,"number"),j.ic(),j.ic(),j.jc(114,"div",20),j.jc(115,"b"),j.jd(116),j.zc(117,"number"),j.ic(),j.ic(),j.ic(),j.jc(118,"div",17),j.jc(119,"div",20),j.jc(120,"b"),j.jd(121),j.zc(122,"number"),j.ic(),j.ic(),j.jc(123,"div",20),j.jc(124,"b"),j.jd(125),j.zc(126,"number"),j.ic(),j.ic(),j.ic(),j.jc(127,"div",17),j.jc(128,"div",20),j.jc(129,"b"),j.jd(130),j.zc(131,"number"),j.ic(),j.ic(),j.jc(132,"div",20),j.jc(133,"b"),j.jd(134),j.zc(135,"number"),j.ic(),j.ic(),j.ic(),j.jc(136,"div",18),j.jc(137,"div",20),j.jc(138,"b"),j.jd(139),j.zc(140,"number"),j.ic(),j.ic(),j.jc(141,"div",20),j.jc(142,"b"),j.jd(143),j.zc(144,"number"),j.ic(),j.ic(),j.ic(),j.ic(),j.ic(),j.ic(),j.jc(145,"tr",3),j.jc(146,"td"),j.jc(147,"div",21),j.jc(148,"div",22),j.jc(149,"div",23),j.jc(150,"p",16),j.jc(151,"b"),j.jd(152),j.zc(153,"number"),j.ic(),j.ic(),j.ic(),j.jc(154,"div",24),j.jc(155,"p",16),j.jc(156,"b"),j.jd(157,"GLORY DYEING MILLS PVT. LTD"),j.ic(),j.ic(),j.ic(),j.ic(),j.jc(158,"div",6),j.jc(159,"div",23),j.jc(160,"p",16),j.jd(161,"Prepared & Checked By"),j.ic(),j.ic(),j.jc(162,"div",24),j.jc(163,"p",16),j.jd(164,"Authorised Signatory"),j.ic(),j.ic(),j.ic(),j.ic(),j.ic(),j.ic(),j.ic(),j.ic(),j.gc()),2&t){const t=j.yc();j.Pb(33),j.kd(t.lotReturnData.partyName),j.Pb(2),j.kd(t.lotReturnData.address),j.Pb(2),j.ld("GST NO.:",t.lotReturnData.gst,""),j.Pb(1),j.Hc("ngIf",!t.lotReturnData.diffDeliveryParty),j.Pb(1),j.Hc("ngIf",t.lotReturnData.diffDeliveryParty),j.Pb(5),j.kd(t.lotReturnData.chlNo),j.Pb(2),j.ld("Challan Date: ",j.Bc(47,25,t.lotReturnData.challanDate,"dd/MM/yyyy"),""),j.Pb(5),j.kd(t.lotReturnData.broker),j.Pb(4),j.kd(t.lotReturnData.tempoNo),j.Pb(4),j.kd(t.lotReturnData.qualityId),j.Pb(4),j.kd(t.lotReturnData.pchallanNo),j.Pb(36),j.Hc("ngForOf",t.list1),j.Pb(2),j.Hc("ngForOf",t.list2),j.Pb(2),j.Hc("ngForOf",t.list3),j.Pb(2),j.Hc("ngForOf",t.list4),j.Pb(7),j.kd(j.Bc(113,28,t.totalCount.list1,"1.2-2")),j.Pb(4),j.kd(j.Bc(117,31,t.totalMtr.list1,"1.2-2")),j.Pb(5),j.kd(j.Bc(122,34,t.totalCount.list2,"1.2-2")),j.Pb(4),j.kd(j.Bc(126,37,t.totalMtr.list2,"1.2-2")),j.Pb(5),j.kd(j.Bc(131,40,t.totalCount.list3,"1.2-2")),j.Pb(4),j.kd(j.Bc(135,43,t.totalMtr.list3,"1.2-2")),j.Pb(5),j.kd(j.Bc(140,46,t.totalCount.list4,"1.2-2")),j.Pb(4),j.kd(j.Bc(144,49,t.totalMtr.list4,"1.2-2")),j.Pb(9),j.md("Total Taka: ",t.totalCount.total,"\xa0\xa0Total Meters: ",j.Bc(153,52,t.totalMtr.total,"1.2-2"),"")}}let me=(()=>{class t{constructor(t,e,n,i){this._route=t,this.stockService=e,this.router=n,this.toastr=i,this.list1=[],this.list2=[],this.list3=[],this.list4=[],this.totalMtr={list1:0,list2:0,list3:0,list4:0,total:0},this.totalCount={total:0,list1:0,list2:0,list3:0,list4:0},this.destroy$=new r.a}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}ngOnInit(){this.chlNo=Number(this._route.snapshot.queryParamMap.get("chlNo")),this.chlNo&&this.stockService.returnLotgetById(this.chlNo).pipe(Object(s.a)(this.destroy$)).subscribe(t=>{if(t.success){this.lotReturnData=t.data,this.totalCount.total=this.lotReturnData.batchReturnList.length;for(let t=1;t<=48;t++)t<=12&&(this.list1.push(this.lotReturnData.batchReturnList[t-1]?this.lotReturnData.batchReturnList[t-1]:{mtr:""}),this.list1[this.list1.length-1].idx=this.lotReturnData.batchReturnList[t-1]?t:""),t<=24&&t>=13&&(this.list2.push(this.lotReturnData.batchReturnList[t-1]?this.lotReturnData.batchReturnList[t-1]:{mtr:""}),this.list2[this.list2.length-1].idx=this.lotReturnData.batchReturnList[t-1]?t:""),t<=36&&t>=25&&(this.list3.push(this.lotReturnData.batchReturnList[t-1]?this.lotReturnData.batchReturnList[t-1]:{mtr:""}),this.list3[this.list3.length-1].idx=this.lotReturnData.batchReturnList[t-1]?t:""),t<=48&&t>=37&&(this.list4.push(this.lotReturnData.batchReturnList[t-1]?this.lotReturnData.batchReturnList[t-1]:{mtr:""}),this.list4[this.list4.length-1].idx=this.lotReturnData.batchReturnList[t-1]?t:"");this.setTotal(),this.printNow()}else this.toastr.error(t.msg),this.router.navigate(["pages/stock-batch/return-lot/view"])},t=>{this.router.navigate(["pages/stock-batch/return-lot/view"])})}setTotal(){this.totalMtr.total=0;let t=0;this.list1.forEach(e=>{e.mtr&&(this.totalMtr.total+=e.mtr,t+=e.mtr,this.totalCount.list1++)}),this.totalMtr.list1=t,t=0,this.list2.forEach(e=>{e.mtr&&(this.totalMtr.total+=e.mtr,t+=e.mtr,this.totalCount.list2++)}),this.totalMtr.list2=t,t=0,this.list3.forEach(e=>{e.mtr&&(this.totalMtr.total+=e.mtr,t+=e.mtr,this.totalCount.list3++)}),this.totalMtr.list3=t,t=0,this.list4.forEach(e=>{e.mtr&&(this.totalMtr.total+=e.mtr,t+=e.mtr,this.totalCount.list4++)}),this.totalMtr.list4=t}printNow(){let t=new M.PrintDocument({title:""});t.append('<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/paper-css/0.3.0/paper.css">'),t.append('<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">'),t.append('<link href="https://cdn.grapecity.com/wijmo/5.latest/styles/wijmo.min.css" rel="stylesheet">');let e=setInterval(()=>{let n=document.getElementById("printpdf");null!=n&&(t.append(n),clearInterval(e))},10);setTimeout(()=>{t.print(),this.router.navigate(["pages/stock-batch/return-lot/view"])},1e3)}}return t.\u0275fac=function(e){return new(e||t)(j.dc(c.a),j.dc(f.a),j.dc(c.c),j.dc(D.b))},t.\u0275cmp=j.Xb({type:t,selectors:[["ngx-print-lot-return"]],decls:1,vars:1,consts:[[4,"ngIf"],["id","printpdf",1,"container",2,"padding-right","20px"],[1,"margin-print",2,"width","100%","border","2px solid black"],[1,"border-dark"],[1,"row","display-flex"],[1,"col-sm-12","text-center","font-30"],[1,"row"],[1,"text-center","col-sm-12","font-10","formally"],[1,"text-center","col-sm-12","font-15"],[1,"display-flex"],[1,"row",2,"width","100%"],[1,"col-sm-12","text-center","font-25"],[1,"col-sm-4",2,"border-right","1px solid rgb(143, 143, 143)"],[1,"text-left","col-sm-12","font-15"],["class","col-sm-4","style","border-right: 1px solid rgb(143, 143, 143);",4,"ngIf"],[1,"col-sm-4"],[1,"font-20"],[1,"col-sm-3",2,"border-right","1px solid rgb(143, 143, 143)"],[1,"col-sm-3"],[4,"ngFor","ngForOf"],[1,"col-sm-6"],[1,"container"],[1,"row",2,"margin-bottom","60px"],[1,"col-sm-6","text-left"],[1,"col-sm-6","text-right"]],template:function(t,e){1&t&&j.hd(0,be,165,55,"ng-container",0),2&t&&j.Hc("ngIf",e.lotReturnData&&e.lotReturnData.chlNo)},directives:[i.n,i.m],pipes:[i.e,i.f],styles:["@media print{body[_ngcontent-%COMP%]{margin:10px;box-shadow:0}.font-20[_ngcontent-%COMP%]{font-size:20px}.font-18[_ngcontent-%COMP%]{font-size:18px}.font-10[_ngcontent-%COMP%]{font-size:10px}.font-12[_ngcontent-%COMP%]{font-size:12px}.font-14[_ngcontent-%COMP%]{font-size:14px}.font-30[_ngcontent-%COMP%]{font-size:30px}.font-15[_ngcontent-%COMP%]{font-size:15px}.border[_ngcontent-%COMP%], .border-dark-left[_ngcontent-%COMP%]{border-left:1px solid #8f8f8f!important}.border[_ngcontent-%COMP%], .border-dark-right[_ngcontent-%COMP%]{border-right:1px solid #8f8f8f!important}.border[_ngcontent-%COMP%], .border-dark-top[_ngcontent-%COMP%]{border-top:1px solid #8f8f8f!important}.border[_ngcontent-%COMP%], .border-dark-bottom[_ngcontent-%COMP%]{border-bottom:1px solid #8f8f8f!important}.margin-print[_ngcontent-%COMP%]{margin:.05cm}.display-flex[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:flex-end}.col-sm-1[_ngcontent-%COMP%], .col-sm-2[_ngcontent-%COMP%], .col-sm-3[_ngcontent-%COMP%], .col-sm-4[_ngcontent-%COMP%], .col-sm-5[_ngcontent-%COMP%], .col-sm-6[_ngcontent-%COMP%], .col-sm-7[_ngcontent-%COMP%], .col-sm-8[_ngcontent-%COMP%], .col-sm-9[_ngcontent-%COMP%], .col-sm-10[_ngcontent-%COMP%], .col-sm-11[_ngcontent-%COMP%], .col-sm-12[_ngcontent-%COMP%]{float:left}.col-sm-12[_ngcontent-%COMP%]{width:100%}.col-sm-11[_ngcontent-%COMP%]{width:91.66666666666666%}.col-sm-10[_ngcontent-%COMP%]{width:83.33333333333334%}.col-sm-9[_ngcontent-%COMP%]{width:75%}.col-sm-8[_ngcontent-%COMP%]{width:66.66666666666666%}.col-sm-7[_ngcontent-%COMP%]{width:58.333333333333336%}.col-sm-6[_ngcontent-%COMP%]{width:50%}.col-sm-5[_ngcontent-%COMP%]{width:41.66666666666667%}.col-sm-4[_ngcontent-%COMP%]{width:33.33333333333333%}.col-sm-3[_ngcontent-%COMP%]{width:25%}.col-sm-2[_ngcontent-%COMP%]{width:16.666666666666664%}.col-sm-1[_ngcontent-%COMP%]{width:8.333333333333332%}.col-md-3[_ngcontent-%COMP%]{width:25%}.formally[_ngcontent-%COMP%]{margin-top:-9px}.lot-border[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border:2px solid #8f8f8f}.footer-border[_ngcontent-%COMP%]{border:1px solid #8f8f8f}.border-top-none[_ngcontent-%COMP%], .footer-bottom[_ngcontent-%COMP%]{padding:5px 15px}.border-top[_ngcontent-%COMP%]{border-top:1px solid;padding:15px}.terms-cond[_ngcontent-%COMP%]{list-style:none}.terms-cond[_ngcontent-%COMP%], .terms-cond[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-left:0!important;padding-left:0!important}.footer-bottom[_ngcontent-%COMP%]{padding-left:15px;border:1px solid #8f8f8f}.border-top-none[_ngcontent-%COMP%]{border:1px solid #8f8f8f;border-top:none}.display-flex-end[_ngcontent-%COMP%]{justify-content:center;align-items:flex-end}.height-100[_ngcontent-%COMP%]{height:100%}.company-ltd[_ngcontent-%COMP%]{margin-top:30px}#invoice-table[_ngcontent-%COMP%]{border:1px solid #8f8f8f;border-spacing:0;clear:both;margin:0;height:200mm;width:100%}.lot-border[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding-top:3px;padding-bottom:3px;font-size:15px}#invoice-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border-left:1px solid #8f8f8f}#invoice-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child, td[_ngcontent-%COMP%]:first-child{border-left:none}#invoice-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-bottom:1px solid #8f8f8f}#invoice-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle;font-size:6pt}th[_ngcontent-%COMP%]{font-weight:400}.amount[_ngcontent-%COMP%], .spacing-low[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{text-align:center}.auth-font[_ngcontent-%COMP%], .font-big[_ngcontent-%COMP%], .font-big[_ngcontent-%COMP%]   .terms-cond[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .font-big[_ngcontent-%COMP%]   b[_ngcontent-%COMP%], .invoice_line[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:15px}.company-ltd[_ngcontent-%COMP%]{font-size:18px}.amount[_ngcontent-%COMP%], .invoice_line[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .site[_ngcontent-%COMP%]{font-size:40px;font-weight:600}.invoice_line[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .invoice_line[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:1mm;text-align:center}.lot-border[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 0;font-size:40px}.card-block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:2px}.card-block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:first-child{margin-bottom:1px}.border-margin[_ngcontent-%COMP%]{padding:5px 0 15px}.border-margin-d-t[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:5px}.top-print-head[_ngcontent-%COMP%]{text-align:right;display:inline-block;font-size:15px;padding-top:0;margin-top:0}.spacing-low[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#90ee90!important}.spacing-low[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .spacing-low[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .spacing-low[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-left:2px solid #8f8f8f!important;border-right:2px solid #8f8f8f!important}.spacing-low[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .spacing-low[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child, .spacing-low[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-top:2px solid #8f8f8f!important;border-bottom:2px solid #8f8f8f!important}.spacing-low[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .spacing-low[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:1px .75rem!important}.border-width[_ngcontent-%COMP%], .spacing-low[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{border-width:2px!important}.lot-border[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], table.lot-border[_ngcontent-%COMP%], table.spacing-low[_ngcontent-%COMP%]{margin-bottom:1px!important}.border[_ngcontent-%COMP%], .border-dark[_ngcontent-%COMP%], .border-top[_ngcontent-%COMP%]{border:1px solid #8f8f8f!important}.border-bootom-none[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child, .border-zero[_ngcontent-%COMP%]{border:0!important}.border-bootom-none[_ngcontent-%COMP%]{border-bottom:2px solid #8f8f8f!important}.display-between[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.spacing-low[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;bottom:0}tfoot.spacing-low[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #8f8f8f!important}tfoot.spacing-low[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child{text-align:left!important}.print-invoice-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{height:178mm;overflow:hidden;overflow-x:hidden;display:block;width:100%}.print-invoice-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%], .print-invoice-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}.print-invoice-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%], .print-invoice-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%}.print-invoice-table[_ngcontent-%COMP%], .print-invoice-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .print-invoice-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:2px solid #8f8f8f!important}.print-invoice-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-bottom:2px solid #8f8f8f!important;border-top:0 solid #8f8f8f!important}.print-invoice-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-left:0!important;border-right:0!important}.width-63[_ngcontent-%COMP%]{width:63%}.width-65[_ngcontent-%COMP%]{width:65%}.width-60[_ngcontent-%COMP%]{width:60%}.width-37[_ngcontent-%COMP%]{width:37%}.width-8[_ngcontent-%COMP%]{width:8%}.width-10[_ngcontent-%COMP%]{width:10%}.width-13[_ngcontent-%COMP%]{width:13%}.width-30[_ngcontent-%COMP%]{width:30%}.width-33[_ngcontent-%COMP%]{width:33%}.width-4px[_ngcontent-%COMP%]{width:4px}.width-4[_ngcontent-%COMP%]{width:4%}.width-15[_ngcontent-%COMP%]{width:15%}.width-9[_ngcontent-%COMP%]{width:9%}.duplicate-border[_ngcontent-%COMP%]{border-top-width:3px!important;border-left-width:3px!important;border-right-width:3px!important}.pd-0[_ngcontent-%COMP%]{padding:0}.mr-0[_ngcontent-%COMP%]{margin:0}.display-flex-end[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center}.jus-con-center[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.print-logo-style[_ngcontent-%COMP%]{width:380px;height:auto}.font-bold[_ngcontent-%COMP%]{font-weight:700}.disc-style[_ngcontent-%COMP%]{font-size:15px;border-top:0!important}.main-invoice-row[_ngcontent-%COMP%]{margin:3px 2px 5px}.pd-top-bottom-2[_ngcontent-%COMP%]{padding-top:2px!important;padding-bottom:2px!important}.pd-top-bottom-1[_ngcontent-%COMP%]{font-size:13px!important;padding-top:1px!important;padding-bottom:1px!important}.pd-top-bottom-0[_ngcontent-%COMP%]{padding-top:0!important;padding-bottom:0!important}.pd-top-60[_ngcontent-%COMP%]{padding-top:60px!important}}@media print{.printpage[_ngcontent-%COMP%]{display:table;table-layout:fixed;height:auto}}@media print{.pad-print[_ngcontent-%COMP%], .printpage[_ngcontent-%COMP%]{padding-top:.05cm}}@media print{.print-in-border[_ngcontent-%COMP%]{border:3px solid #8f8f8f}.border-margin[_ngcontent-%COMP%]{padding:1rem 4rem}.t-table[_ngcontent-%COMP%]{height:800px}.table-left-right[_ngcontent-%COMP%]{border-left:0!important;border-right:0!important}.tr[_ngcontent-%COMP%]::nth-child(2){height:100vh}.table-left-right[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:3px .75rem;vertical-align:top;text-align:center;width:100%;border-collapse:collapse;height:100%}.table-left-right[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table-left-right[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-left:1px solid #c3c3c3;border-right:1px solid #c3c3c3}.table-left-right[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-top:1px solid #c3c3c3;border-bottom:1px solid #c3c3c3}}.p-mr-bt[_ngcontent-%COMP%]{margin-bottom:20px!important}.section[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{margin:0;box-shadow:0}.float-lft[_ngcontent-%COMP%]{float:left!important}.col-sm-1[_ngcontent-%COMP%], .col-sm-2[_ngcontent-%COMP%], .col-sm-3[_ngcontent-%COMP%], .col-sm-4[_ngcontent-%COMP%], .col-sm-5[_ngcontent-%COMP%], .col-sm-6[_ngcontent-%COMP%], .col-sm-7[_ngcontent-%COMP%], .col-sm-8[_ngcontent-%COMP%], .col-sm-9[_ngcontent-%COMP%], .col-sm-10[_ngcontent-%COMP%], .col-sm-11[_ngcontent-%COMP%], .col-sm-12[_ngcontent-%COMP%]{float:left}.col-sm-12[_ngcontent-%COMP%]{width:100%}.col-sm-11[_ngcontent-%COMP%]{width:91.66666666666666%}.col-sm-10[_ngcontent-%COMP%]{width:83.33333333333334%}.col-sm-9[_ngcontent-%COMP%]{width:75%}.col-sm-8[_ngcontent-%COMP%]{width:66.66666666666666%}.col-sm-7[_ngcontent-%COMP%]{width:58.333333333333336%}.col-sm-6[_ngcontent-%COMP%]{width:50%}.col-sm-5[_ngcontent-%COMP%]{width:41.66666666666667%}.col-sm-4[_ngcontent-%COMP%]{width:33.33333333333333%}.col-sm-3[_ngcontent-%COMP%]{width:25%}.col-sm-2[_ngcontent-%COMP%]{width:16.666666666666664%}.col-sm-1[_ngcontent-%COMP%]{width:8.333333333333332%}.col-md-3[_ngcontent-%COMP%]{width:25%}.lot-border[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border:2px solid #8f8f8f}.footer-border[_ngcontent-%COMP%]{border:1px solid #8f8f8f}.border-top-none[_ngcontent-%COMP%], .footer-bottom[_ngcontent-%COMP%]{padding:5px 15px}.border-top[_ngcontent-%COMP%]{border-top:1px solid;padding:15px}.terms-cond[_ngcontent-%COMP%]{list-style:none}.terms-cond[_ngcontent-%COMP%], .terms-cond[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-left:0!important;padding-left:0!important}.footer-bottom[_ngcontent-%COMP%]{padding-left:15px;border:1px solid #8f8f8f}.border-top-none[_ngcontent-%COMP%]{border:1px solid #8f8f8f;border-top:none}.display-flex[_ngcontent-%COMP%]{display:flex}.display-flex[_ngcontent-%COMP%], .display-flex-end[_ngcontent-%COMP%]{justify-content:center;align-items:flex-end}.height-100[_ngcontent-%COMP%]{height:100%}.company-ltd[_ngcontent-%COMP%]{margin-top:30px}#invoice-table[_ngcontent-%COMP%]{border:1px solid #8f8f8f;border-spacing:0;clear:both;margin:0;height:200mm;width:100%}.lot-border[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding-top:3px;padding-bottom:3px;font-size:15px}#invoice-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border-left:1px solid #8f8f8f}#invoice-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child, td[_ngcontent-%COMP%]:first-child{border-left:none}#invoice-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-bottom:1px solid #8f8f8f}#invoice-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle;font-size:6pt}th[_ngcontent-%COMP%]{font-weight:400}.amount[_ngcontent-%COMP%], .spacing-low[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{text-align:center}.auth-font[_ngcontent-%COMP%], .font-big[_ngcontent-%COMP%], .font-big[_ngcontent-%COMP%]   .terms-cond[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .font-big[_ngcontent-%COMP%]   b[_ngcontent-%COMP%], .invoice_line[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:15px}.company-ltd[_ngcontent-%COMP%]{font-size:18px}.amount[_ngcontent-%COMP%], .invoice_line[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .site[_ngcontent-%COMP%]{font-size:40px;font-weight:600}.invoice_line[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .invoice_line[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:1mm;text-align:center}.lot-border[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 0;font-size:40px}.card-block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:2px}.card-block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:first-child{margin-bottom:1px}.border-margin[_ngcontent-%COMP%]{padding:5px 0 15px}.top-print-head[_ngcontent-%COMP%]{text-align:right;display:inline-block;font-size:15px;padding-top:0;margin-top:0}.spacing-low[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f5f5f5!important}.spacing-low[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .spacing-low[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .spacing-low[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-left:2px solid #8f8f8f!important;border-right:2px solid #8f8f8f!important}.spacing-low[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .spacing-low[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child, .spacing-low[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-top:2px solid #8f8f8f!important;border-bottom:2px solid #8f8f8f!important}.spacing-low[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .spacing-low[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:1px .75rem!important}.border-width[_ngcontent-%COMP%], .spacing-low[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{border-width:2px!important}.lot-border[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], table.lot-border[_ngcontent-%COMP%], table.spacing-low[_ngcontent-%COMP%]{margin-bottom:1px!important}.border[_ngcontent-%COMP%], .border-dark[_ngcontent-%COMP%], .border-top[_ngcontent-%COMP%]{border:1px solid #8f8f8f!important}.border-bootom-none[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child, .border-zero[_ngcontent-%COMP%]{border:0!important}.border-bootom-none[_ngcontent-%COMP%]{border-bottom:2px solid #8f8f8f!important}.display-between[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.spacing-low[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;bottom:0}tfoot.spacing-low[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #8f8f8f!important}tfoot.spacing-low[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child{text-align:left!important}.print-invoice-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{height:178mm;overflow:hidden;overflow-x:hidden;display:block;width:100%}.print-invoice-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%], .print-invoice-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}.print-invoice-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%], .print-invoice-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%}.print-invoice-table[_ngcontent-%COMP%], .print-invoice-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .print-invoice-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:2px solid #8f8f8f!important}.print-invoice-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-bottom:2px solid #8f8f8f!important;border-top:0 solid #8f8f8f!important}.print-invoice-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-left:0!important;border-right:0!important}.width-63[_ngcontent-%COMP%]{width:63%}.width-65[_ngcontent-%COMP%]{width:65%}.width-60[_ngcontent-%COMP%]{width:60%}.width-37[_ngcontent-%COMP%]{width:37%}.width-8[_ngcontent-%COMP%]{width:8%}.width-10[_ngcontent-%COMP%]{width:10%}.width-13[_ngcontent-%COMP%]{width:13%}.width-30[_ngcontent-%COMP%]{width:30%}.width-33[_ngcontent-%COMP%]{width:33%}.width-4px[_ngcontent-%COMP%]{width:4px}.width-4[_ngcontent-%COMP%]{width:4%}.width-15[_ngcontent-%COMP%]{width:15%}.width-9[_ngcontent-%COMP%]{width:9%}.duplicate-border[_ngcontent-%COMP%]{border-top-width:3px!important;border-left-width:3px!important;border-right-width:3px!important}.pd-0[_ngcontent-%COMP%]{padding:0}.mr-0[_ngcontent-%COMP%]{margin:0}.display-flex-end[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center}.font-20[_ngcontent-%COMP%]{font-size:20px}.font-18[_ngcontent-%COMP%]{font-size:18px}.font-10[_ngcontent-%COMP%]{font-size:10px}.font-12[_ngcontent-%COMP%]{font-size:12px}.font-30[_ngcontent-%COMP%]{font-size:30px}.font-13[_ngcontent-%COMP%]{font-size:13px}.font-15[_ngcontent-%COMP%]{font-size:15px}.jus-con-center[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.print-logo-style[_ngcontent-%COMP%]{width:180px;height:auto}.font-bold[_ngcontent-%COMP%]{font-weight:700}.disc-style[_ngcontent-%COMP%]{font-size:15px;border-top:0!important}.main-invoice-row[_ngcontent-%COMP%]{margin:3px 2px 5px}.pd-top-bottom-2[_ngcontent-%COMP%]{padding-top:2px!important;padding-bottom:2px!important}.pd-top-bottom-1[_ngcontent-%COMP%]{font-size:13px!important;padding-top:1px!important;padding-bottom:1px!important}.pd-top-bottom-0[_ngcontent-%COMP%]{padding-top:0!important;padding-bottom:0!important}.pd-top-60[_ngcontent-%COMP%]{padding-top:60px!important}.printpage[_ngcontent-%COMP%]{background:#fff;display:block;margin:0 auto .5cm;box-shadow:0 0 .5cm rgba(0,0,0,.5)}.print-in-border[_ngcontent-%COMP%]{border:3px solid #8f8f8f}.border-margin[_ngcontent-%COMP%]{padding:1rem 4rem}.t-table[_ngcontent-%COMP%]{height:800px}.table-left-right[_ngcontent-%COMP%]{border-left:0!important;border-right:0!important}.tr[_ngcontent-%COMP%]::nth-child(2){height:100vh}.table-left-right[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:3px .75rem;vertical-align:top;text-align:center;width:100%;border-collapse:collapse;height:100%}.table-left-right[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table-left-right[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-left:1px solid #c3c3c3;border-right:1px solid #c3c3c3}.table-left-right[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-top:1px solid #c3c3c3;border-bottom:1px solid #c3c3c3}.mr-bt-5[_ngcontent-%COMP%]{margin-bottom:15px!important}.main-modal-invoice-review[_ngcontent-%COMP%]{max-height:calc(100vh - 60px);overflow-y:auto}.inovice-reiview-footer[_ngcontent-%COMP%]{bottom:0}.inovice-reiview-footer[_ngcontent-%COMP%], .inovice-reiview-header[_ngcontent-%COMP%]{position:absolute;width:100%;background:#fff;padding:6px 0}.inovice-reiview-header[_ngcontent-%COMP%]{top:0;z-index:99999999}.in-pre-text[_ngcontent-%COMP%]{width:100%;margin:0}.mr-tb-26[_ngcontent-%COMP%]{margin-top:26px;margin-bottom:50px}.invoice-close[_ngcontent-%COMP%]{position:absolute;right:13px;top:1px;opacity:1!important}.invoice-close-cross[_ngcontent-%COMP%]{color:#aa3634!important}.invoice-close[_ngcontent-%COMP%]:focus{outline:none!important;border:none!important}.print-heading-refix[_ngcontent-%COMP%]{margin-top:-8px}.terms-print-fix[_ngcontent-%COMP%]{margin-bottom:-2px}.terms-border[_ngcontent-%COMP%]{margin-bottom:-3px}.left-side[_ngcontent-%COMP%]{text-align:left!important}.right-side[_ngcontent-%COMP%]{text-align:right!important}"]}),t})();var fe=n("faFZ");const Pe=["searchfilter"];function Me(t,e){if(1&t){const t=j.kc();j.jc(0,"nb-radio",36),j.uc("valueChange",(function(e){return j.Xc(t),j.yc().onChange(e)})),j.jd(1),j.ic()}if(2&t){const t=e.$implicit;j.Hc("value",t.id)("disabled",t.disabled),j.Pb(1),j.ld(" ",t.value,"")}}function je(t,e){if(1&t){const t=j.kc();j.jc(0,"div",43),j.jc(1,"span",44),j.jd(2),j.ic(),j.jd(3," : "),j.jc(4,"span",45),j.jd(5),j.ic(),j.jc(6,"span",46),j.uc("click",(function(){j.Xc(t);const n=e.$implicit;return j.yc(2).onClear(n.field[0])})),j.jc(7,"strong"),j.jd(8,"x"),j.ic(),j.ic(),j.ic()}if(2&t){const t=e.$implicit;j.Pb(2),j.kd(t.field[0]),j.Pb(3),j.kd(t.value)}}function Ce(t,e){if(1&t){const t=j.kc();j.hc(0),j.jc(1,"div",37),j.jc(2,"label",38),j.jd(3,"Filter By : "),j.ic(),j.jc(4,"div",39),j.jc(5,"div",40),j.hd(6,je,9,2,"div",41),j.jc(7,"div",42),j.uc("click",(function(){return j.Xc(t),j.yc().onClearFilter()})),j.jd(8,"Clear All"),j.ic(),j.ic(),j.ic(),j.ic(),j.gc()}if(2&t){const t=j.yc();j.Pb(6),j.Hc("ngForOf",t.requestData.data.parameters)}}const ve=function(){return{type:"zoom"}},ye=function(t){return{animation:t}};function Oe(t,e){if(1&t){const t=j.kc();j.jc(0,"nb-icon",51),j.uc("click",(function(){j.Xc(t);const e=j.yc().row;return j.yc(2).printJobCard(e)})),j.zc(1,"disableStockBatchPipe"),j.ic()}if(2&t){const t=j.yc().row;j.Hc("hidden",j.Ac(1,2,t))("options",j.Nc(5,ye,j.Mc(4,ve)))}}const ke=function(t){return["/pages/stock-batch/edit",t]};function _e(t,e){if(1&t){const t=j.kc();j.ec(0,"nb-icon",48),j.jc(1,"nb-icon",49),j.uc("click",(function(){j.Xc(t);const n=e.row;return j.yc(2).deleteStockBatch(n.id)})),j.zc(2,"disableStockBatchPipe"),j.ic(),j.hd(3,Oe,2,7,"nb-icon",50)}if(2&t){const t=e.row,n=j.yc(2);j.Hc("options",j.Nc(9,ye,j.Mc(8,ve)))("hidden",n.hiddenEdit)("routerLink",j.Nc(11,ke,t.id)),j.Pb(1),j.Hc("options",j.Nc(14,ye,j.Mc(13,ve)))("hidden",n.hidden||j.Ac(2,6,t)),j.Pb(2),j.Hc("ngIf",t.showPrint)}}function xe(t,e){1&t&&(j.jc(0,"ngx-datatable-column",47),j.hd(1,_e,4,16,"ng-template",30),j.ic()),2&t&&j.Hc("maxWidth",90)}function we(t,e){if(1&t){const t=j.kc();j.jd(0,"Stock In Type "),j.jc(1,"div",52),j.jc(2,"nb-icon",53),j.uc("click",(function(){return j.Xc(t),j.yc().onOpenFilter("stockInType")})),j.ic(),j.ic()}if(2&t){j.yc();const t=j.Uc(54);j.Pb(2),j.Hc("nbPopover",t)}}function De(t,e){if(1&t){const t=j.kc();j.jd(0,"Party Name "),j.jc(1,"div",52),j.jc(2,"nb-icon",53),j.uc("click",(function(){return j.Xc(t),j.yc().onOpenFilter("partyName")})),j.ic(),j.ic()}if(2&t){j.yc();const t=j.Uc(54);j.Pb(2),j.Hc("nbPopover",t)}}function Be(t,e){if(1&t){const t=j.kc();j.jd(0,"Quality Name "),j.jc(1,"div",52),j.jc(2,"nb-icon",53),j.uc("click",(function(){return j.Xc(t),j.yc().onOpenFilter("qualityName")})),j.ic(),j.ic()}if(2&t){j.yc();const t=j.Uc(54);j.Pb(2),j.Hc("nbPopover",t)}}function Se(t,e){if(1&t){const t=j.kc();j.jd(0,"Batch "),j.jc(1,"div",52),j.jc(2,"nb-icon",53),j.uc("click",(function(){return j.Xc(t),j.yc().onOpenFilter("batchList")})),j.ic(),j.ic()}if(2&t){j.yc();const t=j.Uc(54);j.Pb(2),j.Hc("nbPopover",t)}}function Ie(t,e){if(1&t&&(j.hc(0),j.jc(1,"span",55),j.jd(2),j.ic(),j.gc()),2&t){const t=e.$implicit;j.Pb(2),j.ld("",t.batchId," ")}}function Le(t,e){1&t&&j.hd(0,Ie,3,1,"ng-container",54),2&t&&j.Hc("ngForOf",e.row.batchList)}function Ne(t,e){if(1&t){const t=j.kc();j.jd(0,"Chl No "),j.jc(1,"div",52),j.jc(2,"nb-icon",53),j.uc("click",(function(){return j.Xc(t),j.yc().onOpenFilter("chlNo")})),j.ic(),j.ic()}if(2&t){j.yc();const t=j.Uc(54);j.Pb(2),j.Hc("nbPopover",t)}}function He(t,e){if(1&t&&(j.jc(0,"option",56),j.jd(1),j.ic()),2&t){const t=e.$implicit;j.Hc("value",t),j.Pb(1),j.kd(t)}}function Re(t,e){if(1&t){const t=j.kc();j.hc(0),j.jc(1,"ng-select",68),j.uc("ngModelChange",(function(e){return j.Xc(t),j.yc(2).operatorSelected=e})),j.jc(2,"ng-option",69),j.jd(3,"Conatins"),j.ic(),j.jc(4,"ng-option",70),j.jd(5,"Equals"),j.ic(),j.jc(6,"ng-option",71),j.jd(7,"Not Equals"),j.ic(),j.jc(8,"ng-option",72),j.jd(9,"Starts With"),j.ic(),j.jc(10,"ng-option",73),j.jd(11,"Ends With"),j.ic(),j.ic(),j.gc()}if(2&t){const t=j.yc(2);j.Pb(1),j.Hc("ngModel",t.operatorSelected)}}function qe(t,e){if(1&t){const t=j.kc();j.hc(0),j.jc(1,"ng-select",68),j.uc("ngModelChange",(function(e){return j.Xc(t),j.yc(2).operatorSelected=e})),j.jc(2,"ng-option",74),j.jd(3,"Greater Than"),j.ic(),j.jc(4,"ng-option",75),j.jd(5,"Less Than"),j.ic(),j.jc(6,"ng-option",70),j.jd(7,"Equals"),j.ic(),j.jc(8,"ng-option",71),j.jd(9,"Not Equals"),j.ic(),j.ic(),j.gc()}if(2&t){const t=j.yc(2);j.Pb(1),j.Hc("ngModel",t.operatorSelected)}}function Fe(t,e){if(1&t){const t=j.kc();j.jc(0,"div",57),j.jc(1,"div",58),j.jc(2,"div",59),j.jc(3,"span",60),j.jd(4,"Filter"),j.ic(),j.ic(),j.jc(5,"div",61),j.jc(6,"div",62),j.uc("click",(function(){return j.Xc(t),j.yc().closeFilterPopover()})),j.jc(7,"strong"),j.jd(8,"X"),j.ic(),j.ic(),j.ic(),j.ic(),j.jc(9,"div",63),j.jc(10,"div",64),j.hd(11,Re,12,1,"ng-container",22),j.hd(12,qe,10,1,"ng-container",22),j.ic(),j.jc(13,"div",64),j.jc(14,"input",65),j.uc("ngModelChange",(function(e){return j.Xc(t),j.yc().filterWord=e})),j.ic(),j.ic(),j.ic(),j.jc(15,"button",66),j.uc("click",(function(){return j.Xc(t),j.yc().onApplyFilter()})),j.jd(16,"Apply"),j.ic(),j.jc(17,"button",67),j.uc("click",(function(){return j.Xc(t),j.yc().closeFilterPopover()})),j.jd(18,"Close"),j.ic(),j.ic()}if(2&t){const t=j.yc();j.Pb(11),j.Hc("ngIf",t.stringFlag),j.Pb(1),j.Hc("ngIf",t.numberFlag),j.Pb(2),j.Hc("ngModel",t.filterWord)}}const We=function(){return["/pages/stock-batch"]};function Ae(t,e){if(1&t&&(j.jc(0,"div"),j.jd(1),j.ic()),2&t){const t=j.yc().value;j.Pb(1),j.ld(" ",t," ")}}const Ve=function(t){return{"background-color":t}};function Ee(t,e){if(1&t&&(j.jc(0,"div",30),j.jd(1),j.ic()),2&t){const t=j.yc(),e=t.value;j.Hc("ngStyle",j.Nc(2,Ve,t.row.color)),j.Pb(1),j.ld(" ",e," ")}}function ze(t,e){if(1&t&&(j.hd(0,Ae,2,1,"div",18),j.hd(1,Ee,2,4,"div",29)),2&t){const t=e.row;j.Hc("ngIf",!t.color),j.Pb(1),j.Hc("ngIf",t.color)}}function Te(t,e){if(1&t&&(j.jc(0,"div"),j.jd(1),j.ic()),2&t){const t=j.yc().value;j.Pb(1),j.ld(" ",t," ")}}function Ue(t,e){if(1&t&&(j.jc(0,"div",30),j.jd(1),j.ic()),2&t){const t=j.yc(),e=t.value;j.Hc("ngStyle",j.Nc(2,Ve,t.row.color)),j.Pb(1),j.ld(" ",e," ")}}function Ge(t,e){if(1&t&&(j.hd(0,Te,2,1,"div",18),j.hd(1,Ue,2,4,"div",29)),2&t){const t=e.row;j.Hc("ngIf",!t.color),j.Pb(1),j.Hc("ngIf",t.color)}}function $e(t,e){if(1&t&&(j.jc(0,"div",31),j.jc(1,"div",32),j.jd(2),j.ic(),j.ic(),j.jc(3,"div",31),j.jc(4,"div",32),j.jd(5),j.zc(6,"number"),j.ic(),j.ic(),j.jc(7,"div",31),j.jc(8,"div",32),j.jd(9),j.zc(10,"number"),j.ic(),j.ic()),2&t){const t=e.rowCount,n=j.yc().$implicit;j.Pb(2),j.ld(" Total GR: ",t," "),j.Pb(3),j.ld(" Total mtr: ",j.Bc(6,3,n.totalMtr,"1.2-2")," "),j.Pb(4),j.ld(" Total wt: ",j.Bc(10,6,n.totalWt,"1.2-2")," ")}}function Xe(t,e){if(1&t){const t=j.kc();j.jc(0,"div",21),j.jc(1,"div",22),j.jd(2," PChallan Ref: "),j.jc(3,"b"),j.jd(4),j.ic(),j.ic(),j.jc(5,"div"),j.jc(6,"ngx-datatable",23),j.uc("select",(function(e){return j.Xc(t),j.yc().challanGRSelected(e)})),j.ec(7,"ngx-datatable-column",24),j.jc(8,"ngx-datatable-column",25),j.hd(9,ze,2,2,"ng-template",26),j.ic(),j.jc(10,"ngx-datatable-column",27),j.hd(11,Ge,2,2,"ng-template",26),j.ic(),j.jc(12,"ngx-datatable-footer"),j.hd(13,$e,11,9,"ng-template",28),j.ic(),j.ic(),j.ic(),j.ic()}if(2&t){const t=e.$implicit,n=j.yc();j.Pb(4),j.kd(t.pchallanRef),j.Pb(2),j.Hc("rows",t.batchMW)("scrollbarV",!0)("selectionType",n.SelectionType.multiClick)("footerHeight",80)("selectionType","checkbox")("selected",n.checkedChallanList),j.Pb(1),j.Hc("headerCheckboxable",!0)("checkboxable",!0)}}const Qe=function(t){return{iconSize:t}};function Je(t,e){if(1&t){const t=j.kc();j.jc(0,"nb-icon",37),j.uc("click",(function(){j.Xc(t);const e=j.yc(),n=e.$implicit,i=e.index;return j.yc().deleteBatch(n,i)})),j.ic()}if(2&t){const t=j.yc().$implicit,e=j.yc();j.Hc("ngClass",j.Nc(1,Qe,e.totalObj[t.batchId]&&t.batchId==e.selectedBatch))}}function Ze(t,e){if(1&t&&(j.jc(0,"div",38),j.jc(1,"span"),j.jd(2),j.zc(3,"number"),j.ic(),j.jc(4,"span"),j.jd(5),j.zc(6,"number"),j.ic(),j.jc(7,"span"),j.jd(8),j.ic(),j.ic()),2&t){const t=j.yc().$implicit,e=j.yc();j.Pb(2),j.ld(" Mtr: ",j.Bc(3,3,e.totalObj[t.batchId].mtr,"1.2-2")," "),j.Pb(3),j.ld(" Wt: ",j.Bc(6,6,e.totalObj[t.batchId].wt,"1.2-2")," "),j.Pb(3),j.ld(" Pcs: ",e.totalObj[t.batchId].pcs," ")}}const Ke=function(t){return{"active-button":t}},Ye=function(t){return{batchFont:t}};function tn(t,e){if(1&t){const t=j.kc();j.jc(0,"button",33),j.uc("click",(function(){j.Xc(t);const n=e.$implicit,i=e.index;return j.yc().batchSelected(n.batchId,i)})),j.jc(1,"b",34),j.jd(2),j.ic(),j.hd(3,Je,1,3,"nb-icon",35),j.hd(4,Ze,9,9,"div",36),j.ic()}if(2&t){const t=e.$implicit,n=j.yc();j.Hc("ngClass",j.Nc(8,Ke,t.batchId==n.selectedBatch))("ngStyle",j.Nc(10,Ve,t.backColor))("disabled",t.productionPlanned)("value",t.pchallanRef),j.Pb(1),j.Hc("ngClass",j.Nc(12,Ye,n.totalObj[t.batchId]&&t.batchId==n.selectedBatch)),j.Pb(1),j.kd(t.batchId),j.Pb(1),j.Hc("ngIf",!t.isProductionPlanned),j.Pb(1),j.Hc("ngIf",n.totalObj[t.batchId]&&t.batchId==n.selectedBatch)}}const en=function(){return{type:"zoom"}},nn=function(t){return{animation:t}};function cn(t,e){if(1&t){const t=j.kc();j.jc(0,"nb-icon",43),j.uc("click",(function(){j.Xc(t);const n=e.rowIndex;return j.yc(2).removeItemFromBatchList(n)})),j.ic()}2&t&&j.Hc("hidden",e.row.isProductionPlanned)("options",j.Nc(3,nn,j.Mc(2,en)))}function on(t,e){if(1&t&&(j.hc(0),j.jc(1,"ngx-datatable",39),j.ec(2,"ngx-datatable-column",40),j.ec(3,"ngx-datatable-column",41),j.ec(4,"ngx-datatable-column",25),j.ec(5,"ngx-datatable-column",27),j.jc(6,"ngx-datatable-column",42),j.hd(7,cn,1,5,"ng-template",26),j.ic(),j.ic(),j.gc()),2&t){const t=j.yc();j.Pb(1),j.Hc("rows",t.finalStockDataValues[t.selectedBatchIndex].batchMW)("scrollbarV",!0)}}const an=[{path:"",component:rt,canActivate:[o.a],canLoad:[o.a],data:{PermissionName:["add"]}},{path:"view",component:(()=>{class t{constructor(t,e,n,i,c){this.modalService=t,this.toastr=e,this.stockBatchGuard=n,this.stockBatchService=i,this.commonService=c,this.errorData=l,this.loading=!1,this.copyStockList=[],this.stock=[],this.headers=["Stock In Type","Party Name","Bill No","Bill Date","Chl No","Chl Date"],this.module="stock-batch",this.flag=!1,this.disabled=!1,this.tablestyle="bootstrap",this.radioSelect=0,this.radioArray=[{id:1,value:"View Own",disabled:!1},{id:2,value:"View Group",disabled:!1},{id:3,value:"View All",disabled:!1}],this.hidden=!0,this.hiddenEdit=!0,this.hiddenView=!0,this.ownDelete=!0,this.allDelete=!0,this.groupDelete=!0,this.ownEdit=!0,this.allEdit=!0,this.groupEdit=!0,this.tableHeaders=["stockInType","partyName","qualityName","batchList","chlNo"],this.searchStr="",this.requestData=new Ot.a,this.filter=new g,this.filterWord="",this.selectedColumnForFilter="",this.operatorSelected=null,this.tagList=[],this.numberFlag=!1,this.stringFlag=!1,this.pageSizes=[10,20,50,100],this.selectedPageSize=20,this.destroy$=new r.a}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}ngOnInit(){this.requestData.data=new vt.a,this.userId=this.commonService.getUser(),this.userId=this.userId.userId,this.userHeadId=this.commonService.getUserHeadId(),this.userHeadId=this.userHeadId.userHeadId,this.getAddAcess(),this.getViewAccess(),this.getDeleteAccess(),this.getDeleteAccess1(),this.getEditAccess(),this.getEditAccess1(),this.stockBatchGuard.accessRights("view all")?this.radioSelect=3:this.stockBatchGuard.accessRights("view group")?this.radioSelect=2:this.stockBatchGuard.accessRights("view")&&(this.radioSelect=1),this.onChange(this.radioSelect)}pageSizeChanged(){this.requestData.data.pageSize=Number(this.selectedPageSize),this.getStockBatchList()}onOpenFilter(t){"stockInType"==t||"partyName"==t||"qualityName"==t||"chlNo"==t?(this.stringFlag=!0,this.numberFlag=!1):"batchList"==t&&(this.numberFlag=!0,this.stringFlag=!1);const e=this.requestData.data.parameters.findIndex(e=>e.field.find(e=>e==t));e>-1?(this.filterWord=this.requestData.data.parameters[e].value,this.operatorSelected=this.requestData.data.parameters[e].operator):(this.filterWord="",this.operatorSelected=null),this.selectedColumnForFilter=t,this.popover.show()}onApplyFilter(){this.popover.hide();const t=this.requestData.data.parameters.findIndex(t=>t.field.find(t=>t==this.selectedColumnForFilter));if(t>-1)this.requestData.data.parameters[t].operator=this.operatorSelected,this.requestData.data.parameters[t].value=this.filterWord;else{let t=new yt.a;t.field=[this.selectedColumnForFilter],t.value=this.filterWord,t.operator=this.operatorSelected,this.requestData.data.parameters.push(t)}this.requestData.data.pageIndex=0,this.getStockBatchList()}onClear(t){let e;e=this.requestData.data.parameters.findIndex(t?e=>e.field.find(e=>e==t):t=>t.field.find(t=>t==this.selectedColumnForFilter)),e>-1&&(this.filterWord="",this.operatorSelected=null,this.requestData.data.parameters.splice(e,1),this.requestData.data.pageIndex=0,this.getStockBatchList())}closeFilterPopover(){this.popover.hide()}onClearFilter(){this.popover.hide(),this.requestData.data.parameters.length>0&&(this.requestData.data.parameters=[],this.getStockBatchList())}getAddAcess(){this.disabled=!this.stockBatchGuard.accessRights("add")}onChange(t){switch(this.stockList=[],t){case 1:this.requestData.getBy="own",this.getStockBatchList(),this.hidden=this.ownDelete,this.hiddenEdit=this.ownEdit;break;case 2:this.requestData.getBy="group",this.getStockBatchList(),this.hidden=this.groupDelete,this.hiddenEdit=this.groupEdit;break;case 3:this.requestData.getBy="all",this.getStockBatchList(),this.hidden=this.allDelete,this.hiddenEdit=this.allEdit}}open(){let t=/([A-Z])([A-Z])([a-z])|([a-z])([A-Z])/g;this.flag=!0;let e=Object.keys(this.stockList[0]),n=[];e.forEach((e,i)=>{n.push(e.replace(t,"$1$4 $2$3$5")),n[i]=n[i].charAt(0).toUpperCase()+n[i].slice(1)});const i=this.modalService.open(dt.a);i.componentInstance.headers=n,i.componentInstance.list=this.stockList,i.componentInstance.moduleName=this.module}matchString(t,e,n){return"batchId"==e?t.batchData.filter(t=>t.batchId.toLowerCase().includes(n)).length>0:t[e].toLowerCase().includes(n)}setPage(t){this.requestData.data.pageIndex=t.offset,this.getStockBatchList()}getStockBatchList(){this.loading=!0,this.stockList=[],this.stockBatchService.getAllStockBatchList1(this.requestData).pipe(Object(s.a)(this.destroy$)).subscribe(t=>{if(t.success){const e=t.data;this.stockList=Object(d.cloneDeep)(e.data),this.requestData.data.total=e.total}this.loading=!1},t=>{const e=this.requestData.data.parameters.findIndex(t=>t.field.find(t=>t==this.selectedColumnForFilter));e>-1&&(this.filterWord="",this.operatorSelected=null,this.requestData.data.parameters.splice(e,1)),this.loading=!1})}deleteStockBatch(t){this.modalService.open(lt.a,{size:"sm"}).result.then(e=>{e&&this.stockBatchService.deleteStockBatchById(t).pipe(Object(s.a)(this.destroy$)).subscribe(t=>{t.success&&(this.toastr.success(l.Delete),this.onChange(this.radioSelect))},t=>{this.toastr.error(l.Internal_Error)})})}getViewAccess(){this.radioArray[0].disabled=!this.stockBatchGuard.accessRights("view"),this.radioArray[1].disabled=!this.stockBatchGuard.accessRights("view group"),this.radioArray[2].disabled=!this.stockBatchGuard.accessRights("view all")}getDeleteAccess(){this.stockBatchGuard.accessRights("delete")&&(this.ownDelete=!1,this.hidden=this.ownDelete),this.stockBatchGuard.accessRights("delete group")&&(this.groupDelete=!1,this.hidden=this.groupDelete),this.stockBatchGuard.accessRights("delete all")&&(this.allDelete=!1,this.hidden=this.allDelete)}getDeleteAccess1(){this.stockBatchGuard.accessRights("delete")?(this.ownDelete=!1,this.hidden=this.ownDelete):this.hidden=!0}getEditAccess(){this.stockBatchGuard.accessRights("edit")&&(this.ownEdit=!1,this.hiddenEdit=this.ownEdit),this.stockBatchGuard.accessRights("edit group")&&(this.groupEdit=!1,this.hiddenEdit=this.groupEdit),this.stockBatchGuard.accessRights("edit all")&&(this.allEdit=!1,this.hiddenEdit=this.allEdit)}getEditAccess1(){this.stockBatchGuard.accessRights("edit")?(this.ownEdit=!1,this.hiddenEdit=this.ownEdit):this.hiddenEdit=!0}printJobCard(t){const e=this.modalService.open(k);e.componentInstance.isDirectPrintFlag=!0,e.componentInstance.stockBatchData=t,e.componentInstance.stockId=Number(t.id),e.result.then(t=>{})}createTagList(){this.requestData.data.parameters&&this.requestData.data.parameters.length&&this.requestData.data.parameters.forEach(t=>{})}}return t.\u0275fac=function(e){return new(e||t)(j.dc(h.e),j.dc(D.b),j.dc(o.a),j.dc(f.a),j.dc(P.a))},t.\u0275cmp=j.Xb({type:t,selectors:[["ngx-stock-batch"]],viewQuery:function(t,e){var n;1&t&&(j.cd(Pe,!0),j.nd(C.ab,!0)),2&t&&(j.Tc(n=j.vc())&&(e.filterTextBox=n.first),j.Tc(n=j.vc())&&(e.popover=n.first))},decls:55,vars:27,consts:[[3,"show"],[1,"row"],[1,"col-lg-12"],[1,"nb-style"],[1,"nb-header"],[1,"col-md-1","col-3","display-flex-start"],[1,"btn","btn-primary","btn-md","btn-design",3,"routerLink","disabled"],[1,"col-md-9","col-7"],[1,"nb-text"],[1,"col-md-2","col-2","display-flex-start","desktop-justify-flexend"],[1,"btn","btn-primary","btn-md","btn-design",3,"click"],[1,"col-md-6"],[1,"nb-radio",3,"ngModel","ngModelChange"],[3,"value","disabled","valueChange",4,"ngFor","ngForOf"],[1,"col-md-4"],[2,"display","flex"],[2,"margin-top","4px","margin-right","2px"],["status","primary","labelPosition","start","name","shift",3,"ngModel","ngModelChange"],[2,"margin-top","4px","margin-left","2px"],[1,"col-md-8"],[1,"d-flex"],["type","text","placeholder","Search","aria-label","Search","aria-describedby","basic-addon1",1,"form-control",3,"ngModel","ngModelChange"],[4,"ngIf"],[1,"material","table-responsive",3,"rows","ngClass","headerHeight","footerHeight","externalPaging","count","offset","limit","page"],["name","Actions","sortable","false","prop","id",3,"maxWidth",4,"ngIf"],["name","Stock In Type","props","stockInType",3,"maxWidth"],["ngx-datatable-header-template",""],["name","Party Name","props","partyName"],["name","Quality Name","props","qualityName"],["name","Batch","prop","batchList"],["ngx-datatable-cell-template",""],["name","Chl No","props","chlNo",3,"maxWidth"],[1,"page-sizer","d-flex"],["name","pageSizer",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],["templateRef",""],[3,"value","disabled","valueChange"],[1,"filter-by-row"],["for",""],[1,"filter-by-col"],[1,"tag-style-con"],["class","tag-style",4,"ngFor","ngForOf"],[1,"filter-by-clear-all",3,"click"],[1,"tag-style"],[1,"filter-by-title"],[1,"filter-by-val"],[2,"cursor","pointer",3,"click"],["name","Actions","sortable","false","prop","id",3,"maxWidth"],["status","primary","icon","edit",3,"options","hidden","routerLink"],["status","danger","icon","trash",3,"options","hidden","click"],["icon","clipboard","nbTooltip","Print","nbTooltipStatus","primary","status","danger",3,"hidden","options","click",4,"ngIf"],["icon","clipboard","nbTooltip","Print","nbTooltipStatus","primary","status","danger",3,"hidden","options","click"],[1,"filter-icon"],["icon","menu-outline","nbPopoverTrigger","noop",1,"nb-icon-filter",3,"nbPopover","click"],[4,"ngFor","ngForOf"],[1,"invpice-batch-style"],[3,"value"],["id","filterDiv",2,"padding","2px 14px","width","250px"],[1,"row",2,"background-color","#aa3634"],[1,"col-md-10"],[2,"color","white"],[1,"col-md-2",2,"margin-top","3px","color","white"],[2,"cursor","pointer","text-align","center",3,"click"],[1,"row",2,"margin-top","8px"],[1,"col-md-12","mb-1"],["type","text","placeholder","Filter...",1,"form-control",3,"ngModel","ngModelChange"],["nbButton","","status","primary",2,"margin-right","5px",3,"click"],["nbButton","","status","danger",3,"click"],["appendTo","body","placeholder","Select Filter",1,"popup-select",3,"ngModel","ngModelChange"],["value","LIKE"],["value","EQUALS"],["value","NOT_EQUALS"],["value","START_WITH"],["value","END_WITH"],["value","GREATER_THAN"],["value","LESS_THAN"]],template:function(t,e){1&t&&(j.ec(0,"ngx-loading",0),j.jc(1,"div",1),j.jc(2,"div",2),j.jc(3,"nb-card",3),j.jc(4,"nb-card-header",4),j.jc(5,"div",1),j.jc(6,"div",5),j.jc(7,"button",6),j.jd(8,"ADD"),j.ic(),j.ic(),j.jc(9,"div",7),j.jc(10,"h2",8),j.jd(11,"Stock-Batch"),j.ic(),j.ic(),j.jc(12,"div",9),j.jc(13,"button",10),j.uc("click",(function(){return e.open()})),j.jd(14,"EXPORT"),j.ic(),j.ic(),j.ic(),j.ic(),j.jc(15,"nb-card-body"),j.jc(16,"div",1),j.jc(17,"div",11),j.jc(18,"nb-radio-group",12),j.uc("ngModelChange",(function(t){return e.radioSelect=t})),j.hd(19,Me,2,3,"nb-radio",13),j.ic(),j.ic(),j.jc(20,"div",11),j.jc(21,"div",1),j.jc(22,"div",14),j.jc(23,"div",15),j.jc(24,"p",16),j.jd(25,"OR"),j.ic(),j.jc(26,"nb-toggle",17),j.uc("ngModelChange",(function(t){return e.requestData.data.isAnd=t}))("ngModelChange",(function(){return e.getStockBatchList()})),j.ic(),j.jc(27,"p",18),j.jd(28,"AND"),j.ic(),j.ic(),j.ic(),j.jc(29,"div",19),j.jc(30,"div",20),j.jc(31,"input",21),j.uc("ngModelChange",(function(t){return e.searchStr=t})),j.ic(),j.ic(),j.ic(),j.ic(),j.ic(),j.ic(),j.jc(32,"div",1),j.hd(33,Ce,9,1,"ng-container",22),j.ic(),j.jc(34,"ngx-datatable",23),j.uc("page",(function(t){return e.setPage(t)})),j.zc(35,"searchInTable"),j.hd(36,xe,2,1,"ngx-datatable-column",24),j.jc(37,"ngx-datatable-column",25),j.hd(38,we,3,1,"ng-template",26),j.ic(),j.jc(39,"ngx-datatable-column",27),j.hd(40,De,3,1,"ng-template",26),j.ic(),j.jc(41,"ngx-datatable-column",28),j.hd(42,Be,3,1,"ng-template",26),j.ic(),j.jc(43,"ngx-datatable-column",29),j.hd(44,Se,3,1,"ng-template",26),j.hd(45,Le,1,1,"ng-template",30),j.ic(),j.jc(46,"ngx-datatable-column",31),j.hd(47,Ne,3,1,"ng-template",26),j.ic(),j.ic(),j.jc(48,"div",32),j.jc(49,"span"),j.jd(50,"Page Size: "),j.ic(),j.jc(51,"select",33),j.uc("ngModelChange",(function(t){return e.selectedPageSize=t}))("change",(function(){return e.pageSizeChanged()})),j.hd(52,He,2,2,"option",34),j.ic(),j.ic(),j.ic(),j.ic(),j.ic(),j.ic(),j.hd(53,Fe,19,3,"ng-template",null,35,j.id)),2&t&&(j.Hc("show",e.loading),j.Pb(7),j.Hc("routerLink",j.Mc(26,We))("disabled",e.disabled),j.Pb(11),j.Hc("ngModel",e.radioSelect),j.Pb(1),j.Hc("ngForOf",e.radioArray),j.Pb(7),j.Hc("ngModel",e.requestData.data.isAnd),j.Pb(5),j.Hc("ngModel",e.searchStr),j.Pb(2),j.Hc("ngIf",e.requestData.data.parameters&&e.requestData.data.parameters.length),j.Pb(1),j.Hc("rows",j.Dc(35,21,e.stockList,e.searchStr,e.requestData.data.isAnd,e.tableHeaders))("ngClass",e.tablestyle)("headerHeight",31)("footerHeight",40)("externalPaging",!0)("count",e.requestData.data.total)("offset",e.requestData.data.pageIndex)("limit",e.requestData.data.pageSize),j.Pb(2),j.Hc("ngIf",!e.hiddenEdit||!e.hidden),j.Pb(1),j.Hc("maxWidth",130),j.Pb(9),j.Hc("maxWidth",130),j.Pb(5),j.Hc("ngModel",e.selectedPageSize),j.Pb(1),j.Hc("ngForOf",e.pageSizes))},directives:[B.a,C.u,C.x,c.d,C.t,C.eb,x.l,x.o,i.m,C.wb,x.a,i.n,I.e,i.l,I.b,I.c,I.a,x.u,C.db,C.I,C.yb,C.ab,x.p,x.w,C.q,S.a,S.c],pipes:[kt.a,ht.a],styles:[".filter-icon[_ngcontent-%COMP%]{position:absolute;top:5px;right:10px}.nb-icon-filter[_ngcontent-%COMP%]{font-size:15px}  .ng-dropdown-panel{z-index:9999999!important}.filter-by-row[_ngcontent-%COMP%]{padding-bottom:22px;display:block;height:auto;overflow:hidden}.tag-style-con[_ngcontent-%COMP%]{float:left;width:100%}.filter-by-row[_ngcontent-%COMP%]   .tag-style[_ngcontent-%COMP%]{font-size:14px;font-family:DM Sans;color:#aa3634;font-weight:500;text-transform:capitalize;padding:5px 12px!important;margin-right:11px;margin-bottom:11px;float:left;border-radius:24px;border:2px solid #aa3634;background-color:#fff}.filter-by-col[_ngcontent-%COMP%]{float:left;width:calc(100% - 71px);border:0 solid}.filter-by-row[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{float:left;margin-right:12px;font-family:DM Sans;font-size:14px;color:#aa3634;margin-top:5px}.filter-clear-all[_ngcontent-%COMP%]{float:left;margin-top:6px}span.filter-by-val[_ngcontent-%COMP%]{font-weight:400;color:#aa3634;margin-right:5px}.filter-label[_ngcontent-%COMP%]   span.filter-clear-all[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:0!important}.filter-by-clear-all[_ngcontent-%COMP%]{font-size:14px;color:#aa3634;opacity:.5;text-decoration:underline;font-family:DM Sans;font-weight:500;float:left;margin-top:6px;cursor:pointer}.filter-by-clear-all[_ngcontent-%COMP%]:hover{text-decoration:none}.filter-by-row[_ngcontent-%COMP%]   .tag-style[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin:5px 0 0 3px;cursor:pointer;vertical-align:top;display:inline-block}"]}),t})(),canActivate:[o.a],canLoad:[o.a],data:{PermissionName:["view","view group","view all"]}},{path:"pending",component:Ct,canActivate:[o.a],canLoad:[o.a],data:{PermissionName:["view","view group","view all"]}},{path:"report",component:fe.a,canActivate:[o.a],canLoad:[o.a],data:{PermissionName:["view","view group","view all"]}},{path:"return-lot",component:re,canActivate:[o.a],canLoad:[o.a],data:{PermissionName:["view","view group","view all"]}},{path:"return-lot/view",component:zt,canActivate:[o.a],canLoad:[o.a],data:{PermissionName:["view","view group","view all"]}},{path:"return-lot/print",component:me,canActivate:[o.a],canLoad:[o.a],data:{PermissionName:["view","view group","view all"]}},{path:"edit/:id",component:rt,canActivate:[o.a],canLoad:[o.a],data:{PermissionName:["edit","edit group","edit all"]}},{path:"stock-in",component:(()=>{class t{constructor(t,e,n,i,c,o,a,s){this.activeRoute=t,this.router=e,this.partyService=n,this.qualityService=i,this.stockBatchService=c,this.toastr=o,this.modalService=a,this.cdr=s,this.loading=!1,this.unsubscribe$=new r.a,this.stockDataValues=[],this.finalStockDataValues=[],this.stockBatch=new g,this.partyList=[],this.qualityList=[],this.production_flag=[],this.selectedBatchList=[],this.selectedChallanList=[],this.checkedChallanList=[],this.chlListToTransfer=[],this.currentBatchSequence=0,this.SelectionType=I.h,this.transferedMtr=null,this.transferedWt=null,this.totalObj={}}ngOnDestroy(){localStorage.removeItem("stockdata"),this.unsubscribe$.next(),this.unsubscribe$.complete()}ngOnInit(){this.currentStockId=Number(this.activeRoute.snapshot.queryParamMap.get("id")),this.getPartyList(),this.getQualityList(),this.getStockBatchById()}getPartyList(){this.loading=!0,this.partyService.getAllPartyNameList().pipe(Object(s.a)(this.unsubscribe$)).subscribe(t=>{t.success&&(this.partyList=t.data),this.loading=!1},t=>{this.loading=!1})}getQualityList(){this.loading=!0,this.qualityService.getQualityNameData().pipe(Object(s.a)(this.unsubscribe$)).subscribe(t=>{t.success&&t.data&&t.data.length>0&&(this.qualityList=t.data),this.loading=!1},t=>{this.loading=!1})}getStockBatchById(){this.loading=!0,this.stockBatchService.getStockBatchById(this.currentStockId).pipe(Object(s.a)(this.unsubscribe$)).subscribe(t=>{t.success&&(this.stockBatch.receiveDate=new Date(t.data.receiveDate),this.stockBatch.qualityId=t.data.qualityId,this.stockBatch=t.data,this.stockBatch.chlDate=new Date(this.stockBatch.chlDate),this.stockBatch.receiveDate=new Date(this.stockBatch.receiveDate),this.stockBatch.batchData.length&&(this.stockBatch.batchData=Object(d.sortBy)(t.data.batchData,"pchallanRef"),this.stockBatch.batchData.map(t=>{}),this.setStockDataValues1(t.data))),this.loading=!1},t=>{this.loading=!1})}setStockDataValues1(t){let e=[...new Set(this.stockBatch.batchData.map(t=>t.pchallanRef))];this.stockDataValues=[],e.forEach((t,n)=>{this.stockDataValues.push(new u),this.stockDataValues[n].pchallanRef=e[n],this.stockDataValues[n].old=!0}),0!=this.qualityList.length&&this.qualityList.forEach(t=>{t.id==this.stockBatch.qualityId&&(this.wtPer100mtrCopy=t.wtPer100m,this.stockBatch.unit=t.unit)}),this.stockDataValues.forEach((t,e)=>{this.production_flag[e]=!1,this.stockBatch.batchData.forEach((n,i)=>{if(n.pchallanRef==t.pchallanRef){t.batchMW.push(new p(n.mtr,n.wt,n.isProductionPlanned,n.id,n.controlId));let i=0,c=0;t.batchMW.forEach((t,e)=>{i+=t.mtr,c+=t.wt,t.sequence=e+1,t.pchallanRef=n.pchallanRef}),t.totalMtr=i,t.totalWt=c,t.batchMW[t.batchMW.length-1].batchId=n.batchId,t.batchMW[t.batchMW.length-1].pchallanRef=n.pchallanRef,n.isProductionPlanned&&(this.production_flag[e]=!0)}})}),t.batchData.forEach(t=>{if(this.finalStockDataValues||(this.finalStockDataValues=[]),this.finalStockDataValues&&t.batchId){let e=this.finalStockDataValues.findIndex(e=>e.batchId==t.batchId);if(e>-1){this.finalStockDataValues[e].batchMW&&!this.finalStockDataValues[e].batchMW.length&&(this.finalStockDataValues[e].batchMW=[]),this.finalStockDataValues[e].batchMW.push(new p(t.mtr,t.wt,t.isProductionPlanned,t.id,t.controlId));let n=0,i=0;this.finalStockDataValues[e].batchMW.forEach(t=>{n+=t.mtr,i+=t.wt}),this.finalStockDataValues[e].totalMtr=n,this.finalStockDataValues[e].totalWt=i,this.finalStockDataValues[e].batchMW[this.finalStockDataValues[e].batchMW.length-1].batchId=t.batchId,this.finalStockDataValues[e].batchMW[this.finalStockDataValues[e].batchMW.length-1].pchallanRef=t.pchallanRef;let c=this.stockDataValues.findIndex(e=>e.batchMW.filter(e=>e.id==t.id&&e.pchallanRef==t.pchallanRef&&!e.color).length);if(c>-1){let n=this.stockDataValues[c].batchMW.findIndex(e=>e.id==t.id&&e.pchallanRef==t.pchallanRef&&!e.color);n>-1&&(this.stockDataValues[c].batchMW[n].color=this.finalStockDataValues[e].backColor)}}else{this.finalStockDataValues||(this.finalStockDataValues=[]),this.finalStockDataValues.push({batchId:t.batchId,batchMW:[]});let e=this.finalStockDataValues.length-1;this.getRandomColor(this.finalStockDataValues[e]),this.finalStockDataValues[e].batchMW.push(new p(t.mtr,t.wt,t.isProductionPlanned,t.id,t.controlId)),this.finalStockDataValues[e].batchMW[this.finalStockDataValues[e].batchMW.length-1].batchId=t.batchId,this.finalStockDataValues[e].batchMW[this.finalStockDataValues[e].batchMW.length-1].pchallanRef=t.pchallanRef;let n=this.stockDataValues.findIndex(e=>e.batchMW.filter(e=>e.id==t.id&&e.pchallanRef==t.pchallanRef&&!e.color).length);if(n>-1){let i=this.stockDataValues[n].batchMW.findIndex(e=>e.id==t.id&&e.pchallanRef==t.pchallanRef&&!e.color);i>-1&&(this.stockDataValues[n].batchMW[i].color=this.finalStockDataValues[e].backColor)}}}}),this.finalStockDataValues.forEach(t=>{t.batchMW.filter(t=>t.isProductionPlanned).length&&(t.isProductionPlanned=!0)})}batchPChallanSelected(t){this.selectedPChallan=t,this.checkedChallanList=[],this.selectedChallanList=this.stockDataValues.filter(t=>t.pchallanRef==this.selectedPChallan)[0]}batchSelected(t,e){this.selectedBatch=t,this.selectedBatchIndex=e;let n={},i=0,c=0,o=0;this.finalStockDataValues[this.selectedBatchIndex].batchMW.forEach(t=>{i+=t.mtr,c+=t.wt,o+=1}),n.mtr=i,n.wt=c,n.pcs=o,this.totalObj[this.selectedBatch]=n}addBatch(t){var e=new u;if(this.finalStockDataValues.length)if(this.finalStockDataValues.findIndex(t=>null==t.batchId)>-1)this.toastr.error("Please fill all the required fields");else{let n=[...this.finalStockDataValues];n=Object(d.sortBy)(n,"pchallanRef","asc"),this.stockBatchService.getBatchSequence(!0).pipe(Object(s.a)(this.unsubscribe$)).subscribe(n=>{if(n.success){e.batchId=n.data.sequence,e.batchId<this.currentBatchSequence&&(this.currentBatchSequence=e.batchId,this.selectedBatch=this.currentBatchSequence,this.selectedBatchIndex=this.finalStockDataValues.length-1),this.getRandomColor(e),this.finalStockDataValues.push(Object.assign({},e));const i="collapsible-panel--expanded";t.target.classList.contains(i)?t.target.classList.remove(i):t.target.classList.add(i)}})}else this.finalStockDataValues=[],e=new u,this.getRandomColor(e),this.finalStockDataValues.push(Object.assign({},e)),this.getCurrentBatchSequence(),this.finalStockDataValues[0].batchId=this.currentBatchSequence,this.selectedBatch=this.currentBatchSequence,this.selectedBatchIndex=this.finalStockDataValues.length-1}getCurrentBatchSequence(){this.stockBatchService.getBatchSequence(!0).pipe(Object(s.a)(this.unsubscribe$)).subscribe(t=>{t.success&&(this.currentBatchSequence=t.data.sequence,this.finalStockDataValues&&this.finalStockDataValues[0]&&(this.finalStockDataValues[0].batchId=this.currentBatchSequence),this.selectedBatch=this.currentBatchSequence,this.selectedBatchIndex=this.finalStockDataValues.length-1)})}challanGRSelected(t){this.checkedChallanList=t.selected}removeItemFromBatchList(t){let e=this.finalStockDataValues[this.selectedBatchIndex].batchMW.splice(t,1);if(e&&e[0]&&e[0].pchallanRef){let t=this.stockDataValues.findIndex(t=>t.pchallanRef==e[0].pchallanRef);e[0].batchId=null,e[0].color="";let n=this.stockDataValues[t].batchMW.findIndex(t=>t.id==e[0].id);this.stockDataValues[t].batchMW[n].color="",this.stockDataValues[t].batchMW[n].batchId=null,this.finalStockDataValues[this.selectedBatchIndex].batchMW=[...this.finalStockDataValues[this.selectedBatchIndex].batchMW];let i={},c=0,o=0,a=0;this.finalStockDataValues[this.selectedBatchIndex].batchMW.forEach(t=>{c+=t.mtr,o+=t.wt,a+=1}),i.mtr=c,i.wt=o,i.pcs=a,this.totalObj[this.selectedBatch]=i,this.cdr.detectChanges()}}deleteBatch(t,e){t.batchMW.forEach(t=>{let e=this.stockDataValues.findIndex(e=>e.batchMW.filter(e=>e.batchId==t.batchId&&e.batchId).length);if(e>-1){let n=this.stockDataValues[e].batchMW.findIndex(e=>e.batchId==t.batchId&&e.batchId);n>-1&&(this.stockDataValues[e].batchMW[n].batchId=null,this.stockDataValues[e].batchMW[n].color="")}t.batchId=null,console.log(t,this.stockDataValues[e])}),this.finalStockDataValues.splice(e,1),this.selectedBatch=null,this.selectedBatchIndex=-1}transferClicked(){if(this.selectedBatch){let t=this.finalStockDataValues.filter(t=>t.batchId==this.selectedBatch);if(t&&t.length&&t[0])if(t[0].isProductionPlanned)this.toastr.error("Production planned for this batch!");else if(this.checkedChallanList&&this.checkedChallanList.length)if(this.finalStockDataValues.length&&this.selectedBatch){let t=this.finalStockDataValues.findIndex(t=>t.batchId==this.selectedBatch),e=!1,n={};this.checkedChallanList.forEach(i=>{if(i.color)e=!0;else{this.finalStockDataValues[t].batchMW.push([i].map(t=>Object.assign(Object.assign({},t),{batchId:this.selectedBatch,pchallanRef:i.pchallanRef}))[0]);let e=this.stockDataValues.findIndex(t=>t.pchallanRef==i.pchallanRef),c=this.stockDataValues[e].batchMW.findIndex(t=>t.id==i.id);this.stockDataValues[e].batchMW[c].batchId=this.selectedBatch,this.stockDataValues[e].batchMW[c].color=this.finalStockDataValues[t].backColor,this.finalStockDataValues[t].batchMW=[...this.finalStockDataValues[t].batchMW];let o=0,a=0,s=0;this.finalStockDataValues[t].batchMW.forEach(t=>{o+=t.mtr,a+=t.wt,s+=1}),n.mtr=o,n.wt=a,n.pcs=s,this.totalObj[this.selectedBatch]=n}}),e&&this.toastr.error("Selected GR already exist in batch"),this.checkedChallanList=[]}else this.toastr.error("Select Batch first");else this.toastr.error("Select challan grs first")}else this.toastr.error("Select Batch first")}addUpdateStockBatch(t,e){if(this.finalStockDataValues&&this.finalStockDataValues.length){this.stockBatch.batchData=[];for(let t of this.finalStockDataValues){if(!t.batchMW||!t.batchMW)return this.toastr.error(t.batchId+" GRs are empty"),!1;t.batchMW.forEach(t=>{this.stockBatch.batchData.push(Object.assign({},t))})}this.loading=!0,this.stockBatchService.updateStockBatch(this.stockBatch).pipe(Object(s.a)(this.unsubscribe$)).subscribe(n=>{n.success?(this.toastr.success(n.msg),e&&this.printJobCard(t,n.data),this.router.navigate(["pages/stock-batch"])):this.toastr.error(n.msg),this.loading=!1},t=>{this.loading=!1})}}printJobCard(t,e){const n=this.modalService.open(k);n.componentInstance.isDirectPrintFlag=!0,n.componentInstance.stockBatchData=this.stockBatch,n.componentInstance.stockId=Number(e),n.result.then(t=>{})}getRandomColor(t){let e="#";for(var n=0;n<6;n++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];t.backColor=e}}return t.\u0275fac=function(e){return new(e||t)(j.dc(c.a),j.dc(c.c),j.dc(b.a),j.dc(m.a),j.dc(f.a),j.dc(D.b),j.dc(h.e),j.dc(j.i))},t.\u0275cmp=j.Xb({type:t,selectors:[["ngx-stock-in"]],decls:33,vars:10,consts:[[3,"show"],["id","target"],[1,"nb-style"],[1,"nb-header"],[1,"row"],[1,"col-md-12","col-6"],[1,"nb-text","txt-ov-elips"],["myForm","ngForm"],[1,"row",2,"margin","3px 3px"],["id","fmtr-table",1,"col-md-7"],[1,"capsule-data-container","cap-border"],["class","col-md-6","style","padding-left: 25px;\n                                margin-right: -15px;",4,"ngFor","ngForOf"],[1,"col-md-5","mt-3"],[1,"btn-primary","btn-sm","btn-design-save","mob-stock","button-base","ripple",3,"click"],[1,"capsule-list-container"],["icon","plus",1,"add-icon",2,"position","relative",3,"options","click"],["type","button","style","margin-top: 2px;","nbButton","","size","small","class","badge-design-stock-in",3,"ngClass","ngStyle","disabled","value","click",4,"ngFor","ngForOf"],["id","fmtr-table",2,"width","100%"],[4,"ngIf"],[1,"col-md-12","mobile-btn-center","text-btn-right","mt-50"],["type","button",1,"btn","btn-primary","btn-sm","btn-design-save","mob-stock","button-base","ripple",3,"disabled","click"],[1,"col-md-6",2,"padding-left","25px","margin-right","-15px"],[1,"row",2,"padding-left","20px","padding-top","10px"],[1,"material","common-table","datatable-auto-height","fm-table-body-height",2,"height","400px",3,"rows","scrollbarV","selectionType","footerHeight","selected","select"],["name","Sr No.","prop","sequence",3,"headerCheckboxable","checkboxable"],["name","Mtr","prop","mtr"],["ngx-datatable-cell-template",""],["name","Wt","prop","wt"],["ngx-datatable-footer-template",""],["class","inside_value",3,"ngStyle",4,"ngIf"],[1,"inside_value",3,"ngStyle"],[1,"col-md-4"],[1,"toal-finish-mtr"],["type","button","nbButton","","size","small",1,"badge-design-stock-in",2,"margin-top","2px",3,"ngClass","ngStyle","disabled","value","click"],[3,"ngClass"],["class","icon-pposition","icon","close-circle-outline",3,"ngClass","click",4,"ngIf"],["style","display: grid;font-size: 10.5px;",4,"ngIf"],["icon","close-circle-outline",1,"icon-pposition",3,"ngClass","click"],[2,"display","grid","font-size","10.5px"],[1,"material","common-table","datatable-auto-height","fm-table-body-height",2,"height","242px",3,"rows","scrollbarV"],["name","PChallan","prop","pchallanRef"],["name","Sr No.","prop","sequence"],["name","Action","prop","id"],["icon","trash","status","danger",3,"hidden","options","click"]],template:function(t,e){if(1&t){const t=j.kc();j.ec(0,"ngx-loading",0),j.ec(1,"div",1),j.jc(2,"nb-card",2),j.jc(3,"nb-card-header",3),j.jc(4,"div",4),j.jc(5,"div",5),j.jc(6,"h2",6),j.jd(7,"Stock In"),j.ic(),j.ic(),j.ic(),j.ic(),j.jc(8,"nb-card-body"),j.jc(9,"div"),j.jc(10,"form",null,7),j.jc(12,"div",8),j.jc(13,"div",9),j.jc(14,"div",10),j.jc(15,"div",4),j.hd(16,Xe,14,9,"div",11),j.ic(),j.ic(),j.ic(),j.jc(17,"div",12),j.jc(18,"div",4),j.jc(19,"button",13),j.uc("click",(function(){return e.transferClicked()})),j.jd(20,"Transfer"),j.ic(),j.ic(),j.jc(21,"div",4),j.jc(22,"div",14),j.jc(23,"nb-icon",15),j.uc("click",(function(t){return e.addBatch(t)})),j.ic(),j.hd(24,tn,5,14,"button",16),j.ic(),j.jc(25,"div",17),j.hd(26,on,8,2,"ng-container",18),j.ic(),j.ic(),j.ic(),j.ic(),j.jc(27,"div",4),j.jc(28,"div",19),j.jc(29,"button",20),j.uc("click",(function(){j.Xc(t);const n=j.Uc(11);return e.addUpdateStockBatch(n,!1)})),j.jd(30,"SAVE"),j.ic(),j.jc(31,"button",20),j.uc("click",(function(){j.Xc(t);const n=j.Uc(11);return e.addUpdateStockBatch(n,!0)})),j.jd(32,"SAVE & PRINT"),j.ic(),j.ic(),j.ic(),j.ic(),j.ic(),j.ic(),j.ic()}2&t&&(j.Hc("show",e.loading),j.Pb(16),j.Hc("ngForOf",e.stockDataValues),j.Pb(7),j.Hc("options",j.Nc(8,nn,j.Mc(7,en))),j.Pb(1),j.Hc("ngForOf",e.finalStockDataValues),j.Pb(2),j.Hc("ngIf",e.selectedBatchIndex>-1),j.Pb(3),j.Hc("disabled",e.loading),j.Pb(2),j.Hc("disabled",e.loading))},directives:[B.a,C.u,C.x,C.t,x.x,x.m,x.n,i.m,C.I,i.n,I.e,I.b,I.a,I.f,I.d,i.o,C.q,i.l],pipes:[i.f],styles:[".capsule-list-container[_ngcontent-%COMP%]{border:1px solid;overflow-y:scroll;height:115px;max-height:115px;width:100%!important;margin-top:10px!important;padding:1px}.capsule-data-container[_ngcontent-%COMP%]{border:1px solid;height:440px!important;max-height:440px!important;width:100%!important}.cap-border[_ngcontent-%COMP%]{overflow-x:scroll;border:1px solid!important}.list-container[_ngcontent-%COMP%]{overflow-y:scroll;height:130px}.active-button[_ngcontent-%COMP%], .active-button[_ngcontent-%COMP%]:active{box-shadow:4px 7px 10px #000!important}.inactive-button[_ngcontent-%COMP%]{background-color:#5e5b5e!important}.disabled[_ngcontent-%COMP%]{background-color:#dad6da!important}.add-icon[_ngcontent-%COMP%]{color:#fff!important;background-color:#5e5b5e;height:32px!important;width:32px!important;top:0;padding:4px;border-radius:55px;cursor:pointer;margin-left:0!important;margin-right:12px!important;margin-top:5px!important}.inside_value[_ngcontent-%COMP%]{width:100%;text-align:center;color:#fff;font-weight:700}.batchFont[_ngcontent-%COMP%]{font-size:20px!important}.iconSize[_ngcontent-%COMP%]{width:20px!important;height:20px!important}"]}),t})(),canActivate:[o.a],canLoad:[o.a],data:{PermissionName:["add"]}}];let sn=(()=>{class t{}return t.\u0275mod=j.bc({type:t}),t.\u0275inj=j.ac({factory:function(e){return new(e||t)},providers:[o.a],imports:[[c.g.forChild(an)],c.g]}),t})();var rn=n("yzeJ"),ln=n("vTDv");let dn=(()=>{class t{}return t.\u0275mod=j.bc({type:t}),t.\u0275inj=j.ac({factory:function(e){return new(e||t)},imports:[[i.c,sn,rn.a,ln.a]]}),t})()},R0b5:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var i=n("4/8P"),c=n("fXoL"),o=n("tk/3");let a=(()=>{class t{constructor(t,e){this.httpClient=t,this.commonService=e}saveMergedBatch(t){return this.httpClient.post(this.commonService.envUrl()+"api/stockBatch/create/mergeBatchList",t)}getBatchesByPartyQuality(t,e){return this.httpClient.get(this.commonService.envUrl()+"api/stockBatch/batch/ByQualityAndPartyWithoutProductionPlan/"+t+"/"+e)}getAllMergeBatch(){return this.httpClient.get(this.commonService.envUrl()+"api/stockBatch/get/mergeBatchList")}getAllMergeBatchV1(t){return this.httpClient.post(this.commonService.envUrl()+"api/stockBatch/get/mergeBatchList/allPaginated",t)}getMergeBatchById(t){return this.httpClient.get(this.commonService.envUrl()+"api/stockBatch/get/mergeBatchListBy?mergeBatchId="+t)}deleteMergeBatch(t){return this.httpClient.delete(this.commonService.envUrl()+"api/stockBatch/delete/mergeBatchListBy?mergeBatchId="+t)}updateMergeBatch(t){return this.httpClient.put(this.commonService.envUrl()+"api/stockBatch/update/mergeBatchList",t)}}return t.\u0275fac=function(e){return new(e||t)(c.rc(o.b),c.rc(i.a))},t.\u0275prov=c.Zb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},SapW:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var i=n("4/8P"),c=n("fXoL"),o=n("tk/3");let a=(()=>{class t{constructor(t,e){this.httpClient=t,this.commonService=e}isBatchIdExists(t,e){return this.httpClient.get(this.commonService.envUrl()+"api/stockBatch/isBatchExists/"+t+"/"+e)}isPchallanExists(t,e){return this.httpClient.get(this.commonService.envUrl()+`api/stockBatch/exist/pchallan?partyId=${t}&pchallanRef=${e}`)}addPchallan(t){return this.httpClient.post(this.commonService.envUrl()+"api/stockBatch/add/pchallan",t)}updatePchallan(t){return this.httpClient.put(this.commonService.envUrl()+"api/stockBatch/update/pchallan",t)}deleteStockBatchById(t){return this.httpClient.delete(this.commonService.envUrl()+"api/stockBatch/"+t)}getAllStockBatchList(t,e){return this.httpClient.get(this.commonService.envUrl()+"api/stockBatch/all/"+e+"/"+t)}getAllStockBatchList1(t){return this.httpClient.post(this.commonService.envUrl()+"api/stockBatch/allpaginated",t)}getAvailableStockBatchList(t,e){return this.httpClient.get(this.commonService.envUrl()+"api/stockBatch/pending/all/"+e+"/"+t)}getShortStockReport(t){return this.httpClient.post(this.commonService.envUrl()+"api/dispatch/report/forConslidateBill",t)}getDetailedStockReport(t){return this.httpClient.post(this.commonService.envUrl()+"api/dispatch/filter/getBill",t)}addStockBatch(t){return this.httpClient.post(this.commonService.envUrl()+"api/stockBatch",t)}updateStockBatch(t){return this.httpClient.put(this.commonService.envUrl()+"api/stockBatch",t)}getStockBatchById(t){return this.httpClient.get(this.commonService.envUrl()+"api/stockBatch/"+t)}getAllBatch(){return this.httpClient.get(this.commonService.envUrl()+"api/stockBatch/batch/all")}getBatchById(t,e){return this.httpClient.get(this.commonService.envUrl()+"api/stockBatch/batch/ByQualityAndParty/"+e+"/"+t)}getAllBatchForAdditionSlip(){return this.httpClient.get(this.commonService.envUrl()+"api/stockBatch/batch/forAdditionalSlip")}getJobCardData(t){return this.httpClient.get(`${this.commonService.envUrl()}api/stockBatch/get/getJobCardBy?batchId=${t}`)}getBatchSequence(t){return this.httpClient.get(this.commonService.envUrl()+"api/admin/get/batchSequence?update="+t)}updateBatchSequence(t){return this.httpClient.put(this.commonService.envUrl()+"api/admin/update/batchSequence/",t)}getBatchesByPartyQuality(t,e){return this.httpClient.get(this.commonService.envUrl()+"api/stockBatch/batch/ByQualityAndPartyWithProductionPlan/"+t+"/"+e)}getBatchGRById(t){return this.httpClient.get(this.commonService.envUrl()+"api/stockBatch/batch/"+t+"/"+t)}returnLotPost(t){return this.httpClient.post(this.commonService.envUrl()+"api/stockBatch/add/returnBatch",t)}returnLotgetById(t){return this.httpClient.get(this.commonService.envUrl()+"api/stockBatch/get/returnBatch?chlNo="+t)}returnLotgetAll(){return this.httpClient.get(this.commonService.envUrl()+"api/stockBatch/all/returnBatch")}returnLotgetAllPaginated(t){return this.httpClient.post(this.commonService.envUrl()+"api/stockBatch/all/returnBatch/allPaginated",t)}getConslidateBatchResponse(t){return this.httpClient.post(this.commonService.envUrl()+"api/stockBatch/pending/forConslidateBatchResponse",t)}}return t.\u0275fac=function(e){return new(e||t)(c.rc(o.b),c.rc(i.a))},t.\u0275prov=c.Zb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},faFZ:function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var i=n("tcrU"),c=n("cmeu"),o=n("SapW"),a=n("fXoL"),s=n("ofXK"),r=n("aceb"),l=n("3Pt+");function d(t,e){if(1&t&&(a.jc(0,"span"),a.jd(1),a.ic()),2&t){const t=e.$implicit,n=e.index,i=a.yc(2).$implicit,c=a.yc(2);a.Pb(1),a.md(" ",t," : ",i[c.copyHeaderKeys[n]]," , ")}}function h(t,e){if(1&t&&(a.jc(0,"th"),a.jd(1),a.ic()),2&t){const t=e.$implicit;a.Pb(1),a.kd(t)}}function g(t,e){if(1&t&&(a.jc(0,"td"),a.jd(1),a.ic()),2&t){const t=e.$implicit,n=a.yc().$implicit;a.Pb(1),a.kd(n[t])}}function p(t,e){if(1&t&&(a.jc(0,"tr"),a.hd(1,g,2,1,"td",6),a.ic()),2&t){const t=e.index,n=a.yc(4);a.ed("background",t%2==0?"#ffffff":"#f2f2f2"),a.Pb(1),a.Hc("ngForOf",n.headerArray)}}function u(t,e){if(1&t&&(a.jc(0,"div",8),a.jc(1,"div",9),a.jc(2,"div",10),a.jc(3,"h5",11),a.hd(4,d,2,2,"span",6),a.ic(),a.ic(),a.jc(5,"table",12),a.jc(6,"tr"),a.hd(7,h,2,1,"th",6),a.ic(),a.hd(8,p,2,3,"tr",13),a.ic(),a.ic(),a.ic()),2&t){const t=a.yc().$implicit,e=a.yc(2);a.Pb(4),a.Hc("ngForOf",e.headerKeys),a.Pb(3),a.Hc("ngForOf",e.headers),a.Pb(1),a.Hc("ngForOf",t.list)}}function b(t,e){if(1&t&&(a.hc(0),a.hd(1,u,9,3,"div",7),a.gc()),2&t){const t=e.$implicit;a.Pb(1),a.Hc("ngIf",t.list&&t.list.length)}}function m(t,e){if(1&t&&(a.jc(0,"div",2),a.jc(1,"div",3),a.jc(2,"div",4),a.jc(3,"span"),a.jc(4,"h3"),a.jd(5,"PENDING REPORT"),a.ic(),a.jc(6,"span",5),a.jd(7),a.zc(8,"date"),a.ic(),a.ic(),a.ic(),a.ic(),a.hd(9,b,2,1,"ng-container",6),a.ec(10,"br"),a.ec(11,"br"),a.ic()),2&t){const t=a.yc();a.Pb(7),a.kd(a.Bc(8,2,t.currentDate,"dd/MM/yyyy")),a.Pb(2),a.Hc("ngForOf",t.shortReport)}}let f=(()=>{class t{constructor(t,e,n){this.stockService=t,this.exportService=e,this.datepipe=n,this.currentDate=new Date,this.shortReport=[],this.headerArray=[],this.headerKeys=[],this.copyHeaderKeys=[]}ngOnInit(){this.maxDate=new Date(this.currentDate.getFullYear(),this.currentDate.getMonth(),this.currentDate.getDate(),23,59),this.getShortReport()}getShortReport(){if(this.shortReport&&this.shortReport.length){let t=/([A-Z])([A-Z])([a-z])|([a-z])([A-Z])/g;this.copyHeaderKeys=Object.keys(this.shortReport[0]);let e=[];if(this.copyHeaderKeys.forEach((n,i)=>{e.push(n.replace(t,"$1$4 $2$3$5")),e[i]=e[i].charAt(0).toUpperCase()+e[i].slice(1)}),e=e.filter(t=>"List"!==t),this.copyHeaderKeys=this.copyHeaderKeys.filter(t=>"list"!==t),this.headerKeys=[...e],this.shortReport[0].list&&this.shortReport[0].list.length){let t=/([A-Z])([A-Z])([a-z])|([a-z])([A-Z])/g;this.headerArray=Object.keys(this.shortReport[0].list[0]);let e=[];this.headerArray.forEach((n,i)=>{e.push(n.replace(t,"$1$4 $2$3$5")),e[i]=e[i].charAt(0).toUpperCase()+e[i].slice(1)}),this.headers=[...e]}}this.printReport()}printReport(){let t=new i.PrintDocument({title:""});t.append('<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/paper-css/0.3.0/paper.css">'),t.append('<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">'),t.append('<link href="https://cdn.grapecity.com/wijmo/5.latest/styles/wijmo.min.css" rel="stylesheet">');let e=setInterval(()=>{let n=document.getElementById("shortReport");null!=n&&(t.append(n),clearInterval(e),setTimeout(()=>{t.print(),this.shortReport=[]},1e3))},10)}}return t.\u0275fac=function(e){return new(e||t)(a.dc(o.a),a.dc(c.a),a.dc(s.e))},t.\u0275cmp=a.Xb({type:t,selectors:[["ngx-report"]],inputs:{shortReport:"shortReport"},decls:5,vars:1,consts:[["stockReportForm","ngForm"],["id","shortReport","class","print-body",4,"ngIf"],["id","shortReport",1,"print-body"],[1,"row","report-header"],[1,"col-md-12","print-layout-report"],[1,"font-20"],[4,"ngFor","ngForOf"],["class","mb-5",4,"ngIf"],[1,"mb-5"],[1,"print-body"],[1,"invoice-no-heading",2,"width","fit-content"],[1,"bold-invoice",2,"font-size","18px"],[1,"print-layout-report","table-bordered","table-striped","table-process-fnt","width-100",2,"font-size","large"],[3,"background",4,"ngFor","ngForOf"]],template:function(t,e){1&t&&(a.jc(0,"nb-card"),a.jc(1,"nb-card-body"),a.jc(2,"form",null,0),a.hd(4,m,12,5,"div",1),a.ic(),a.ic(),a.ic()),2&t&&(a.Pb(4),a.Hc("ngIf",e.shortReport&&e.shortReport.length>0))},directives:[r.u,r.t,l.x,l.m,l.n,s.n,s.m],pipes:[s.e],styles:[".trs[_ngcontent-%COMP%]:nth-of-type(2n){background-color:#f2f2f2}"]}),t})()}}]);