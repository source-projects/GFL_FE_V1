!function(){function t(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||n(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=n(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var c=0,a=function(){};return{s:a,n:function(){return c>=t.length?{done:!0}:{done:!1,value:t[c++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,r=!0,l=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return r=t.done,t},e:function(t){l=!0,o=t},f:function(){try{r||null==i.return||i.return()}finally{if(l)throw o}}}}function n(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{ENVk:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var i=n("4/8P"),a=n("fXoL"),r=n("tk/3"),l=function(){var t=function(){function t(e,n){c(this,t),this.httpClient=e,this.commonService=n}return o(t,[{key:"getAllQualityByParty",value:function(t){return this.httpClient.get(this.commonService.envUrl()+"api/Quality/ByParty/"+t)}},{key:"getAllUserHeads",value:function(){return this.httpClient.get(this.commonService.envUrl()+"api/userHead")}},{key:"getPartyQualityByMaster",value:function(t){return this.httpClient.get(this.commonService.envUrl()+"api/QualityAndParty/ByMaster/"+t)}},{key:"getBatchByMasterId",value:function(t){return this.httpClient.get(this.commonService.envUrl()+"api/batch/ByMaster/"+t)}},{key:"getBatchDataBybatchNo",value:function(t,e){return this.httpClient.get(this.commonService.envUrl()+"api/batch/"+e+"/"+t)}},{key:"addFinishedMeter",value:function(t){return this.httpClient.put(this.commonService.envUrl()+"api/batch/finishMtr",t)}},{key:"getBatchesByPartyQuality",value:function(t,e){return this.httpClient.get(this.commonService.envUrl()+"api/stockBatch/batch/ByQualityAndPartyWithProductionPlan/"+t+"/"+e)}},{key:"getAllBatchForFinishMeter",value:function(){return this.httpClient.get(this.commonService.envUrl()+"api/stockBatch/getAllBatchForFinishMtr")}},{key:"getAllBatchForFinishMeterPaginated",value:function(t){return this.httpClient.post(this.commonService.envUrl()+"api/stockBatch/getAllBatchForFinishMtr/allPaginated",t)}},{key:"removeBatch",value:function(t){return this.httpClient.delete(this.commonService.envUrl()+"api/batch/removeBy?productionId="+t)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(a.rc(r.b),a.rc(i.a))},t.\u0275prov=a.Zb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},IO9Y:function(n,i,a){"use strict";a.r(i),a.d(i,"StockBatchModule",(function(){return On}));var r=a("ofXK"),l=a("tyNb"),s=a("yGZr"),d=a("mrSG"),h=a("1G5W"),u=a("XNiG"),g=a("O1SP"),p=a("LvDl"),b=a("1kSV"),f=function t(){c(this,t),this.stockInType="Fabric",this.stockInType="Fabric"},m=function t(e,n,i,a,o){c(this,t),this.controlId=o||null,this.id=a||null,e&&(this.mtr=e),n&&(this.wt=n),this.isProductionPlanned=i||!1,this.batchId=null,this.color="",this.sequence=null},v=function t(e){c(this,t),this.isNotUnique=!1,this.batchId=e||null,this.batchMW=[],this.backColor=""},P=a("8k+d"),y=a("RNo3"),M=a("SapW"),j=a("4/8P"),C=a("tcrU"),k=a("fXoL"),O=a("aceb");function _(t,e){if(1&t&&(k.jc(0,"tr"),k.jc(1,"td",30),k.jd(2),k.ic(),k.jc(3,"td",31),k.jd(4),k.zc(5,"number"),k.ic(),k.jc(6,"td",31),k.jd(7),k.zc(8,"number"),k.ic(),k.ec(9,"td",32),k.ic()),2&t){var n=e.$implicit;k.Pb(2),k.kd(n.sr),k.Pb(2),k.ld("",k.Bc(5,3,n.mtr,"1.2-2")," "),k.Pb(3),k.ld("",k.Bc(8,6,n.wt,"1.2-2")," ")}}function x(t,e){if(1&t&&(k.jc(0,"tr"),k.jc(1,"td",30),k.jd(2),k.ic(),k.jc(3,"td",31),k.jd(4),k.zc(5,"number"),k.ic(),k.jc(6,"td",31),k.jd(7),k.zc(8,"number"),k.ic(),k.ec(9,"td",32),k.ic()),2&t){var n=e.$implicit;k.Pb(2),k.kd(n.sr),k.Pb(2),k.ld("",k.Bc(5,3,n.mtr,"1.2-2")," "),k.Pb(3),k.ld("",k.Bc(8,6,n.wt,"1.2-2")," ")}}function w(t,e){if(1&t&&(k.jc(0,"div"),k.jc(1,"div",2),k.jc(2,"div",3),k.jc(3,"div",4),k.jc(4,"div",5),k.jc(5,"div",6),k.jc(6,"div",7),k.jc(7,"div",8),k.jc(8,"h2",9),k.jc(9,"b"),k.jd(10,"JOB CARD"),k.ic(),k.ic(),k.ic(),k.ic(),k.ic(),k.ic(),k.jc(11,"div",10),k.jc(12,"div",11),k.jc(13,"div",12),k.jc(14,"div",7),k.jc(15,"div",13),k.jc(16,"label",14),k.jd(17,"Party Name:"),k.ic(),k.jc(18,"span",15),k.jd(19),k.ic(),k.ic(),k.jc(20,"div",16),k.jc(21,"label",14),k.jd(22,"Master Name:"),k.ic(),k.jc(23,"span",15),k.jd(24),k.ic(),k.ic(),k.ic(),k.ic(),k.jc(25,"div",12),k.jc(26,"div",7),k.jc(27,"div",16),k.jc(28,"label",14),k.jd(29,"P Chl No:"),k.ic(),k.jc(30,"span",17),k.jd(31),k.ic(),k.ic(),k.jc(32,"div",16),k.jc(33,"label",14),k.jd(34,"Date:"),k.ic(),k.jc(35,"span",17),k.jd(36),k.zc(37,"date"),k.ic(),k.ic(),k.ic(),k.ic(),k.jc(38,"div",12),k.jc(39,"div",7),k.jc(40,"div",13),k.jc(41,"label",14),k.jd(42,"Grey Mtr:"),k.ic(),k.jc(43,"span",17),k.jd(44),k.zc(45,"number"),k.ic(),k.ic(),k.jc(46,"div",16),k.jc(47,"label",14),k.jd(48,"Grey Wt:"),k.ic(),k.jc(49,"span",17),k.jd(50),k.zc(51,"number"),k.ic(),k.ic(),k.ic(),k.ic(),k.jc(52,"div",12),k.jc(53,"div",7),k.jc(54,"div",13),k.jc(55,"label",14),k.jd(56,"Lot No:"),k.ic(),k.jc(57,"span",15),k.jd(58),k.ic(),k.ic(),k.jc(59,"div",16),k.jc(60,"label",14),k.jd(61,"Quality ID:"),k.ic(),k.jc(62,"span",17),k.jd(63),k.ic(),k.ic(),k.ic(),k.ic(),k.jc(64,"div",12),k.jc(65,"div",7),k.jc(66,"div",13),k.jc(67,"label",14),k.jd(68,"Party Code:"),k.ic(),k.jc(69,"span",18),k.jd(70),k.ic(),k.ic(),k.jc(71,"div",16),k.jc(72,"label",14),k.jd(73,"Quality Name:"),k.ic(),k.jc(74,"span",17),k.jd(75),k.ic(),k.ic(),k.ic(),k.ic(),k.ic(),k.jc(76,"div",6),k.jc(77,"div",19),k.jc(78,"div",20),k.jc(79,"div",21),k.jc(80,"table",22),k.jc(81,"thead"),k.jc(82,"tr"),k.jc(83,"th",23),k.jc(84,"b"),k.jd(85,"Sr"),k.ic(),k.ic(),k.jc(86,"th",24),k.jc(87,"b"),k.jd(88,"Grey Mtr"),k.ic(),k.ic(),k.jc(89,"th",24),k.jc(90,"b"),k.jd(91,"Grey Wt"),k.ic(),k.ic(),k.jc(92,"th",25),k.jc(93,"b"),k.jd(94,"Finish Mtr"),k.ic(),k.ic(),k.ic(),k.ic(),k.jc(95,"tbody"),k.hd(96,_,10,9,"tr",1),k.jc(97,"tr"),k.jc(98,"td",26),k.jc(99,"b"),k.jd(100,"TTL"),k.ic(),k.ic(),k.jc(101,"td",27),k.jc(102,"b"),k.jd(103),k.zc(104,"number"),k.ic(),k.ic(),k.jc(105,"td",27),k.jc(106,"b"),k.jd(107),k.zc(108,"number"),k.ic(),k.ic(),k.jc(109,"td",28),k.ec(110,"b"),k.ic(),k.ic(),k.ic(),k.ic(),k.ic(),k.ic(),k.jc(111,"div",29),k.jc(112,"div",21),k.jc(113,"table",22),k.jc(114,"thead"),k.jc(115,"tr"),k.jc(116,"th",23),k.jc(117,"b"),k.jd(118,"Sr"),k.ic(),k.ic(),k.jc(119,"th",24),k.jc(120,"b"),k.jd(121,"Grey Mtr"),k.ic(),k.ic(),k.jc(122,"th",24),k.jc(123,"b"),k.jd(124,"Grey Wt"),k.ic(),k.ic(),k.jc(125,"th",25),k.jc(126,"b"),k.jd(127,"Finish Mtr"),k.ic(),k.ic(),k.ic(),k.ic(),k.jc(128,"tbody"),k.hd(129,x,10,9,"tr",1),k.jc(130,"tr"),k.jc(131,"td",26),k.jc(132,"b"),k.jd(133,"TTL"),k.ic(),k.ic(),k.jc(134,"td",27),k.jc(135,"b"),k.jd(136),k.zc(137,"number"),k.ic(),k.ic(),k.jc(138,"td",27),k.jc(139,"b"),k.jd(140),k.zc(141,"number"),k.ic(),k.ic(),k.jc(142,"td",28),k.ec(143,"b"),k.ic(),k.ic(),k.ic(),k.ic(),k.ic(),k.ic(),k.ic(),k.ic(),k.ic(),k.ic(),k.ic(),k.ic(),k.ic()),2&t){var n=e.$implicit,i=e.index;k.Pb(1),k.Jc("id","print-jobCard",i,""),k.Pb(18),k.kd(n.partyName),k.Pb(5),k.kd(n.masterName),k.Pb(7),k.kd(n.chalNo),k.Pb(5),k.kd(k.Bc(37,17,n.chlDate,"dd/MM/yyyy")),k.Pb(8),k.kd(k.Bc(45,20,n.totalMtr,"1.2-2")),k.Pb(6),k.kd(k.Bc(51,23,n.totalWt,"1.2-2")),k.Pb(8),k.kd(n.batchId),k.Pb(5),k.kd(n.qualityId),k.Pb(7),k.kd(n.partyCode),k.Pb(5),k.kd(n.qualityName),k.Pb(21),k.Hc("ngForOf",n.batchDataList),k.Pb(7),k.kd(k.Bc(104,26,n.totalMtrList1,"1.2-2")),k.Pb(4),k.kd(k.Bc(108,29,n.totalWtList1,"1.2-2")),k.Pb(22),k.Hc("ngForOf",n.batchDataList2),k.Pb(7),k.kd(k.Bc(137,32,n.totalMtrList2,"1.2-2")),k.Pb(4),k.kd(k.Bc(141,35,n.totalWtList2,"1.2-2"))}}var D,S,B=((D=function(){function t(e,n){c(this,t),this.activeModal=e,this.stockBatchService=n,this.printBatchData=[],this.tempGr={sr:"",mtr:"",wt:""},this.destroy$=new u.a}return o(t,[{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}},{key:"ngOnInit",value:function(){this.isDirectPrintFlag&&this.getstockDataById()}},{key:"getstockDataById",value:function(){var t,n=this,i=[];i.push(String(this.batchId)),this.batchId?t=i:(this.stockBatchData.batchData=this.stockBatchData.batchData.filter((function(t){return t.batchId})),t=this.stockBatchData.batchData.map((function(t){return t.batchId})).filter((function(t,e,n){return n.indexOf(t)===e})));var c,a=e(t);try{for(a.s();!(c=a.n()).done;){var o=c.value;this.stockBatchService.getJobCardData(o).pipe(Object(h.a)(this.destroy$)).subscribe((function(e){e.success&&(n.printBatchData.push(e.data),n.printBatchData.length==t.length&&(n.printBatchData.forEach((function(t){if(t.batchDataList.length>24){for(var e=[],i=t.batchDataList.length,c=24;c<i;c++)e.push(Object.assign({},t.batchDataList[24])),t.batchDataList.splice(24,1);if(t.batchDataList2=[].concat(e),t.batchDataList2.length<24)for(var a=0;a<24;a++)t.batchDataList2[a]||t.batchDataList2.push(Object.assign({},n.tempGr))}else if(t.batchDataList.length<24)for(var o=0;o<24;o++)t.batchDataList[o]||t.batchDataList.push(Object.assign({},n.tempGr));if(!t.batchDataList2){t.batchDataList2=[];for(var r=0;r<24;r++)t.batchDataList2.push(Object.assign({},n.tempGr))}for(var l=1,s=0;s<24;s++)t.batchDataList[s].sr=l,t.batchDataList2[s].sr=l+24,l+=1;var d,h,u,g;d=t.batchDataList.map((function(t){return t.mtr})).reduce((function(t,e){return t+e})),h=t.batchDataList2.map((function(t){return t.mtr})).reduce((function(t,e){return t+e})),u=t.batchDataList.map((function(t){return t.wt})).reduce((function(t,e){return t+e})),g=t.batchDataList2.map((function(t){return t.wt})).reduce((function(t,e){return t+e})),t.totalMtrList1=Number(d),t.totalMtrList2=Number(h),t.totalWtList1=Number(u),t.totalWtList2=Number(g)})),n.printNow()))}))}}catch(r){a.e(r)}finally{a.f()}}},{key:"printNow",value:function(){var t=this,e=new C.PrintDocument({title:""});e.append('<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/paper-css/0.3.0/paper.css">'),e.append('<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">'),e.append('<link href="https://cdn.grapecity.com/wijmo/5.latest/styles/wijmo.min.css" rel="stylesheet">'),e.append('<link href="./job-card.component.scss" rel="stylesheet">'),this.printBatchData.forEach((function(t,n){var i=setInterval((function(){var t=document.getElementById("print-jobCard"+n);null!=t&&(e.append(t),clearInterval(i))}),10)})),setTimeout((function(){e.print(),t.activeModal.close(!0)}),1e3)}}]),t}()).\u0275fac=function(t){return new(t||D)(k.dc(b.a),k.dc(M.a))},D.\u0275cmp=k.Xb({type:D,selectors:[["ngx-job-card"]],inputs:{isDirectPrintFlag:"isDirectPrintFlag",stockBatchData:"stockBatchData",stockId:"stockId",batchId:"batchId"},decls:2,vars:1,consts:[[1,"nb-style","pr-mr-0"],[4,"ngFor","ngForOf"],[1,"jet-slip","size-A5","mr-top-0",3,"id"],[1,"pd-t-b"],[1,"border-whole"],[1,"mr-top-0","nb-c-pd-b"],[1,"container"],[1,"row"],[1,"text-center","mr-top-0","nb-c-pd-b","col-md-12"],[1,"font-30","mr-top-0","nb-c-pd-b"],[1,"nb-c-pd-t"],[1,"container","print-container","mr-top-bottom-15"],[1,"mb-1","print-text-center","pd-bt-25"],[1,"col-md-4","wth-50"],[1,"font-25"],[1,"slip-value","rd-color",2,"color","red !important"],[1,"col-md-8","wth-50"],[1,"slip-value"],[1,"slip-value",2,"color","red !important"],[1,"row","main-invoice-row"],[1,"col-md-6","pd-lf-0"],["id","invoice-table"],[1,"table","print-invoice-table","border-bootom-none","table-bordered","lot-border"],["scope","col",1,"pd-top-bottom-2","width-15"],["scope","col",1,"pd-top-bottom-2","width-30"],["scope","col",1,"pd-top-bottom-2","width-60"],[1,"pd-top-bottom-1","width-15","pd-t-b-5"],[1,"pd-top-bottom-1","width-30","pd-t-b-5"],[1,"pd-top-bottom-1","width-60","pd-t-b-5"],[1,"col-md-6","pd-right-0"],[1,"pd-top-bottom-1","width-15"],[1,"pd-top-bottom-1","width-30"],[1,"pd-top-bottom-1","width-60"]],template:function(t,e){1&t&&(k.jc(0,"nb-card",0),k.hd(1,w,144,38,"div",1),k.ic()),2&t&&(k.Pb(1),k.Hc("ngForOf",e.printBatchData))},directives:[O.u,r.m],pipes:[r.e,r.f],styles:[".print-slip[_ngcontent-%COMP%]{width:100%;height:100%;padding-top:10%}@page{size[_ngcontent-%COMP%]:A5;margin:0}.wth-50[_ngcontent-%COMP%]{width:50%;display:flex;justify-content:space-between}.pd-bt[_ngcontent-%COMP%]{padding-top:0;padding-bottom:0}.slip-value[_ngcontent-%COMP%]{border-style:groove;width:150px}.slip-background[_ngcontent-%COMP%]{display:flex;background-color:#5f9ea0!important}.print-data[_ngcontent-%COMP%]{color:#aa3634!important;border-style:groove;width:50px}@media print{.size-A5[_ngcontent-%COMP%]{size:A5}.mr-top-30[_ngcontent-%COMP%]{margin-top:30px}.mr-bottom-30[_ngcontent-%COMP%]{margin-bottom:30px}.border-style-solid[_ngcontent-%COMP%]{border-style:solid}.pd-top-10[_ngcontent-%COMP%]{padding-top:10px}.slip-value[_ngcontent-%COMP%]{width:60%}.rd-color[_ngcontent-%COMP%]{color:red}.jet-print-style-changes[_ngcontent-%COMP%]{margin:0!important}.jet-print-style-changes[_ngcontent-%COMP%], .main-jet-p-changes[_ngcontent-%COMP%]{width:100%!important;border-style:solid;background-color:c6daf0}.main-jet-p-changes[_ngcontent-%COMP%]{margin-bottom:20px!important}.width-100[_ngcontent-%COMP%]{width:100%!important}.width-20[_ngcontent-%COMP%]{width:20%!important}.width-28[_ngcontent-%COMP%]{width:28%!important}.width-25[_ngcontent-%COMP%]{width:25%!important}.width-27[_ngcontent-%COMP%]{width:27%!important}.width-30[_ngcontent-%COMP%]{width:30%!important}.color-000[_ngcontent-%COMP%]{color:#000!important}.form-style-print[_ngcontent-%COMP%]{padding:0;display:inline-flex;justify-content:flex-start;align-items:center}.pd-15[_ngcontent-%COMP%]{padding-top:15px;padding-bottom:15px}.font-25[_ngcontent-%COMP%]{font-size:25px!important}.mr-top-bottom-15[_ngcontent-%COMP%]{padding-top:20px;padding-bottom:20px}.nb-c-pd-t[_ngcontent-%COMP%]{padding-top:0!important}.nb-c-pd-b[_ngcontent-%COMP%]{padding-bottom:0!important}.font-weight-bold[_ngcontent-%COMP%]{font-weight:700}.font-30[_ngcontent-%COMP%]{font-size:30px}.border-left-1px[_ngcontent-%COMP%]{border-left:1px solid}.print-bg-transperent[_ngcontent-%COMP%]{background-color:transparent}.print-color-media[_ngcontent-%COMP%]{width:auto;color:#000!important}.font-40[_ngcontent-%COMP%]{font-size:40px}}@media print{.section[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{margin:0;box-shadow:0}.img[_ngcontent-%COMP%]{max-width:500px}.col-sm-1[_ngcontent-%COMP%], .col-sm-2[_ngcontent-%COMP%], .col-sm-3[_ngcontent-%COMP%], .col-sm-4[_ngcontent-%COMP%], .col-sm-5[_ngcontent-%COMP%], .col-sm-6[_ngcontent-%COMP%], .col-sm-7[_ngcontent-%COMP%], .col-sm-8[_ngcontent-%COMP%], .col-sm-9[_ngcontent-%COMP%], .col-sm-10[_ngcontent-%COMP%], .col-sm-11[_ngcontent-%COMP%], .col-sm-12[_ngcontent-%COMP%]{float:left}.col-sm-12[_ngcontent-%COMP%]{width:100%}.col-sm-11[_ngcontent-%COMP%]{width:91.66666666666666%}.col-sm-10[_ngcontent-%COMP%]{width:83.33333333333334%}.col-sm-9[_ngcontent-%COMP%]{width:75%}.col-sm-8[_ngcontent-%COMP%]{width:66.66666666666666%}.col-sm-7[_ngcontent-%COMP%]{width:58.333333333333336%}.col-md-6[_ngcontent-%COMP%], .col-sm-6[_ngcontent-%COMP%]{width:50%}.col-sm-5[_ngcontent-%COMP%]{width:41.66666666666667%}.col-sm-4[_ngcontent-%COMP%]{width:33.33333333333333%}.col-sm-3[_ngcontent-%COMP%]{width:25%}.col-sm-2[_ngcontent-%COMP%]{width:16.666666666666664%}.col-sm-1[_ngcontent-%COMP%]{width:8.333333333333332%}.col-md-3[_ngcontent-%COMP%]{width:25%}.lot-border[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border:1px solid #8f8f8f}.lot-border[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:23px!important}.lot-border[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-bottom:2px solid #8f8f8f!important}.footer-border[_ngcontent-%COMP%]{border:1px solid #8f8f8f}.border-top-none[_ngcontent-%COMP%], .footer-bottom[_ngcontent-%COMP%]{padding:5px 15px}.border-top[_ngcontent-%COMP%]{border-top:1px solid;padding:15px}.terms-cond[_ngcontent-%COMP%]{list-style:none}.terms-cond[_ngcontent-%COMP%], .terms-cond[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-left:0!important;padding-left:0!important}.footer-bottom[_ngcontent-%COMP%]{padding-left:15px;border:1px solid #8f8f8f}.border-top-none[_ngcontent-%COMP%]{border:1px solid #8f8f8f;border-top:none}.border-whole[_ngcontent-%COMP%]{border-top:2px solid #8f8f8f;border-right:2px solid #8f8f8f!important;border-left:2px solid #8f8f8f!important}.pd-t-b[_ngcontent-%COMP%]{padding-top:25px!important;padding-bottom:16px!important}.display-flex[_ngcontent-%COMP%]{display:flex}.display-flex[_ngcontent-%COMP%], .display-flex-end[_ngcontent-%COMP%]{justify-content:center;align-items:flex-end}.height-100[_ngcontent-%COMP%]{height:100%}.company-ltd[_ngcontent-%COMP%]{margin-top:30px}#invoice-table[_ngcontent-%COMP%]{border:1px solid #8f8f8f;border-spacing:0;clear:both;margin:0;height:297mm;width:100%}.lot-border[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding-top:6px;padding-bottom:6px;font-size:20px}#invoice-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border-left:2px solid #8f8f8f}#invoice-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child, td[_ngcontent-%COMP%]:first-child{border-left:none}#invoice-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-bottom:1px solid #8f8f8f}#invoice-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle;font-size:6pt}th[_ngcontent-%COMP%]{font-weight:400}.amount[_ngcontent-%COMP%], .spacing-low[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{text-align:center}.auth-font[_ngcontent-%COMP%], .font-big[_ngcontent-%COMP%], .font-big[_ngcontent-%COMP%]   .terms-cond[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .font-big[_ngcontent-%COMP%]   b[_ngcontent-%COMP%], .invoice_line[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:15px}.company-ltd[_ngcontent-%COMP%]{font-size:18px}.amount[_ngcontent-%COMP%], .invoice_line[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .site[_ngcontent-%COMP%]{font-size:40px;font-weight:600}.invoice_line[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .invoice_line[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:1mm;text-align:center}.lot-border[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 0;font-size:40px}.card-block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:2px}.card-block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:first-child{margin-bottom:1px}.border-margin[_ngcontent-%COMP%]{padding:5px 0 15px}.border-margin-d-t[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:5px}.top-print-head[_ngcontent-%COMP%]{text-align:right;display:inline-block;font-size:15px;padding-top:0;margin-top:0}.spacing-low[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#90ee90!important}.border-r-l[_ngcontent-%COMP%], .border-r-l-t[_ngcontent-%COMP%], .spacing-low[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .spacing-low[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .spacing-low[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-left:1px solid #8f8f8f!important;border-right:1px solid #8f8f8f!important}.border-r-l-t[_ngcontent-%COMP%]{border-top:1px solid #8f8f8f!important}.spacing-low[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .spacing-low[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child, .spacing-low[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-top:1px solid #8f8f8f!important;border-bottom:1px solid #8f8f8f!important}.spacing-low[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .spacing-low[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:1px .75rem!important}.border-width[_ngcontent-%COMP%], .spacing-low[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{border-width:2px!important}.lot-border[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], table.lot-border[_ngcontent-%COMP%], table.spacing-low[_ngcontent-%COMP%]{margin-bottom:1px!important}.border[_ngcontent-%COMP%], .border-dark[_ngcontent-%COMP%], .border-top[_ngcontent-%COMP%]{border:1px solid #8f8f8f!important}.border-bootom-none[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child, .border-zero[_ngcontent-%COMP%]{border:0!important}.border-bootom-none[_ngcontent-%COMP%]{border-bottom:1px solid #8f8f8f!important}.display-between[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.spacing-low[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;bottom:0}tfoot.spacing-low[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #8f8f8f!important}tfoot.spacing-low[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child{text-align:center!important}.print-invoice-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{height:290mm;overflow:hidden;overflow-x:hidden;display:block;width:100%}.print-invoice-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%], .print-invoice-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}.pd-t-b-5[_ngcontent-%COMP%]{padding-top:5px!important;padding-bottom:10px!important}.print-invoice-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%], .print-invoice-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:inline;width:100%}.print-invoice-table[_ngcontent-%COMP%], .print-invoice-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .print-invoice-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:1px solid #8f8f8f!important;padding-top:7px!important;padding-bottom:7px!important}.print-invoice-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:solid #8f8f8f!important;border-width:1px 1px 2px!important}.print-invoice-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-left:0!important;border-right:0!important}.width-63[_ngcontent-%COMP%]{width:63%}.width-60[_ngcontent-%COMP%]{width:60%}.width-37[_ngcontent-%COMP%]{width:37%}.width-10[_ngcontent-%COMP%]{width:10%}.width-30[_ngcontent-%COMP%]{width:30%}.width-4px[_ngcontent-%COMP%]{width:4px}.width-4[_ngcontent-%COMP%]{width:4%}.width-15[_ngcontent-%COMP%]{width:15%}.width-9[_ngcontent-%COMP%]{width:9%}.duplicate-border[_ngcontent-%COMP%]{border-top-width:3px!important;border-left-width:3px!important;border-right-width:3px!important}.pd-0[_ngcontent-%COMP%]{padding:0}.mr-0[_ngcontent-%COMP%]{margin:0}.display-flex-end[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center}.font-20[_ngcontent-%COMP%]{font-size:20px}.font-30[_ngcontent-%COMP%]{font-size:30px}.font-15[_ngcontent-%COMP%]{font-size:15px}.jus-con-center[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.print-logo-style[_ngcontent-%COMP%]{width:130px;height:auto}.font-bold[_ngcontent-%COMP%]{font-weight:700}.disc-style[_ngcontent-%COMP%]{font-size:15px;border-top:0!important}.main-invoice-row[_ngcontent-%COMP%]{margin-top:3px;margin-bottom:5px}.pd-top-bottom-2[_ngcontent-%COMP%]{padding-top:2px!important;padding-bottom:2px!important}.pd-top-bottom-1[_ngcontent-%COMP%]{font-size:16px!important;padding-top:5px!important;padding-bottom:5px!important;text-align:center!important}.pd-top-bottom-0[_ngcontent-%COMP%]{padding-top:0!important;padding-bottom:0!important}.pd-top-60[_ngcontent-%COMP%]{padding-top:60px!important}.printpage[_ngcontent-%COMP%]{background:#fff;display:block;margin:0 auto .5cm;box-shadow:0 0 .5cm rgba(0,0,0,.5)}.print-in-border[_ngcontent-%COMP%]{border:3px solid #8f8f8f}.border-margin[_ngcontent-%COMP%]{padding:1rem 4rem}.t-table[_ngcontent-%COMP%]{height:800px}.table-left-right[_ngcontent-%COMP%]{border-left:0!important;border-right:0!important}.tr[_ngcontent-%COMP%]::nth-child(2){height:100vh}.table-left-right[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:3px .75rem;vertical-align:top;text-align:center;width:100%;border-collapse:collapse;height:100%}.table-left-right[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table-left-right[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-left:1px solid #c3c3c3;border-right:1px solid #c3c3c3}.table-left-right[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-top:1px solid #c3c3c3;border-bottom:1px solid #c3c3c3}.pd-lf-0[_ngcontent-%COMP%]{padding-left:0!important}.pd-right-0[_ngcontent-%COMP%]{padding-right:0!important}.text-center[_ngcontent-%COMP%]{text-align:center}.mr-top-0[_ngcontent-%COMP%]{padding-top:0!important;margin-top:0!important}}"]}),D),I=a("z17N"),L=a("3Pt+"),N=((S=function(){function t(e,n){c(this,t),this.activeModal=e,this.modalService=n,this.disableButton=!1,this.isDirectPrintFlag=!1,this.destroy$=new u.a}return o(t,[{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}},{key:"ngOnInit",value:function(){}},{key:"printJobCard",value:function(){var t=this;if(this.batchId){this.disableButton=!0,this.isDirectPrintFlag=!0;var e=this.modalService.open(B);e.componentInstance.isDirectPrintFlag=this.isDirectPrintFlag,e.componentInstance.batchId=this.batchId,e.result.then((function(e){t.activeModal.close(),t.disableButton=!1}))}}},{key:"closeModal",value:function(){this.activeModal.close()}}]),t}()).\u0275fac=function(t){return new(t||S)(k.dc(b.a),k.dc(b.e))},S.\u0275cmp=k.Xb({type:S,selectors:[["ngx-input-batch"]],decls:19,vars:2,consts:[[1,"nbStyle"],[1,"nb-header"],[1,"row"],[1,"col-md-12"],[1,"nb-text","txt-ov-elips"],[1,"col-md-6"],[1,"form-group"],["type","number","name","batchId","id","batchId",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-md-9","mobile-btn-center","text-btn-right","mt-50"],["type","button",1,"btn","btn-primary","btn-sm","btn-design-cancel",3,"click"],["type","button",1,"btn","btn-primary","btn-sm","btn-design-save","mob-stock","button-base","ripple",3,"disabled","click"]],template:function(t,e){1&t&&(k.jc(0,"nb-card",0),k.jc(1,"nb-card-header",1),k.jc(2,"div",2),k.jc(3,"div",3),k.jc(4,"h2",4),k.jd(5,"Add Batch"),k.ic(),k.ic(),k.ic(),k.ic(),k.jc(6,"nb-card-body"),k.jc(7,"div",2),k.jc(8,"div",5),k.jc(9,"div",6),k.jc(10,"label"),k.jd(11,"Batch Id"),k.ic(),k.jc(12,"input",7),k.uc("ngModelChange",(function(t){return e.batchId=t})),k.ic(),k.ic(),k.ic(),k.ic(),k.jc(13,"div",2),k.jc(14,"div",8),k.jc(15,"button",9),k.uc("click",(function(){return e.closeModal()})),k.jd(16,"CANCEL"),k.ic(),k.jc(17,"button",10),k.uc("click",(function(){return e.printJobCard()})),k.jd(18,"SAVE"),k.ic(),k.ic(),k.ic(),k.ic(),k.ic()),2&t&&(k.Pb(12),k.Hc("ngModel",e.batchId),k.Pb(5),k.Hc("disabled",e.disableButton))},directives:[O.u,O.x,O.t,L.q,L.a,L.l,L.o],styles:[""]}),S),R=a("5eHb"),H=a("qC+V"),q=a("ZOsW"),F=a("lDzL"),A=["forFocus"];function W(t,e){1&t&&(k.jc(0,"div"),k.jc(1,"h2",63),k.jd(2,"Add Stock-Batch"),k.ic(),k.ic())}function V(t,e){1&t&&(k.jc(0,"div"),k.jc(1,"h2",63),k.jd(2,"Update Stock-Batch"),k.ic(),k.ic())}function E(t,e){if(1&t&&(k.jc(0,"ng-option",64),k.jc(1,"div",4),k.jc(2,"div",22),k.jc(3,"div",23),k.jd(4),k.ic(),k.ic(),k.jc(5,"div",22),k.jc(6,"div",24),k.jd(7),k.ic(),k.ic(),k.ic(),k.ic()),2&t){var n=e.$implicit;k.Hc("value",n.id),k.Pb(4),k.ld(" ",n.partyName,""),k.Pb(3),k.ld(" ",n.partyCode,"")}}function z(t,e){1&t&&(k.jc(0,"div",65),k.jc(1,"span"),k.jd(2,"Party name is required"),k.ic(),k.ic())}function T(t,e){if(1&t&&(k.jc(0,"ng-option",64),k.jc(1,"div",4),k.jc(2,"div",22),k.jc(3,"div",23),k.jd(4),k.ic(),k.ic(),k.jc(5,"div",22),k.jc(6,"div",24),k.jd(7),k.ic(),k.ic(),k.ic(),k.ic()),2&t){var n=e.$implicit;k.Hc("value",n.id?n.id:n.qualityEntryId),k.Pb(4),k.ld(" ",n.qualityId,""),k.Pb(3),k.ld(" ",n.qualityName,"")}}function U(t,e){1&t&&(k.jc(0,"div",65),k.jc(1,"span"),k.jd(2,"Quality is required."),k.ic(),k.ic())}function G(t,e){1&t&&(k.jc(0,"div",65),k.jc(1,"span"),k.jd(2,"Receive date is required"),k.ic(),k.ic())}function $(t,e){1&t&&(k.jc(0,"div",65),k.jc(1,"span"),k.jd(2,"Challan no. is required"),k.ic(),k.ic())}function X(t,e){1&t&&(k.jc(0,"div",65),k.jc(1,"span"),k.jd(2,"Challan date is required"),k.ic(),k.ic())}function Q(t,e){1&t&&(k.jc(0,"div",82),k.jc(1,"span"),k.jd(2,"Pchallan already exists"),k.ic(),k.ic())}function J(t,e){1&t&&(k.jc(0,"div",82),k.jc(1,"span"),k.jd(2,"Pchallan is required"),k.ic(),k.ic())}var Z=function(){return{type:"zoom"}},K=function(t){return{animation:t}};function Y(t,e){if(1&t){var n=k.kc();k.jc(0,"div",83),k.jc(1,"nb-icon",84),k.uc("click",(function(){k.Xc(n);var t=k.yc().index;return k.yc().removeBatch(t)})),k.ic(),k.ic()}2&t&&(k.Pb(1),k.Hc("options",k.Nc(2,K,k.Mc(1,Z))))}function tt(t,e){1&t&&(k.jc(0,"div",88),k.jc(1,"span"),k.jd(2,"Required"),k.ic(),k.ic())}var et=function(t){return{"is-invalid":t}};function nt(t,e){if(1&t){var n=k.kc();k.jc(0,"input",85,86),k.uc("keyup",(function(t){k.Xc(n);var i=e.rowIndex,c=k.yc().index;return k.yc().onKeyUp(t,i,0,"mtr",c)}))("ngModelChange",(function(t){return k.Xc(n),e.row.mtr=t}))("input",(function(){k.Xc(n);var t=e.rowIndex,i=k.Uc(2),c=k.yc().index;return k.yc().calculateWt(i.value,c,t,0)})),k.ic(),k.hd(3,tt,3,0,"div",87)}if(2&t){var i=e.row,c=e.rowIndex,a=k.Uc(2),o=k.yc().index,r=k.yc();k.Kc("name","mtr",c,"",o,""),k.Hc("ngModel",i.mtr)("id","grData"+c+"-0"+o)("ngClass",k.Nc(7,et,r.formSubmitted&&a.invalid))("disabled",r.flag||i.isProductionPlanned||r.weightFlag),k.Pb(3),k.Hc("ngIf",r.formSubmitted&&a.invalid)}}function it(t,e){1&t&&(k.jc(0,"div",88),k.jc(1,"span"),k.jd(2,"Required"),k.ic(),k.ic())}function ct(t,e){if(1&t){var n=k.kc();k.jc(0,"input",89,90),k.uc("ngModelChange",(function(t){return k.Xc(n),e.row.wt=t}))("keyup",(function(t){k.Xc(n);var i=e.rowIndex,c=k.yc().index;return k.yc().onKeyUp(t,i,1,"wt",c)}))("input",(function(){k.Xc(n);var t=e.rowIndex,i=k.Uc(1),c=k.yc().index;return k.yc().calculateMtr(i.value,c,t,1)})),k.ic(),k.hd(2,it,3,0,"div",87)}if(2&t){var i=e.row,c=e.rowIndex,a=k.Uc(1),o=k.yc().index,r=k.yc();k.Kc("name","wt",c,"",o,""),k.Hc("ngModel",i.wt)("id","grData"+c+"-1"+o)("ngClass",k.Nc(7,et,r.formSubmitted&&a.invalid))("disabled",r.flag||i.isProductionPlanned||!r.weightFlag),k.Pb(2),k.Hc("ngIf",r.formSubmitted&&a.invalid)}}function at(t,e){if(1&t){var n=k.kc();k.jc(0,"nb-icon",91),k.uc("click",(function(){k.Xc(n);var t=e.rowIndex,i=k.yc().index;return k.yc().removeItem(t,i)})),k.ic()}if(2&t){var i=e.row,c=k.yc(2);k.Hc("hidden",c.flag||i.isProductionPlanned)("options",k.Nc(3,K,k.Mc(2,Z)))}}function ot(t,e){if(1&t&&(k.jc(0,"div",27),k.jc(1,"div",92),k.jd(2),k.zc(3,"number"),k.ic(),k.ic(),k.jc(4,"div",27),k.jc(5,"div",92),k.jd(6),k.zc(7,"number"),k.ic(),k.ic(),k.jc(8,"div",27),k.jc(9,"div",92),k.jd(10),k.ic(),k.ic()),2&t){var n=e.rowCount,i=k.yc().$implicit;k.Pb(2),k.ld(" Total mtr: ",k.Bc(3,3,i.totalMt,"1.2-2")," "),k.Pb(4),k.ld(" Total wt: ",k.Bc(7,6,i.totalWt,"1.2-2")," "),k.Pb(4),k.ld(" Total GR: ",n," ")}}function rt(t,e){if(1&t){var n=k.kc();k.jc(0,"div",66),k.jc(1,"fieldset",67),k.jc(2,"nb-card",68),k.jc(3,"div",15),k.jc(4,"div",4),k.jc(5,"div",69),k.jc(6,"label"),k.jd(7,"PChallan No"),k.ic(),k.jc(8,"input",70),k.uc("ngModelChange",(function(t){return k.Xc(n),e.$implicit.pchallanRef=t}))("change",(function(){k.Xc(n);var t=e.index;return k.yc().checkPChallanUniq(t)}))("click",(function(){return k.Xc(n),k.yc().batchInsertCheck()})),k.ic(),k.hd(9,Q,3,0,"div",71),k.hd(10,J,3,0,"div",71),k.ic(),k.hd(11,Y,2,4,"div",72),k.ic(),k.ic(),k.jc(12,"div",73),k.jc(13,"div",4),k.jc(14,"div",74),k.jc(15,"div"),k.jc(16,"fieldset",67),k.jc(17,"ngx-datatable",75,76),k.jc(19,"ngx-datatable-column",77),k.hd(20,nt,4,9,"ng-template",78),k.ic(),k.jc(21,"ngx-datatable-column",79),k.hd(22,ct,3,9,"ng-template",78),k.ic(),k.jc(23,"ngx-datatable-column",80),k.hd(24,at,1,5,"ng-template",78),k.ic(),k.jc(25,"ngx-datatable-footer"),k.hd(26,ot,11,9,"ng-template",81),k.ic(),k.ic(),k.ic(),k.ic(),k.ic(),k.ic(),k.ic(),k.ic(),k.ic(),k.ic()}if(2&t){var i=e.$implicit,c=e.index,a=k.yc();k.Qb("id","repeat"+c),k.Pb(1),k.Hc("disabled",a.production_flag[c]),k.Pb(1),k.Qb("id","new"+c),k.Pb(6),k.Jc("name","pchallanRef",c,""),k.Hc("ngModel",i.pchallanRef)("disabled",!a.addFlag&&i.old),k.Qb("id","pchallanRef"+c),k.Pb(1),k.Hc("ngIf",i.isNotUnique),k.Pb(1),k.Hc("ngIf",a.formSubmitted&&!i.pchallanRef),k.Pb(1),k.Hc("ngIf",!a.production_flag[c]),k.Pb(5),k.Hc("disabled",!a.stockBatch.qualityId),k.Pb(1),k.Hc("rows",i.batchMW)("headerHeight",31)("footerHeight",50)("scrollbarV",!0),k.Pb(2),k.Hc("sortable",!1)("width",300),k.Pb(2),k.Hc("sortable",!1)("width",300)}}function lt(t,e){if(1&t){var n=k.kc();k.jc(0,"button",93),k.uc("click",(function(){k.Xc(n);var t=k.yc(),e=k.Uc(23);return t.reset(e)})),k.jd(1,"CANCEL"),k.ic()}}var st=function(){return["/pages/stock-batch/view"]};function dt(t,e){1&t&&(k.jc(0,"button",94),k.jd(1,"CANCEL"),k.ic()),2&t&&k.Hc("routerLink",k.Mc(1,st))}function ht(t,e){if(1&t){var n=k.kc();k.jc(0,"button",62),k.uc("click",(function(){k.Xc(n);var t=k.yc(),e=k.Uc(23);return t.addUpdateStockBatch(e,!1)})),k.jd(1,"SAVE"),k.ic()}if(2&t){var i=k.yc();k.Hc("disabled",i.disableButton)}}function ut(t,e){if(1&t){var n=k.kc();k.jc(0,"button",95),k.uc("click",(function(){k.Xc(n);var t=k.yc(),e=k.Uc(23);return t.addUpdateStockBatch(e,!1)})),k.jd(1,"UPDATE"),k.ic()}if(2&t){var i=k.yc();k.Hc("disabled",i.disableButton)}}function gt(t,e){if(1&t){var n=k.kc();k.jc(0,"button",62),k.uc("click",(function(){return k.Xc(n),k.yc().gotoNextPage()})),k.jd(1,"NEXT"),k.ic()}if(2&t){var i=k.yc();k.Hc("disabled",i.disableButton)}}var pt,bt=((pt=function(){function e(t,n,i,a,o,r,l,s,d,h){c(this,e),this.partyService=t,this.toastr=n,this.route=i,this.qualityService=a,this.stockBatchService=o,this._route=r,this.commonService=l,this.modalService=s,this.ckd=h,this.loading=!1,this.disableButton=!1,this.formSubmitted=!1,this.addFlag=!0,this.zeroValueBatch=!1,this.production_flag=[],this.errorData=g,this.qualityList=[],this.partyList=[],this.dateForPicker=new Date,this.deleteFlag=0,this.validationCardRowIndex=0,this.flag=0,this.stockDataValues1=[{batchId:null,pchallanRef:null,totalWt:null,totalMt:null,isNotUnique:!1,isProductionPlanned:!1,batchMW:[{mtr:null,wt:null}]}],this.stockDataValues=[],this.stockBatchArray=[],this.stockBatch=new f,this.batchIdArray=[],this.totalMtr=0,this.wtArray=[],this.mtArray=[],this.totalWt=0,this.weightFlag=!1,this.weight=[],this.MtWtIndex=0,this.isDirectPrintFlag=!1,this.currentBatchSequence=0,this.currentBatchSeqId=0,this.totalGrs=0,this.totalMeters=0,this.totalWeights=0,this.destroy$=new u.a,d.setLocale("en-IN")}return o(e,[{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}},{key:"ngOnInit",value:function(){return Object(d.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getQualityList();case 2:return t.next=4,this.getPartyList();case 4:return t.next=6,this.getQualityList();case 6:this.currentStockBatchId=this._route.snapshot.paramMap.get("id"),this.currentStockBatchId&&(this.addFlag=!1,this.getStockBatchById()),this.maxDate=new Date(this.dateForPicker.getFullYear(),this.dateForPicker.getMonth(),this.dateForPicker.getDate(),23,59),this.stockBatch.receiveDate=this.maxDate,this.stockBatch.chlDate=this.maxDate,this.user=this.commonService.getUser(),this.userHead=this.commonService.getUserHeadId();case 13:case"end":return t.stop()}}),t,this)})))}},{key:"getPartyList",value:function(){var t=this;this.loading=!0,this.partyService.getAllPartyNameList().pipe(Object(h.a)(this.destroy$)).subscribe((function(e){e.success&&(t.partyList=e.data),t.loading=!1}),(function(e){t.loading=!1}))}},{key:"getQualityList",value:function(){var t=this;this.loading=!0,this.qualityService.getQualityNameData().pipe(Object(h.a)(this.destroy$)).subscribe((function(e){e.success&&e.data&&e.data.length>0&&(t.qualityList=e.data),t.loading=!1}),(function(e){t.loading=!1}))}},{key:"setQualityByParty",value:function(t){var e=this;this.loading=!0,null!=t?this.stockBatch.partyId?(this.qualityList=[],this.qualityService.getQualityByParty(this.stockBatch.partyId).pipe(Object(h.a)(this.destroy$)).subscribe((function(t){t.success&&(e.qualityList=t.data.qualityDataList),e.qualityList&&e.qualityList.length&&(e.stockBatch.qualityId=null)}),(function(t){e.loading=!1})),this.loading=!1):this.loading=!1:(this.stockBatch.partyId=null,this.stockBatch.qualityId=null,this.stockBatch.unit=null,this.getPartyList(),this.getQualityList(),this.loading=!1)}},{key:"getUnit",value:function(t){var e=this;this.weightFlag=!1,null!=t?null==this.stockBatch.qualityId?(this.flag=1,this.toastr.error("Please select quality first")):(this.flag=0,this.weightFlag=!1,this.qualityList.forEach((function(t){(t.id?t.id:t.qualityEntryId)==e.stockBatch.qualityId&&(e.stockBatch.partyId=t.partyId,e.stockBatch.unit=t.unit,e.weightFlag="weight"===e.stockBatch.unit,e.wtPer100mtrCopy=t.wtPer100m,e.addFlag&&(e.stockBatch.wtPer100m=t.wtPer100m))})),this.reCalcMTWTValue()):(this.stockBatch.partyId=null,this.stockBatch.unit=null,this.getQualityList())}},{key:"reCalcMTWTValue",value:function(){var t=this;this.stockDataValues.forEach((function(e,n){t.weight=[],e.batchMW.forEach((function(e){t.weight.push({w:e.wt,meter:e.mtr})})),t.calculateTotalMtrWt(t.stockBatch.unit,e)})),this.totalMeters=0,this.totalWeights=0,this.totalGrs=0,this.stockDataValues.forEach((function(e){t.totalMeters+=e.totalMt,t.totalWeights+=e.totalWt,e.batchMW.forEach((function(e){t.totalGrs++}))}))}},{key:"getStockBatchById",value:function(){var t=this;this.loading=!0,this.stockBatchService.getStockBatchById(this.currentStockBatchId).pipe(Object(h.a)(this.destroy$)).subscribe((function(e){e.success&&(t.stockBatch.receiveDate=new Date(e.data.receiveDate),t.stockBatch.qualityId=e.data.qualityId,t.stockBatch=e.data,t.stockBatch.chlDate=new Date(t.stockBatch.chlDate),t.stockBatch.receiveDate=new Date(t.stockBatch.receiveDate),t.stockBatch.batchData.length&&(t.stockBatch.batchData=p.sortBy(e.data.batchData,"pchallanRef"),t.stockBatch.batchData.map((function(t){})),t.setStockDataValues1())),t.loading=!1}),(function(e){t.loading=!1}))}},{key:"setStockDataValues1",value:function(){var e=this,n=t(new Set(this.stockBatch.batchData.map((function(t){return t.pchallanRef}))));this.stockDataValues=[],n.forEach((function(t,i){e.stockDataValues.push(new v),e.stockDataValues[i].pchallanRef=n[i],e.stockDataValues[i].old=!0})),0!=this.qualityList.length&&this.qualityList.forEach((function(t){t.id==e.stockBatch.qualityId&&(e.wtPer100mtrCopy=t.wtPer100m,e.addFlag&&(e.stockBatch.wtPer100m=t.wtPer100m),e.stockBatch.unit=t.unit,e.weightFlag="weight"===e.stockBatch.unit)})),this.stockDataValues.forEach((function(t,n){e.production_flag[n]=!1,e.stockBatch.batchData.forEach((function(i,c){i.pchallanRef==t.pchallanRef&&(t.batchMW.push(new m(i.mtr,i.wt,i.isProductionPlanned,i.id,i.controlId)),i.isProductionPlanned&&(e.production_flag[n]=!0))}))})),this.reCalcMTWTValue()}},{key:"batchInsertCheck",value:function(){null==this.stockBatch.qualityId?(this.flag=1,this.toastr.error("Please select quality first")):this.flag=0}},{key:"onKeyUp",value:function(e,n,i,c,a){var o=this;if(13==(e.keyCode?e.keyCode:e.which))if(this.index=this.weightFlag?"grData"+(n+1)+"-1"+a:"grData"+(n+1)+"-0"+a,n===this.stockDataValues[a].batchMW.length-1){var r=this.stockDataValues[a].batchMW[n];if("mtr"==c){if(!r.mtr)return void this.toastr.error("Enter Meter","Meter Field required")}else if("wt"==c&&!r.wt)return void this.toastr.error("Enter Weight","Weight Field required");var l=this.stockDataValues[a].batchMW;l.push(Object.assign({},{id:null,controlId:null,mtr:null,wt:null,isProductionPlanned:!1})),this.stockDataValues[a].batchMW=t(l),this.stockDataValues[a].batchMW=t(this.stockDataValues[a].batchMW),this.ckd.detectChanges();var s=setInterval((function(){var t=document.getElementById(o.index);null!=t&&(t.focus(),clearInterval(s));var e=document.querySelectorAll(".datatable-body");e&&e.length&&(e[a].scrollTop=e[a].scrollHeight)}),10)}else var d=setInterval((function(){var t=document.getElementById(o.index);null!=t&&(t.focus(),clearInterval(d))}),10)}},{key:"removeItem",value:function(e,n){var i=this.stockDataValues[n].batchMW;1==this.stockDataValues[n].batchMW.length?(i[0].mtr=null,i[0].wt=null,this.stockDataValues[n].batchMW=t(i),this.reCalcMTWTValue()):(i.splice(e,1),this.stockDataValues[n].batchMW=t(i),this.reCalcMTWTValue())}},{key:"addNewBatch",value:function(e){var n;if(this.stockBatch.qualityId)if((n=new v).batchMW.push(new m),this.stockDataValues.length)if(this.stockDataValues.findIndex((function(t){return null==t.pchallanRef}))>-1||this.flag)this.toastr.error("Please fill all the required fields");else{var i=t(this.stockDataValues);i=p.sortBy(i,"pchallanRef","asc"),this.wtArray=[],this.mtArray=[],this.stockDataValues.push(Object.assign({},n));var c="collapsible-panel--expanded";e.target.classList.contains(c)?e.target.classList.remove(c):e.target.classList.add(c)}else this.stockDataValues=[],(n=new v).batchMW.push(new m),this.stockDataValues.push(Object.assign({},n));else this.toastr.warning("Please select quality first")}},{key:"removeBatch",value:function(t){this.stockDataValues.splice(t,1)}},{key:"calculateWt",value:function(t,e,n,i){var c,a=this;c=t/100*this.stockBatch.wtPer100m,this.stockDataValues[e].batchMW[n].wt=c.toFixed(2),this.weight=[],this.stockDataValues[e].batchMW.forEach((function(t){a.weight.push({meter:t.mtr,w:t.wt})})),this.MtWtIndex==e?(this.weight[n]={meter:t,w:c},this.calculateTotalMtrWt("meter"),this.stockDataValues[e].totalMt=Number(Number(this.totalMtr).toFixed(2)),this.stockDataValues[e].totalWt=Number(Number(this.totalWt).toFixed(2))):(this.MtWtIndex=e,this.weight[n]={meter:t,w:c},this.calculateTotalMtrWt("meter"),this.stockDataValues[this.MtWtIndex].totalMt=Number(Number(this.totalMtr).toFixed(2)),this.stockDataValues[this.MtWtIndex].totalWt=Number(Number(this.totalWt).toFixed(2))),this.totalGrs=0,this.totalMeters=0,this.totalWeights=0,this.stockDataValues.forEach((function(t){a.totalMeters+=t.totalMt,a.totalWeights+=t.totalWt,a.totalGrs+=t.batchMW.length}))}},{key:"calculateTotalMtrWt",value:function(t,e){var n=this;this.totalWt=0,this.totalMtr=0,Object.keys(this.weight).forEach((function(t){n.totalWt+=+n.weight[t].w,n.totalMtr+=+n.weight[t].meter})),e&&(e.totalMt=this.totalMtr,e.totalWt=this.totalWt)}},{key:"calculateMtr",value:function(t,e,n,i){var c,a=this;c=100*t/this.stockBatch.wtPer100m,this.stockDataValues[e].batchMW[n].mtr=c.toFixed(2),this.weight=[],this.stockDataValues[e].batchMW.forEach((function(t){a.weight.push({meter:t.mtr,w:t.wt})})),this.MtWtIndex==e?(this.weight[n]={meter:c,w:t},this.calculateTotalMtrWt("weight"),this.stockDataValues[e].totalMt=Number(Number(this.totalMtr).toFixed(2)),this.stockDataValues[e].totalWt=Number(Number(this.totalWt).toFixed(2))):(this.MtWtIndex=e,this.weight[n]={meter:c,w:t},this.calculateTotalMtrWt("weight"),this.stockDataValues[this.MtWtIndex].totalMt=Number(Number(this.totalMtr).toFixed(2)),this.stockDataValues[this.MtWtIndex].totalWt=Number(Number(this.totalWt).toFixed(2))),this.totalGrs=0,this.totalMeters=0,this.totalWeights=0,this.stockDataValues.forEach((function(t){a.totalMeters+=t.totalMt,a.totalWeights+=t.totalWt,a.totalGrs+=t.batchMW.length}))}},{key:"checkValidation",value:function(t){var e=this,n=!0;if(this.stockDataValues&&this.stockDataValues.length){if(1==this.stockDataValues.length&&!this.stockDataValues[0].pchallanRef&&!this.stockDataValues[0].batchMW[0].mtr&&!this.stockDataValues[0].batchMW[0].wt&&(n=!1,this.stockBatch.receiveDate&&this.stockBatch.chlDate&&this.stockBatch.chlNo&&this.stockBatch.stockInType&&this.stockBatch.partyId&&this.stockBatch.qualityId))return n=!0;this.stockDataValues.forEach((function(t){return t.pchallanRef?t.batchMW&&t.batchMW.length&&1==t.batchMW.length&&t.batchMW.findIndex((function(t){return!(null!=t.wt&&null!=t.wt&&""!=t.wt||null!=t.mtr&&null!=t.mtr&&""!=t.mtr)}))>-1?(e.toastr.warning("Batch should have mtr/wt."),n=!1,!1):t.batchMW&&t.batchMW.length&&t.batchMW.findIndex((function(t){return 0==t.wt||0==t.mtr}))>-1?(e.toastr.warning("Batch mtr/wt. cannot be 0."),n=!1,!1):void 0:(n=!1,!1)}))}return n&&(n=!1,this.stockBatch.receiveDate&&this.stockBatch.chlDate&&this.stockBatch.chlNo&&this.stockBatch.stockInType&&this.stockBatch.partyId&&this.stockBatch.qualityId&&(n=!0)),n}},{key:"reset",value:function(t){t.reset(),this.totalGrs=0,this.totalMeters=0,this.totalWeights=0,this.formSubmitted=!1,this.stockDataValues=[{batchId:null,pchallanRef:null,totalWt:null,totalMt:null,isNotUnique:!1,isProductionPlanned:!1,batchMW:[{mtr:null,wt:null}]}],this.stockBatch.chlDate=new Date,this.stockBatch.receiveDate=new Date,this.stockBatch.stockInType="Fabric"}},{key:"checkPChallanUniq",value:function(t){var e=this,n=!1;this.stockDataValues.forEach((function(i,c){c!=t&&e.stockDataValues[t].pchallanRef==i.pchallanRef&&(e.stockDataValues[t].isNotUnique=!0,n=!0)})),n||this.stockBatchService.isPchallanExists(this.stockBatch.partyId,this.stockDataValues[t].pchallanRef).pipe(Object(h.a)(this.destroy$)).subscribe((function(n){n.success&&(e.stockDataValues[t].isNotUnique=n.data)}),(function(t){}))}},{key:"addUpdateStockBatch",value:function(t,e){var n=this;this.disableButton=!0,this.formSubmitted=!0;var i=!1;this.stockDataValues.forEach((function(t){t.isNotUnique&&(i=!0)})),!t.valid&&!this.checkValidation(t)||i?this.disableButton=!1:(this.loading=!0,this.stockBatchArray=[],this.stockBatch.createdBy=this.user.userId,this.stockBatch.userHeadId=this.userHead.userHeadId,this.stockDataValues.forEach((function(t){t.batchMW&&t.batchMW.length&&t.batchMW.forEach((function(e){if(e.mtr&&e.wt){var i={id:0,batchId:0,pchallanRef:0,mtr:0,wt:0,totalMt:0,isNotUnique:!1,totalWt:0,isProductionPlanned:!1,controlId:0};i.id=e.id,i.pchallanRef=t.pchallanRef,i.batchId=t.batchId,i.mtr=e.mtr,i.wt=e.wt,i.totalMt=t.totalMt,i.totalWt=t.totalWt,i.isProductionPlanned=e.isProductionPlanned,i.controlId=e.controlId,n.stockBatchArray.push(i)}}))})),this.stockBatch.batchData=this.stockBatchArray,this.addFlag?this.stockBatchService.addPchallan(this.stockBatch).pipe(Object(h.a)(this.destroy$)).subscribe((function(i){i.success?(n.loading=!1,n.reset(t),n.stockDataValues=[],n.disableButton=!1,n.toastr.success(i.msg),e&&n.route.navigate(["/pages/stock-batch/stock-in"],{queryParams:{id:i.data}})):(n.loading=!1,n.disableButton=!1,n.stockBatchArray=[])}),(function(t){n.loading=!1,n.disableButton=!1,n.stockBatchArray=[]})):(this.stockBatch.updatedBy=this.user.userId,this.stockBatchService.updatePchallan(this.stockBatch).pipe(Object(h.a)(this.destroy$)).subscribe((function(t){t.success?(n.toastr.success(t.msg),e?n.route.navigate(["/pages/stock-batch/stock-in"],{queryParams:{id:t.data}}):n.route.navigate(["/pages/stock-batch"])):(n.disableButton=!1,n.stockBatchArray=[]),n.loading=!1}),(function(t){n.stockBatchArray=[],n.toastr.error(g.Update_Error),n.loading=!1,n.disableButton=!1,n.loading=!1})),this.loading=!1))}},{key:"setViewJobValue",value:function(t){"view table"===t?this.route.navigate(["/pages/stock-batch/view"]):"job card"===t?(this.selectedTableChange=null,this.modalService.open(N)):"pending"===t?this.route.navigate(["/pages/stock-batch/pending"]):"report"==t&&this.route.navigate(["/pages/all-report"])}},{key:"gotoNextPage",value:function(){this.currentStockBatchId&&this.route.navigate(["/pages/stock-batch/stock-in"],{queryParams:{id:this.currentStockBatchId}})}},{key:"printJobCard",value:function(t,e){var n=this;this.isDirectPrintFlag=!0;var i=this.modalService.open(B);i.componentInstance.isDirectPrintFlag=this.isDirectPrintFlag,i.componentInstance.stockBatchData=this.stockBatch,i.componentInstance.stockId=Number(e),i.result.then((function(t){n.disableButton=!1}))}}]),e}()).\u0275fac=function(t){return new(t||pt)(k.dc(P.a),k.dc(R.b),k.dc(l.c),k.dc(y.a),k.dc(M.a),k.dc(l.a),k.dc(j.a),k.dc(b.e),k.dc(I.a),k.dc(k.i))},pt.\u0275cmp=k.Xb({type:pt,selectors:[["ngx-add-edit-stock-batch"]],viewQuery:function(t,e){var n;1&t&&k.nd(A,!0),2&t&&k.Tc(n=k.vc())&&(e.searchElement=n.first)},features:[k.Ob([{provide:b.b,useClass:b.c}])],decls:138,vars:68,consts:[[3,"show"],["id","target"],[1,"nb-style"],[1,"nb-header"],[1,"row"],[1,"col-md-5","col-6","display-flex-start","max-width-device"],["placeholder","Select",1,"btn","btn-md",3,"ngModel","change","ngModelChange"],["value","pending"],["value","view table"],["value","job card"],["value","return"],["value","report"],[1,"col-md-7","col-6"],[4,"ngIf"],["myForm","ngForm"],[1,"form-group"],[1,"col-md-4","mobile-mr-bt"],[1,"required"],["type","text","name","stockInType","fieldsize","small","nbinput","","value","Fabric","required","","readonly","",1,"form-control","size-small"],["name","partyId","required","",3,"ngModel","ngClass","disabled","ngModelChange","change"],["partyId1","ngModel"],["disabled","true"],[1,"col-md-6","col-6"],[1,"text-left","txt-ov-elips"],[1,"text-right","txt-ov-elips"],[3,"value",4,"ngFor","ngForOf"],["class","input-required",4,"ngIf"],[1,"col-md-4"],["name","qualityId","required","",1,"required-error-dropdown","dropdown-name",3,"ngModel","ngClass","disabled","ngModelChange","change"],["qualityId1","ngModel"],["name","receiveDate","fieldsize","small","nbinput","","required","","placeholder","MM-DD-YYYY",1,"form-control","size-small",3,"ngModel","owlDateTimeTrigger","owlDateTime","max","ngClass","ngModelChange"],["receiveDate1","ngModel"],[3,"pickerType"],["dt2",""],["type","text","name","chlNo","fieldsize","small","nbinput","","required","","min","0",1,"form-control","size-small",3,"ngModel","ngClass","ngModelChange"],["chlNo1","ngModel"],["name","chlDate","fieldsize","small","fullwidth","","nbinput","","required","","placeholder","MM-DD-YYYY",1,"form-control","size-small",3,"ngModel","owlDateTimeTrigger","owlDateTime","max","ngClass","ngModelChange"],["chlDate1","ngModel"],["dt1",""],["type","text","name","unit","fieldsize","small","nbinput","","readonly","",1,"form-control","size-small",3,"ngModel","ngModelChange"],["unit1","ngModel"],["type","text","name","wtPer100M","fieldsize","small","nbinput","",1,"form-control","size-small",3,"ngModel","readOnly","ngModelChange"],["wtPer100M1","ngModel"],["type","text","name","remark",1,"form-control",3,"ngModel","ngModelChange"],["remark1","ngModel"],[1,"batch-header","batch-card-margin"],[1,"batch-heading","display-inline"],[1,"col-md-8"],[1,"row","totals"],[1,"col-md-4","pt-2"],[2,"color","white"],["class","col-md-6",4,"ngFor","ngForOf"],[1,"col-md-3"],[1,"nb-icon-add"],["media","Linkedin",1,"link-fab","linkedin"],[1,"tooltip"],["icon","plus",1,"add-icon","display-inline",3,"options","click"],[1,"col-md-9","mobile-btn-center","text-btn-right","mt-50"],["class","btn btn-primary btn-sm btn-design-cancel","type","button",3,"click",4,"ngIf"],["class","btn btn-primary btn-sm btn-design-cancel","type","button",3,"routerLink",4,"ngIf"],["type","button","class","btn btn-primary btn-sm btn-design-save mob-stock button-base ripple",3,"disabled","click",4,"ngIf"],["type","button","class","btn btn-primary btn-sm btn-design-save button-base ripple",3,"disabled","click",4,"ngIf"],["type","button",1,"btn","btn-primary","btn-sm","btn-design-save","mob-stock","button-base","ripple",3,"disabled","click"],[1,"nb-text","txt-ov-elips"],[3,"value"],[1,"input-required"],[1,"col-md-6"],[3,"disabled"],[1,"padding-box"],[1,"col-md-6","col-8"],["required","","type","text","fieldsize","small","nbinput","","min","0",1,"form-control","size-small",3,"ngModel","disabled","name","ngModelChange","change","click"],["class","input-required","style","display: block !important;",4,"ngIf"],["class","col-md-6 col-4 display-flex-end",4,"ngIf"],[1,"form-group","mr-0"],[1,"col-md-12","col-12"],[1,"material","common-table","datatable-auto-height","box-shadow-none","box-mr-bt","stock-table-body-height",3,"rows","headerHeight","footerHeight","scrollbarV"],["table",""],["name","Meter","prop","mtr",1,"table-row",3,"sortable","width"],["ngx-datatable-cell-template",""],["name","Weight","prop","wt",3,"sortable","width"],["name","Action","sortable","false"],["ngx-datatable-footer-template",""],[1,"input-required",2,"display","block !important"],[1,"col-md-6","col-4","display-flex-end"],["status","danger","icon","trash",3,"options","click"],["type","number","required","","min","0",1,"tableForm",3,"ngModel","id","name","ngClass","disabled","keyup","ngModelChange","input"],["forFocus","","meter1","ngModel"],["class","input-required display-inlineblock","min","0",4,"ngIf"],["min","0",1,"input-required","display-inlineblock"],["type","number","required","","min","0",1,"tableForm",3,"name","ngModel","id","ngClass","disabled","ngModelChange","keyup","input"],["weight1","ngModel"],["icon","trash","status","danger",3,"hidden","options","click"],[1,"toal-finish-mtr"],["type","button",1,"btn","btn-primary","btn-sm","btn-design-cancel",3,"click"],["type","button",1,"btn","btn-primary","btn-sm","btn-design-cancel",3,"routerLink"],["type","button",1,"btn","btn-primary","btn-sm","btn-design-save","button-base","ripple",3,"disabled","click"]],template:function(t,e){if(1&t){var n=k.kc();k.ec(0,"ngx-loading",0),k.ec(1,"div",1),k.jc(2,"nb-card",2),k.jc(3,"nb-card-header",3),k.jc(4,"div",4),k.jc(5,"div",5),k.jc(6,"ng-select",6),k.uc("change",(function(t){return e.setViewJobValue(t)}))("ngModelChange",(function(t){return e.selectedTableChange=t})),k.jc(7,"ng-option",7),k.jd(8,"Pending batches"),k.ic(),k.jc(9,"ng-option",8),k.jd(10,"View Table"),k.ic(),k.jc(11,"ng-option",9),k.jd(12,"Job Card"),k.ic(),k.jc(13,"ng-option",10),k.jd(14,"Lot return"),k.ic(),k.jc(15,"ng-option",11),k.jd(16,"Report"),k.ic(),k.ic(),k.ic(),k.jc(17,"div",12),k.hd(18,W,3,0,"div",13),k.hd(19,V,3,0,"div",13),k.ic(),k.ic(),k.ic(),k.jc(20,"nb-card-body"),k.jc(21,"div"),k.jc(22,"form",null,14),k.jc(24,"div",15),k.jc(25,"div",4),k.jc(26,"div",16),k.jc(27,"label",17),k.jd(28,"Stock In Type"),k.ic(),k.ec(29,"input",18),k.ic(),k.jc(30,"div",16),k.jc(31,"label",17),k.jd(32,"Party Name"),k.ic(),k.jc(33,"ng-select",19,20),k.uc("ngModelChange",(function(t){return e.stockBatch.partyId=t}))("change",(function(t){return e.setQualityByParty(t)})),k.jc(35,"ng-option",21),k.jc(36,"div",4),k.jc(37,"div",22),k.jc(38,"div",23),k.jd(39,"Party Name "),k.ic(),k.ic(),k.jc(40,"div",22),k.jc(41,"div",24),k.jd(42," Party Code"),k.ic(),k.ic(),k.ic(),k.ic(),k.hd(43,E,8,3,"ng-option",25),k.ic(),k.hd(44,z,3,0,"div",26),k.ic(),k.jc(45,"div",27),k.jc(46,"label",17),k.jd(47,"Quality:"),k.ic(),k.jc(48,"ng-select",28,29),k.uc("ngModelChange",(function(t){return e.stockBatch.qualityId=t}))("change",(function(t){return e.getUnit(t)})),k.jc(50,"ng-option",21),k.jc(51,"div",4),k.jc(52,"div",22),k.jc(53,"div",23),k.jd(54,"Quality Id"),k.ic(),k.ic(),k.jc(55,"div",22),k.jc(56,"div",24),k.jd(57,"Quality Name"),k.ic(),k.ic(),k.ic(),k.ic(),k.hd(58,T,8,3,"ng-option",25),k.ic(),k.hd(59,U,3,0,"div",26),k.ic(),k.ic(),k.ic(),k.jc(60,"div",15),k.jc(61,"div",4),k.jc(62,"div",16),k.jc(63,"label",17),k.jd(64,"Receive Date:"),k.ic(),k.jc(65,"input",30,31),k.uc("ngModelChange",(function(t){return e.stockBatch.receiveDate=t})),k.ic(),k.ec(67,"owl-date-time",32,33),k.hd(69,G,3,0,"div",26),k.ic(),k.jc(70,"div",27),k.jc(71,"label",17),k.jd(72,"Challan No"),k.ic(),k.jc(73,"input",34,35),k.uc("ngModelChange",(function(t){return e.stockBatch.chlNo=t})),k.ic(),k.hd(75,$,3,0,"div",26),k.ic(),k.jc(76,"div",16),k.jc(77,"label",17),k.jd(78,"Challan Date:"),k.ic(),k.jc(79,"input",36,37),k.uc("ngModelChange",(function(t){return e.stockBatch.chlDate=t})),k.ic(),k.ec(81,"owl-date-time",32,38),k.hd(83,X,3,0,"div",26),k.ic(),k.ic(),k.ic(),k.jc(84,"div",15),k.jc(85,"div",4),k.jc(86,"div",16),k.jc(87,"label"),k.jd(88,"Unit:"),k.ic(),k.jc(89,"input",39,40),k.uc("ngModelChange",(function(t){return e.stockBatch.unit=t})),k.ic(),k.ic(),k.jc(91,"div",16),k.jc(92,"label"),k.jd(93,"Wt / 100 mtrs:"),k.ic(),k.jc(94,"input",41,42),k.uc("ngModelChange",(function(t){return e.stockBatch.wtPer100m=t})),k.ic(),k.ic(),k.jc(96,"div",27),k.jc(97,"label"),k.jd(98,"Remark"),k.ic(),k.jc(99,"input",43,44),k.uc("ngModelChange",(function(t){return e.stockBatch.remark=t})),k.ic(),k.ic(),k.ic(),k.ic(),k.jc(101,"div"),k.jc(102,"header",45),k.jc(103,"div",4),k.jc(104,"div",27),k.jc(105,"h2",46),k.jd(106,"BATCH"),k.ic(),k.ic(),k.jc(107,"div",47),k.jc(108,"div",48),k.jc(109,"div",49),k.jc(110,"h6",50),k.jd(111),k.zc(112,"number"),k.ic(),k.ic(),k.jc(113,"div",49),k.jc(114,"h6",50),k.jd(115),k.zc(116,"number"),k.ic(),k.ic(),k.jc(117,"div",49),k.jc(118,"h6",50),k.jd(119),k.zc(120,"number"),k.ic(),k.ic(),k.ic(),k.ic(),k.ic(),k.ic(),k.jc(121,"div",4),k.hd(122,rt,27,19,"div",51),k.ic(),k.jc(123,"div",4),k.jc(124,"div",52),k.jc(125,"div",53),k.jc(126,"a",54),k.jc(127,"div",55),k.jd(128,"Add Batch"),k.ic(),k.jc(129,"nb-icon",56),k.uc("click",(function(t){return e.addNewBatch(t)})),k.ic(),k.ic(),k.ic(),k.ic(),k.jc(130,"div",57),k.hd(131,lt,2,0,"button",58),k.hd(132,dt,2,2,"button",59),k.hd(133,ht,2,1,"button",60),k.hd(134,ut,2,1,"button",61),k.jc(135,"button",62),k.uc("click",(function(){k.Xc(n);var t=k.Uc(23);return e.addUpdateStockBatch(t,!0)})),k.jd(136,"SAVE & NEXT"),k.ic(),k.hd(137,gt,2,1,"button",60),k.ic(),k.ic(),k.ic(),k.ic(),k.ic(),k.ic(),k.ic()}if(2&t){var i=k.Uc(34),c=k.Uc(49),a=k.Uc(66),o=k.Uc(68),r=k.Uc(74),l=k.Uc(80),s=k.Uc(82);k.Hc("show",e.loading),k.Pb(6),k.Hc("ngModel",e.selectedTableChange),k.Pb(12),k.Hc("ngIf",e.addFlag),k.Pb(1),k.Hc("ngIf",!e.addFlag),k.Pb(14),k.Hc("ngModel",e.stockBatch.partyId)("ngClass",k.Nc(55,et,i.invalid&&(e.formSubmitted||i.touched)))("disabled",e.stockDataValues&&e.stockDataValues[0]),k.Pb(10),k.Hc("ngForOf",e.partyList),k.Pb(1),k.Hc("ngIf",i.invalid&&(e.formSubmitted||i.touched)),k.Pb(4),k.Hc("ngModel",e.stockBatch.qualityId)("ngClass",k.Nc(57,et,c.invalid&&(e.formSubmitted||c.touched)))("disabled",e.stockDataValues&&e.stockDataValues[0]),k.Pb(10),k.Hc("ngForOf",e.qualityList),k.Pb(1),k.Hc("ngIf",c.invalid&&(e.formSubmitted||c.touched)),k.Pb(6),k.Hc("ngModel",e.stockBatch.receiveDate)("owlDateTimeTrigger",o)("owlDateTime",o)("max",e.maxDate)("ngClass",k.Nc(59,et,e.formSubmitted&&a.invalid||a.invalid&&a.touched)),k.Pb(2),k.Hc("pickerType","calendar"),k.Pb(2),k.Hc("ngIf",e.formSubmitted&&a.invalid||a.invalid&&a.touched),k.Pb(4),k.Hc("ngModel",e.stockBatch.chlNo)("ngClass",k.Nc(61,et,e.formSubmitted&&r.invalid||r.invalid&&r.touched)),k.Pb(2),k.Hc("ngIf",e.formSubmitted&&r.invalid||r.invalid&&r.touched),k.Pb(4),k.Hc("ngModel",e.stockBatch.chlDate)("owlDateTimeTrigger",s)("owlDateTime",s)("max",e.maxDate)("ngClass",k.Nc(63,et,e.formSubmitted&&l.invalid||l.invalid&&l.touched)),k.Pb(2),k.Hc("pickerType","calendar"),k.Pb(2),k.Hc("ngIf",e.formSubmitted&&l.invalid||l.invalid&&l.touched),k.Pb(6),k.Hc("ngModel",e.stockBatch.unit),k.Pb(5),k.Hc("ngModel",e.stockBatch.wtPer100m)("readOnly",e.stockDataValues&&e.stockDataValues[0]),k.Pb(5),k.Hc("ngModel",e.stockBatch.remark),k.Pb(12),k.ld("Total Mtr: ",k.Bc(112,46,e.totalMeters,"1.2-2"),""),k.Pb(4),k.ld("Total Wt : ",k.Bc(116,49,e.totalWeights,"1.2-2"),""),k.Pb(4),k.ld("Total Gr : ",k.Bc(120,52,e.totalGrs,"1.2-2"),""),k.Pb(3),k.Hc("ngForOf",e.stockDataValues),k.Pb(7),k.Hc("options",k.Nc(66,K,k.Mc(65,Z))),k.Pb(2),k.Hc("ngIf",e.addFlag),k.Pb(1),k.Hc("ngIf",!e.addFlag),k.Pb(1),k.Hc("ngIf",e.addFlag),k.Pb(1),k.Hc("ngIf",!e.addFlag),k.Pb(1),k.Hc("disabled",e.disableButton),k.Pb(2),k.Hc("ngIf",!e.addFlag)}},directives:[H.a,O.u,O.x,q.a,L.l,L.o,q.c,r.n,O.t,L.x,L.m,L.n,L.t,r.l,r.m,L.a,I.c,I.e,I.b,O.I,F.e,F.b,F.a,F.f,F.d,L.q,l.d],pipes:[r.f],styles:[".display[_ngcontent-%COMP%]{border-color:transparent}.required-class[_ngcontent-%COMP%]{display:contents!important;width:100%;margin-top:.25rem;font-size:80%;color:#dc3545}"]}),pt),ft=a("kF6S"),mt=a("Cma1"),vt=a("mTc1");function Pt(t,e){if(1&t){var n=k.kc();k.jc(0,"nb-radio",27),k.uc("valueChange",(function(t){return k.Xc(n),k.yc().onChange(t)})),k.jd(1),k.ic()}if(2&t){var i=e.$implicit;k.Hc("value",i.id)("disabled",i.disabled),k.Pb(1),k.ld(" ",i.value,"")}}var yt=function(){return{type:"zoom"}},Mt=function(t){return{animation:t}},jt=function(t){return["/pages/stock-batch/edit",t]};function Ct(t,e){if(1&t){var n=k.kc();k.ec(0,"nb-icon",29),k.jc(1,"nb-icon",30),k.uc("click",(function(){k.Xc(n);var t=e.row;return k.yc(2).deleteStockBatch(t.id)})),k.zc(2,"disableStockBatchPipe"),k.ic(),k.jc(3,"nb-icon",31),k.uc("click",(function(){k.Xc(n);var t=e.row;return k.yc(2).printJobCard(t)})),k.zc(4,"disableStockBatchPipe"),k.ic()}if(2&t){var i=e.row,c=k.yc(2);k.Hc("options",k.Nc(12,Mt,k.Mc(11,yt)))("hidden",c.hiddenEdit)("routerLink",k.Nc(14,jt,i.id)),k.Pb(1),k.Hc("options",k.Nc(17,Mt,k.Mc(16,yt)))("hidden",c.hidden||k.Ac(2,7,i)),k.Pb(2),k.Hc("hidden",k.Ac(4,9,i))("options",k.Nc(20,Mt,k.Mc(19,yt)))}}function kt(t,e){1&t&&(k.jc(0,"ngx-datatable-column",28),k.hd(1,Ct,5,22,"ng-template",25),k.ic()),2&t&&k.Hc("maxWidth",90)}function Ot(t,e){if(1&t&&(k.hc(0),k.jc(1,"span",33),k.jd(2),k.ic(),k.gc()),2&t){var n=e.$implicit;k.Pb(2),k.ld("",n.batchId," ")}}function _t(t,e){1&t&&k.hd(0,Ot,3,1,"ng-container",32),2&t&&k.Hc("ngForOf",e.row.batchList)}var xt,wt=function(){return["/pages/stock-batch"]},Dt=((xt=function(){function t(e,n,i,a,o,r){c(this,t),this.route=e,this.modalService=n,this.toastr=i,this.stockBatchGuard=a,this.stockBatchService=o,this.commonService=r,this.errorData=g,this.loading=!1,this.copyStockList=[],this.stock=[],this.headers=["Stock In Type","Party Name","Bill No","Bill Date","Chl No","Chl Date"],this.module="stock-batch",this.flag=!1,this.disabled=!1,this.tablestyle="bootstrap",this.radioSelect=0,this.radioArray=[{id:1,value:"View Own",disabled:!1},{id:2,value:"View Group",disabled:!1},{id:3,value:"View All",disabled:!1}],this.hidden=!0,this.hiddenEdit=!0,this.hiddenView=!0,this.ownDelete=!0,this.allDelete=!0,this.groupDelete=!0,this.ownEdit=!0,this.allEdit=!0,this.groupEdit=!0,this.destroy$=new u.a}return o(t,[{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}},{key:"ngOnInit",value:function(){this.userId=this.commonService.getUser(),this.userId=this.userId.userId,this.userHeadId=this.commonService.getUserHeadId(),this.userHeadId=this.userHeadId.userHeadId,this.getAddAcess(),this.getViewAccess(),this.getDeleteAccess(),this.getDeleteAccess1(),this.getEditAccess(),this.getEditAccess1(),this.stockBatchGuard.accessRights("view all")?(this.getStockBatchList(0,"all"),this.hidden=this.allDelete,this.hiddenEdit=this.allEdit,this.radioSelect=3):this.stockBatchGuard.accessRights("view group")?(this.getStockBatchList(this.userId,"group"),this.hidden=this.groupDelete,this.hiddenEdit=this.groupEdit,this.radioSelect=2):this.stockBatchGuard.accessRights("view")&&(this.getStockBatchList(this.userId,"own"),this.hidden=this.ownDelete,this.hiddenEdit=this.ownEdit,this.radioSelect=1)}},{key:"getAddAcess",value:function(){this.disabled=!this.stockBatchGuard.accessRights("add")}},{key:"open",value:function(){var t=/([A-Z])([A-Z])([a-z])|([a-z])([A-Z])/g;this.flag=!0;var e=Object.keys(this.stockList[0]),n=[];e.forEach((function(e,i){n.push(e.replace(t,"$1$4 $2$3$5")),n[i]=n[i].charAt(0).toUpperCase()+n[i].slice(1)}));var i=this.modalService.open(mt.a);i.componentInstance.headers=n,i.componentInstance.list=this.stockList,i.componentInstance.moduleName=this.module}},{key:"onChange",value:function(t){switch(this.stockList=[],t){case 1:this.getStockBatchList(this.userId,"own"),this.hidden=this.ownDelete,this.hiddenEdit=this.ownEdit;break;case 2:this.getStockBatchList(this.userId,"group"),this.hidden=this.groupDelete,this.hiddenEdit=this.groupEdit;break;case 3:this.getStockBatchList(0,"all"),this.hidden=this.allDelete,this.hiddenEdit=this.allEdit}}},{key:"deleteStockBatch",value:function(t){var e=this;this.modalService.open(ft.a,{size:"sm"}).result.then((function(n){n&&e.stockBatchService.deleteStockBatchById(t).pipe(Object(h.a)(e.destroy$)).subscribe((function(t){t.success&&(e.toastr.success(g.Delete),e.onChange(e.radioSelect))}),(function(t){e.toastr.error(g.Internal_Error)}))}))}},{key:"filter",value:function(t){var e=this,n=t.toString().toLowerCase().trim();this.stockList=n?this.copyStockList.filter((function(t){return e.matchString(t,"partyName",n)||e.matchString(t,"qualityName",n)||e.matchString(t,"chlNo",n)||e.matchString(t,"batchId",n)||e.matchString(t,"stockInType",n)})):Object(p.cloneDeep)(this.copyStockList)}},{key:"matchString",value:function(t,e,n){return"batchId"==e?t.batchData.filter((function(t){return t.batchId.toLowerCase().includes(n)})).length>0:t[e].toLowerCase().includes(n)}},{key:"getStockBatchList",value:function(t,e){var n=this;this.loading=!0,this.stockBatchService.getAvailableStockBatchList(t,e).pipe(Object(h.a)(this.destroy$)).subscribe((function(t){if(t.success){n.stockList=t.data,n.stockList=n.stockList.map((function(t){return{id:t.id,stockInType:t.stockInType,partyName:t.partyName,qualityName:t.qualityName,batchList:t.batchList,chlNo:t.chlNo}}));var e=0;n.stockList.forEach((function(t){n.stockList[e].billDate=new Date(t.billDate).toDateString(),n.stockList[e].chlDate=new Date(t.chlDate).toDateString(),e++})),n.copyStockList=Object(p.cloneDeep)(n.stockList)}n.loading=!1}),(function(t){n.loading=!1}))}},{key:"getViewAccess",value:function(){this.radioArray[0].disabled=!this.stockBatchGuard.accessRights("view"),this.radioArray[1].disabled=!this.stockBatchGuard.accessRights("view group"),this.radioArray[2].disabled=!this.stockBatchGuard.accessRights("view all")}},{key:"getDeleteAccess",value:function(){this.stockBatchGuard.accessRights("delete")&&(this.ownDelete=!1,this.hidden=this.ownDelete),this.stockBatchGuard.accessRights("delete group")&&(this.groupDelete=!1,this.hidden=this.groupDelete),this.stockBatchGuard.accessRights("delete all")&&(this.allDelete=!1,this.hidden=this.allDelete)}},{key:"getDeleteAccess1",value:function(){this.stockBatchGuard.accessRights("delete")?(this.ownDelete=!1,this.hidden=this.ownDelete):this.hidden=!0}},{key:"getEditAccess",value:function(){this.stockBatchGuard.accessRights("edit")&&(this.ownEdit=!1,this.hiddenEdit=this.ownEdit),this.stockBatchGuard.accessRights("edit group")&&(this.groupEdit=!1,this.hiddenEdit=this.groupEdit),this.stockBatchGuard.accessRights("edit all")&&(this.allEdit=!1,this.hiddenEdit=this.allEdit)}},{key:"getEditAccess1",value:function(){this.stockBatchGuard.accessRights("edit")?(this.ownEdit=!1,this.hiddenEdit=this.ownEdit):this.hiddenEdit=!0}},{key:"printJobCard",value:function(t){var e=this.modalService.open(B);e.componentInstance.isDirectPrintFlag=!0,e.componentInstance.stockBatchData=t,e.componentInstance.stockId=Number(t.id),e.result.then((function(t){}))}},{key:"setViewJobValue",value:function(t){"view table"===t?this.route.navigate(["/pages/stock-batch/view"]):"add"===t&&this.route.navigate(["/pages/stock-batch"])}}]),t}()).\u0275fac=function(t){return new(t||xt)(k.dc(l.c),k.dc(b.e),k.dc(R.b),k.dc(s.a),k.dc(M.a),k.dc(j.a))},xt.\u0275cmp=k.Xb({type:xt,selectors:[["ngx-available-batches"]],decls:36,vars:13,consts:[[3,"show"],[1,"row"],[1,"col-lg-12"],[1,"nb-style"],[1,"nb-header"],[1,"col-md-3","col-5","display-flex-start","max-width-device"],["placeholder","Select",1,"btn","btn-md",2,"width","170px",3,"change"],["value","view table"],["value","add"],[1,"col-md-2","col-2","display-flex-start"],[1,"btn","btn-primary","btn-md","btn-design",3,"routerLink","disabled"],[1,"col-md-5","col-5"],[1,"nb-text"],[1,"col-md-2","col-2","display-flex-start","desktop-justify-flexend"],[1,"btn","btn-primary","btn-md","btn-design",3,"click"],[1,"col-md-6"],[1,"nb-radio",3,"ngModel","ngModelChange"],[3,"value","disabled","valueChange",4,"ngFor","ngForOf"],["type","text","placeholder","Search","aria-label","Search","aria-describedby","basic-addon1",1,"form-control",3,"keyup"],[1,"material","table-responsive",3,"rows","ngClass","headerHeight","footerHeight"],["name","Actions","sortable","false","prop","id",3,"maxWidth",4,"ngIf"],["name","Stock In Type","props","stockInType",3,"maxWidth"],["name","Party Name","props","partyName"],["name","Quality Name","props","qualityName"],["name","Batch","prop","batchList"],["ngx-datatable-cell-template",""],["name","Chl No","props","chlNo",3,"maxWidth"],[3,"value","disabled","valueChange"],["name","Actions","sortable","false","prop","id",3,"maxWidth"],["status","primary","icon","edit",3,"options","hidden","routerLink"],["status","danger","icon","trash",3,"options","hidden","click"],["icon","clipboard","nbTooltip","Print","nbTooltipStatus","primary","status","danger",3,"hidden","options","click"],[4,"ngFor","ngForOf"],[1,"invpice-batch-style"]],template:function(t,e){1&t&&(k.ec(0,"ngx-loading",0),k.jc(1,"div",1),k.jc(2,"div",2),k.jc(3,"nb-card",3),k.jc(4,"nb-card-header",4),k.jc(5,"div",1),k.jc(6,"div",5),k.jc(7,"ng-select",6),k.uc("change",(function(t){return e.setViewJobValue(t)})),k.jc(8,"ng-option",7),k.jd(9,"View Table"),k.ic(),k.jc(10,"ng-option",8),k.jd(11,"Add Stock-batch"),k.ic(),k.ic(),k.ic(),k.jc(12,"div",9),k.jc(13,"button",10),k.jd(14,"ADD"),k.ic(),k.ic(),k.jc(15,"div",11),k.jc(16,"h2",12),k.jd(17,"Pending Stock-Batch"),k.ic(),k.ic(),k.jc(18,"div",13),k.jc(19,"button",14),k.uc("click",(function(){return e.open()})),k.jd(20,"EXPORT"),k.ic(),k.ic(),k.ic(),k.ic(),k.jc(21,"nb-card-body"),k.jc(22,"div",1),k.jc(23,"div",15),k.jc(24,"nb-radio-group",16),k.uc("ngModelChange",(function(t){return e.radioSelect=t})),k.hd(25,Pt,2,3,"nb-radio",17),k.ic(),k.ic(),k.jc(26,"div",15),k.jc(27,"input",18),k.uc("keyup",(function(t){return e.filter(t.target.value)})),k.ic(),k.ic(),k.ic(),k.jc(28,"ngx-datatable",19),k.hd(29,kt,2,1,"ngx-datatable-column",20),k.ec(30,"ngx-datatable-column",21),k.ec(31,"ngx-datatable-column",22),k.ec(32,"ngx-datatable-column",23),k.jc(33,"ngx-datatable-column",24),k.hd(34,_t,1,1,"ng-template",25),k.ic(),k.ec(35,"ngx-datatable-column",26),k.ic(),k.ic(),k.ic(),k.ic(),k.ic()),2&t&&(k.Hc("show",e.loading),k.Pb(13),k.Hc("routerLink",k.Mc(12,wt))("disabled",e.disabled),k.Pb(11),k.Hc("ngModel",e.radioSelect),k.Pb(1),k.Hc("ngForOf",e.radioArray),k.Pb(3),k.Hc("rows",e.stockList)("ngClass",e.tablestyle)("headerHeight",31)("footerHeight",40),k.Pb(1),k.Hc("ngIf",!e.hiddenEdit||!e.hidden),k.Pb(1),k.Hc("maxWidth",130),k.Pb(5),k.Hc("maxWidth",130))},directives:[H.a,O.u,O.x,q.a,q.c,l.d,O.t,O.eb,L.l,L.o,r.m,F.e,r.l,r.n,F.b,F.a,O.db,O.I,O.yb],pipes:[vt.a],styles:[""]}),xt),St=a("3jao"),Bt=a("qZsz"),It=a("dfbw"),Lt=a("+lss"),Nt=["searchfilter"];function Rt(t,e){if(1&t){var n=k.kc();k.jc(0,"div",42),k.jc(1,"span",43),k.jd(2),k.ic(),k.jd(3," : "),k.jc(4,"span",44),k.jd(5),k.ic(),k.jc(6,"span",45),k.uc("click",(function(){k.Xc(n);var t=e.$implicit;return k.yc(2).onClear(t.field[0])})),k.jc(7,"strong"),k.jd(8,"x"),k.ic(),k.ic(),k.ic()}if(2&t){var i=e.$implicit;k.Pb(2),k.kd(i.field[0]),k.Pb(3),k.kd(i.value)}}function Ht(t,e){if(1&t){var n=k.kc();k.hc(0),k.jc(1,"div",36),k.jc(2,"label",37),k.jd(3,"Filter By : "),k.ic(),k.jc(4,"div",38),k.jc(5,"div",39),k.hd(6,Rt,9,2,"div",40),k.jc(7,"div",41),k.uc("click",(function(){return k.Xc(n),k.yc().onClearFilter()})),k.jd(8,"Clear All"),k.ic(),k.ic(),k.ic(),k.ic(),k.gc()}if(2&t){var i=k.yc();k.Pb(6),k.Hc("ngForOf",i.requestData.data.parameters)}}var qt=function(){return{type:"zoom"}},Ft=function(t){return{animation:t}};function At(t,e){if(1&t){var n=k.kc();k.jc(0,"nb-icon",46),k.uc("click",(function(){k.Xc(n);var t=e.row;return k.yc().print(t)})),k.ic()}2&t&&k.Hc("options",k.Nc(2,Ft,k.Mc(1,qt)))}function Wt(t,e){if(1&t){var n=k.kc();k.jd(0,"Chl No "),k.jc(1,"div",47),k.jc(2,"nb-icon",48),k.uc("click",(function(){return k.Xc(n),k.yc().onOpenFilter("chlNo")})),k.ic(),k.ic()}if(2&t){k.yc();var i=k.Uc(56);k.Pb(2),k.Hc("nbPopover",i)}}function Vt(t,e){if(1&t){var n=k.kc();k.jd(0,"Party Name "),k.jc(1,"div",47),k.jc(2,"nb-icon",48),k.uc("click",(function(){return k.Xc(n),k.yc().onOpenFilter("partyName")})),k.ic(),k.ic()}if(2&t){k.yc();var i=k.Uc(56);k.Pb(2),k.Hc("nbPopover",i)}}function Et(t,e){if(1&t){var n=k.kc();k.jd(0,"Quality Name "),k.jc(1,"div",47),k.jc(2,"nb-icon",48),k.uc("click",(function(){return k.Xc(n),k.yc().onOpenFilter("qualityName")})),k.ic(),k.ic()}if(2&t){k.yc();var i=k.Uc(56);k.Pb(2),k.Hc("nbPopover",i)}}function zt(t,e){if(1&t&&(k.hc(0),k.jc(1,"span",50),k.jd(2),k.ic(),k.gc()),2&t){var n=e.$implicit;k.Pb(2),k.md("",n.mtr," Mtr. (",n.wt," Wt.) ")}}function Tt(t,e){1&t&&k.hd(0,zt,3,2,"ng-container",49),2&t&&k.Hc("ngForOf",e.row.batchReturnList)}function Ut(t,e){if(1&t){var n=k.kc();k.jd(0,"Delivery Person "),k.jc(1,"div",47),k.jc(2,"nb-icon",48),k.uc("click",(function(){return k.Xc(n),k.yc().onOpenFilter("broker")})),k.ic(),k.ic()}if(2&t){k.yc();var i=k.Uc(56);k.Pb(2),k.Hc("nbPopover",i)}}function Gt(t,e){if(1&t){var n=k.kc();k.jd(0,"Tempo No "),k.jc(1,"div",47),k.jc(2,"nb-icon",48),k.uc("click",(function(){return k.Xc(n),k.yc().onOpenFilter("tempoNo")})),k.ic(),k.ic()}if(2&t){k.yc();var i=k.Uc(56);k.Pb(2),k.Hc("nbPopover",i)}}function $t(t,e){if(1&t&&(k.jc(0,"option",51),k.jd(1),k.ic()),2&t){var n=e.$implicit;k.Hc("value",n),k.Pb(1),k.kd(n)}}function Xt(t,e){if(1&t){var n=k.kc();k.hc(0),k.jc(1,"ng-select",63),k.uc("ngModelChange",(function(t){return k.Xc(n),k.yc(2).operatorSelected=t})),k.jc(2,"ng-option",64),k.jd(3,"Conatins"),k.ic(),k.jc(4,"ng-option",65),k.jd(5,"Equals"),k.ic(),k.jc(6,"ng-option",66),k.jd(7,"Not Equals"),k.ic(),k.jc(8,"ng-option",67),k.jd(9,"Starts With"),k.ic(),k.jc(10,"ng-option",68),k.jd(11,"Ends With"),k.ic(),k.ic(),k.gc()}if(2&t){var i=k.yc(2);k.Pb(1),k.Hc("ngModel",i.operatorSelected)}}function Qt(t,e){if(1&t){var n=k.kc();k.hc(0),k.jc(1,"ng-select",63),k.uc("ngModelChange",(function(t){return k.Xc(n),k.yc(2).operatorSelected=t})),k.jc(2,"ng-option",69),k.jd(3,"Greater Than"),k.ic(),k.jc(4,"ng-option",70),k.jd(5,"Less Than"),k.ic(),k.jc(6,"ng-option",65),k.jd(7,"Equals"),k.ic(),k.jc(8,"ng-option",66),k.jd(9,"Not Equals"),k.ic(),k.ic(),k.gc()}if(2&t){var i=k.yc(2);k.Pb(1),k.Hc("ngModel",i.operatorSelected)}}function Jt(t,e){if(1&t){var n=k.kc();k.jc(0,"div",52),k.jc(1,"div",53),k.jc(2,"div",54),k.jc(3,"span",55),k.jd(4,"Filter"),k.ic(),k.ic(),k.jc(5,"div",56),k.jc(6,"div",57),k.uc("click",(function(){return k.Xc(n),k.yc().closeFilterPopover()})),k.jc(7,"strong"),k.jd(8,"X"),k.ic(),k.ic(),k.ic(),k.ic(),k.jc(9,"div",58),k.jc(10,"div",59),k.hd(11,Xt,12,1,"ng-container",21),k.hd(12,Qt,10,1,"ng-container",21),k.ic(),k.jc(13,"div",59),k.jc(14,"input",60),k.uc("ngModelChange",(function(t){return k.Xc(n),k.yc().filterWord=t})),k.ic(),k.ic(),k.ic(),k.jc(15,"button",61),k.uc("click",(function(){return k.Xc(n),k.yc().onApplyFilter()})),k.jd(16,"Apply"),k.ic(),k.jc(17,"button",62),k.uc("click",(function(){return k.Xc(n),k.yc().closeFilterPopover()})),k.jd(18,"Close"),k.ic(),k.ic()}if(2&t){var i=k.yc();k.Pb(11),k.Hc("ngIf",i.stringFlag),k.Pb(1),k.Hc("ngIf",i.numberFlag),k.Pb(2),k.Hc("ngModel",i.filterWord)}}var Zt,Kt=((Zt=function(){function t(e,n,i){c(this,t),this.lotReturnService=e,this.route=n,this.modalService=i,this.loading=!1,this.disabled=!1,this.tablestyle="bootstrap",this.searchStr="",this.radioSelect=0,this.radioArray=[{id:1,value:"View Own",disabled:!1},{id:2,value:"View Group",disabled:!1},{id:3,value:"View All",disabled:!1}],this.stockList=[],this.copyStockList=[],this.tableHeaders=["chlNo","partyName","qualityName","batchReturnList","broker","tempoNo"],this.numberFlag=!1,this.stringFlag=!1,this.pageSizes=[10,20,50,100],this.selectedPageSize=20,this.requestData=new It.a,this.filterWord="",this.selectedColumnForFilter="",this.operatorSelected=null,this.destroy$=new u.a}return o(t,[{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}},{key:"ngOnInit",value:function(){this.requestData.data=new St.a,this.requestData.getBy="all",this.getAllReturnLots()}},{key:"getAllReturnLots",value:function(){var t=this;this.loading=!0,this.lotReturnService.returnLotgetAllPaginated(this.requestData).pipe(Object(h.a)(this.destroy$)).subscribe((function(e){if(e.success){var n=e.data;t.copyStockList=t.stockList=n.data,t.requestData.data.total=n.total}t.loading=!1}),(function(e){t.loading=!1}))}},{key:"filter",value:function(t){var e=this,n=t.toString().toLowerCase().trim();this.stockList=n?this.copyStockList.filter((function(t){return e.matchString(t,"partyName",n)||e.matchString(t,"qualityName",n)||e.matchString(t,"chlNo",n)||e.matchString(t,"batchId",n)||e.matchString(t,"broker",n)||e.matchString(t,"tempoNo",n)})):Object(p.cloneDeep)(this.copyStockList)}},{key:"matchString",value:function(t,e,n){return"batchId"==e?t.batchReturnList.filter((function(t){return t.mtr.toString().toLowerCase().includes(n)||t.wt.toString().toLowerCase().includes(n)})).length>0:t[e].toString().toLowerCase().includes(n)}},{key:"print",value:function(t){this.route.navigate(["pages/stock-batch/return-lot/print"],{queryParams:{chlNo:t.chlNo}})}},{key:"setViewJobValue",value:function(t){"view table"===t?this.route.navigate(["/pages/stock-batch/view"]):"job card"===t?this.modalService.open(N):"pending"===t?this.route.navigate(["/pages/stock-batch/pending"]):"return"==t&&this.route.navigate(["/pages/stock-batch/return-lot"])}},{key:"setPage",value:function(t){this.requestData.data.pageIndex=t.offset,this.getAllReturnLots()}},{key:"pageSizeChanged",value:function(){this.requestData.data.pageSize=Number(this.selectedPageSize),this.getAllReturnLots()}},{key:"onOpenFilter",value:function(t){this.stringFlag=!0,this.numberFlag=!1;var e=this.requestData.data.parameters.findIndex((function(e){return e.field.find((function(e){return e==t}))}));e>-1?(this.filterWord=this.requestData.data.parameters[e].value,this.operatorSelected=this.requestData.data.parameters[e].operator):(this.filterWord="",this.operatorSelected=null),this.selectedColumnForFilter=t,this.popover.show()}},{key:"onApplyFilter",value:function(){var t=this;this.popover.hide();var e=this.requestData.data.parameters.findIndex((function(e){return e.field.find((function(e){return e==t.selectedColumnForFilter}))}));if(e>-1)this.requestData.data.parameters[e].operator=this.operatorSelected,this.requestData.data.parameters[e].value=this.filterWord;else{var n=new Bt.a;n.field=[this.selectedColumnForFilter],n.value=this.filterWord,n.operator=this.operatorSelected,this.requestData.data.parameters.push(n)}this.requestData.data.pageIndex=0,this.getAllReturnLots()}},{key:"onClear",value:function(t){var e,n=this;(e=this.requestData.data.parameters.findIndex(t?function(e){return e.field.find((function(e){return e==t}))}:function(t){return t.field.find((function(t){return t==n.selectedColumnForFilter}))}))>-1&&(this.filterWord="",this.operatorSelected=null,this.requestData.data.parameters.splice(e,1),this.requestData.data.pageIndex=0,this.getAllReturnLots())}},{key:"closeFilterPopover",value:function(){this.popover.hide()}},{key:"onClearFilter",value:function(){this.popover.hide(),this.requestData.data.parameters.length>0&&(this.requestData.data.parameters=[],this.getAllReturnLots())}}]),t}()).\u0275fac=function(t){return new(t||Zt)(k.dc(M.a),k.dc(l.c),k.dc(b.e))},Zt.\u0275cmp=k.Xb({type:Zt,selectors:[["ngx-lot-return-view"]],viewQuery:function(t,e){var n;1&t&&(k.cd(Nt,!0),k.nd(O.ab,!0)),2&t&&(k.Tc(n=k.vc())&&(e.filterTextBox=n.first),k.Tc(n=k.vc())&&(e.popover=n.first))},decls:57,vars:22,consts:[[3,"show"],[1,"row"],[1,"col-lg-12"],[1,"nb-style"],[1,"nb-header"],[1,"col-md-5","col-6","display-flex-start","max-width-device"],["placeholder","Select",1,"btn","btn-md",3,"change"],["value","pending"],["value","view table"],["value","job card"],["value","return"],[1,"col-md-7","col-6"],[1,"nb-text"],[1,"col-md-6"],[1,"col-md-4"],[2,"display","flex"],[2,"margin-top","4px","margin-right","2px"],["status","primary","labelPosition","start","name","shift",3,"ngModel","ngModelChange"],[2,"margin-top","4px","margin-left","2px"],[1,"col-md-8"],["type","text","placeholder","Search","aria-label","Search","aria-describedby","basic-addon1",1,"form-control",3,"ngModel","ngModelChange"],[4,"ngIf"],[1,"material","table-responsive",3,"rows","ngClass","headerHeight","footerHeight","externalPaging","count","offset","limit","page"],["name","Actions","sortable","false","prop","id",3,"maxWidth"],["ngx-datatable-cell-template",""],["name","Chl No","props","chlNo",3,"maxWidth"],["ngx-datatable-header-template",""],["name","Party Name","props","partyName"],["name","Quality Name","props","qualityName"],["name","GR List","prop","batchReturnList",3,"maxWidth"],["name","Broker","props","broker"],["name","Tempo No","props","tempoNo"],[1,"page-sizer","d-flex"],["name","pageSizer",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],["templateRef",""],[1,"filter-by-row"],["for",""],[1,"filter-by-col"],[1,"tag-style-con"],["class","tag-style",4,"ngFor","ngForOf"],[1,"filter-by-clear-all",3,"click"],[1,"tag-style"],[1,"filter-by-title"],[1,"filter-by-val"],[2,"cursor","pointer",3,"click"],["icon","clipboard","nbTooltip","Print","nbTooltipStatus","primary","status","danger",3,"options","click"],[1,"filter-icon"],["icon","menu-outline","nbPopoverTrigger","noop",1,"nb-icon-filter",3,"nbPopover","click"],[4,"ngFor","ngForOf"],[1,"invpice-batch-style"],[3,"value"],["id","filterDiv",2,"padding","2px 14px","width","250px"],[1,"row",2,"background-color","#aa3634"],[1,"col-md-10"],[2,"color","white"],[1,"col-md-2",2,"margin-top","3px","color","white"],[2,"cursor","pointer","text-align","center",3,"click"],[1,"row",2,"margin-top","8px"],[1,"col-md-12","mb-1"],["type","text","placeholder","Filter...",1,"form-control",3,"ngModel","ngModelChange"],["nbButton","","status","primary",2,"margin-right","5px",3,"click"],["nbButton","","status","danger",3,"click"],["appendTo","body","placeholder","Select Filter",1,"popup-select",3,"ngModel","ngModelChange"],["value","LIKE"],["value","EQUALS"],["value","NOT_EQUALS"],["value","START_WITH"],["value","END_WITH"],["value","GREATER_THAN"],["value","LESS_THAN"]],template:function(t,e){1&t&&(k.ec(0,"ngx-loading",0),k.jc(1,"div",1),k.jc(2,"div",2),k.jc(3,"nb-card",3),k.jc(4,"nb-card-header",4),k.jc(5,"div",1),k.jc(6,"div",5),k.jc(7,"ng-select",6),k.uc("change",(function(t){return e.setViewJobValue(t)})),k.jc(8,"ng-option",7),k.jd(9,"Pending batches"),k.ic(),k.jc(10,"ng-option",8),k.jd(11,"View Table"),k.ic(),k.jc(12,"ng-option",9),k.jd(13,"Job Card"),k.ic(),k.jc(14,"ng-option",10),k.jd(15,"Lot return"),k.ic(),k.ic(),k.ic(),k.jc(16,"div",11),k.jc(17,"h2",12),k.jd(18,"Lot Return"),k.ic(),k.ic(),k.ic(),k.ic(),k.jc(19,"nb-card-body"),k.jc(20,"div",1),k.jc(21,"div",13),k.jc(22,"div",1),k.jc(23,"div",14),k.jc(24,"div",15),k.jc(25,"p",16),k.jd(26,"OR"),k.ic(),k.jc(27,"nb-toggle",17),k.uc("ngModelChange",(function(){return e.getAllReturnLots()}))("ngModelChange",(function(t){return e.requestData.data.isAnd=t})),k.ic(),k.jc(28,"p",18),k.jd(29,"AND"),k.ic(),k.ic(),k.ic(),k.jc(30,"div",19),k.jc(31,"input",20),k.uc("ngModelChange",(function(t){return e.searchStr=t})),k.ic(),k.ic(),k.ic(),k.ic(),k.ic(),k.jc(32,"div",1),k.hd(33,Ht,9,1,"ng-container",21),k.ic(),k.jc(34,"ngx-datatable",22),k.uc("page",(function(t){return e.setPage(t)})),k.zc(35,"searchInTable"),k.jc(36,"ngx-datatable-column",23),k.hd(37,At,1,4,"ng-template",24),k.ic(),k.jc(38,"ngx-datatable-column",25),k.hd(39,Wt,3,1,"ng-template",26),k.ic(),k.jc(40,"ngx-datatable-column",27),k.hd(41,Vt,3,1,"ng-template",26),k.ic(),k.jc(42,"ngx-datatable-column",28),k.hd(43,Et,3,1,"ng-template",26),k.ic(),k.jc(44,"ngx-datatable-column",29),k.hd(45,Tt,1,1,"ng-template",24),k.ic(),k.jc(46,"ngx-datatable-column",30),k.hd(47,Ut,3,1,"ng-template",26),k.ic(),k.jc(48,"ngx-datatable-column",31),k.hd(49,Gt,3,1,"ng-template",26),k.ic(),k.ic(),k.jc(50,"div",32),k.jc(51,"span"),k.jd(52,"Page Size: "),k.ic(),k.jc(53,"select",33),k.uc("ngModelChange",(function(t){return e.selectedPageSize=t}))("change",(function(){return e.pageSizeChanged()})),k.hd(54,$t,2,2,"option",34),k.ic(),k.ic(),k.ic(),k.ic(),k.ic(),k.ic(),k.hd(55,Jt,19,3,"ng-template",null,35,k.id)),2&t&&(k.Hc("show",e.loading),k.Pb(27),k.Hc("ngModel",e.requestData.data.isAnd),k.Pb(4),k.Hc("ngModel",e.searchStr),k.Pb(2),k.Hc("ngIf",e.requestData.data.parameters&&e.requestData.data.parameters.length),k.Pb(1),k.Hc("rows",k.Dc(35,17,e.stockList,e.searchStr,e.requestData.data.isAnd,e.tableHeaders))("ngClass","bootstrap")("headerHeight",31)("footerHeight",40)("externalPaging",!0)("count",e.requestData.data.total)("offset",e.requestData.data.pageIndex)("limit",e.requestData.data.pageSize),k.Pb(2),k.Hc("maxWidth",90),k.Pb(2),k.Hc("maxWidth",100),k.Pb(6),k.Hc("maxWidth",230),k.Pb(9),k.Hc("ngModel",e.selectedPageSize),k.Pb(1),k.Hc("ngForOf",e.pageSizes))},directives:[H.a,O.u,O.x,q.a,q.c,O.t,O.wb,L.l,L.o,L.a,r.n,F.e,r.l,F.b,F.a,F.c,L.u,r.m,O.I,O.yb,O.ab,L.p,L.w,O.q],pipes:[Lt.a],styles:[""]}),Zt),Yt=a("ENVk"),te=a("R0b5");function ee(t,e){if(1&t&&(k.jc(0,"ng-option",55),k.jc(1,"div",1),k.jc(2,"div",20),k.jc(3,"div",21),k.jd(4),k.ic(),k.ic(),k.jc(5,"div",20),k.jc(6,"div",22),k.jd(7),k.ic(),k.ic(),k.ic(),k.ic()),2&t){var n=e.$implicit;k.Hc("value",n.id),k.Pb(4),k.ld(" ",n.partyName,""),k.Pb(3),k.ld(" ",n.partyCode,"")}}function ne(t,e){if(1&t&&(k.jc(0,"ng-option",55),k.jd(1),k.ic()),2&t){var n=e.$implicit;k.Hc("value",n.id?n.id:n.qualityEntryId),k.Pb(1),k.ld(" ",n.qualityId," ")}}function ie(t,e){1&t&&(k.jc(0,"div",56),k.jc(1,"span"),k.jd(2,"Broker is required"),k.ic(),k.ic())}function ce(t,e){1&t&&(k.jc(0,"div",56),k.jc(1,"span"),k.jd(2,"Tempo No is required"),k.ic(),k.ic())}function ae(t,e){1&t&&(k.jc(0,"div",56),k.jc(1,"span"),k.jd(2,"Party name is required"),k.ic(),k.ic())}var oe=function(t){return{"is-invalid":t}};function re(t,e){if(1&t){var n=k.kc();k.jc(0,"div",27),k.jc(1,"div",24),k.jc(2,"label",28),k.jd(3,"Party Name"),k.ic(),k.jc(4,"input",57,58),k.uc("ngModelChange",(function(t){return k.Xc(n),k.yc().diffPartyName=t})),k.ic(),k.hd(6,ae,3,0,"div",31),k.ic(),k.ic()}if(2&t){var i=k.Uc(5),c=k.yc();k.Pb(4),k.Hc("ngModel",c.diffPartyName)("ngClass",k.Nc(3,oe,c.formSubmitted&&i.invalid||i.invalid&&i.touched)),k.Pb(2),k.Hc("ngIf",c.formSubmitted&&i.invalid||i.invalid&&i.touched)}}function le(t,e){1&t&&(k.jc(0,"div",56),k.jc(1,"span"),k.jd(2,"Party address is required"),k.ic(),k.ic())}function se(t,e){if(1&t){var n=k.kc();k.jc(0,"div",27),k.jc(1,"div",24),k.jc(2,"label",28),k.jd(3,"Party Address"),k.ic(),k.jc(4,"input",59,60),k.uc("ngModelChange",(function(t){return k.Xc(n),k.yc().diffPartyAddr=t})),k.ic(),k.hd(6,le,3,0,"div",31),k.ic(),k.ic()}if(2&t){var i=k.Uc(5),c=k.yc();k.Pb(4),k.Hc("ngModel",c.diffPartyAddr)("ngClass",k.Nc(3,oe,c.formSubmitted&&i.invalid||i.invalid&&i.touched)),k.Pb(2),k.Hc("ngIf",c.formSubmitted&&i.invalid||i.invalid&&i.touched)}}function de(t,e){1&t&&(k.jc(0,"div",56),k.jc(1,"span"),k.jd(2,"Please enter valid gst number"),k.ic(),k.ic())}function he(t,e){if(1&t){var n=k.kc();k.jc(0,"div",27),k.jc(1,"div",24),k.jc(2,"label"),k.jd(3,"Gst"),k.ic(),k.jc(4,"input",61,62),k.uc("ngModelChange",(function(t){return k.Xc(n),k.yc().diffPartyGst=t})),k.ic(),k.hd(6,de,3,0,"div",31),k.ic(),k.ic()}if(2&t){var i=k.Uc(5),c=k.yc();k.Pb(4),k.Hc("pattern",c.pattern)("ngModel",c.diffPartyGst)("ngClass",k.Nc(4,oe,c.diffPartyGst&&c.formSubmitted&&i.invalid)),k.Pb(2),k.Hc("ngIf",c.diffPartyGst&&c.formSubmitted&&i.invalid)}}var ue=function(t,e,n){return{"active-button":t,"inactive-button":e,disabled:n}};function ge(t,e){if(1&t){var n=k.kc();k.jc(0,"button",63),k.uc("click",(function(){k.Xc(n);var t=e.$implicit;return k.yc().batchSelected(t.batchId)})),k.jd(1),k.ic()}if(2&t){var i=e.$implicit,c=k.yc();k.Hc("ngClass",k.Pc(4,ue,i.batchId==c.selectedBatch,i.batchId!=c.selectedBatch,i.productionPlanned))("disabled",i.productionPlanned)("value",i.batchId),k.Pb(1),k.ld(" ",i.batchId," ")}}var pe=function(){return{type:"zoom"}},be=function(t){return{animation:t}};function fe(t,e){if(1&t){var n=k.kc();k.jc(0,"nb-icon",64),k.uc("click",(function(){k.Xc(n);var t=e.row;return k.yc().removeFromSelectedGr(t.id)})),k.ic()}2&t&&k.Hc("options",k.Nc(2,be,k.Mc(1,pe)))}var me,ve=((me=function(){function t(e,n,i,a,o,r,l,s){c(this,t),this.toastr=e,this.stockBatchService=n,this.mergeBatchService=i,this.commonService=a,this.route=o,this.finishedMeterService=r,this.qualityService=l,this.partyService=s,this.loading=!1,this.selectedGRList=[],this.selectedGRListTemp=[],this.partyList=[],this.qualityList=[],this.batchList=[],this.grList=[],this.disableFields=!1,this.formSubmitted=!1,this.isDiffParty=!1,this.pattern=/^([0][1-9]|[1-2][0-9]|[3][0-7])([a-zA-Z]{5}[0-9]{4}[a-zA-Z]{1}[1-9a-zA-Z]{1}[zZ]{1}[0-9a-zA-Z]{1})+$/,this.destroy$=new u.a}return o(t,[{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}},{key:"ngOnInit",value:function(){this.userId=this.commonService.getUser().userId,this.userHeadId=this.commonService.getUserHeadId().userHeadId,this.getAllParty(),this.getAllQuality()}},{key:"getAllParty",value:function(){var t=this;this.partyService.getAllPartyWithNameOnly().pipe(Object(h.a)(this.destroy$)).subscribe((function(e){e.success&&(t.partyList=e.data)}),(function(t){}))}},{key:"selectionChanges",value:function(t){"view table"===t||"job card"===t?this.route.navigate(["/pages/stock-batch/view"]):"pending"===t||"add"==t?this.route.navigate(["/pages/stock-batch/pending"]):"view"==t&&this.route.navigate(["/pages/stock-batch/return-lot/view"])}},{key:"enableQuality",value:function(t){var e=this;this.qualityList=null,this.selectedQuality=null,null!=t?this.finishedMeterService.getAllQualityByParty(this.selectedParty).pipe(Object(h.a)(this.destroy$)).subscribe((function(t){t.success?(e.qualityList=t.data.qualityDataList,e.qualityList.forEach((function(e){e.partyName=t.data.partyName,e.partyId=t.data.partyId}))):e.toastr.error(t.msg)}),(function(t){})):(this.batchList=[],this.grList=[],this.getAllQuality())}},{key:"getAllBatchByQuality",value:function(){var t=this;this.batchList=[],this.mergeBatchService.getBatchesByPartyQuality(this.selectedQuality,this.selectedParty).pipe(Object(h.a)(this.destroy$)).subscribe((function(e){e.success&&(t.batchList=e.data)}),(function(t){}))}},{key:"getAllQuality",value:function(){var t=this;this.qualityService.getAllQualityWithNameOnly().pipe(Object(h.a)(this.destroy$)).subscribe((function(e){e.success&&(t.qualityList=e.data)}),(function(t){}))}},{key:"qualitySelected",value:function(t){var e=this;if(null!=t){if(this.selectedBatch=null,this.batchList=[],!this.selectedParty){var n=this.qualityList.find((function(t){return t.id===e.selectedQuality}));this.selectedParty=n.partyId}this.qualityList.forEach((function(t){var n=t.id?t.id:t.qualityEntryId;n==e.selectedQuality&&t.partyId})),this.getAllBatchByQuality()}else this.selectedBatch=null,this.batchList=[],this.grList=[],this.getAllQuality()}},{key:"batchSelected",value:function(t){var e=this;this.selectedBatch=t,this.grList=[],this.stockBatchService.getBatchGRById(this.selectedBatch).pipe(Object(h.a)(this.destroy$)).subscribe((function(t){t.success&&(e.grList=t.data)}))}},{key:"geSelected",value:function(t){this.selectedGRListTemp=[],this.selectedGRListTemp=t.selected}},{key:"onSelection",value:function(){var t=this;this.selectedGRListTemp.forEach((function(e){t.selectedGRList.filter((function(t){return t.id===e.id})).length||t.selectedGRList.push(Object(p.cloneDeep)(e))})),this.selectedGRList=Object(p.sortBy)(this.selectedGRList,"batchId"),this.disableFields=!!this.selectedGRList.length}},{key:"removeFromSelectedGr",value:function(t){this.selectedGRList=this.selectedGRList.filter((function(e){return e.id!==t})),this.selectedGRListTemp=this.selectedGRListTemp.filter((function(e){return e.id!==t})),this.disableFields=!!this.selectedGRList.length}},{key:"saveReturnLot",value:function(t,e){var n=this;if(this.formSubmitted=!0,this.selectedGRList.length&&this.broker&&this.tempoNo){if(e.valid){this.loading=!0;var i={broker:this.broker,tempoNo:this.tempoNo,createdBy:this.commonService.getUser().userId,batchDataList:[],diffDeliveryParty:this.isDiffParty,diffPartyName:this.diffPartyName,diffPartyAddress:this.diffPartyAddr,diffGst:this.diffPartyGst};i.batchDataList=this.selectedGRList.map((function(t){return{id:t.id,controlId:t.controlId}})),this.stockBatchService.returnLotPost(i).pipe(Object(h.a)(this.destroy$)).subscribe((function(i){i.success?(n.toastr.success(i.msg),n.resetForm(e),t&&n.route.navigate(["pages/stock-batch/return-lot/print"],{queryParams:{chlNo:i.data}})):n.toastr.error(i.msg),n.loading=!1}),(function(t){n.loading=!1}))}}else this.toastr.error("Select atleast one GR-data to return")}},{key:"resetForm",value:function(t){this.selectedGRList=[],this.selectedGRListTemp=[],this.batchList=[],this.selectedBatch=null,this.selectedParty=null,this.selectedQuality=null,this.grList=[],this.disableFields=!1,this.formSubmitted=!1,this.broker=null,this.tempoNo=null,this.diffPartyGst=null,this.diffPartyAddr=null,this.diffPartyName=null,this.isDiffParty=null,t.reset()}}]),t}()).\u0275fac=function(t){return new(t||me)(k.dc(R.b),k.dc(M.a),k.dc(te.a),k.dc(j.a),k.dc(l.c),k.dc(Yt.a),k.dc(y.a),k.dc(P.a))},me.\u0275cmp=k.Xb({type:me,selectors:[["ngx-lot-return"]],decls:104,vars:31,consts:[[3,"show"],[1,"row"],[1,"col-lg-12"],[1,"nb-style"],[1,"nb-header"],[1,"col-md-5","col-6","display-flex-start","max-width-device"],["placeholder","Select",1,"btn","btn-md",3,"change"],["value","view"],["value","add"],["value","view table"],["value","job card"],["value","pending"],[1,"col-md-7","col-6"],[1,"nb-text","txt-ov-elips"],["myForm","ngForm"],[1,"col-md-6"],[1,"form-group","mb-1"],["name","partyId","appendTo","body","placeholder","Select Party",3,"disabled","ngModel","ngModelChange","change"],["partyId1","ngModel"],["disabled","true"],[1,"col-md-6","col-6"],[1,"text-left","txt-ov-elips"],[1,"text-right","txt-ov-elips"],[3,"value",4,"ngFor","ngForOf"],[1,"form-group"],["name","qualityId","appendTo","body","placeholder","Select Quality",3,"disabled","ngModel","ngModelChange","change"],["qualityId1","ngModel"],[1,"col-md-4"],[1,"required"],["name","broker","required","","placeholder","Enter delivery person",1,"form-control",3,"ngModel","ngClass","ngModelChange"],["broker1","ngModel"],["class","input-required",4,"ngIf"],["name","tempo","required","","placeholder","Enter tempo no",1,"form-control",3,"ngModel","ngClass","ngModelChange"],["tempo","ngModel"],[1,"col-md-4",2,"margin","auto"],["name","isDiffParty",1,"user-all-check",3,"ngModel","ngModelChange"],["class","col-md-4",4,"ngIf"],[1,"col-md-12"],[1,"batch-list-3line"],["type","button","style","z-index: 999;","nbButton","","size","small","class","p-badge-design",3,"ngClass","disabled","value","click",4,"ngFor","ngForOf"],["id","fmtr-table",1,"col-md-3","pb-2",2,"border","1px solid #c3c3c3"],[1,"material","common-table","datatable-auto-height","fm-table-body-height",2,"height","200px",3,"rows","scrollbarV","selectionType","selected","select"],["name","Meter","prop","mtr",3,"headerCheckboxable","checkboxable"],["name","Weight","prop","wt"],[1,"col-md-3","center"],[1,""],["type","button",1,"btn","btn-primary","btn-sm","btn-design-save","mob-stock","button-base","ripple",3,"click"],["id","fmtr-table",1,"col-md-6","pb-2",2,"border","1px solid #c3c3c3"],[1,"material","common-table","datatable-auto-height","fm-table-body-height",2,"height","200px",3,"rows","scrollbarV"],["name","Action","sortable","false",3,"maxWidth"],["ngx-datatable-cell-template",""],["name","Batch Id","prop","batchId"],["name","Meter","prop","mtr"],[1,"row","pt-2"],[1,"col-md-12","text-btn-right"],[3,"value"],[1,"input-required"],["name","diffPartyName","required","","placeholder","Party Name",1,"form-control",3,"ngModel","ngClass","ngModelChange"],["diffPartyName1","ngModel"],["name","diffPartyAddr","required","","placeholder","Party Name",1,"form-control",3,"ngModel","ngClass","ngModelChange"],["diffPartyAddr1","ngModel"],["name","diffPartyGst","placeholder","Gst",1,"form-control",3,"pattern","ngModel","ngClass","ngModelChange"],["diffPartyGst1","ngModel"],["type","button","nbButton","","size","small",1,"p-badge-design",2,"z-index","999",3,"ngClass","disabled","value","click"],["icon","trash","status","danger",3,"options","click"]],template:function(t,e){if(1&t){var n=k.kc();k.ec(0,"ngx-loading",0),k.jc(1,"div",1),k.jc(2,"div",2),k.jc(3,"nb-card",3),k.jc(4,"nb-card-header",4),k.jc(5,"div",1),k.jc(6,"div",5),k.jc(7,"ng-select",6),k.uc("change",(function(t){return e.selectionChanges(t)})),k.jc(8,"ng-option",7),k.jd(9,"View Table"),k.ic(),k.jc(10,"ng-option",8),k.jd(11,"Add Stock-batch"),k.ic(),k.jc(12,"ng-option",9),k.jd(13,"View Stock-batch"),k.ic(),k.jc(14,"ng-option",10),k.jd(15,"Job Card"),k.ic(),k.jc(16,"ng-option",11),k.jd(17,"Pending batches"),k.ic(),k.ic(),k.ic(),k.jc(18,"div",12),k.jc(19,"h2",13),k.jd(20,"Lot Return"),k.ic(),k.ic(),k.ic(),k.ic(),k.jc(21,"nb-card-body"),k.jc(22,"form",null,14),k.jc(24,"div",1),k.jc(25,"div",15),k.jc(26,"div",16),k.jc(27,"label"),k.jd(28,"Party"),k.ic(),k.jc(29,"ng-select",17,18),k.uc("ngModelChange",(function(t){return e.selectedParty=t}))("change",(function(t){return e.enableQuality(t)})),k.jc(31,"ng-option",19),k.jc(32,"div",1),k.jc(33,"div",20),k.jc(34,"div",21),k.jd(35,"Party Name "),k.ic(),k.ic(),k.jc(36,"div",20),k.jc(37,"div",22),k.jd(38," Party Code"),k.ic(),k.ic(),k.ic(),k.ic(),k.hd(39,ee,8,3,"ng-option",23),k.ic(),k.ic(),k.ic(),k.jc(40,"div",15),k.jc(41,"div",24),k.jc(42,"label"),k.jd(43,"Quality"),k.ic(),k.jc(44,"ng-select",25,26),k.uc("ngModelChange",(function(t){return e.selectedQuality=t}))("change",(function(t){return e.qualitySelected(t)})),k.hd(46,ne,2,2,"ng-option",23),k.ic(),k.ic(),k.ic(),k.ic(),k.jc(47,"div",1),k.jc(48,"div",27),k.jc(49,"div",24),k.jc(50,"label",28),k.jd(51,"Delivery Person"),k.ic(),k.jc(52,"input",29,30),k.uc("ngModelChange",(function(t){return e.broker=t})),k.ic(),k.hd(54,ie,3,0,"div",31),k.ic(),k.ic(),k.jc(55,"div",27),k.jc(56,"div",24),k.jc(57,"label",28),k.jd(58,"Tempo No"),k.ic(),k.jc(59,"input",32,33),k.uc("ngModelChange",(function(t){return e.tempoNo=t})),k.ic(),k.hd(61,ce,3,0,"div",31),k.ic(),k.ic(),k.jc(62,"div",34),k.jc(63,"div",24),k.jc(64,"nb-checkbox",35),k.uc("ngModelChange",(function(t){return e.isDiffParty=t})),k.jd(65," Is Delivery-Party Different "),k.ic(),k.ic(),k.ic(),k.ic(),k.jc(66,"div",1),k.hd(67,re,7,5,"div",36),k.hd(68,se,7,5,"div",36),k.hd(69,he,7,6,"div",36),k.ic(),k.jc(70,"div",37),k.jc(71,"div",16),k.jc(72,"div",1),k.jc(73,"div",37),k.jc(74,"div",38),k.hd(75,ge,2,8,"button",39),k.ic(),k.ic(),k.ic(),k.ic(),k.ic(),k.jc(76,"div",1),k.jc(77,"div",40),k.hc(78),k.jc(79,"h5"),k.jd(80,"GR List"),k.ic(),k.jc(81,"ngx-datatable",41),k.uc("select",(function(t){return e.geSelected(t)})),k.ec(82,"ngx-datatable-column",42),k.ec(83,"ngx-datatable-column",43),k.ic(),k.gc(),k.ic(),k.jc(84,"div",44),k.jc(85,"div",45),k.jc(86,"button",46),k.uc("click",(function(){return e.onSelection()})),k.jd(87,"Transfer ->"),k.ic(),k.ic(),k.ic(),k.jc(88,"div",47),k.hc(89),k.jc(90,"h5",28),k.jd(91,"Selected GR List"),k.ic(),k.jc(92,"ngx-datatable",48),k.jc(93,"ngx-datatable-column",49),k.hd(94,fe,1,4,"ng-template",50),k.ic(),k.ec(95,"ngx-datatable-column",51),k.ec(96,"ngx-datatable-column",52),k.ec(97,"ngx-datatable-column",43),k.ic(),k.gc(),k.ic(),k.ic(),k.jc(98,"div",53),k.jc(99,"div",54),k.jc(100,"button",46),k.uc("click",(function(){k.Xc(n);var t=k.Uc(23);return e.saveReturnLot(!1,t)})),k.jd(101,"SAVE"),k.ic(),k.jc(102,"button",46),k.uc("click",(function(){k.Xc(n);var t=k.Uc(23);return e.saveReturnLot(!0,t)})),k.jd(103,"SAVE AND PRINT"),k.ic(),k.ic(),k.ic(),k.ic(),k.ic(),k.ic(),k.ic(),k.ic()}if(2&t){var i=k.Uc(53),c=k.Uc(60);k.Hc("show",e.loading),k.Pb(29),k.Hc("disabled",e.disableFields)("ngModel",e.selectedParty),k.Pb(10),k.Hc("ngForOf",e.partyList),k.Pb(5),k.Hc("disabled",e.disableFields)("ngModel",e.selectedQuality),k.Pb(2),k.Hc("ngForOf",e.qualityList),k.Pb(6),k.Hc("ngModel",e.broker)("ngClass",k.Nc(27,oe,e.formSubmitted&&i.invalid||i.invalid&&i.touched)),k.Pb(2),k.Hc("ngIf",e.formSubmitted&&i.invalid||i.invalid&&i.touched),k.Pb(5),k.Hc("ngModel",e.tempoNo)("ngClass",k.Nc(29,oe,e.formSubmitted&&c.invalid||c.invalid&&c.touched)),k.Pb(2),k.Hc("ngIf",e.formSubmitted&&c.invalid||c.invalid&&c.touched),k.Pb(3),k.Hc("ngModel",e.isDiffParty),k.Pb(3),k.Hc("ngIf",e.isDiffParty),k.Pb(1),k.Hc("ngIf",e.isDiffParty),k.Pb(1),k.Hc("ngIf",e.isDiffParty),k.Pb(6),k.Hc("ngForOf",e.batchList),k.Pb(6),k.Hc("rows",e.grList)("scrollbarV",!0)("selectionType","checkbox")("selected",e.selectedGRListTemp),k.Pb(1),k.Hc("headerCheckboxable",!0)("checkboxable",!0),k.Pb(10),k.Hc("rows",e.selectedGRList)("scrollbarV",!0),k.Pb(1),k.Hc("maxWidth",100)}},directives:[H.a,O.u,O.x,q.a,q.c,O.t,L.x,L.m,L.n,L.l,L.o,r.m,L.a,L.t,r.l,r.n,O.A,F.e,F.b,F.a,L.r,O.q,O.I],styles:[".active-button[_ngcontent-%COMP%]{background-color:#274fc4!important}.inactive-button[_ngcontent-%COMP%]{background-color:#5e5b5e!important}.disabled[_ngcontent-%COMP%]{background-color:#dad6da!important}.center[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}"]}),me);function Pe(t,e){if(1&t&&(k.jc(0,"div",12),k.jc(1,"p",13),k.jd(2,"Delivery Party :"),k.ic(),k.jc(3,"p",13),k.jd(4,"To. \xa0\xa0"),k.jc(5,"b"),k.jd(6),k.ic(),k.ic(),k.jc(7,"p",13),k.jd(8),k.ic(),k.jc(9,"p",13),k.jd(10),k.ic(),k.ic()),2&t){var n=k.yc(2);k.Pb(6),k.kd(n.lotReturnData.partyName),k.Pb(2),k.kd(n.lotReturnData.address),k.Pb(2),k.ld("GST NO.:",n.lotReturnData.gst,"")}}function ye(t,e){if(1&t&&(k.jc(0,"div",12),k.jc(1,"p",13),k.jd(2,"Delivery Party :"),k.ic(),k.jc(3,"p",13),k.jd(4,"To. \xa0\xa0"),k.jc(5,"b"),k.jd(6),k.ic(),k.ic(),k.jc(7,"p",13),k.jd(8),k.ic(),k.jc(9,"p",13),k.jd(10),k.ic(),k.ic()),2&t){var n=k.yc(2);k.Pb(6),k.kd(n.lotReturnData.diffPartyName),k.Pb(2),k.kd(n.lotReturnData.diffPartyAddress),k.Pb(2),k.ld("GST NO.:",n.lotReturnData.diffGst,"")}}function Me(t,e){if(1&t&&(k.hc(0),k.jc(1,"div",15),k.jd(2),k.ic(),k.jc(3,"div",15),k.jd(4),k.ic(),k.jc(5,"div",15),k.jd(6),k.zc(7,"number"),k.ic(),k.gc()),2&t){var n=e.$implicit;k.Pb(2),k.kd(n.idx),k.Pb(2),k.kd(n.batchId),k.Pb(2),k.kd(k.Bc(7,3,n.mtr,"1.2-2"))}}function je(t,e){if(1&t&&(k.hc(0),k.jc(1,"div",15),k.jd(2),k.ic(),k.jc(3,"div",15),k.jd(4),k.ic(),k.jc(5,"div",15),k.jd(6),k.zc(7,"number"),k.ic(),k.gc()),2&t){var n=e.$implicit;k.Pb(2),k.kd(n.idx),k.Pb(2),k.kd(n.batchId),k.Pb(2),k.kd(k.Bc(7,3,n.mtr,"1.2-2"))}}function Ce(t,e){if(1&t&&(k.hc(0),k.jc(1,"div",15),k.jd(2),k.ic(),k.jc(3,"div",15),k.jd(4),k.ic(),k.jc(5,"div",15),k.jd(6),k.zc(7,"number"),k.ic(),k.gc()),2&t){var n=e.$implicit;k.Pb(2),k.kd(n.idx),k.Pb(2),k.kd(n.batchId),k.Pb(2),k.kd(k.Bc(7,3,n.mtr,"1.2-2"))}}function ke(t,e){if(1&t&&(k.hc(0),k.jc(1,"div",15),k.jd(2),k.ic(),k.jc(3,"div",15),k.jd(4),k.ic(),k.jc(5,"div",15),k.jd(6),k.zc(7,"number"),k.ic(),k.gc()),2&t){var n=e.$implicit;k.Pb(2),k.kd(n.idx),k.Pb(2),k.kd(n.batchId),k.Pb(2),k.kd(k.Bc(7,3,n.mtr,"1.2-2"))}}function Oe(t,e){if(1&t&&(k.hc(0),k.jc(1,"div",1),k.jc(2,"table",2),k.jc(3,"tr",3),k.jc(4,"th"),k.jc(5,"div",4),k.jc(6,"p",5),k.jc(7,"b"),k.jd(8,"GLORY DYEING MILLS PVT. LTD."),k.ic(),k.ic(),k.ic(),k.jc(9,"div",6),k.jc(10,"p",7),k.jd(11," FORMALLY KNOWN AS : MUKESH PROCESSORS PVT. LTD. "),k.ic(),k.ic(),k.jc(12,"div",6),k.jc(13,"p",8),k.jd(14,"A-31, G.E.T.P, (Kala Ghoda), Palsana, Surat E-Mail : dyeing@gloryfab.com "),k.ic(),k.ic(),k.jc(15,"div",6),k.jc(16,"p",8),k.jd(17,"GSTIN :- 24AAFCM5028A1Z1 Place Of Supply : Surat"),k.ic(),k.ic(),k.ic(),k.ic(),k.jc(18,"tr",3),k.jc(19,"th",9),k.jc(20,"div",10),k.jc(21,"p",11),k.jc(22,"b"),k.jd(23,"!! GOODS RETURN CHALLAN !!"),k.ic(),k.ic(),k.ic(),k.ic(),k.ic(),k.jc(24,"tr",3),k.jc(25,"th"),k.jc(26,"div",6),k.jc(27,"div",12),k.jc(28,"p",13),k.jd(29,"M/s. Party :"),k.ic(),k.jc(30,"p",13),k.jd(31,"To. \xa0\xa0"),k.jc(32,"b"),k.jd(33),k.ic(),k.ic(),k.jc(34,"p",13),k.jd(35),k.ic(),k.jc(36,"p",13),k.jd(37),k.ic(),k.ic(),k.hd(38,Pe,11,3,"div",14),k.hd(39,ye,11,3,"div",14),k.jc(40,"div",15),k.jc(41,"p",13),k.jd(42,"Challan No \xa0: "),k.jc(43,"b",16),k.jd(44),k.ic(),k.ic(),k.jc(45,"p",13),k.jd(46),k.zc(47,"date"),k.ic(),k.jc(48,"p",13),k.jd(49,"Delivery Person: "),k.jc(50,"b"),k.jd(51),k.ic(),k.ic(),k.jc(52,"p",13),k.jd(53,"Tempo No \xa0\xa0: "),k.jc(54,"b"),k.jd(55),k.ic(),k.ic(),k.jc(56,"p",13),k.jd(57,"Quality \xa0: "),k.jc(58,"b"),k.jd(59),k.ic(),k.ic(),k.jc(60,"p",13),k.jd(61,"Party Chl No\xa0: "),k.jc(62,"b"),k.jd(63),k.ic(),k.ic(),k.ic(),k.ic(),k.ic(),k.ic(),k.jc(64,"tr",3),k.jc(65,"td"),k.jc(66,"div",6),k.jc(67,"div",17),k.jc(68,"div",15),k.jd(69,"Sr."),k.ic(),k.jc(70,"div",15),k.jd(71,"BatchId."),k.ic(),k.jc(72,"div",15),k.jd(73,"Meters."),k.ic(),k.ic(),k.jc(74,"div",17),k.jc(75,"div",15),k.jd(76,"Sr."),k.ic(),k.jc(77,"div",15),k.jd(78,"BatchId."),k.ic(),k.jc(79,"div",15),k.jd(80,"Meters."),k.ic(),k.ic(),k.jc(81,"div",17),k.jc(82,"div",15),k.jd(83,"Sr."),k.ic(),k.jc(84,"div",15),k.jd(85,"BatchId."),k.ic(),k.jc(86,"div",15),k.jd(87,"Meters."),k.ic(),k.ic(),k.jc(88,"div",18),k.jc(89,"div",15),k.jd(90,"Sr."),k.ic(),k.jc(91,"div",15),k.jd(92,"BatchId."),k.ic(),k.jc(93,"div",15),k.jd(94,"Meters."),k.ic(),k.ic(),k.ic(),k.ic(),k.ic(),k.jc(95,"tr",3),k.jc(96,"td"),k.jc(97,"div",6),k.jc(98,"div",17),k.hd(99,Me,8,6,"ng-container",19),k.ic(),k.jc(100,"div",17),k.hd(101,je,8,6,"ng-container",19),k.ic(),k.jc(102,"div",17),k.hd(103,Ce,8,6,"ng-container",19),k.ic(),k.jc(104,"div",18),k.hd(105,ke,8,6,"ng-container",19),k.ic(),k.ic(),k.ic(),k.ic(),k.jc(106,"tr",3),k.jc(107,"td"),k.jc(108,"div",6),k.jc(109,"div",17),k.jc(110,"div",20),k.jc(111,"b"),k.jd(112),k.zc(113,"number"),k.ic(),k.ic(),k.jc(114,"div",20),k.jc(115,"b"),k.jd(116),k.zc(117,"number"),k.ic(),k.ic(),k.ic(),k.jc(118,"div",17),k.jc(119,"div",20),k.jc(120,"b"),k.jd(121),k.zc(122,"number"),k.ic(),k.ic(),k.jc(123,"div",20),k.jc(124,"b"),k.jd(125),k.zc(126,"number"),k.ic(),k.ic(),k.ic(),k.jc(127,"div",17),k.jc(128,"div",20),k.jc(129,"b"),k.jd(130),k.zc(131,"number"),k.ic(),k.ic(),k.jc(132,"div",20),k.jc(133,"b"),k.jd(134),k.zc(135,"number"),k.ic(),k.ic(),k.ic(),k.jc(136,"div",18),k.jc(137,"div",20),k.jc(138,"b"),k.jd(139),k.zc(140,"number"),k.ic(),k.ic(),k.jc(141,"div",20),k.jc(142,"b"),k.jd(143),k.zc(144,"number"),k.ic(),k.ic(),k.ic(),k.ic(),k.ic(),k.ic(),k.jc(145,"tr",3),k.jc(146,"td"),k.jc(147,"div",21),k.jc(148,"div",22),k.jc(149,"div",23),k.jc(150,"p",16),k.jc(151,"b"),k.jd(152),k.zc(153,"number"),k.ic(),k.ic(),k.ic(),k.jc(154,"div",24),k.jc(155,"p",16),k.jc(156,"b"),k.jd(157,"GLORY DYEING MILLS PVT. LTD"),k.ic(),k.ic(),k.ic(),k.ic(),k.jc(158,"div",6),k.jc(159,"div",23),k.jc(160,"p",16),k.jd(161,"Prepared & Checked By"),k.ic(),k.ic(),k.jc(162,"div",24),k.jc(163,"p",16),k.jd(164,"Authorised Signatory"),k.ic(),k.ic(),k.ic(),k.ic(),k.ic(),k.ic(),k.ic(),k.ic(),k.gc()),2&t){var n=k.yc();k.Pb(33),k.kd(n.lotReturnData.partyName),k.Pb(2),k.kd(n.lotReturnData.address),k.Pb(2),k.ld("GST NO.:",n.lotReturnData.gst,""),k.Pb(1),k.Hc("ngIf",!n.lotReturnData.diffDeliveryParty),k.Pb(1),k.Hc("ngIf",n.lotReturnData.diffDeliveryParty),k.Pb(5),k.kd(n.lotReturnData.chlNo),k.Pb(2),k.ld("Challan Date: ",k.Bc(47,25,n.lotReturnData.challanDate,"dd/MM/yyyy"),""),k.Pb(5),k.kd(n.lotReturnData.broker),k.Pb(4),k.kd(n.lotReturnData.tempoNo),k.Pb(4),k.kd(n.lotReturnData.qualityId),k.Pb(4),k.kd(n.lotReturnData.pchallanNo),k.Pb(36),k.Hc("ngForOf",n.list1),k.Pb(2),k.Hc("ngForOf",n.list2),k.Pb(2),k.Hc("ngForOf",n.list3),k.Pb(2),k.Hc("ngForOf",n.list4),k.Pb(7),k.kd(k.Bc(113,28,n.totalCount.list1,"1.2-2")),k.Pb(4),k.kd(k.Bc(117,31,n.totalMtr.list1,"1.2-2")),k.Pb(5),k.kd(k.Bc(122,34,n.totalCount.list2,"1.2-2")),k.Pb(4),k.kd(k.Bc(126,37,n.totalMtr.list2,"1.2-2")),k.Pb(5),k.kd(k.Bc(131,40,n.totalCount.list3,"1.2-2")),k.Pb(4),k.kd(k.Bc(135,43,n.totalMtr.list3,"1.2-2")),k.Pb(5),k.kd(k.Bc(140,46,n.totalCount.list4,"1.2-2")),k.Pb(4),k.kd(k.Bc(144,49,n.totalMtr.list4,"1.2-2")),k.Pb(9),k.md("Total Taka: ",n.totalCount.total,"\xa0\xa0Total Meters: ",k.Bc(153,52,n.totalMtr.total,"1.2-2"),"")}}var _e,xe=((_e=function(){function t(e,n,i,a){c(this,t),this._route=e,this.stockService=n,this.router=i,this.toastr=a,this.list1=[],this.list2=[],this.list3=[],this.list4=[],this.totalMtr={list1:0,list2:0,list3:0,list4:0,total:0},this.totalCount={total:0,list1:0,list2:0,list3:0,list4:0},this.destroy$=new u.a}return o(t,[{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}},{key:"ngOnInit",value:function(){var t=this;this.chlNo=Number(this._route.snapshot.queryParamMap.get("chlNo")),this.chlNo&&this.stockService.returnLotgetById(this.chlNo).pipe(Object(h.a)(this.destroy$)).subscribe((function(e){if(e.success){t.lotReturnData=e.data,t.totalCount.total=t.lotReturnData.batchReturnList.length;for(var n=1;n<=48;n++)n<=12&&(t.list1.push(t.lotReturnData.batchReturnList[n-1]?t.lotReturnData.batchReturnList[n-1]:{mtr:""}),t.list1[t.list1.length-1].idx=t.lotReturnData.batchReturnList[n-1]?n:""),n<=24&&n>=13&&(t.list2.push(t.lotReturnData.batchReturnList[n-1]?t.lotReturnData.batchReturnList[n-1]:{mtr:""}),t.list2[t.list2.length-1].idx=t.lotReturnData.batchReturnList[n-1]?n:""),n<=36&&n>=25&&(t.list3.push(t.lotReturnData.batchReturnList[n-1]?t.lotReturnData.batchReturnList[n-1]:{mtr:""}),t.list3[t.list3.length-1].idx=t.lotReturnData.batchReturnList[n-1]?n:""),n<=48&&n>=37&&(t.list4.push(t.lotReturnData.batchReturnList[n-1]?t.lotReturnData.batchReturnList[n-1]:{mtr:""}),t.list4[t.list4.length-1].idx=t.lotReturnData.batchReturnList[n-1]?n:"");t.setTotal(),t.printNow()}else t.toastr.error(e.msg),t.router.navigate(["pages/stock-batch/return-lot/view"])}),(function(e){t.router.navigate(["pages/stock-batch/return-lot/view"])}))}},{key:"setTotal",value:function(){var t=this;this.totalMtr.total=0;var e=0;this.list1.forEach((function(n){n.mtr&&(t.totalMtr.total+=n.mtr,e+=n.mtr,t.totalCount.list1++)})),this.totalMtr.list1=e,e=0,this.list2.forEach((function(n){n.mtr&&(t.totalMtr.total+=n.mtr,e+=n.mtr,t.totalCount.list2++)})),this.totalMtr.list2=e,e=0,this.list3.forEach((function(n){n.mtr&&(t.totalMtr.total+=n.mtr,e+=n.mtr,t.totalCount.list3++)})),this.totalMtr.list3=e,e=0,this.list4.forEach((function(n){n.mtr&&(t.totalMtr.total+=n.mtr,e+=n.mtr,t.totalCount.list4++)})),this.totalMtr.list4=e}},{key:"printNow",value:function(){var t=this,e=new C.PrintDocument({title:""});e.append('<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/paper-css/0.3.0/paper.css">'),e.append('<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">'),e.append('<link href="https://cdn.grapecity.com/wijmo/5.latest/styles/wijmo.min.css" rel="stylesheet">');var n=setInterval((function(){var t=document.getElementById("printpdf");null!=t&&(e.append(t),clearInterval(n))}),10);setTimeout((function(){e.print(),t.router.navigate(["pages/stock-batch/return-lot/view"])}),1e3)}}]),t}()).\u0275fac=function(t){return new(t||_e)(k.dc(l.a),k.dc(M.a),k.dc(l.c),k.dc(R.b))},_e.\u0275cmp=k.Xb({type:_e,selectors:[["ngx-print-lot-return"]],decls:1,vars:1,consts:[[4,"ngIf"],["id","printpdf",1,"container",2,"padding-right","20px"],[1,"margin-print",2,"width","100%","border","2px solid black"],[1,"border-dark"],[1,"row","display-flex"],[1,"col-sm-12","text-center","font-30"],[1,"row"],[1,"text-center","col-sm-12","font-10","formally"],[1,"text-center","col-sm-12","font-15"],[1,"display-flex"],[1,"row",2,"width","100%"],[1,"col-sm-12","text-center","font-25"],[1,"col-sm-4",2,"border-right","1px solid rgb(143, 143, 143)"],[1,"text-left","col-sm-12","font-15"],["class","col-sm-4","style","border-right: 1px solid rgb(143, 143, 143);",4,"ngIf"],[1,"col-sm-4"],[1,"font-20"],[1,"col-sm-3",2,"border-right","1px solid rgb(143, 143, 143)"],[1,"col-sm-3"],[4,"ngFor","ngForOf"],[1,"col-sm-6"],[1,"container"],[1,"row",2,"margin-bottom","60px"],[1,"col-sm-6","text-left"],[1,"col-sm-6","text-right"]],template:function(t,e){1&t&&k.hd(0,Oe,165,55,"ng-container",0),2&t&&k.Hc("ngIf",e.lotReturnData&&e.lotReturnData.chlNo)},directives:[r.n,r.m],pipes:[r.e,r.f],styles:["@media print{body[_ngcontent-%COMP%]{margin:10px;box-shadow:0}.font-20[_ngcontent-%COMP%]{font-size:20px}.font-18[_ngcontent-%COMP%]{font-size:18px}.font-10[_ngcontent-%COMP%]{font-size:10px}.font-12[_ngcontent-%COMP%]{font-size:12px}.font-14[_ngcontent-%COMP%]{font-size:14px}.font-30[_ngcontent-%COMP%]{font-size:30px}.font-15[_ngcontent-%COMP%]{font-size:15px}.border[_ngcontent-%COMP%], .border-dark-left[_ngcontent-%COMP%]{border-left:1px solid #8f8f8f!important}.border[_ngcontent-%COMP%], .border-dark-right[_ngcontent-%COMP%]{border-right:1px solid #8f8f8f!important}.border[_ngcontent-%COMP%], .border-dark-top[_ngcontent-%COMP%]{border-top:1px solid #8f8f8f!important}.border[_ngcontent-%COMP%], .border-dark-bottom[_ngcontent-%COMP%]{border-bottom:1px solid #8f8f8f!important}.margin-print[_ngcontent-%COMP%]{margin:.05cm}.display-flex[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:flex-end}.col-sm-1[_ngcontent-%COMP%], .col-sm-2[_ngcontent-%COMP%], .col-sm-3[_ngcontent-%COMP%], .col-sm-4[_ngcontent-%COMP%], .col-sm-5[_ngcontent-%COMP%], .col-sm-6[_ngcontent-%COMP%], .col-sm-7[_ngcontent-%COMP%], .col-sm-8[_ngcontent-%COMP%], .col-sm-9[_ngcontent-%COMP%], .col-sm-10[_ngcontent-%COMP%], .col-sm-11[_ngcontent-%COMP%], .col-sm-12[_ngcontent-%COMP%]{float:left}.col-sm-12[_ngcontent-%COMP%]{width:100%}.col-sm-11[_ngcontent-%COMP%]{width:91.66666666666666%}.col-sm-10[_ngcontent-%COMP%]{width:83.33333333333334%}.col-sm-9[_ngcontent-%COMP%]{width:75%}.col-sm-8[_ngcontent-%COMP%]{width:66.66666666666666%}.col-sm-7[_ngcontent-%COMP%]{width:58.333333333333336%}.col-sm-6[_ngcontent-%COMP%]{width:50%}.col-sm-5[_ngcontent-%COMP%]{width:41.66666666666667%}.col-sm-4[_ngcontent-%COMP%]{width:33.33333333333333%}.col-sm-3[_ngcontent-%COMP%]{width:25%}.col-sm-2[_ngcontent-%COMP%]{width:16.666666666666664%}.col-sm-1[_ngcontent-%COMP%]{width:8.333333333333332%}.col-md-3[_ngcontent-%COMP%]{width:25%}.formally[_ngcontent-%COMP%]{margin-top:-9px}.lot-border[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border:2px solid #8f8f8f}.footer-border[_ngcontent-%COMP%]{border:1px solid #8f8f8f}.border-top-none[_ngcontent-%COMP%], .footer-bottom[_ngcontent-%COMP%]{padding:5px 15px}.border-top[_ngcontent-%COMP%]{border-top:1px solid;padding:15px}.terms-cond[_ngcontent-%COMP%]{list-style:none}.terms-cond[_ngcontent-%COMP%], .terms-cond[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-left:0!important;padding-left:0!important}.footer-bottom[_ngcontent-%COMP%]{padding-left:15px;border:1px solid #8f8f8f}.border-top-none[_ngcontent-%COMP%]{border:1px solid #8f8f8f;border-top:none}.display-flex-end[_ngcontent-%COMP%]{justify-content:center;align-items:flex-end}.height-100[_ngcontent-%COMP%]{height:100%}.company-ltd[_ngcontent-%COMP%]{margin-top:30px}#invoice-table[_ngcontent-%COMP%]{border:1px solid #8f8f8f;border-spacing:0;clear:both;margin:0;height:200mm;width:100%}.lot-border[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding-top:3px;padding-bottom:3px;font-size:15px}#invoice-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border-left:1px solid #8f8f8f}#invoice-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child, td[_ngcontent-%COMP%]:first-child{border-left:none}#invoice-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-bottom:1px solid #8f8f8f}#invoice-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle;font-size:6pt}th[_ngcontent-%COMP%]{font-weight:400}.amount[_ngcontent-%COMP%], .spacing-low[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{text-align:center}.auth-font[_ngcontent-%COMP%], .font-big[_ngcontent-%COMP%], .font-big[_ngcontent-%COMP%]   .terms-cond[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .font-big[_ngcontent-%COMP%]   b[_ngcontent-%COMP%], .invoice_line[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:15px}.company-ltd[_ngcontent-%COMP%]{font-size:18px}.amount[_ngcontent-%COMP%], .invoice_line[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .site[_ngcontent-%COMP%]{font-size:40px;font-weight:600}.invoice_line[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .invoice_line[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:1mm;text-align:center}.lot-border[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 0;font-size:40px}.card-block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:2px}.card-block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:first-child{margin-bottom:1px}.border-margin[_ngcontent-%COMP%]{padding:5px 0 15px}.border-margin-d-t[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:5px}.top-print-head[_ngcontent-%COMP%]{text-align:right;display:inline-block;font-size:15px;padding-top:0;margin-top:0}.spacing-low[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#90ee90!important}.spacing-low[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .spacing-low[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .spacing-low[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-left:2px solid #8f8f8f!important;border-right:2px solid #8f8f8f!important}.spacing-low[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .spacing-low[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child, .spacing-low[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-top:2px solid #8f8f8f!important;border-bottom:2px solid #8f8f8f!important}.spacing-low[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .spacing-low[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:1px .75rem!important}.border-width[_ngcontent-%COMP%], .spacing-low[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{border-width:2px!important}.lot-border[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], table.lot-border[_ngcontent-%COMP%], table.spacing-low[_ngcontent-%COMP%]{margin-bottom:1px!important}.border[_ngcontent-%COMP%], .border-dark[_ngcontent-%COMP%], .border-top[_ngcontent-%COMP%]{border:1px solid #8f8f8f!important}.border-bootom-none[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child, .border-zero[_ngcontent-%COMP%]{border:0!important}.border-bootom-none[_ngcontent-%COMP%]{border-bottom:2px solid #8f8f8f!important}.display-between[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.spacing-low[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;bottom:0}tfoot.spacing-low[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #8f8f8f!important}tfoot.spacing-low[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child{text-align:left!important}.print-invoice-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{height:178mm;overflow:hidden;overflow-x:hidden;display:block;width:100%}.print-invoice-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%], .print-invoice-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}.print-invoice-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%], .print-invoice-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%}.print-invoice-table[_ngcontent-%COMP%], .print-invoice-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .print-invoice-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:2px solid #8f8f8f!important}.print-invoice-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-bottom:2px solid #8f8f8f!important;border-top:0 solid #8f8f8f!important}.print-invoice-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-left:0!important;border-right:0!important}.width-63[_ngcontent-%COMP%]{width:63%}.width-65[_ngcontent-%COMP%]{width:65%}.width-60[_ngcontent-%COMP%]{width:60%}.width-37[_ngcontent-%COMP%]{width:37%}.width-8[_ngcontent-%COMP%]{width:8%}.width-10[_ngcontent-%COMP%]{width:10%}.width-13[_ngcontent-%COMP%]{width:13%}.width-30[_ngcontent-%COMP%]{width:30%}.width-33[_ngcontent-%COMP%]{width:33%}.width-4px[_ngcontent-%COMP%]{width:4px}.width-4[_ngcontent-%COMP%]{width:4%}.width-15[_ngcontent-%COMP%]{width:15%}.width-9[_ngcontent-%COMP%]{width:9%}.duplicate-border[_ngcontent-%COMP%]{border-top-width:3px!important;border-left-width:3px!important;border-right-width:3px!important}.pd-0[_ngcontent-%COMP%]{padding:0}.mr-0[_ngcontent-%COMP%]{margin:0}.display-flex-end[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center}.jus-con-center[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.print-logo-style[_ngcontent-%COMP%]{width:380px;height:auto}.font-bold[_ngcontent-%COMP%]{font-weight:700}.disc-style[_ngcontent-%COMP%]{font-size:15px;border-top:0!important}.main-invoice-row[_ngcontent-%COMP%]{margin:3px 2px 5px}.pd-top-bottom-2[_ngcontent-%COMP%]{padding-top:2px!important;padding-bottom:2px!important}.pd-top-bottom-1[_ngcontent-%COMP%]{font-size:13px!important;padding-top:1px!important;padding-bottom:1px!important}.pd-top-bottom-0[_ngcontent-%COMP%]{padding-top:0!important;padding-bottom:0!important}.pd-top-60[_ngcontent-%COMP%]{padding-top:60px!important}}@media print{.printpage[_ngcontent-%COMP%]{display:table;table-layout:fixed;height:auto}}@media print{.pad-print[_ngcontent-%COMP%], .printpage[_ngcontent-%COMP%]{padding-top:.05cm}}@media print{.print-in-border[_ngcontent-%COMP%]{border:3px solid #8f8f8f}.border-margin[_ngcontent-%COMP%]{padding:1rem 4rem}.t-table[_ngcontent-%COMP%]{height:800px}.table-left-right[_ngcontent-%COMP%]{border-left:0!important;border-right:0!important}.tr[_ngcontent-%COMP%]::nth-child(2){height:100vh}.table-left-right[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:3px .75rem;vertical-align:top;text-align:center;width:100%;border-collapse:collapse;height:100%}.table-left-right[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table-left-right[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-left:1px solid #c3c3c3;border-right:1px solid #c3c3c3}.table-left-right[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-top:1px solid #c3c3c3;border-bottom:1px solid #c3c3c3}}.p-mr-bt[_ngcontent-%COMP%]{margin-bottom:20px!important}.section[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{margin:0;box-shadow:0}.float-lft[_ngcontent-%COMP%]{float:left!important}.col-sm-1[_ngcontent-%COMP%], .col-sm-2[_ngcontent-%COMP%], .col-sm-3[_ngcontent-%COMP%], .col-sm-4[_ngcontent-%COMP%], .col-sm-5[_ngcontent-%COMP%], .col-sm-6[_ngcontent-%COMP%], .col-sm-7[_ngcontent-%COMP%], .col-sm-8[_ngcontent-%COMP%], .col-sm-9[_ngcontent-%COMP%], .col-sm-10[_ngcontent-%COMP%], .col-sm-11[_ngcontent-%COMP%], .col-sm-12[_ngcontent-%COMP%]{float:left}.col-sm-12[_ngcontent-%COMP%]{width:100%}.col-sm-11[_ngcontent-%COMP%]{width:91.66666666666666%}.col-sm-10[_ngcontent-%COMP%]{width:83.33333333333334%}.col-sm-9[_ngcontent-%COMP%]{width:75%}.col-sm-8[_ngcontent-%COMP%]{width:66.66666666666666%}.col-sm-7[_ngcontent-%COMP%]{width:58.333333333333336%}.col-sm-6[_ngcontent-%COMP%]{width:50%}.col-sm-5[_ngcontent-%COMP%]{width:41.66666666666667%}.col-sm-4[_ngcontent-%COMP%]{width:33.33333333333333%}.col-sm-3[_ngcontent-%COMP%]{width:25%}.col-sm-2[_ngcontent-%COMP%]{width:16.666666666666664%}.col-sm-1[_ngcontent-%COMP%]{width:8.333333333333332%}.col-md-3[_ngcontent-%COMP%]{width:25%}.lot-border[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border:2px solid #8f8f8f}.footer-border[_ngcontent-%COMP%]{border:1px solid #8f8f8f}.border-top-none[_ngcontent-%COMP%], .footer-bottom[_ngcontent-%COMP%]{padding:5px 15px}.border-top[_ngcontent-%COMP%]{border-top:1px solid;padding:15px}.terms-cond[_ngcontent-%COMP%]{list-style:none}.terms-cond[_ngcontent-%COMP%], .terms-cond[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-left:0!important;padding-left:0!important}.footer-bottom[_ngcontent-%COMP%]{padding-left:15px;border:1px solid #8f8f8f}.border-top-none[_ngcontent-%COMP%]{border:1px solid #8f8f8f;border-top:none}.display-flex[_ngcontent-%COMP%]{display:flex}.display-flex[_ngcontent-%COMP%], .display-flex-end[_ngcontent-%COMP%]{justify-content:center;align-items:flex-end}.height-100[_ngcontent-%COMP%]{height:100%}.company-ltd[_ngcontent-%COMP%]{margin-top:30px}#invoice-table[_ngcontent-%COMP%]{border:1px solid #8f8f8f;border-spacing:0;clear:both;margin:0;height:200mm;width:100%}.lot-border[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding-top:3px;padding-bottom:3px;font-size:15px}#invoice-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border-left:1px solid #8f8f8f}#invoice-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child, td[_ngcontent-%COMP%]:first-child{border-left:none}#invoice-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-bottom:1px solid #8f8f8f}#invoice-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle;font-size:6pt}th[_ngcontent-%COMP%]{font-weight:400}.amount[_ngcontent-%COMP%], .spacing-low[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{text-align:center}.auth-font[_ngcontent-%COMP%], .font-big[_ngcontent-%COMP%], .font-big[_ngcontent-%COMP%]   .terms-cond[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .font-big[_ngcontent-%COMP%]   b[_ngcontent-%COMP%], .invoice_line[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:15px}.company-ltd[_ngcontent-%COMP%]{font-size:18px}.amount[_ngcontent-%COMP%], .invoice_line[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .site[_ngcontent-%COMP%]{font-size:40px;font-weight:600}.invoice_line[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .invoice_line[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:1mm;text-align:center}.lot-border[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 0;font-size:40px}.card-block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:2px}.card-block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:first-child{margin-bottom:1px}.border-margin[_ngcontent-%COMP%]{padding:5px 0 15px}.top-print-head[_ngcontent-%COMP%]{text-align:right;display:inline-block;font-size:15px;padding-top:0;margin-top:0}.spacing-low[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f5f5f5!important}.spacing-low[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .spacing-low[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .spacing-low[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-left:2px solid #8f8f8f!important;border-right:2px solid #8f8f8f!important}.spacing-low[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .spacing-low[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child, .spacing-low[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-top:2px solid #8f8f8f!important;border-bottom:2px solid #8f8f8f!important}.spacing-low[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .spacing-low[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:1px .75rem!important}.border-width[_ngcontent-%COMP%], .spacing-low[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{border-width:2px!important}.lot-border[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], table.lot-border[_ngcontent-%COMP%], table.spacing-low[_ngcontent-%COMP%]{margin-bottom:1px!important}.border[_ngcontent-%COMP%], .border-dark[_ngcontent-%COMP%], .border-top[_ngcontent-%COMP%]{border:1px solid #8f8f8f!important}.border-bootom-none[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child, .border-zero[_ngcontent-%COMP%]{border:0!important}.border-bootom-none[_ngcontent-%COMP%]{border-bottom:2px solid #8f8f8f!important}.display-between[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.spacing-low[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;bottom:0}tfoot.spacing-low[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #8f8f8f!important}tfoot.spacing-low[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child{text-align:left!important}.print-invoice-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{height:178mm;overflow:hidden;overflow-x:hidden;display:block;width:100%}.print-invoice-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%], .print-invoice-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}.print-invoice-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%], .print-invoice-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%}.print-invoice-table[_ngcontent-%COMP%], .print-invoice-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .print-invoice-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:2px solid #8f8f8f!important}.print-invoice-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-bottom:2px solid #8f8f8f!important;border-top:0 solid #8f8f8f!important}.print-invoice-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-left:0!important;border-right:0!important}.width-63[_ngcontent-%COMP%]{width:63%}.width-65[_ngcontent-%COMP%]{width:65%}.width-60[_ngcontent-%COMP%]{width:60%}.width-37[_ngcontent-%COMP%]{width:37%}.width-8[_ngcontent-%COMP%]{width:8%}.width-10[_ngcontent-%COMP%]{width:10%}.width-13[_ngcontent-%COMP%]{width:13%}.width-30[_ngcontent-%COMP%]{width:30%}.width-33[_ngcontent-%COMP%]{width:33%}.width-4px[_ngcontent-%COMP%]{width:4px}.width-4[_ngcontent-%COMP%]{width:4%}.width-15[_ngcontent-%COMP%]{width:15%}.width-9[_ngcontent-%COMP%]{width:9%}.duplicate-border[_ngcontent-%COMP%]{border-top-width:3px!important;border-left-width:3px!important;border-right-width:3px!important}.pd-0[_ngcontent-%COMP%]{padding:0}.mr-0[_ngcontent-%COMP%]{margin:0}.display-flex-end[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center}.font-20[_ngcontent-%COMP%]{font-size:20px}.font-18[_ngcontent-%COMP%]{font-size:18px}.font-10[_ngcontent-%COMP%]{font-size:10px}.font-12[_ngcontent-%COMP%]{font-size:12px}.font-30[_ngcontent-%COMP%]{font-size:30px}.font-13[_ngcontent-%COMP%]{font-size:13px}.font-15[_ngcontent-%COMP%]{font-size:15px}.jus-con-center[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.print-logo-style[_ngcontent-%COMP%]{width:180px;height:auto}.font-bold[_ngcontent-%COMP%]{font-weight:700}.disc-style[_ngcontent-%COMP%]{font-size:15px;border-top:0!important}.main-invoice-row[_ngcontent-%COMP%]{margin:3px 2px 5px}.pd-top-bottom-2[_ngcontent-%COMP%]{padding-top:2px!important;padding-bottom:2px!important}.pd-top-bottom-1[_ngcontent-%COMP%]{font-size:13px!important;padding-top:1px!important;padding-bottom:1px!important}.pd-top-bottom-0[_ngcontent-%COMP%]{padding-top:0!important;padding-bottom:0!important}.pd-top-60[_ngcontent-%COMP%]{padding-top:60px!important}.printpage[_ngcontent-%COMP%]{background:#fff;display:block;margin:0 auto .5cm;box-shadow:0 0 .5cm rgba(0,0,0,.5)}.print-in-border[_ngcontent-%COMP%]{border:3px solid #8f8f8f}.border-margin[_ngcontent-%COMP%]{padding:1rem 4rem}.t-table[_ngcontent-%COMP%]{height:800px}.table-left-right[_ngcontent-%COMP%]{border-left:0!important;border-right:0!important}.tr[_ngcontent-%COMP%]::nth-child(2){height:100vh}.table-left-right[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:3px .75rem;vertical-align:top;text-align:center;width:100%;border-collapse:collapse;height:100%}.table-left-right[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table-left-right[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-left:1px solid #c3c3c3;border-right:1px solid #c3c3c3}.table-left-right[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-top:1px solid #c3c3c3;border-bottom:1px solid #c3c3c3}.mr-bt-5[_ngcontent-%COMP%]{margin-bottom:15px!important}.main-modal-invoice-review[_ngcontent-%COMP%]{max-height:calc(100vh - 60px);overflow-y:auto}.inovice-reiview-footer[_ngcontent-%COMP%]{bottom:0}.inovice-reiview-footer[_ngcontent-%COMP%], .inovice-reiview-header[_ngcontent-%COMP%]{position:absolute;width:100%;background:#fff;padding:6px 0}.inovice-reiview-header[_ngcontent-%COMP%]{top:0;z-index:99999999}.in-pre-text[_ngcontent-%COMP%]{width:100%;margin:0}.mr-tb-26[_ngcontent-%COMP%]{margin-top:26px;margin-bottom:50px}.invoice-close[_ngcontent-%COMP%]{position:absolute;right:13px;top:1px;opacity:1!important}.invoice-close-cross[_ngcontent-%COMP%]{color:#aa3634!important}.invoice-close[_ngcontent-%COMP%]:focus{outline:none!important;border:none!important}.print-heading-refix[_ngcontent-%COMP%]{margin-top:-8px}.terms-print-fix[_ngcontent-%COMP%]{margin-bottom:-2px}.terms-border[_ngcontent-%COMP%]{margin-bottom:-3px}.left-side[_ngcontent-%COMP%]{text-align:left!important}.right-side[_ngcontent-%COMP%]{text-align:right!important}"]}),_e),we=a("faFZ"),De=["searchfilter"];function Se(t,e){if(1&t){var n=k.kc();k.jc(0,"nb-radio",36),k.uc("valueChange",(function(t){return k.Xc(n),k.yc().onChange(t)})),k.jd(1),k.ic()}if(2&t){var i=e.$implicit;k.Hc("value",i.id)("disabled",i.disabled),k.Pb(1),k.ld(" ",i.value,"")}}function Be(t,e){if(1&t){var n=k.kc();k.jc(0,"div",43),k.jc(1,"span",44),k.jd(2),k.ic(),k.jd(3," : "),k.jc(4,"span",45),k.jd(5),k.ic(),k.jc(6,"span",46),k.uc("click",(function(){k.Xc(n);var t=e.$implicit;return k.yc(2).onClear(t.field[0])})),k.jc(7,"strong"),k.jd(8,"x"),k.ic(),k.ic(),k.ic()}if(2&t){var i=e.$implicit;k.Pb(2),k.kd(i.field[0]),k.Pb(3),k.kd(i.value)}}function Ie(t,e){if(1&t){var n=k.kc();k.hc(0),k.jc(1,"div",37),k.jc(2,"label",38),k.jd(3,"Filter By : "),k.ic(),k.jc(4,"div",39),k.jc(5,"div",40),k.hd(6,Be,9,2,"div",41),k.jc(7,"div",42),k.uc("click",(function(){return k.Xc(n),k.yc().onClearFilter()})),k.jd(8,"Clear All"),k.ic(),k.ic(),k.ic(),k.ic(),k.gc()}if(2&t){var i=k.yc();k.Pb(6),k.Hc("ngForOf",i.requestData.data.parameters)}}var Le=function(){return{type:"zoom"}},Ne=function(t){return{animation:t}};function Re(t,e){if(1&t){var n=k.kc();k.jc(0,"nb-icon",51),k.uc("click",(function(){k.Xc(n);var t=k.yc().row;return k.yc(2).printJobCard(t)})),k.zc(1,"disableStockBatchPipe"),k.ic()}if(2&t){var i=k.yc().row;k.Hc("hidden",k.Ac(1,2,i))("options",k.Nc(5,Ne,k.Mc(4,Le)))}}var He=function(t){return["/pages/stock-batch/edit",t]};function qe(t,e){if(1&t){var n=k.kc();k.ec(0,"nb-icon",48),k.jc(1,"nb-icon",49),k.uc("click",(function(){k.Xc(n);var t=e.row;return k.yc(2).deleteStockBatch(t.id)})),k.zc(2,"disableStockBatchPipe"),k.ic(),k.hd(3,Re,2,7,"nb-icon",50)}if(2&t){var i=e.row,c=k.yc(2);k.Hc("options",k.Nc(9,Ne,k.Mc(8,Le)))("hidden",c.hiddenEdit)("routerLink",k.Nc(11,He,i.id)),k.Pb(1),k.Hc("options",k.Nc(14,Ne,k.Mc(13,Le)))("hidden",c.hidden||k.Ac(2,6,i)),k.Pb(2),k.Hc("ngIf",i.showPrint)}}function Fe(t,e){1&t&&(k.jc(0,"ngx-datatable-column",47),k.hd(1,qe,4,16,"ng-template",30),k.ic()),2&t&&k.Hc("maxWidth",90)}function Ae(t,e){if(1&t){var n=k.kc();k.jd(0,"Stock In Type "),k.jc(1,"div",52),k.jc(2,"nb-icon",53),k.uc("click",(function(){return k.Xc(n),k.yc().onOpenFilter("stockInType")})),k.ic(),k.ic()}if(2&t){k.yc();var i=k.Uc(54);k.Pb(2),k.Hc("nbPopover",i)}}function We(t,e){if(1&t){var n=k.kc();k.jd(0,"Party Name "),k.jc(1,"div",52),k.jc(2,"nb-icon",53),k.uc("click",(function(){return k.Xc(n),k.yc().onOpenFilter("partyName")})),k.ic(),k.ic()}if(2&t){k.yc();var i=k.Uc(54);k.Pb(2),k.Hc("nbPopover",i)}}function Ve(t,e){if(1&t){var n=k.kc();k.jd(0,"Quality Name "),k.jc(1,"div",52),k.jc(2,"nb-icon",53),k.uc("click",(function(){return k.Xc(n),k.yc().onOpenFilter("qualityName")})),k.ic(),k.ic()}if(2&t){k.yc();var i=k.Uc(54);k.Pb(2),k.Hc("nbPopover",i)}}function Ee(t,e){if(1&t){var n=k.kc();k.jd(0,"Batch "),k.jc(1,"div",52),k.jc(2,"nb-icon",53),k.uc("click",(function(){return k.Xc(n),k.yc().onOpenFilter("batchList")})),k.ic(),k.ic()}if(2&t){k.yc();var i=k.Uc(54);k.Pb(2),k.Hc("nbPopover",i)}}function ze(t,e){if(1&t&&(k.hc(0),k.jc(1,"span",55),k.jd(2),k.ic(),k.gc()),2&t){var n=e.$implicit;k.Pb(2),k.ld("",n.batchId," ")}}function Te(t,e){1&t&&k.hd(0,ze,3,1,"ng-container",54),2&t&&k.Hc("ngForOf",e.row.batchList)}function Ue(t,e){if(1&t){var n=k.kc();k.jd(0,"Chl No "),k.jc(1,"div",52),k.jc(2,"nb-icon",53),k.uc("click",(function(){return k.Xc(n),k.yc().onOpenFilter("chlNo")})),k.ic(),k.ic()}if(2&t){k.yc();var i=k.Uc(54);k.Pb(2),k.Hc("nbPopover",i)}}function Ge(t,e){if(1&t&&(k.jc(0,"option",56),k.jd(1),k.ic()),2&t){var n=e.$implicit;k.Hc("value",n),k.Pb(1),k.kd(n)}}function $e(t,e){if(1&t){var n=k.kc();k.hc(0),k.jc(1,"ng-select",68),k.uc("ngModelChange",(function(t){return k.Xc(n),k.yc(2).operatorSelected=t})),k.jc(2,"ng-option",69),k.jd(3,"Conatins"),k.ic(),k.jc(4,"ng-option",70),k.jd(5,"Equals"),k.ic(),k.jc(6,"ng-option",71),k.jd(7,"Not Equals"),k.ic(),k.jc(8,"ng-option",72),k.jd(9,"Starts With"),k.ic(),k.jc(10,"ng-option",73),k.jd(11,"Ends With"),k.ic(),k.ic(),k.gc()}if(2&t){var i=k.yc(2);k.Pb(1),k.Hc("ngModel",i.operatorSelected)}}function Xe(t,e){if(1&t){var n=k.kc();k.hc(0),k.jc(1,"ng-select",68),k.uc("ngModelChange",(function(t){return k.Xc(n),k.yc(2).operatorSelected=t})),k.jc(2,"ng-option",74),k.jd(3,"Greater Than"),k.ic(),k.jc(4,"ng-option",75),k.jd(5,"Less Than"),k.ic(),k.jc(6,"ng-option",70),k.jd(7,"Equals"),k.ic(),k.jc(8,"ng-option",71),k.jd(9,"Not Equals"),k.ic(),k.ic(),k.gc()}if(2&t){var i=k.yc(2);k.Pb(1),k.Hc("ngModel",i.operatorSelected)}}function Qe(t,e){if(1&t){var n=k.kc();k.jc(0,"div",57),k.jc(1,"div",58),k.jc(2,"div",59),k.jc(3,"span",60),k.jd(4,"Filter"),k.ic(),k.ic(),k.jc(5,"div",61),k.jc(6,"div",62),k.uc("click",(function(){return k.Xc(n),k.yc().closeFilterPopover()})),k.jc(7,"strong"),k.jd(8,"X"),k.ic(),k.ic(),k.ic(),k.ic(),k.jc(9,"div",63),k.jc(10,"div",64),k.hd(11,$e,12,1,"ng-container",22),k.hd(12,Xe,10,1,"ng-container",22),k.ic(),k.jc(13,"div",64),k.jc(14,"input",65),k.uc("ngModelChange",(function(t){return k.Xc(n),k.yc().filterWord=t})),k.ic(),k.ic(),k.ic(),k.jc(15,"button",66),k.uc("click",(function(){return k.Xc(n),k.yc().onApplyFilter()})),k.jd(16,"Apply"),k.ic(),k.jc(17,"button",67),k.uc("click",(function(){return k.Xc(n),k.yc().closeFilterPopover()})),k.jd(18,"Close"),k.ic(),k.ic()}if(2&t){var i=k.yc();k.Pb(11),k.Hc("ngIf",i.stringFlag),k.Pb(1),k.Hc("ngIf",i.numberFlag),k.Pb(2),k.Hc("ngModel",i.filterWord)}}var Je=function(){return["/pages/stock-batch"]};function Ze(t,e){if(1&t&&(k.jc(0,"div"),k.jd(1),k.ic()),2&t){var n=k.yc().value;k.Pb(1),k.ld(" ",n," ")}}var Ke=function(t){return{"background-color":t}};function Ye(t,e){if(1&t&&(k.jc(0,"div",30),k.jd(1),k.ic()),2&t){var n=k.yc(),i=n.value;k.Hc("ngStyle",k.Nc(2,Ke,n.row.color)),k.Pb(1),k.ld(" ",i," ")}}function tn(t,e){if(1&t&&(k.hd(0,Ze,2,1,"div",18),k.hd(1,Ye,2,4,"div",29)),2&t){var n=e.row;k.Hc("ngIf",!n.color),k.Pb(1),k.Hc("ngIf",n.color)}}function en(t,e){if(1&t&&(k.jc(0,"div"),k.jd(1),k.ic()),2&t){var n=k.yc().value;k.Pb(1),k.ld(" ",n," ")}}function nn(t,e){if(1&t&&(k.jc(0,"div",30),k.jd(1),k.ic()),2&t){var n=k.yc(),i=n.value;k.Hc("ngStyle",k.Nc(2,Ke,n.row.color)),k.Pb(1),k.ld(" ",i," ")}}function cn(t,e){if(1&t&&(k.hd(0,en,2,1,"div",18),k.hd(1,nn,2,4,"div",29)),2&t){var n=e.row;k.Hc("ngIf",!n.color),k.Pb(1),k.Hc("ngIf",n.color)}}function an(t,e){if(1&t&&(k.jc(0,"div",31),k.jc(1,"div",32),k.jd(2),k.ic(),k.ic(),k.jc(3,"div",31),k.jc(4,"div",32),k.jd(5),k.zc(6,"number"),k.ic(),k.ic(),k.jc(7,"div",31),k.jc(8,"div",32),k.jd(9),k.zc(10,"number"),k.ic(),k.ic()),2&t){var n=e.rowCount,i=k.yc().$implicit;k.Pb(2),k.ld(" Total GR: ",n," "),k.Pb(3),k.ld(" Total mtr: ",k.Bc(6,3,i.totalMtr,"1.2-2")," "),k.Pb(4),k.ld(" Total wt: ",k.Bc(10,6,i.totalWt,"1.2-2")," ")}}function on(t,e){if(1&t){var n=k.kc();k.jc(0,"div",21),k.jc(1,"div",22),k.jd(2," PChallan Ref: "),k.jc(3,"b"),k.jd(4),k.ic(),k.ic(),k.jc(5,"div"),k.jc(6,"ngx-datatable",23),k.uc("select",(function(t){return k.Xc(n),k.yc().challanGRSelected(t)})),k.ec(7,"ngx-datatable-column",24),k.jc(8,"ngx-datatable-column",25),k.hd(9,tn,2,2,"ng-template",26),k.ic(),k.jc(10,"ngx-datatable-column",27),k.hd(11,cn,2,2,"ng-template",26),k.ic(),k.jc(12,"ngx-datatable-footer"),k.hd(13,an,11,9,"ng-template",28),k.ic(),k.ic(),k.ic(),k.ic()}if(2&t){var i=e.$implicit,c=k.yc();k.Pb(4),k.kd(i.pchallanRef),k.Pb(2),k.Hc("rows",i.batchMW)("scrollbarV",!0)("selectionType",c.SelectionType.multiClick)("footerHeight",80)("selectionType","checkbox")("selected",c.checkedChallanList),k.Pb(1),k.Hc("headerCheckboxable",!0)("checkboxable",!0)}}var rn=function(t){return{iconSize:t}};function ln(t,e){if(1&t){var n=k.kc();k.jc(0,"nb-icon",37),k.uc("click",(function(){k.Xc(n);var t=k.yc(),e=t.$implicit,i=t.index;return k.yc().deleteBatch(e,i)})),k.ic()}if(2&t){var i=k.yc().$implicit,c=k.yc();k.Hc("ngClass",k.Nc(1,rn,c.totalObj[i.batchId]&&i.batchId==c.selectedBatch))}}function sn(t,e){if(1&t&&(k.jc(0,"div",38),k.jc(1,"span"),k.jd(2),k.zc(3,"number"),k.ic(),k.jc(4,"span"),k.jd(5),k.zc(6,"number"),k.ic(),k.jc(7,"span"),k.jd(8),k.ic(),k.ic()),2&t){var n=k.yc().$implicit,i=k.yc();k.Pb(2),k.ld(" Mtr: ",k.Bc(3,3,i.totalObj[n.batchId].mtr,"1.2-2")," "),k.Pb(3),k.ld(" Wt: ",k.Bc(6,6,i.totalObj[n.batchId].wt,"1.2-2")," "),k.Pb(3),k.ld(" Pcs: ",i.totalObj[n.batchId].pcs," ")}}var dn=function(t){return{"active-button":t}},hn=function(t){return{batchFont:t}};function un(t,e){if(1&t){var n=k.kc();k.jc(0,"button",33),k.uc("click",(function(){k.Xc(n);var t=e.$implicit,i=e.index;return k.yc().batchSelected(t.batchId,i)})),k.jc(1,"b",34),k.jd(2),k.ic(),k.hd(3,ln,1,3,"nb-icon",35),k.hd(4,sn,9,9,"div",36),k.ic()}if(2&t){var i=e.$implicit,c=k.yc();k.Hc("ngClass",k.Nc(8,dn,i.batchId==c.selectedBatch))("ngStyle",k.Nc(10,Ke,i.backColor))("disabled",i.productionPlanned)("value",i.pchallanRef),k.Pb(1),k.Hc("ngClass",k.Nc(12,hn,c.totalObj[i.batchId]&&i.batchId==c.selectedBatch)),k.Pb(1),k.kd(i.batchId),k.Pb(1),k.Hc("ngIf",!i.isProductionPlanned),k.Pb(1),k.Hc("ngIf",c.totalObj[i.batchId]&&i.batchId==c.selectedBatch)}}var gn=function(){return{type:"zoom"}},pn=function(t){return{animation:t}};function bn(t,e){if(1&t){var n=k.kc();k.jc(0,"nb-icon",43),k.uc("click",(function(){k.Xc(n);var t=e.rowIndex;return k.yc(2).removeItemFromBatchList(t)})),k.ic()}2&t&&k.Hc("hidden",e.row.isProductionPlanned)("options",k.Nc(3,pn,k.Mc(2,gn)))}function fn(t,e){if(1&t&&(k.hc(0),k.jc(1,"ngx-datatable",39),k.ec(2,"ngx-datatable-column",40),k.ec(3,"ngx-datatable-column",41),k.ec(4,"ngx-datatable-column",25),k.ec(5,"ngx-datatable-column",27),k.jc(6,"ngx-datatable-column",42),k.hd(7,bn,1,5,"ng-template",26),k.ic(),k.ic(),k.gc()),2&t){var n=k.yc();k.Pb(1),k.Hc("rows",n.finalStockDataValues[n.selectedBatchIndex].batchMW)("scrollbarV",!0)}}var mn,vn,Pn,yn,Mn=[{path:"",component:bt,canActivate:[s.a],canLoad:[s.a],data:{PermissionName:["add"]}},{path:"view",component:(vn=function(){function t(e,n,i,a,o){c(this,t),this.modalService=e,this.toastr=n,this.stockBatchGuard=i,this.stockBatchService=a,this.commonService=o,this.errorData=g,this.loading=!1,this.copyStockList=[],this.stock=[],this.headers=["Stock In Type","Party Name","Bill No","Bill Date","Chl No","Chl Date"],this.module="stock-batch",this.flag=!1,this.disabled=!1,this.tablestyle="bootstrap",this.radioSelect=0,this.radioArray=[{id:1,value:"View Own",disabled:!1},{id:2,value:"View Group",disabled:!1},{id:3,value:"View All",disabled:!1}],this.hidden=!0,this.hiddenEdit=!0,this.hiddenView=!0,this.ownDelete=!0,this.allDelete=!0,this.groupDelete=!0,this.ownEdit=!0,this.allEdit=!0,this.groupEdit=!0,this.tableHeaders=["stockInType","partyName","qualityName","batchList","chlNo"],this.searchStr="",this.requestData=new It.a,this.filter=new f,this.filterWord="",this.selectedColumnForFilter="",this.operatorSelected=null,this.tagList=[],this.numberFlag=!1,this.stringFlag=!1,this.pageSizes=[10,20,50,100],this.selectedPageSize=20,this.destroy$=new u.a}return o(t,[{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}},{key:"ngOnInit",value:function(){this.requestData.data=new St.a,this.userId=this.commonService.getUser(),this.userId=this.userId.userId,this.userHeadId=this.commonService.getUserHeadId(),this.userHeadId=this.userHeadId.userHeadId,this.getAddAcess(),this.getViewAccess(),this.getDeleteAccess(),this.getDeleteAccess1(),this.getEditAccess(),this.getEditAccess1(),this.stockBatchGuard.accessRights("view all")?this.radioSelect=3:this.stockBatchGuard.accessRights("view group")?this.radioSelect=2:this.stockBatchGuard.accessRights("view")&&(this.radioSelect=1),this.onChange(this.radioSelect)}},{key:"pageSizeChanged",value:function(){this.requestData.data.pageSize=Number(this.selectedPageSize),this.getStockBatchList()}},{key:"onOpenFilter",value:function(t){"stockInType"==t||"partyName"==t||"qualityName"==t||"chlNo"==t?(this.stringFlag=!0,this.numberFlag=!1):"batchList"==t&&(this.numberFlag=!0,this.stringFlag=!1);var e=this.requestData.data.parameters.findIndex((function(e){return e.field.find((function(e){return e==t}))}));e>-1?(this.filterWord=this.requestData.data.parameters[e].value,this.operatorSelected=this.requestData.data.parameters[e].operator):(this.filterWord="",this.operatorSelected=null),this.selectedColumnForFilter=t,this.popover.show()}},{key:"onApplyFilter",value:function(){var t=this;this.popover.hide();var e=this.requestData.data.parameters.findIndex((function(e){return e.field.find((function(e){return e==t.selectedColumnForFilter}))}));if(e>-1)this.requestData.data.parameters[e].operator=this.operatorSelected,this.requestData.data.parameters[e].value=this.filterWord;else{var n=new Bt.a;n.field=[this.selectedColumnForFilter],n.value=this.filterWord,n.operator=this.operatorSelected,this.requestData.data.parameters.push(n)}this.requestData.data.pageIndex=0,this.getStockBatchList()}},{key:"onClear",value:function(t){var e,n=this;(e=this.requestData.data.parameters.findIndex(t?function(e){return e.field.find((function(e){return e==t}))}:function(t){return t.field.find((function(t){return t==n.selectedColumnForFilter}))}))>-1&&(this.filterWord="",this.operatorSelected=null,this.requestData.data.parameters.splice(e,1),this.requestData.data.pageIndex=0,this.getStockBatchList())}},{key:"closeFilterPopover",value:function(){this.popover.hide()}},{key:"onClearFilter",value:function(){this.popover.hide(),this.requestData.data.parameters.length>0&&(this.requestData.data.parameters=[],this.getStockBatchList())}},{key:"getAddAcess",value:function(){this.disabled=!this.stockBatchGuard.accessRights("add")}},{key:"onChange",value:function(t){switch(this.stockList=[],t){case 1:this.requestData.getBy="own",this.getStockBatchList(),this.hidden=this.ownDelete,this.hiddenEdit=this.ownEdit;break;case 2:this.requestData.getBy="group",this.getStockBatchList(),this.hidden=this.groupDelete,this.hiddenEdit=this.groupEdit;break;case 3:this.requestData.getBy="all",this.getStockBatchList(),this.hidden=this.allDelete,this.hiddenEdit=this.allEdit}}},{key:"open",value:function(){var t=/([A-Z])([A-Z])([a-z])|([a-z])([A-Z])/g;this.flag=!0;var e=Object.keys(this.stockList[0]),n=[];e.forEach((function(e,i){n.push(e.replace(t,"$1$4 $2$3$5")),n[i]=n[i].charAt(0).toUpperCase()+n[i].slice(1)}));var i=this.modalService.open(mt.a);i.componentInstance.headers=n,i.componentInstance.list=this.stockList,i.componentInstance.moduleName=this.module}},{key:"matchString",value:function(t,e,n){return"batchId"==e?t.batchData.filter((function(t){return t.batchId.toLowerCase().includes(n)})).length>0:t[e].toLowerCase().includes(n)}},{key:"setPage",value:function(t){this.requestData.data.pageIndex=t.offset,this.getStockBatchList()}},{key:"getStockBatchList",value:function(){var t=this;this.loading=!0,this.stockList=[],this.stockBatchService.getAllStockBatchList1(this.requestData).pipe(Object(h.a)(this.destroy$)).subscribe((function(e){if(e.success){var n=e.data;t.stockList=Object(p.cloneDeep)(n.data),t.requestData.data.total=n.total}t.loading=!1}),(function(e){var n=t.requestData.data.parameters.findIndex((function(e){return e.field.find((function(e){return e==t.selectedColumnForFilter}))}));n>-1&&(t.filterWord="",t.operatorSelected=null,t.requestData.data.parameters.splice(n,1)),t.loading=!1}))}},{key:"deleteStockBatch",value:function(t){var e=this;this.modalService.open(ft.a,{size:"sm"}).result.then((function(n){n&&e.stockBatchService.deleteStockBatchById(t).pipe(Object(h.a)(e.destroy$)).subscribe((function(t){t.success&&(e.toastr.success(g.Delete),e.onChange(e.radioSelect))}),(function(t){e.toastr.error(g.Internal_Error)}))}))}},{key:"getViewAccess",value:function(){this.radioArray[0].disabled=!this.stockBatchGuard.accessRights("view"),this.radioArray[1].disabled=!this.stockBatchGuard.accessRights("view group"),this.radioArray[2].disabled=!this.stockBatchGuard.accessRights("view all")}},{key:"getDeleteAccess",value:function(){this.stockBatchGuard.accessRights("delete")&&(this.ownDelete=!1,this.hidden=this.ownDelete),this.stockBatchGuard.accessRights("delete group")&&(this.groupDelete=!1,this.hidden=this.groupDelete),this.stockBatchGuard.accessRights("delete all")&&(this.allDelete=!1,this.hidden=this.allDelete)}},{key:"getDeleteAccess1",value:function(){this.stockBatchGuard.accessRights("delete")?(this.ownDelete=!1,this.hidden=this.ownDelete):this.hidden=!0}},{key:"getEditAccess",value:function(){this.stockBatchGuard.accessRights("edit")&&(this.ownEdit=!1,this.hiddenEdit=this.ownEdit),this.stockBatchGuard.accessRights("edit group")&&(this.groupEdit=!1,this.hiddenEdit=this.groupEdit),this.stockBatchGuard.accessRights("edit all")&&(this.allEdit=!1,this.hiddenEdit=this.allEdit)}},{key:"getEditAccess1",value:function(){this.stockBatchGuard.accessRights("edit")?(this.ownEdit=!1,this.hiddenEdit=this.ownEdit):this.hiddenEdit=!0}},{key:"printJobCard",value:function(t){var e=this.modalService.open(B);e.componentInstance.isDirectPrintFlag=!0,e.componentInstance.stockBatchData=t,e.componentInstance.stockId=Number(t.id),e.result.then((function(t){}))}},{key:"createTagList",value:function(){this.requestData.data.parameters&&this.requestData.data.parameters.length&&this.requestData.data.parameters.forEach((function(t){}))}}]),t}(),vn.\u0275fac=function(t){return new(t||vn)(k.dc(b.e),k.dc(R.b),k.dc(s.a),k.dc(M.a),k.dc(j.a))},vn.\u0275cmp=k.Xb({type:vn,selectors:[["ngx-stock-batch"]],viewQuery:function(t,e){var n;1&t&&(k.cd(De,!0),k.nd(O.ab,!0)),2&t&&(k.Tc(n=k.vc())&&(e.filterTextBox=n.first),k.Tc(n=k.vc())&&(e.popover=n.first))},decls:55,vars:27,consts:[[3,"show"],[1,"row"],[1,"col-lg-12"],[1,"nb-style"],[1,"nb-header"],[1,"col-md-1","col-3","display-flex-start"],[1,"btn","btn-primary","btn-md","btn-design",3,"routerLink","disabled"],[1,"col-md-9","col-7"],[1,"nb-text"],[1,"col-md-2","col-2","display-flex-start","desktop-justify-flexend"],[1,"btn","btn-primary","btn-md","btn-design",3,"click"],[1,"col-md-6"],[1,"nb-radio",3,"ngModel","ngModelChange"],[3,"value","disabled","valueChange",4,"ngFor","ngForOf"],[1,"col-md-4"],[2,"display","flex"],[2,"margin-top","4px","margin-right","2px"],["status","primary","labelPosition","start","name","shift",3,"ngModel","ngModelChange"],[2,"margin-top","4px","margin-left","2px"],[1,"col-md-8"],[1,"d-flex"],["type","text","placeholder","Search","aria-label","Search","aria-describedby","basic-addon1",1,"form-control",3,"ngModel","ngModelChange"],[4,"ngIf"],[1,"material","table-responsive",3,"rows","ngClass","headerHeight","footerHeight","externalPaging","count","offset","limit","page"],["name","Actions","sortable","false","prop","id",3,"maxWidth",4,"ngIf"],["name","Stock In Type","props","stockInType",3,"maxWidth"],["ngx-datatable-header-template",""],["name","Party Name","props","partyName"],["name","Quality Name","props","qualityName"],["name","Batch","prop","batchList"],["ngx-datatable-cell-template",""],["name","Chl No","props","chlNo",3,"maxWidth"],[1,"page-sizer","d-flex"],["name","pageSizer",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],["templateRef",""],[3,"value","disabled","valueChange"],[1,"filter-by-row"],["for",""],[1,"filter-by-col"],[1,"tag-style-con"],["class","tag-style",4,"ngFor","ngForOf"],[1,"filter-by-clear-all",3,"click"],[1,"tag-style"],[1,"filter-by-title"],[1,"filter-by-val"],[2,"cursor","pointer",3,"click"],["name","Actions","sortable","false","prop","id",3,"maxWidth"],["status","primary","icon","edit",3,"options","hidden","routerLink"],["status","danger","icon","trash",3,"options","hidden","click"],["icon","clipboard","nbTooltip","Print","nbTooltipStatus","primary","status","danger",3,"hidden","options","click",4,"ngIf"],["icon","clipboard","nbTooltip","Print","nbTooltipStatus","primary","status","danger",3,"hidden","options","click"],[1,"filter-icon"],["icon","menu-outline","nbPopoverTrigger","noop",1,"nb-icon-filter",3,"nbPopover","click"],[4,"ngFor","ngForOf"],[1,"invpice-batch-style"],[3,"value"],["id","filterDiv",2,"padding","2px 14px","width","250px"],[1,"row",2,"background-color","#aa3634"],[1,"col-md-10"],[2,"color","white"],[1,"col-md-2",2,"margin-top","3px","color","white"],[2,"cursor","pointer","text-align","center",3,"click"],[1,"row",2,"margin-top","8px"],[1,"col-md-12","mb-1"],["type","text","placeholder","Filter...",1,"form-control",3,"ngModel","ngModelChange"],["nbButton","","status","primary",2,"margin-right","5px",3,"click"],["nbButton","","status","danger",3,"click"],["appendTo","body","placeholder","Select Filter",1,"popup-select",3,"ngModel","ngModelChange"],["value","LIKE"],["value","EQUALS"],["value","NOT_EQUALS"],["value","START_WITH"],["value","END_WITH"],["value","GREATER_THAN"],["value","LESS_THAN"]],template:function(t,e){1&t&&(k.ec(0,"ngx-loading",0),k.jc(1,"div",1),k.jc(2,"div",2),k.jc(3,"nb-card",3),k.jc(4,"nb-card-header",4),k.jc(5,"div",1),k.jc(6,"div",5),k.jc(7,"button",6),k.jd(8,"ADD"),k.ic(),k.ic(),k.jc(9,"div",7),k.jc(10,"h2",8),k.jd(11,"Stock-Batch"),k.ic(),k.ic(),k.jc(12,"div",9),k.jc(13,"button",10),k.uc("click",(function(){return e.open()})),k.jd(14,"EXPORT"),k.ic(),k.ic(),k.ic(),k.ic(),k.jc(15,"nb-card-body"),k.jc(16,"div",1),k.jc(17,"div",11),k.jc(18,"nb-radio-group",12),k.uc("ngModelChange",(function(t){return e.radioSelect=t})),k.hd(19,Se,2,3,"nb-radio",13),k.ic(),k.ic(),k.jc(20,"div",11),k.jc(21,"div",1),k.jc(22,"div",14),k.jc(23,"div",15),k.jc(24,"p",16),k.jd(25,"OR"),k.ic(),k.jc(26,"nb-toggle",17),k.uc("ngModelChange",(function(t){return e.requestData.data.isAnd=t}))("ngModelChange",(function(){return e.getStockBatchList()})),k.ic(),k.jc(27,"p",18),k.jd(28,"AND"),k.ic(),k.ic(),k.ic(),k.jc(29,"div",19),k.jc(30,"div",20),k.jc(31,"input",21),k.uc("ngModelChange",(function(t){return e.searchStr=t})),k.ic(),k.ic(),k.ic(),k.ic(),k.ic(),k.ic(),k.jc(32,"div",1),k.hd(33,Ie,9,1,"ng-container",22),k.ic(),k.jc(34,"ngx-datatable",23),k.uc("page",(function(t){return e.setPage(t)})),k.zc(35,"searchInTable"),k.hd(36,Fe,2,1,"ngx-datatable-column",24),k.jc(37,"ngx-datatable-column",25),k.hd(38,Ae,3,1,"ng-template",26),k.ic(),k.jc(39,"ngx-datatable-column",27),k.hd(40,We,3,1,"ng-template",26),k.ic(),k.jc(41,"ngx-datatable-column",28),k.hd(42,Ve,3,1,"ng-template",26),k.ic(),k.jc(43,"ngx-datatable-column",29),k.hd(44,Ee,3,1,"ng-template",26),k.hd(45,Te,1,1,"ng-template",30),k.ic(),k.jc(46,"ngx-datatable-column",31),k.hd(47,Ue,3,1,"ng-template",26),k.ic(),k.ic(),k.jc(48,"div",32),k.jc(49,"span"),k.jd(50,"Page Size: "),k.ic(),k.jc(51,"select",33),k.uc("ngModelChange",(function(t){return e.selectedPageSize=t}))("change",(function(){return e.pageSizeChanged()})),k.hd(52,Ge,2,2,"option",34),k.ic(),k.ic(),k.ic(),k.ic(),k.ic(),k.ic(),k.hd(53,Qe,19,3,"ng-template",null,35,k.id)),2&t&&(k.Hc("show",e.loading),k.Pb(7),k.Hc("routerLink",k.Mc(26,Je))("disabled",e.disabled),k.Pb(11),k.Hc("ngModel",e.radioSelect),k.Pb(1),k.Hc("ngForOf",e.radioArray),k.Pb(7),k.Hc("ngModel",e.requestData.data.isAnd),k.Pb(5),k.Hc("ngModel",e.searchStr),k.Pb(2),k.Hc("ngIf",e.requestData.data.parameters&&e.requestData.data.parameters.length),k.Pb(1),k.Hc("rows",k.Dc(35,21,e.stockList,e.searchStr,e.requestData.data.isAnd,e.tableHeaders))("ngClass",e.tablestyle)("headerHeight",31)("footerHeight",40)("externalPaging",!0)("count",e.requestData.data.total)("offset",e.requestData.data.pageIndex)("limit",e.requestData.data.pageSize),k.Pb(2),k.Hc("ngIf",!e.hiddenEdit||!e.hidden),k.Pb(1),k.Hc("maxWidth",130),k.Pb(9),k.Hc("maxWidth",130),k.Pb(5),k.Hc("ngModel",e.selectedPageSize),k.Pb(1),k.Hc("ngForOf",e.pageSizes))},directives:[H.a,O.u,O.x,l.d,O.t,O.eb,L.l,L.o,r.m,O.wb,L.a,r.n,F.e,r.l,F.b,F.c,F.a,L.u,O.db,O.I,O.yb,O.ab,L.p,L.w,O.q,q.a,q.c],pipes:[Lt.a,vt.a],styles:[".filter-icon[_ngcontent-%COMP%]{position:absolute;top:5px;right:10px}.nb-icon-filter[_ngcontent-%COMP%]{font-size:15px}  .ng-dropdown-panel{z-index:9999999!important}.filter-by-row[_ngcontent-%COMP%]{padding-bottom:22px;display:block;height:auto;overflow:hidden}.tag-style-con[_ngcontent-%COMP%]{float:left;width:100%}.filter-by-row[_ngcontent-%COMP%]   .tag-style[_ngcontent-%COMP%]{font-size:14px;font-family:DM Sans;color:#aa3634;font-weight:500;text-transform:capitalize;padding:5px 12px!important;margin-right:11px;margin-bottom:11px;float:left;border-radius:24px;border:2px solid #aa3634;background-color:#fff}.filter-by-col[_ngcontent-%COMP%]{float:left;width:calc(100% - 71px);border:0 solid}.filter-by-row[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{float:left;margin-right:12px;font-family:DM Sans;font-size:14px;color:#aa3634;margin-top:5px}.filter-clear-all[_ngcontent-%COMP%]{float:left;margin-top:6px}span.filter-by-val[_ngcontent-%COMP%]{font-weight:400;color:#aa3634;margin-right:5px}.filter-label[_ngcontent-%COMP%]   span.filter-clear-all[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:0!important}.filter-by-clear-all[_ngcontent-%COMP%]{font-size:14px;color:#aa3634;opacity:.5;text-decoration:underline;font-family:DM Sans;font-weight:500;float:left;margin-top:6px;cursor:pointer}.filter-by-clear-all[_ngcontent-%COMP%]:hover{text-decoration:none}.filter-by-row[_ngcontent-%COMP%]   .tag-style[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin:5px 0 0 3px;cursor:pointer;vertical-align:top;display:inline-block}"]}),vn),canActivate:[s.a],canLoad:[s.a],data:{PermissionName:["view","view group","view all"]}},{path:"pending",component:Dt,canActivate:[s.a],canLoad:[s.a],data:{PermissionName:["view","view group","view all"]}},{path:"report",component:we.a,canActivate:[s.a],canLoad:[s.a],data:{PermissionName:["view","view group","view all"]}},{path:"return-lot",component:ve,canActivate:[s.a],canLoad:[s.a],data:{PermissionName:["view","view group","view all"]}},{path:"return-lot/view",component:Kt,canActivate:[s.a],canLoad:[s.a],data:{PermissionName:["view","view group","view all"]}},{path:"return-lot/print",component:xe,canActivate:[s.a],canLoad:[s.a],data:{PermissionName:["view","view group","view all"]}},{path:"edit/:id",component:bt,canActivate:[s.a],canLoad:[s.a],data:{PermissionName:["edit","edit group","edit all"]}},{path:"stock-in",component:(mn=function(){function n(t,e,i,a,o,r,l,s){c(this,n),this.activeRoute=t,this.router=e,this.partyService=i,this.qualityService=a,this.stockBatchService=o,this.toastr=r,this.modalService=l,this.cdr=s,this.loading=!1,this.unsubscribe$=new u.a,this.stockDataValues=[],this.finalStockDataValues=[],this.stockBatch=new f,this.partyList=[],this.qualityList=[],this.production_flag=[],this.selectedBatchList=[],this.selectedChallanList=[],this.checkedChallanList=[],this.chlListToTransfer=[],this.currentBatchSequence=0,this.SelectionType=F.h,this.transferedMtr=null,this.transferedWt=null,this.totalObj={}}return o(n,[{key:"ngOnDestroy",value:function(){localStorage.removeItem("stockdata"),this.unsubscribe$.next(),this.unsubscribe$.complete()}},{key:"ngOnInit",value:function(){this.currentStockId=Number(this.activeRoute.snapshot.queryParamMap.get("id")),this.getPartyList(),this.getQualityList(),this.getStockBatchById()}},{key:"getPartyList",value:function(){var t=this;this.loading=!0,this.partyService.getAllPartyNameList().pipe(Object(h.a)(this.unsubscribe$)).subscribe((function(e){e.success&&(t.partyList=e.data),t.loading=!1}),(function(e){t.loading=!1}))}},{key:"getQualityList",value:function(){var t=this;this.loading=!0,this.qualityService.getQualityNameData().pipe(Object(h.a)(this.unsubscribe$)).subscribe((function(e){e.success&&e.data&&e.data.length>0&&(t.qualityList=e.data),t.loading=!1}),(function(e){t.loading=!1}))}},{key:"getStockBatchById",value:function(){var t=this;this.loading=!0,this.stockBatchService.getStockBatchById(this.currentStockId).pipe(Object(h.a)(this.unsubscribe$)).subscribe((function(e){e.success&&(t.stockBatch.receiveDate=new Date(e.data.receiveDate),t.stockBatch.qualityId=e.data.qualityId,t.stockBatch=e.data,t.stockBatch.chlDate=new Date(t.stockBatch.chlDate),t.stockBatch.receiveDate=new Date(t.stockBatch.receiveDate),t.stockBatch.batchData.length&&(t.stockBatch.batchData=Object(p.sortBy)(e.data.batchData,"pchallanRef"),t.stockBatch.batchData.map((function(t){})),t.setStockDataValues1(e.data))),t.loading=!1}),(function(e){t.loading=!1}))}},{key:"setStockDataValues1",value:function(e){var n=this,i=t(new Set(this.stockBatch.batchData.map((function(t){return t.pchallanRef}))));this.stockDataValues=[],i.forEach((function(t,e){n.stockDataValues.push(new v),n.stockDataValues[e].pchallanRef=i[e],n.stockDataValues[e].old=!0})),0!=this.qualityList.length&&this.qualityList.forEach((function(t){t.id==n.stockBatch.qualityId&&(n.wtPer100mtrCopy=t.wtPer100m,n.stockBatch.unit=t.unit)})),this.stockDataValues.forEach((function(t,e){n.production_flag[e]=!1,n.stockBatch.batchData.forEach((function(i,c){if(i.pchallanRef==t.pchallanRef){t.batchMW.push(new m(i.mtr,i.wt,i.isProductionPlanned,i.id,i.controlId));var a=0,o=0;t.batchMW.forEach((function(t,e){a+=t.mtr,o+=t.wt,t.sequence=e+1,t.pchallanRef=i.pchallanRef})),t.totalMtr=a,t.totalWt=o,t.batchMW[t.batchMW.length-1].batchId=i.batchId,t.batchMW[t.batchMW.length-1].pchallanRef=i.pchallanRef,i.isProductionPlanned&&(n.production_flag[e]=!0)}}))})),e.batchData.forEach((function(t){if(n.finalStockDataValues||(n.finalStockDataValues=[]),n.finalStockDataValues&&t.batchId){var e=n.finalStockDataValues.findIndex((function(e){return e.batchId==t.batchId}));if(e>-1){n.finalStockDataValues[e].batchMW&&!n.finalStockDataValues[e].batchMW.length&&(n.finalStockDataValues[e].batchMW=[]),n.finalStockDataValues[e].batchMW.push(new m(t.mtr,t.wt,t.isProductionPlanned,t.id,t.controlId));var i=0,c=0;n.finalStockDataValues[e].batchMW.forEach((function(t){i+=t.mtr,c+=t.wt})),n.finalStockDataValues[e].totalMtr=i,n.finalStockDataValues[e].totalWt=c,n.finalStockDataValues[e].batchMW[n.finalStockDataValues[e].batchMW.length-1].batchId=t.batchId,n.finalStockDataValues[e].batchMW[n.finalStockDataValues[e].batchMW.length-1].pchallanRef=t.pchallanRef;var a=n.stockDataValues.findIndex((function(e){return e.batchMW.filter((function(e){return e.id==t.id&&e.pchallanRef==t.pchallanRef&&!e.color})).length}));if(a>-1){var o=n.stockDataValues[a].batchMW.findIndex((function(e){return e.id==t.id&&e.pchallanRef==t.pchallanRef&&!e.color}));o>-1&&(n.stockDataValues[a].batchMW[o].color=n.finalStockDataValues[e].backColor)}}else{n.finalStockDataValues||(n.finalStockDataValues=[]),n.finalStockDataValues.push({batchId:t.batchId,batchMW:[]});var r=n.finalStockDataValues.length-1;n.getRandomColor(n.finalStockDataValues[r]),n.finalStockDataValues[r].batchMW.push(new m(t.mtr,t.wt,t.isProductionPlanned,t.id,t.controlId)),n.finalStockDataValues[r].batchMW[n.finalStockDataValues[r].batchMW.length-1].batchId=t.batchId,n.finalStockDataValues[r].batchMW[n.finalStockDataValues[r].batchMW.length-1].pchallanRef=t.pchallanRef;var l=n.stockDataValues.findIndex((function(e){return e.batchMW.filter((function(e){return e.id==t.id&&e.pchallanRef==t.pchallanRef&&!e.color})).length}));if(l>-1){var s=n.stockDataValues[l].batchMW.findIndex((function(e){return e.id==t.id&&e.pchallanRef==t.pchallanRef&&!e.color}));s>-1&&(n.stockDataValues[l].batchMW[s].color=n.finalStockDataValues[r].backColor)}}}})),this.finalStockDataValues.forEach((function(t){t.batchMW.filter((function(t){return t.isProductionPlanned})).length&&(t.isProductionPlanned=!0)}))}},{key:"batchPChallanSelected",value:function(t){var e=this;this.selectedPChallan=t,this.checkedChallanList=[],this.selectedChallanList=this.stockDataValues.filter((function(t){return t.pchallanRef==e.selectedPChallan}))[0]}},{key:"batchSelected",value:function(t,e){this.selectedBatch=t,this.selectedBatchIndex=e;var n={},i=0,c=0,a=0;this.finalStockDataValues[this.selectedBatchIndex].batchMW.forEach((function(t){i+=t.mtr,c+=t.wt,a+=1})),n.mtr=i,n.wt=c,n.pcs=a,this.totalObj[this.selectedBatch]=n}},{key:"addBatch",value:function(e){var n=this,i=new v;if(this.finalStockDataValues.length)if(this.finalStockDataValues.findIndex((function(t){return null==t.batchId}))>-1)this.toastr.error("Please fill all the required fields");else{var c=t(this.finalStockDataValues);c=Object(p.sortBy)(c,"pchallanRef","asc"),this.stockBatchService.getBatchSequence(!0).pipe(Object(h.a)(this.unsubscribe$)).subscribe((function(t){if(t.success){i.batchId=t.data.sequence,i.batchId<n.currentBatchSequence&&(n.currentBatchSequence=i.batchId,n.selectedBatch=n.currentBatchSequence,n.selectedBatchIndex=n.finalStockDataValues.length-1),n.getRandomColor(i),n.finalStockDataValues.push(Object.assign({},i));var c="collapsible-panel--expanded";e.target.classList.contains(c)?e.target.classList.remove(c):e.target.classList.add(c)}}))}else this.finalStockDataValues=[],i=new v,this.getRandomColor(i),this.finalStockDataValues.push(Object.assign({},i)),this.getCurrentBatchSequence(),this.finalStockDataValues[0].batchId=this.currentBatchSequence,this.selectedBatch=this.currentBatchSequence,this.selectedBatchIndex=this.finalStockDataValues.length-1}},{key:"getCurrentBatchSequence",value:function(){var t=this;this.stockBatchService.getBatchSequence(!0).pipe(Object(h.a)(this.unsubscribe$)).subscribe((function(e){e.success&&(t.currentBatchSequence=e.data.sequence,t.finalStockDataValues&&t.finalStockDataValues[0]&&(t.finalStockDataValues[0].batchId=t.currentBatchSequence),t.selectedBatch=t.currentBatchSequence,t.selectedBatchIndex=t.finalStockDataValues.length-1)}))}},{key:"challanGRSelected",value:function(t){this.checkedChallanList=t.selected}},{key:"removeItemFromBatchList",value:function(e){var n=this.finalStockDataValues[this.selectedBatchIndex].batchMW.splice(e,1);if(n&&n[0]&&n[0].pchallanRef){var i=this.stockDataValues.findIndex((function(t){return t.pchallanRef==n[0].pchallanRef}));n[0].batchId=null,n[0].color="";var c=this.stockDataValues[i].batchMW.findIndex((function(t){return t.id==n[0].id}));this.stockDataValues[i].batchMW[c].color="",this.stockDataValues[i].batchMW[c].batchId=null,this.finalStockDataValues[this.selectedBatchIndex].batchMW=t(this.finalStockDataValues[this.selectedBatchIndex].batchMW);var a={},o=0,r=0,l=0;this.finalStockDataValues[this.selectedBatchIndex].batchMW.forEach((function(t){o+=t.mtr,r+=t.wt,l+=1})),a.mtr=o,a.wt=r,a.pcs=l,this.totalObj[this.selectedBatch]=a,this.cdr.detectChanges()}}},{key:"deleteBatch",value:function(t,e){var n=this;t.batchMW.forEach((function(t){var e=n.stockDataValues.findIndex((function(e){return e.batchMW.filter((function(e){return e.batchId==t.batchId&&e.batchId})).length}));if(e>-1){var i=n.stockDataValues[e].batchMW.findIndex((function(e){return e.batchId==t.batchId&&e.batchId}));i>-1&&(n.stockDataValues[e].batchMW[i].batchId=null,n.stockDataValues[e].batchMW[i].color="")}t.batchId=null,console.log(t,n.stockDataValues[e])})),this.finalStockDataValues.splice(e,1),this.selectedBatch=null,this.selectedBatchIndex=-1}},{key:"transferClicked",value:function(){var e=this;if(this.selectedBatch){var n=this.finalStockDataValues.filter((function(t){return t.batchId==e.selectedBatch}));if(n&&n.length&&n[0])if(n[0].isProductionPlanned)this.toastr.error("Production planned for this batch!");else if(this.checkedChallanList&&this.checkedChallanList.length)if(this.finalStockDataValues.length&&this.selectedBatch){var i=this.finalStockDataValues.findIndex((function(t){return t.batchId==e.selectedBatch})),c=!1,a={};this.checkedChallanList.forEach((function(n){if(n.color)c=!0;else{e.finalStockDataValues[i].batchMW.push([n].map((function(t){return Object.assign(Object.assign({},t),{batchId:e.selectedBatch,pchallanRef:n.pchallanRef})}))[0]);var o=e.stockDataValues.findIndex((function(t){return t.pchallanRef==n.pchallanRef})),r=e.stockDataValues[o].batchMW.findIndex((function(t){return t.id==n.id}));e.stockDataValues[o].batchMW[r].batchId=e.selectedBatch,e.stockDataValues[o].batchMW[r].color=e.finalStockDataValues[i].backColor,e.finalStockDataValues[i].batchMW=t(e.finalStockDataValues[i].batchMW);var l=0,s=0,d=0;e.finalStockDataValues[i].batchMW.forEach((function(t){l+=t.mtr,s+=t.wt,d+=1})),a.mtr=l,a.wt=s,a.pcs=d,e.totalObj[e.selectedBatch]=a}})),c&&this.toastr.error("Selected GR already exist in batch"),this.checkedChallanList=[]}else this.toastr.error("Select Batch first");else this.toastr.error("Select challan grs first")}else this.toastr.error("Select Batch first")}},{key:"addUpdateStockBatch",value:function(t,n){var i=this;if(this.finalStockDataValues&&this.finalStockDataValues.length){this.stockBatch.batchData=[];var c,a=e(this.finalStockDataValues);try{for(a.s();!(c=a.n()).done;){var o=c.value;if(!o.batchMW||!o.batchMW)return this.toastr.error(o.batchId+" GRs are empty"),!1;o.batchMW.forEach((function(t){i.stockBatch.batchData.push(Object.assign({},t))}))}}catch(r){a.e(r)}finally{a.f()}this.loading=!0,this.stockBatchService.updateStockBatch(this.stockBatch).pipe(Object(h.a)(this.unsubscribe$)).subscribe((function(e){e.success?(i.toastr.success(e.msg),n&&i.printJobCard(t,e.data),i.router.navigate(["pages/stock-batch"])):i.toastr.error(e.msg),i.loading=!1}),(function(t){i.loading=!1}))}}},{key:"printJobCard",value:function(t,e){var n=this.modalService.open(B);n.componentInstance.isDirectPrintFlag=!0,n.componentInstance.stockBatchData=this.stockBatch,n.componentInstance.stockId=Number(e),n.result.then((function(t){}))}},{key:"getRandomColor",value:function(t){for(var e="#",n=0;n<6;n++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];t.backColor=e}}]),n}(),mn.\u0275fac=function(t){return new(t||mn)(k.dc(l.a),k.dc(l.c),k.dc(P.a),k.dc(y.a),k.dc(M.a),k.dc(R.b),k.dc(b.e),k.dc(k.i))},mn.\u0275cmp=k.Xb({type:mn,selectors:[["ngx-stock-in"]],decls:33,vars:10,consts:[[3,"show"],["id","target"],[1,"nb-style"],[1,"nb-header"],[1,"row"],[1,"col-md-12","col-6"],[1,"nb-text","txt-ov-elips"],["myForm","ngForm"],[1,"row",2,"margin","3px 3px"],["id","fmtr-table",1,"col-md-7"],[1,"capsule-data-container","cap-border"],["class","col-md-6","style","padding-left: 25px;\n                                margin-right: -15px;",4,"ngFor","ngForOf"],[1,"col-md-5","mt-3"],[1,"btn-primary","btn-sm","btn-design-save","mob-stock","button-base","ripple",3,"click"],[1,"capsule-list-container"],["icon","plus",1,"add-icon",2,"position","relative",3,"options","click"],["type","button","style","margin-top: 2px;","nbButton","","size","small","class","badge-design-stock-in",3,"ngClass","ngStyle","disabled","value","click",4,"ngFor","ngForOf"],["id","fmtr-table",2,"width","100%"],[4,"ngIf"],[1,"col-md-12","mobile-btn-center","text-btn-right","mt-50"],["type","button",1,"btn","btn-primary","btn-sm","btn-design-save","mob-stock","button-base","ripple",3,"disabled","click"],[1,"col-md-6",2,"padding-left","25px","margin-right","-15px"],[1,"row",2,"padding-left","20px","padding-top","10px"],[1,"material","common-table","datatable-auto-height","fm-table-body-height",2,"height","400px",3,"rows","scrollbarV","selectionType","footerHeight","selected","select"],["name","Sr No.","prop","sequence",3,"headerCheckboxable","checkboxable"],["name","Mtr","prop","mtr"],["ngx-datatable-cell-template",""],["name","Wt","prop","wt"],["ngx-datatable-footer-template",""],["class","inside_value",3,"ngStyle",4,"ngIf"],[1,"inside_value",3,"ngStyle"],[1,"col-md-4"],[1,"toal-finish-mtr"],["type","button","nbButton","","size","small",1,"badge-design-stock-in",2,"margin-top","2px",3,"ngClass","ngStyle","disabled","value","click"],[3,"ngClass"],["class","icon-pposition","icon","close-circle-outline",3,"ngClass","click",4,"ngIf"],["style","display: grid;font-size: 10.5px;",4,"ngIf"],["icon","close-circle-outline",1,"icon-pposition",3,"ngClass","click"],[2,"display","grid","font-size","10.5px"],[1,"material","common-table","datatable-auto-height","fm-table-body-height",2,"height","242px",3,"rows","scrollbarV"],["name","PChallan","prop","pchallanRef"],["name","Sr No.","prop","sequence"],["name","Action","prop","id"],["icon","trash","status","danger",3,"hidden","options","click"]],template:function(t,e){if(1&t){var n=k.kc();k.ec(0,"ngx-loading",0),k.ec(1,"div",1),k.jc(2,"nb-card",2),k.jc(3,"nb-card-header",3),k.jc(4,"div",4),k.jc(5,"div",5),k.jc(6,"h2",6),k.jd(7,"Stock In"),k.ic(),k.ic(),k.ic(),k.ic(),k.jc(8,"nb-card-body"),k.jc(9,"div"),k.jc(10,"form",null,7),k.jc(12,"div",8),k.jc(13,"div",9),k.jc(14,"div",10),k.jc(15,"div",4),k.hd(16,on,14,9,"div",11),k.ic(),k.ic(),k.ic(),k.jc(17,"div",12),k.jc(18,"div",4),k.jc(19,"button",13),k.uc("click",(function(){return e.transferClicked()})),k.jd(20,"Transfer"),k.ic(),k.ic(),k.jc(21,"div",4),k.jc(22,"div",14),k.jc(23,"nb-icon",15),k.uc("click",(function(t){return e.addBatch(t)})),k.ic(),k.hd(24,un,5,14,"button",16),k.ic(),k.jc(25,"div",17),k.hd(26,fn,8,2,"ng-container",18),k.ic(),k.ic(),k.ic(),k.ic(),k.jc(27,"div",4),k.jc(28,"div",19),k.jc(29,"button",20),k.uc("click",(function(){k.Xc(n);var t=k.Uc(11);return e.addUpdateStockBatch(t,!1)})),k.jd(30,"SAVE"),k.ic(),k.jc(31,"button",20),k.uc("click",(function(){k.Xc(n);var t=k.Uc(11);return e.addUpdateStockBatch(t,!0)})),k.jd(32,"SAVE & PRINT"),k.ic(),k.ic(),k.ic(),k.ic(),k.ic(),k.ic(),k.ic()}2&t&&(k.Hc("show",e.loading),k.Pb(16),k.Hc("ngForOf",e.stockDataValues),k.Pb(7),k.Hc("options",k.Nc(8,pn,k.Mc(7,gn))),k.Pb(1),k.Hc("ngForOf",e.finalStockDataValues),k.Pb(2),k.Hc("ngIf",e.selectedBatchIndex>-1),k.Pb(3),k.Hc("disabled",e.loading),k.Pb(2),k.Hc("disabled",e.loading))},directives:[H.a,O.u,O.x,O.t,L.x,L.m,L.n,r.m,O.I,r.n,F.e,F.b,F.a,F.f,F.d,r.o,O.q,r.l],pipes:[r.f],styles:[".capsule-list-container[_ngcontent-%COMP%]{border:1px solid;overflow-y:scroll;height:115px;max-height:115px;width:100%!important;margin-top:10px!important;padding:1px}.capsule-data-container[_ngcontent-%COMP%]{border:1px solid;height:440px!important;max-height:440px!important;width:100%!important}.cap-border[_ngcontent-%COMP%]{overflow-x:scroll;border:1px solid!important}.list-container[_ngcontent-%COMP%]{overflow-y:scroll;height:130px}.active-button[_ngcontent-%COMP%], .active-button[_ngcontent-%COMP%]:active{box-shadow:4px 7px 10px #000!important}.inactive-button[_ngcontent-%COMP%]{background-color:#5e5b5e!important}.disabled[_ngcontent-%COMP%]{background-color:#dad6da!important}.add-icon[_ngcontent-%COMP%]{color:#fff!important;background-color:#5e5b5e;height:32px!important;width:32px!important;top:0;padding:4px;border-radius:55px;cursor:pointer;margin-left:0!important;margin-right:12px!important;margin-top:5px!important}.inside_value[_ngcontent-%COMP%]{width:100%;text-align:center;color:#fff;font-weight:700}.batchFont[_ngcontent-%COMP%]{font-size:20px!important}.iconSize[_ngcontent-%COMP%]{width:20px!important;height:20px!important}"]}),mn),canActivate:[s.a],canLoad:[s.a],data:{PermissionName:["add"]}}],jn=((Pn=function t(){c(this,t)}).\u0275mod=k.bc({type:Pn}),Pn.\u0275inj=k.ac({factory:function(t){return new(t||Pn)},providers:[s.a],imports:[[l.g.forChild(Mn)],l.g]}),Pn),Cn=a("yzeJ"),kn=a("vTDv"),On=((yn=function t(){c(this,t)}).\u0275mod=k.bc({type:yn}),yn.\u0275inj=k.ac({factory:function(t){return new(t||yn)},imports:[[r.c,jn,Cn.a,kn.a]]}),yn)},R0b5:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var i=n("4/8P"),a=n("fXoL"),r=n("tk/3"),l=function(){var t=function(){function t(e,n){c(this,t),this.httpClient=e,this.commonService=n}return o(t,[{key:"saveMergedBatch",value:function(t){return this.httpClient.post(this.commonService.envUrl()+"api/stockBatch/create/mergeBatchList",t)}},{key:"getBatchesByPartyQuality",value:function(t,e){return this.httpClient.get(this.commonService.envUrl()+"api/stockBatch/batch/ByQualityAndPartyWithoutProductionPlan/"+t+"/"+e)}},{key:"getAllMergeBatch",value:function(){return this.httpClient.get(this.commonService.envUrl()+"api/stockBatch/get/mergeBatchList")}},{key:"getAllMergeBatchV1",value:function(t){return this.httpClient.post(this.commonService.envUrl()+"api/stockBatch/get/mergeBatchList/allPaginated",t)}},{key:"getMergeBatchById",value:function(t){return this.httpClient.get(this.commonService.envUrl()+"api/stockBatch/get/mergeBatchListBy?mergeBatchId="+t)}},{key:"deleteMergeBatch",value:function(t){return this.httpClient.delete(this.commonService.envUrl()+"api/stockBatch/delete/mergeBatchListBy?mergeBatchId="+t)}},{key:"updateMergeBatch",value:function(t){return this.httpClient.put(this.commonService.envUrl()+"api/stockBatch/update/mergeBatchList",t)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(a.rc(r.b),a.rc(i.a))},t.\u0275prov=a.Zb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},SapW:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var i=n("4/8P"),a=n("fXoL"),r=n("tk/3"),l=function(){var t=function(){function t(e,n){c(this,t),this.httpClient=e,this.commonService=n}return o(t,[{key:"isBatchIdExists",value:function(t,e){return this.httpClient.get(this.commonService.envUrl()+"api/stockBatch/isBatchExists/"+t+"/"+e)}},{key:"isPchallanExists",value:function(t,e){return this.httpClient.get(this.commonService.envUrl()+"api/stockBatch/exist/pchallan?partyId=".concat(t,"&pchallanRef=").concat(e))}},{key:"addPchallan",value:function(t){return this.httpClient.post(this.commonService.envUrl()+"api/stockBatch/add/pchallan",t)}},{key:"updatePchallan",value:function(t){return this.httpClient.put(this.commonService.envUrl()+"api/stockBatch/update/pchallan",t)}},{key:"deleteStockBatchById",value:function(t){return this.httpClient.delete(this.commonService.envUrl()+"api/stockBatch/"+t)}},{key:"getAllStockBatchList",value:function(t,e){return this.httpClient.get(this.commonService.envUrl()+"api/stockBatch/all/"+e+"/"+t)}},{key:"getAllStockBatchList1",value:function(t){return this.httpClient.post(this.commonService.envUrl()+"api/stockBatch/allpaginated",t)}},{key:"getAvailableStockBatchList",value:function(t,e){return this.httpClient.get(this.commonService.envUrl()+"api/stockBatch/pending/all/"+e+"/"+t)}},{key:"getShortStockReport",value:function(t){return this.httpClient.post(this.commonService.envUrl()+"api/dispatch/report/forConslidateBill",t)}},{key:"getDetailedStockReport",value:function(t){return this.httpClient.post(this.commonService.envUrl()+"api/dispatch/filter/getBill",t)}},{key:"addStockBatch",value:function(t){return this.httpClient.post(this.commonService.envUrl()+"api/stockBatch",t)}},{key:"updateStockBatch",value:function(t){return this.httpClient.put(this.commonService.envUrl()+"api/stockBatch",t)}},{key:"getStockBatchById",value:function(t){return this.httpClient.get(this.commonService.envUrl()+"api/stockBatch/"+t)}},{key:"getAllBatch",value:function(){return this.httpClient.get(this.commonService.envUrl()+"api/stockBatch/batch/all")}},{key:"getBatchById",value:function(t,e){return this.httpClient.get(this.commonService.envUrl()+"api/stockBatch/batch/ByQualityAndParty/"+e+"/"+t)}},{key:"getAllBatchForAdditionSlip",value:function(){return this.httpClient.get(this.commonService.envUrl()+"api/stockBatch/batch/forAdditionalSlip")}},{key:"getJobCardData",value:function(t){return this.httpClient.get("".concat(this.commonService.envUrl(),"api/stockBatch/get/getJobCardBy?batchId=").concat(t))}},{key:"getBatchSequence",value:function(t){return this.httpClient.get(this.commonService.envUrl()+"api/admin/get/batchSequence?update="+t)}},{key:"updateBatchSequence",value:function(t){return this.httpClient.put(this.commonService.envUrl()+"api/admin/update/batchSequence/",t)}},{key:"getBatchesByPartyQuality",value:function(t,e){return this.httpClient.get(this.commonService.envUrl()+"api/stockBatch/batch/ByQualityAndPartyWithProductionPlan/"+t+"/"+e)}},{key:"getBatchGRById",value:function(t){return this.httpClient.get(this.commonService.envUrl()+"api/stockBatch/batch/"+t+"/"+t)}},{key:"returnLotPost",value:function(t){return this.httpClient.post(this.commonService.envUrl()+"api/stockBatch/add/returnBatch",t)}},{key:"returnLotgetById",value:function(t){return this.httpClient.get(this.commonService.envUrl()+"api/stockBatch/get/returnBatch?chlNo="+t)}},{key:"returnLotgetAll",value:function(){return this.httpClient.get(this.commonService.envUrl()+"api/stockBatch/all/returnBatch")}},{key:"returnLotgetAllPaginated",value:function(t){return this.httpClient.post(this.commonService.envUrl()+"api/stockBatch/all/returnBatch/allPaginated",t)}},{key:"getConslidateBatchResponse",value:function(t){return this.httpClient.post(this.commonService.envUrl()+"api/stockBatch/pending/forConslidateBatchResponse",t)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(a.rc(r.b),a.rc(i.a))},t.\u0275prov=a.Zb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},faFZ:function(e,n,i){"use strict";i.d(n,"a",(function(){return y}));var a=i("tcrU"),r=i("cmeu"),l=i("SapW"),s=i("fXoL"),d=i("ofXK"),h=i("aceb"),u=i("3Pt+");function g(t,e){if(1&t&&(s.jc(0,"span"),s.jd(1),s.ic()),2&t){var n=e.$implicit,i=e.index,c=s.yc(2).$implicit,a=s.yc(2);s.Pb(1),s.md(" ",n," : ",c[a.copyHeaderKeys[i]]," , ")}}function p(t,e){if(1&t&&(s.jc(0,"th"),s.jd(1),s.ic()),2&t){var n=e.$implicit;s.Pb(1),s.kd(n)}}function b(t,e){if(1&t&&(s.jc(0,"td"),s.jd(1),s.ic()),2&t){var n=e.$implicit,i=s.yc().$implicit;s.Pb(1),s.kd(i[n])}}function f(t,e){if(1&t&&(s.jc(0,"tr"),s.hd(1,b,2,1,"td",6),s.ic()),2&t){var n=e.index,i=s.yc(4);s.ed("background",n%2==0?"#ffffff":"#f2f2f2"),s.Pb(1),s.Hc("ngForOf",i.headerArray)}}function m(t,e){if(1&t&&(s.jc(0,"div",8),s.jc(1,"div",9),s.jc(2,"div",10),s.jc(3,"h5",11),s.hd(4,g,2,2,"span",6),s.ic(),s.ic(),s.jc(5,"table",12),s.jc(6,"tr"),s.hd(7,p,2,1,"th",6),s.ic(),s.hd(8,f,2,3,"tr",13),s.ic(),s.ic(),s.ic()),2&t){var n=s.yc().$implicit,i=s.yc(2);s.Pb(4),s.Hc("ngForOf",i.headerKeys),s.Pb(3),s.Hc("ngForOf",i.headers),s.Pb(1),s.Hc("ngForOf",n.list)}}function v(t,e){if(1&t&&(s.hc(0),s.hd(1,m,9,3,"div",7),s.gc()),2&t){var n=e.$implicit;s.Pb(1),s.Hc("ngIf",n.list&&n.list.length)}}function P(t,e){if(1&t&&(s.jc(0,"div",2),s.jc(1,"div",3),s.jc(2,"div",4),s.jc(3,"span"),s.jc(4,"h3"),s.jd(5,"PENDING REPORT"),s.ic(),s.jc(6,"span",5),s.jd(7),s.zc(8,"date"),s.ic(),s.ic(),s.ic(),s.ic(),s.hd(9,v,2,1,"ng-container",6),s.ec(10,"br"),s.ec(11,"br"),s.ic()),2&t){var n=s.yc();s.Pb(7),s.kd(s.Bc(8,2,n.currentDate,"dd/MM/yyyy")),s.Pb(2),s.Hc("ngForOf",n.shortReport)}}var y=function(){var e=function(){function e(t,n,i){c(this,e),this.stockService=t,this.exportService=n,this.datepipe=i,this.currentDate=new Date,this.shortReport=[],this.headerArray=[],this.headerKeys=[],this.copyHeaderKeys=[]}return o(e,[{key:"ngOnInit",value:function(){this.maxDate=new Date(this.currentDate.getFullYear(),this.currentDate.getMonth(),this.currentDate.getDate(),23,59),this.getShortReport()}},{key:"getShortReport",value:function(){if(this.shortReport&&this.shortReport.length){var e=/([A-Z])([A-Z])([a-z])|([a-z])([A-Z])/g;this.copyHeaderKeys=Object.keys(this.shortReport[0]);var n=[];if(this.copyHeaderKeys.forEach((function(t,i){n.push(t.replace(e,"$1$4 $2$3$5")),n[i]=n[i].charAt(0).toUpperCase()+n[i].slice(1)})),n=n.filter((function(t){return"List"!==t})),this.copyHeaderKeys=this.copyHeaderKeys.filter((function(t){return"list"!==t})),this.headerKeys=t(n),this.shortReport[0].list&&this.shortReport[0].list.length){var i=/([A-Z])([A-Z])([a-z])|([a-z])([A-Z])/g;this.headerArray=Object.keys(this.shortReport[0].list[0]);var c=[];this.headerArray.forEach((function(t,e){c.push(t.replace(i,"$1$4 $2$3$5")),c[e]=c[e].charAt(0).toUpperCase()+c[e].slice(1)})),this.headers=[].concat(c)}}this.printReport()}},{key:"printReport",value:function(){var t=this,e=new a.PrintDocument({title:""});e.append('<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/paper-css/0.3.0/paper.css">'),e.append('<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">'),e.append('<link href="https://cdn.grapecity.com/wijmo/5.latest/styles/wijmo.min.css" rel="stylesheet">');var n=setInterval((function(){var i=document.getElementById("shortReport");null!=i&&(e.append(i),clearInterval(n),setTimeout((function(){e.print(),t.shortReport=[]}),1e3))}),10)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(s.dc(l.a),s.dc(r.a),s.dc(d.e))},e.\u0275cmp=s.Xb({type:e,selectors:[["ngx-report"]],inputs:{shortReport:"shortReport"},decls:5,vars:1,consts:[["stockReportForm","ngForm"],["id","shortReport","class","print-body",4,"ngIf"],["id","shortReport",1,"print-body"],[1,"row","report-header"],[1,"col-md-12","print-layout-report"],[1,"font-20"],[4,"ngFor","ngForOf"],["class","mb-5",4,"ngIf"],[1,"mb-5"],[1,"print-body"],[1,"invoice-no-heading",2,"width","fit-content"],[1,"bold-invoice",2,"font-size","18px"],[1,"print-layout-report","table-bordered","table-striped","table-process-fnt","width-100",2,"font-size","large"],[3,"background",4,"ngFor","ngForOf"]],template:function(t,e){1&t&&(s.jc(0,"nb-card"),s.jc(1,"nb-card-body"),s.jc(2,"form",null,0),s.hd(4,P,12,5,"div",1),s.ic(),s.ic(),s.ic()),2&t&&(s.Pb(4),s.Hc("ngIf",e.shortReport&&e.shortReport.length>0))},directives:[h.u,h.t,u.x,u.m,u.n,d.n,d.m],pipes:[d.e],styles:[".trs[_ngcontent-%COMP%]:nth-of-type(2n){background-color:#f2f2f2}"]}),e}()}}])}();