!function(){function t(t){return function(t){if(Array.isArray(t))return n(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||e(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){if(t){if("string"==typeof t)return n(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(t,e):void 0}}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function c(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"/p2c":function(n,i,a){"use strict";a.r(i),a.d(i,"GenerateInvoiceModule",(function(){return Xe}));var r,d=a("ofXK"),l=a("tyNb"),s=a("dmB0"),p=a("mrSG"),g=a("1G5W"),h=a("XNiG"),u=a("O1SP"),f=a("8tQ5"),v=a("tA+f"),b=a("RWgp"),m=a("8k+d"),j=a("4/8P"),P=a("tcrU"),M=function t(){o(this,t)},y=function t(){o(this,t),this.totalMtr=0,this.totalFMtr=0,this.shrinkage=0,this.lotDataLength=0,this.calculationDone=!1},C=function t(){o(this,t)},O=a("2Vo4"),x=a("fXoL"),_=a("tk/3"),I=((r=function(){function t(e,n,i){o(this,t),this.router=e,this.httpClient=n,this.commonService=i,this.isPrinting=!1,this.isExport=!0,this.isPrint=!1,this.pdfContent=new O.a("")}return c(t,[{key:"printDocument",value:function(t,e,n){this.isPrinting=!0,n?this.router.navigate(["/export/invoice"]):(this.isExport=!1,this.isPrint=!0,this.router.navigate(["/",{outlets:{print:["print",t,e.join()]}}]))}},{key:"onDataReady",value:function(){var t=this;setTimeout((function(){window.print(),t.isPrinting=!1,t.router.navigate([{outlets:{print:null}}])}))}},{key:"getInvoiceByNoToPrint",value:function(t){return this.httpClient.get(this.commonService.envUrl()+"api/dispatch/getPartyWithQualityDispatchBy/"+t)}},{key:"getInvoiceByNoToPrintWithPchallan",value:function(t){return this.httpClient.get(this.commonService.envUrl()+"api/dispatch/getPChallanPartyWithQualityDispatchBy/"+t)}},{key:"getInvoiceByBatchAndStock",value:function(t){return this.httpClient.post(this.commonService.envUrl()+"api/dispatch/get/receipt/getPartyWithQualityDispatchByPChallanAndStock/",t)}}]),t}()).\u0275fac=function(t){return new(t||r)(x.rc(l.c),x.rc(_.b),x.rc(j.a))},r.\u0275prov=x.Zb({token:r,factory:r.\u0275fac,providedIn:"root"}),r),w=a("5eHb"),k=a("1kSV");function D(t,e){if(1&t&&(x.jc(0,"td",59),x.jc(1,"b"),x.jd(2),x.zc(3,"uppercase"),x.zc(4,"slice"),x.ic(),x.ic()),2&t){var n=x.yc().$implicit;x.Pb(2),x.kd(x.Ac(3,1,x.Cc(4,3,n.qualityId,0,20)))}}function S(t,e){1&t&&x.ec(0,"td")}function F(t,e){if(1&t&&(x.jc(0,"tr"),x.jc(1,"td"),x.jc(2,"b"),x.jd(3),x.ic(),x.ic(),x.hd(4,D,5,7,"td",76),x.hd(5,S,1,0,"td",0),x.jc(6,"td"),x.jc(7,"b"),x.jd(8),x.ic(),x.ic(),x.jc(9,"td"),x.jc(10,"b"),x.jd(11),x.ic(),x.ic(),x.jc(12,"td"),x.jc(13,"b"),x.jd(14),x.ic(),x.ic(),x.jc(15,"td",55),x.jc(16,"b"),x.jd(17),x.zc(18,"number"),x.ic(),x.ic(),x.jc(19,"td",55),x.jc(20,"b"),x.jd(21),x.ic(),x.ic(),x.jc(22,"td",55),x.jc(23,"b"),x.jd(24),x.zc(25,"number"),x.ic(),x.ic(),x.jc(26,"td",55),x.jc(27,"b"),x.jd(28),x.zc(29,"number"),x.ic(),x.ic(),x.jc(30,"td",55),x.jc(31,"b"),x.jd(32),x.zc(33,"number"),x.ic(),x.ic(),x.ic()),2&t){var n=e.$implicit,i=e.index;x.Pb(3),x.kd(i+1),x.Pb(1),x.Hc("ngIf",n.qualityName),x.Pb(1),x.Hc("ngIf",!n.qualityName),x.Pb(3),x.kd(n.hsn),x.Pb(3),x.kd(n.pchallanRef),x.Pb(3),x.kd(n.batchId),x.Pb(3),x.kd(x.Bc(18,11,n.totalMtr,"1.2-2")),x.Pb(4),x.kd(n.pcs),x.Pb(3),x.kd(x.Bc(25,14,n.finishMtr,"1.2-2")),x.Pb(4),x.kd(x.Bc(29,17,n.rate,"1.2-2")),x.Pb(4),x.kd(x.Bc(33,20,n.amt,"1.2-2"))}}function A(t,e){if(1&t&&(x.jc(0,"tr"),x.jc(1,"td",59),x.jc(2,"b"),x.jd(3,"CGST: @2.5%"),x.ic(),x.ic(),x.jc(4,"td",55),x.jc(5,"b"),x.jd(6),x.zc(7,"number"),x.ic(),x.ic(),x.ic()),2&t){var n=x.yc(2).$implicit;x.Pb(6),x.kd(x.Bc(7,1,n.cgst,"1.2-2"))}}function L(t,e){if(1&t&&(x.jc(0,"tr"),x.jc(1,"td",59),x.jc(2,"b"),x.jd(3,"SGST: @2.5%"),x.ic(),x.ic(),x.jc(4,"td",55),x.jc(5,"b"),x.jd(6),x.zc(7,"number"),x.ic(),x.ic(),x.ic()),2&t){var n=x.yc(2).$implicit;x.Pb(6),x.kd(x.Bc(7,1,n.sgst,"1.2-2"))}}function N(t,e){if(1&t&&(x.jc(0,"tr"),x.jc(1,"td",59),x.jc(2,"b"),x.jd(3,"IGST: @5%"),x.ic(),x.ic(),x.jc(4,"td",55),x.jc(5,"b"),x.jd(6),x.zc(7,"number"),x.ic(),x.ic(),x.ic()),2&t){var n=x.yc(2).$implicit;x.Pb(6),x.kd(x.Bc(7,1,n.igst,"1.2-2"))}}function H(t,e){1&t&&(x.jc(0,"th",81),x.jc(1,"b"),x.jd(2,"GryMtr"),x.ic(),x.ic())}function z(t,e){1&t&&(x.jc(0,"th",81),x.jc(1,"b"),x.jd(2,"GryWt"),x.ic(),x.ic())}function T(t,e){1&t&&(x.jc(0,"th",81),x.jc(1,"b"),x.jd(2,"FinMtr"),x.ic(),x.ic())}function q(t,e){1&t&&(x.jc(0,"th",81),x.jc(1,"b"),x.jd(2,"FinWt"),x.ic(),x.ic())}function E(t,e){if(1&t&&(x.jc(0,"tr"),x.jc(1,"td",86),x.jd(2),x.ic(),x.jc(3,"td",86),x.jd(4),x.zc(5,"number"),x.ic(),x.jc(6,"td",86),x.jd(7),x.zc(8,"number"),x.ic(),x.ic()),2&t){var n=e.$implicit,i=e.index;x.Pb(2),x.ld(" ",n.srNo?n.srNo:i+1,""),x.Pb(2),x.kd("-"==n.mtr?"-":x.Bc(5,3,n.mtr,"1.2-2")),x.Pb(3),x.ld(" ",x.Bc(8,6,n.finishMtr,"1.2-2"),"")}}function W(t,e){if(1&t&&(x.jc(0,"div",77),x.jc(1,"div"),x.jc(2,"table",78),x.jc(3,"tr"),x.jc(4,"th",59),x.jc(5,"b"),x.jd(6),x.ic(),x.ic(),x.ic(),x.ic(),x.jc(7,"div",79),x.jc(8,"table",80),x.jc(9,"thead"),x.jc(10,"tr"),x.jc(11,"th",81),x.jc(12,"b"),x.jd(13,"Cops"),x.ic(),x.ic(),x.hd(14,H,3,0,"th",82),x.hd(15,z,3,0,"th",82),x.hd(16,T,3,0,"th",82),x.hd(17,q,3,0,"th",82),x.ic(),x.ic(),x.jc(18,"tbody"),x.hd(19,E,9,9,"tr",2),x.ic(),x.jc(20,"tfoot",83),x.jc(21,"tr"),x.jc(22,"th",84),x.jc(23,"b"),x.jd(24),x.ic(),x.ic(),x.jc(25,"th",84),x.jc(26,"b"),x.jd(27),x.ic(),x.ic(),x.jc(28,"th",84),x.jc(29,"b"),x.jd(30),x.ic(),x.ic(),x.ic(),x.jc(31,"tr"),x.jc(32,"th",85),x.jc(33,"b"),x.jd(34),x.ic(),x.ic(),x.ic(),x.ic(),x.ic(),x.ic(),x.ic(),x.ic()),2&t){var n=e.$implicit;x.Pb(6),x.md("LOT NO: ",n.pchallanRef," --- ",n.batchId,""),x.Pb(8),x.Hc("ngIf","meter"==n.billingUnit||!n.billingUnit),x.Pb(1),x.Hc("ngIf","weight"==n.billingUnit),x.Pb(1),x.Hc("ngIf","meter"==n.billingUnit||!n.billingUnit),x.Pb(1),x.Hc("ngIf","weight"==n.billingUnit),x.Pb(2),x.Hc("ngForOf",n.batchDataList),x.Pb(5),x.kd(n.lotDataLength),x.Pb(3),x.kd(n.totalMtr),x.Pb(3),x.kd(n.totalFMtr),x.Pb(4),x.ld("Sh_% : ",n.shrinkage,"")}}function B(t,e){if(1&t&&(x.jc(0,"div",6),x.jc(1,"section",7),x.jc(2,"div",8),x.jc(3,"div",9),x.jc(4,"div",10),x.jc(5,"div",11),x.jc(6,"b"),x.jd(7,"TAX INVOICE CUM DELIVERY CHALLAN"),x.ic(),x.ic(),x.jc(8,"div",12),x.jc(9,"strong",13),x.jd(10),x.ic(),x.ic(),x.ic(),x.ic(),x.jc(11,"div",14),x.jc(12,"div",9),x.jc(13,"div",15),x.jc(14,"div",16),x.jc(15,"div",17),x.jc(16,"div",18),x.jc(17,"div",19),x.jc(18,"div",10),x.jc(19,"p",20),x.jc(20,"b"),x.jd(21,"GLORY DYEING MILLS PVT. LTD."),x.ic(),x.ic(),x.ic(),x.jc(22,"div",10),x.jc(23,"p",21),x.jd(24," FORMALLY KNOWN AS : MUKESH PROCESSORS PVT. LTD. "),x.ic(),x.ic(),x.jc(25,"div",10),x.jc(26,"p",22),x.jd(27,"A-31, G.E.T.P, (Kala Ghoda), Palsana, Surat E-Mail : dyeing@gloryfab.com "),x.ic(),x.ic(),x.jc(28,"div",10),x.jc(29,"p",23),x.jd(30,"GSTIN :- 24AAFCM5028A1Z1 Place Of Supply : Surat"),x.ic(),x.ic(),x.ic(),x.ic(),x.ic(),x.ic(),x.jc(31,"div",24),x.jc(32,"div",25),x.ec(33,"img",26),x.ic(),x.ic(),x.ic(),x.ic(),x.jc(34,"div",27),x.jc(35,"div",28),x.jc(36,"div",29),x.jc(37,"div",30),x.jc(38,"div",10),x.jc(39,"div",31),x.jc(40,"b",32),x.jc(41,"span"),x.jd(42,"Party Name"),x.ic(),x.ic(),x.ic(),x.jc(43,"div",33),x.jc(44,"b"),x.jd(45),x.zc(46,"uppercase"),x.ic(),x.ic(),x.ic(),x.jc(47,"div",10),x.jc(48,"div",34),x.jc(49,"b",32),x.jc(50,"span"),x.jd(51,"Address"),x.ic(),x.ic(),x.ic(),x.jc(52,"div",33),x.jd(53),x.zc(54,"uppercase"),x.ic(),x.ic(),x.jc(55,"div",10),x.jc(56,"div",34),x.jc(57,"b",32),x.jc(58,"span"),x.jd(59,"GSTIN"),x.ic(),x.ic(),x.ic(),x.jc(60,"div",33),x.jc(61,"b",35),x.jd(62),x.ic(),x.jc(63,"div",36),x.jc(64,"div",37),x.jc(65,"b",38),x.jc(66,"span"),x.jd(67,"Phn No:"),x.ic(),x.ic(),x.ic(),x.jc(68,"div",39),x.jd(69),x.ic(),x.ic(),x.ic(),x.ic(),x.ic(),x.jc(70,"div",40),x.jc(71,"div",10),x.jc(72,"div",41),x.jc(73,"b",38),x.jc(74,"span"),x.jd(75,"Invoice"),x.ic(),x.ic(),x.ic(),x.jc(76,"div",42),x.jc(77,"b"),x.jd(78),x.ic(),x.ic(),x.ic(),x.jc(79,"div",10),x.jc(80,"div",41),x.jc(81,"b",38),x.jc(82,"span"),x.jd(83,"Date"),x.ic(),x.ic(),x.ic(),x.jc(84,"div",42),x.jd(85),x.zc(86,"date"),x.ic(),x.ic(),x.ic(),x.ic(),x.jc(87,"div",43),x.jc(88,"table",44),x.jc(89,"tr"),x.jc(90,"th",45),x.jc(91,"b"),x.jd(92,"Sr."),x.ic(),x.ic(),x.jc(93,"th",46),x.jc(94,"b"),x.jd(95,"Quality"),x.ic(),x.ic(),x.jc(96,"th",47),x.jc(97,"b"),x.jd(98,"HSN"),x.ic(),x.ic(),x.jc(99,"th",48),x.jc(100,"b"),x.jd(101,"P. Chl No"),x.ic(),x.ic(),x.jc(102,"th",49),x.jc(103,"b"),x.jd(104,"Lot No"),x.ic(),x.ic(),x.jc(105,"th",50),x.jc(106,"b"),x.jd(107,"Grey "),x.ic(),x.jc(108,"span"),x.jd(109,"(Mtr/Kg)"),x.ic(),x.ic(),x.jc(110,"th",51),x.jc(111,"b"),x.jd(112,"PCs"),x.ic(),x.ic(),x.jc(113,"th",50),x.jc(114,"b"),x.jd(115,"Finish "),x.ic(),x.jc(116,"span"),x.jd(117,"(Mtr/Kg)"),x.ic(),x.ic(),x.jc(118,"th",52),x.jc(119,"b"),x.jd(120,"Rate"),x.ic(),x.ic(),x.jc(121,"th",53),x.jc(122,"b"),x.jd(123,"Amount"),x.ic(),x.ic(),x.ic(),x.hd(124,F,34,23,"tr",2),x.jc(125,"tr",54),x.ec(126,"td"),x.ec(127,"td"),x.ec(128,"td"),x.ec(129,"td"),x.jc(130,"td"),x.jd(131," TOTAL "),x.ic(),x.jc(132,"td",55),x.jd(133),x.zc(134,"number"),x.ic(),x.jc(135,"td",55),x.jd(136),x.ic(),x.jc(137,"td",55),x.jd(138),x.zc(139,"number"),x.ic(),x.ec(140,"td"),x.jc(141,"td",55),x.jd(142),x.zc(143,"number"),x.ic(),x.ic(),x.ic(),x.ic(),x.jc(144,"div",56),x.jc(145,"div",10),x.jc(146,"div",57),x.jc(147,"table"),x.jc(148,"th"),x.jc(149,"b"),x.jd(150,"Remark"),x.ic(),x.ic(),x.jc(151,"tr"),x.jc(152,"td"),x.jc(153,"span",58),x.jd(154),x.ic(),x.ic(),x.ic(),x.ic(),x.ic(),x.ec(155,"div",57),x.jc(156,"div",57),x.jc(157,"table",44),x.jc(158,"tr"),x.jc(159,"td",59),x.jc(160,"b"),x.jd(161),x.ic(),x.ic(),x.jc(162,"td",55),x.jc(163,"b"),x.jd(164),x.zc(165,"number"),x.ic(),x.ic(),x.ic(),x.jc(166,"tr"),x.jc(167,"td",59),x.jc(168,"b"),x.jd(169," Taxable Amount"),x.ic(),x.ic(),x.jc(170,"td",55),x.jc(171,"b"),x.jd(172),x.zc(173,"number"),x.ic(),x.ic(),x.ic(),x.hd(174,A,8,4,"tr",0),x.hd(175,L,8,4,"tr",0),x.hd(176,N,8,4,"tr",0),x.jc(177,"tr"),x.jc(178,"td",60),x.jc(179,"b"),x.jd(180,"Net Amount"),x.ic(),x.ic(),x.jc(181,"td",61),x.jc(182,"b"),x.jd(183),x.zc(184,"number"),x.ic(),x.ic(),x.ic(),x.ic(),x.ic(),x.ic(),x.ic(),x.jc(185,"div",62),x.hd(186,W,35,11,"div",63),x.ic(),x.jc(187,"div",64),x.jc(188,"div",10),x.jc(189,"div",65),x.jc(190,"div",66),x.jc(191,"div",10),x.jc(192,"div",57),x.jc(193,"div",67),x.jc(194,"b"),x.jd(195,"BANK NAME"),x.ic(),x.ic(),x.ic(),x.jc(196,"div",68),x.jc(197,"div",67),x.jd(198," : HDFC BANK LTD.. "),x.ic(),x.ic(),x.jc(199,"div",57),x.jc(200,"div",67),x.jc(201,"b"),x.jd(202," A/c No."),x.ic(),x.ic(),x.ic(),x.jc(203,"div",68),x.jc(204,"div",67),x.jd(205," : 59227111222333 "),x.ic(),x.ic(),x.jc(206,"div",57),x.jc(207,"div",67),x.jc(208,"b"),x.jd(209,"Branch IFS Code"),x.ic(),x.ic(),x.ic(),x.jc(210,"div",68),x.jc(211,"div",67),x.jd(212," : HDFC0001706 , SACHIN "),x.ic(),x.ic(),x.ic(),x.ic(),x.ic(),x.jc(213,"div",69),x.jc(214,"div",70),x.jc(215,"b"),x.jd(216,"GLORY DYEING MILLS PVT. LTD."),x.ic(),x.ic(),x.ic(),x.ic(),x.jc(217,"div",71),x.jc(218,"div",72),x.jc(219,"div",73),x.jc(220,"b"),x.jd(221,"TERMS CONDITION :"),x.ic(),x.jc(222,"ul",74),x.jc(223,"li"),x.jd(224," 1. Goods once sold will not be taken back ."),x.ic(),x.jc(225,"li"),x.jd(226," 2. Our responsibility ceases once the goods is delivered to the carrier. "),x.ic(),x.jc(227,"li"),x.jd(228," 3. GST Payable on Reverse Charge : No"),x.ic(),x.jc(229,"li"),x.jd(230," 4. If any complaint regarding Goods/Bill kindly contact within 7 days, after that we are not responsible for anything."),x.ic(),x.ic(),x.ic(),x.ic(),x.jc(231,"div",69),x.jc(232,"div",75),x.jd(233,"Authorised Signatory"),x.ic(),x.ic(),x.ic(),x.ic(),x.ic(),x.ic(),x.ic(),x.ic(),x.ic(),x.ic()),2&t){var n=e.$implicit,i=x.yc().$implicit;x.Pb(10),x.kd(n),x.Pb(35),x.kd(x.Ac(46,21,i.partyName)),x.Pb(8),x.ld(" ",x.Ac(54,23,i.address)," "),x.Pb(9),x.kd(i.gst),x.Pb(7),x.ld(" ",i.contactNo," "),x.Pb(9),x.kd(i.invoiceNo),x.Pb(7),x.ld(" ",x.Bc(86,25,i.createdDate,"dd/MM/yyyy")," "),x.Pb(39),x.Hc("ngForOf",i.qualityList),x.Pb(9),x.ld(" ",x.Bc(134,28,i.totalMtr,"1.2-2")," "),x.Pb(3),x.ld(" ",i.totalPcs," "),x.Pb(2),x.ld(" ",x.Bc(139,31,i.totalFinishMtr,"1.2-2")," "),x.Pb(4),x.ld(" ",x.Bc(143,34,i.totalAmt,"1.2-2")," "),x.Pb(12),x.kd(i.remark),x.Pb(7),x.ld("Discount @",i.percentageDiscount,"%"),x.Pb(3),x.kd(x.Bc(165,37,i.discount,"1.2-2")),x.Pb(8),x.kd(x.Bc(173,40,i.taxAmt,"1.2-2")),x.Pb(2),x.Hc("ngIf","Gujarat"==i.state),x.Pb(1),x.Hc("ngIf","Gujarat"==i.state),x.Pb(1),x.Hc("ngIf","Gujarat"!==i.state),x.Pb(7),x.kd(x.Bc(184,43,i.netAmt,"1.2-2")),x.Pb(3),x.Hc("ngForOf",i.batchWithGrList)}}function R(t,e){if(1&t&&(x.jc(0,"div"),x.jc(1,"section",3,4),x.hd(3,B,234,46,"div",5),x.ic(),x.ic()),2&t){var n=e.index,i=x.yc(2);x.Pb(1),x.Jc("id","printpdf",n,""),x.Pb(2),x.Hc("ngForOf",i.copyType)}}function $(t,e){if(1&t&&(x.jc(0,"div"),x.hd(1,R,4,2,"div",2),x.ic()),2&t){var n=x.yc();x.Pb(1),x.Hc("ngForOf",n.printInvoiceData)}}function G(t,e){if(1&t&&(x.jc(0,"td"),x.jd(1),x.zc(2,"uppercase"),x.zc(3,"slice"),x.ic()),2&t){var n=x.yc().$implicit;x.Pb(1),x.ld(" ",x.Ac(2,1,x.Cc(3,3,n.qualityId,0,20))," ")}}function X(t,e){1&t&&x.ec(0,"td")}function U(t,e){if(1&t&&(x.jc(0,"tr"),x.jc(1,"td"),x.jd(2),x.ic(),x.hd(3,G,4,7,"td",0),x.hd(4,X,1,0,"td",0),x.jc(5,"td"),x.jd(6),x.ic(),x.jc(7,"td"),x.jd(8),x.ic(),x.jc(9,"td"),x.jd(10),x.ic(),x.jc(11,"td"),x.jd(12),x.zc(13,"number"),x.ic(),x.jc(14,"td"),x.jd(15),x.ic(),x.jc(16,"td"),x.jd(17),x.zc(18,"number"),x.ic(),x.jc(19,"td"),x.jd(20),x.ic(),x.jc(21,"td"),x.jd(22),x.ic(),x.ic()),2&t){var n=e.$implicit,i=e.index;x.Pb(2),x.ld(" ",i+1," "),x.Pb(1),x.Hc("ngIf",n.qualityName),x.Pb(1),x.Hc("ngIf",!n.qualityName),x.Pb(2),x.ld(" ",n.hsn," "),x.Pb(2),x.ld(" ",n.pchallanRef," "),x.Pb(2),x.ld(" ",n.batchId," "),x.Pb(2),x.ld(" ",x.Bc(13,11,n.totalMtr,"1.2-2")," "),x.Pb(3),x.ld(" ",n.pcs," "),x.Pb(2),x.ld(" ",x.Bc(18,14,n.finishMtr,"1.2-2")," "),x.Pb(3),x.ld(" ",n.rate," "),x.Pb(2),x.ld(" ",n.amt," ")}}function V(t,e){if(1&t&&(x.jc(0,"tr"),x.jc(1,"td",59),x.jc(2,"b"),x.jd(3,"CGST: @2.5%"),x.ic(),x.ic(),x.jc(4,"td",55),x.jc(5,"b"),x.jd(6),x.zc(7,"number"),x.ic(),x.ic(),x.ic()),2&t){var n=x.yc().$implicit;x.Pb(6),x.kd(x.Bc(7,1,n.cgst,"1.2-2"))}}function K(t,e){if(1&t&&(x.jc(0,"tr"),x.jc(1,"td",59),x.jc(2,"b"),x.jd(3,"SGST: @2.5%"),x.ic(),x.ic(),x.jc(4,"td",55),x.jc(5,"span"),x.jd(6),x.zc(7,"number"),x.ic(),x.ic(),x.ic()),2&t){var n=x.yc().$implicit;x.Pb(6),x.kd(x.Bc(7,1,n.sgst,"1.2-2"))}}function Q(t,e){if(1&t&&(x.jc(0,"tr"),x.jc(1,"td",59),x.jc(2,"b"),x.jd(3,"IGST: @5%"),x.ic(),x.ic(),x.jc(4,"td",55),x.jc(5,"b"),x.jd(6),x.zc(7,"number"),x.ic(),x.ic(),x.ic()),2&t){var n=x.yc().$implicit;x.Pb(6),x.kd(x.Bc(7,1,n.igst,"1.2-2"))}}function Y(t,e){1&t&&(x.jc(0,"th",81),x.jc(1,"b"),x.jd(2,"GryMtr"),x.ic(),x.ic())}function Z(t,e){1&t&&(x.jc(0,"th",81),x.jc(1,"b"),x.jd(2,"GryWt"),x.ic(),x.ic())}function J(t,e){1&t&&(x.jc(0,"th",81),x.jc(1,"b"),x.jd(2,"FinMtr"),x.ic(),x.ic())}function tt(t,e){1&t&&(x.jc(0,"th",81),x.jc(1,"b"),x.jd(2,"FinWt"),x.ic(),x.ic())}function et(t,e){if(1&t&&(x.jc(0,"tr"),x.jc(1,"td",86),x.jd(2),x.ic(),x.jc(3,"td",86),x.jd(4),x.ic(),x.jc(5,"td",86),x.jd(6),x.ic(),x.ic()),2&t){var n=e.$implicit,i=e.index;x.Pb(2),x.ld(" ",n.srNo?n.srNo:i+1,""),x.Pb(2),x.kd(n.mtr),x.Pb(2),x.kd(n.finishMtr)}}function nt(t,e){if(1&t&&(x.jc(0,"div",77),x.jc(1,"div"),x.jc(2,"table",78),x.jc(3,"tr"),x.jc(4,"th",59),x.jc(5,"b"),x.jd(6),x.ic(),x.ic(),x.ic(),x.ic(),x.jc(7,"div",79),x.jc(8,"table",80),x.jc(9,"thead"),x.jc(10,"tr"),x.jc(11,"th",81),x.jc(12,"b"),x.jd(13,"Cops"),x.ic(),x.ic(),x.hd(14,Y,3,0,"th",82),x.hd(15,Z,3,0,"th",82),x.hd(16,J,3,0,"th",82),x.hd(17,tt,3,0,"th",82),x.ic(),x.ic(),x.jc(18,"tbody",114),x.hd(19,et,7,3,"tr",2),x.ic(),x.jc(20,"tfoot",83),x.jc(21,"tr"),x.jc(22,"th",84),x.jc(23,"b"),x.jd(24),x.ic(),x.ic(),x.jc(25,"th",84),x.jc(26,"b"),x.jd(27),x.ic(),x.ic(),x.jc(28,"th",84),x.jc(29,"b"),x.jd(30),x.ic(),x.ic(),x.ic(),x.jc(31,"tr"),x.jc(32,"th",85),x.jc(33,"b"),x.jd(34),x.ic(),x.ic(),x.ic(),x.ic(),x.ic(),x.ic(),x.ic(),x.ic()),2&t){var n=e.$implicit;x.Pb(6),x.md("LOT NO: ",n.pchallanRef," --- ",n.batchId,""),x.Pb(8),x.Hc("ngIf","meter"==n.billingUnit||!n.billingUnit),x.Pb(1),x.Hc("ngIf","weight"==n.billingUnit),x.Pb(1),x.Hc("ngIf","meter"==n.billingUnit||!n.billingUnit),x.Pb(1),x.Hc("ngIf","weight"==n.billingUnit),x.Pb(2),x.Hc("ngForOf",n.batchDataList),x.Pb(5),x.kd(n.lotDataLength),x.Pb(3),x.kd(n.totalMtr),x.Pb(3),x.kd(n.totalFMtr),x.Pb(4),x.ld("Sh_% : ",n.shrinkage,"")}}function it(t,e){if(1&t&&(x.jc(0,"div",96),x.jc(1,"section",97,4),x.jc(3,"div",8),x.jc(4,"div",9),x.jc(5,"div",10),x.jc(6,"div",11),x.jc(7,"b"),x.jd(8,"TAX INVOICE CUM DELIVERY CHALLAN"),x.ic(),x.ic(),x.jc(9,"div",12),x.jc(10,"strong",13),x.jd(11,"Original/Duplicate/Triplicate"),x.ic(),x.ic(),x.ic(),x.ic(),x.jc(12,"div",14),x.jc(13,"div",9),x.jc(14,"div",15),x.jc(15,"div",16),x.jc(16,"div",17),x.jc(17,"div",18),x.jc(18,"div",19),x.jc(19,"div",10),x.jc(20,"p",98),x.jc(21,"b"),x.jd(22,"GLORY DYEING MILLS PVT. LTD."),x.ic(),x.ic(),x.ic(),x.jc(23,"div",10),x.jc(24,"p",22),x.jd(25," FORMALLY KNOWN AS : MUKESH PROCESSORS PVT. LTD. "),x.ic(),x.ic(),x.jc(26,"div",10),x.jc(27,"p",99),x.jd(28,"A-31, Eco Textile Park, (Kala Ghoda), Palsana, Surat E-Mail : varun@gloryfab.com "),x.ic(),x.ic(),x.jc(29,"div",10),x.jc(30,"p",99),x.jd(31,"GSTIN :- 24AAFCM5028A1Z1 Place Of Supply : Surat"),x.ic(),x.ic(),x.ic(),x.ic(),x.ic(),x.ic(),x.jc(32,"div",24),x.jc(33,"div",25),x.ec(34,"img",26),x.ic(),x.ic(),x.ic(),x.ic(),x.jc(35,"div",27),x.jc(36,"div",28),x.jc(37,"div",29),x.jc(38,"div",30),x.jc(39,"div",10),x.jc(40,"div",100),x.jc(41,"b",38),x.jc(42,"span"),x.jd(43,"Party Name"),x.ic(),x.ic(),x.ic(),x.jc(44,"div",101),x.jc(45,"b",38),x.jc(46,"span"),x.jd(47,":"),x.ic(),x.ic(),x.ic(),x.jc(48,"div",102),x.jc(49,"b"),x.jd(50),x.zc(51,"uppercase"),x.ic(),x.ic(),x.ic(),x.jc(52,"div",10),x.jc(53,"div",100),x.jc(54,"b",38),x.jc(55,"span"),x.jd(56,"Address"),x.ic(),x.ic(),x.ic(),x.jc(57,"div",101),x.jc(58,"b",38),x.jc(59,"span"),x.jd(60,":"),x.ic(),x.ic(),x.ic(),x.jc(61,"div",102),x.jd(62),x.zc(63,"uppercase"),x.ic(),x.ic(),x.jc(64,"div",10),x.jc(65,"div",103),x.jc(66,"b",38),x.jc(67,"span"),x.jd(68,"GSTIN"),x.ic(),x.ic(),x.ic(),x.jc(69,"div",104),x.jc(70,"b",32),x.jc(71,"span"),x.jd(72,":"),x.ic(),x.ic(),x.ic(),x.jc(73,"div",105),x.jc(74,"b",69),x.jd(75),x.ic(),x.jc(76,"div",36),x.jc(77,"div",106),x.jc(78,"b",38),x.jc(79,"span"),x.jd(80,"Phn No:"),x.ic(),x.ic(),x.ic(),x.jc(81,"div",65),x.jd(82),x.ic(),x.ic(),x.ic(),x.ic(),x.ic(),x.jc(83,"div",40),x.jc(84,"div",10),x.jc(85,"div",100),x.jc(86,"b",38),x.jc(87,"span"),x.jd(88,"Invoice"),x.ic(),x.ic(),x.ic(),x.jc(89,"div",101),x.jc(90,"b",38),x.jc(91,"span"),x.jd(92,":"),x.ic(),x.ic(),x.ic(),x.jc(93,"div",107),x.jd(94),x.ic(),x.ic(),x.jc(95,"div",10),x.jc(96,"div",100),x.jc(97,"b",38),x.jc(98,"span"),x.jd(99,"Date"),x.ic(),x.ic(),x.ic(),x.jc(100,"div",101),x.jc(101,"b",38),x.jc(102,"span"),x.jd(103,":"),x.ic(),x.ic(),x.ic(),x.jc(104,"div",107),x.jd(105),x.zc(106,"date"),x.ic(),x.ic(),x.ic(),x.ic(),x.jc(107,"div",43),x.jc(108,"table",44),x.jc(109,"tr"),x.jc(110,"th",108),x.jc(111,"b"),x.jd(112,"Sr."),x.ic(),x.ic(),x.jc(113,"th",109),x.jc(114,"b"),x.jd(115,"Quality"),x.ic(),x.ic(),x.jc(116,"th"),x.jc(117,"b"),x.jd(118,"HSN"),x.ic(),x.ic(),x.jc(119,"th"),x.jc(120,"b"),x.jd(121,"P. Chl No"),x.ic(),x.ic(),x.jc(122,"th"),x.jc(123,"b"),x.jd(124,"Lot No"),x.ic(),x.ic(),x.jc(125,"th",110),x.jc(126,"b"),x.jd(127,"Grey Mtr"),x.ic(),x.ic(),x.jc(128,"th",111),x.jc(129,"b"),x.jd(130,"PCs"),x.ic(),x.ic(),x.jc(131,"th",110),x.jc(132,"b"),x.jd(133,"Finish Mtr"),x.ic(),x.ic(),x.jc(134,"th"),x.jc(135,"b"),x.jd(136,"Rate"),x.ic(),x.ic(),x.jc(137,"th",112),x.jc(138,"b"),x.jd(139,"Amount"),x.ic(),x.ic(),x.ic(),x.hd(140,U,23,17,"tr",2),x.jc(141,"tr",54),x.ec(142,"td"),x.ec(143,"td"),x.ec(144,"td"),x.ec(145,"td"),x.jc(146,"td"),x.jd(147," TOTAL "),x.ic(),x.jc(148,"td"),x.jd(149),x.zc(150,"number"),x.ic(),x.jc(151,"td"),x.jd(152),x.ic(),x.jc(153,"td"),x.jd(154),x.zc(155,"number"),x.ic(),x.ec(156,"td"),x.jc(157,"td"),x.jd(158),x.ic(),x.ic(),x.ic(),x.ic(),x.jc(159,"div",56),x.jc(160,"div",10),x.jc(161,"div",57),x.jc(162,"table"),x.jc(163,"th"),x.jc(164,"b"),x.jd(165,"Remark"),x.ic(),x.ic(),x.jc(166,"tr"),x.jc(167,"td"),x.jc(168,"span",58),x.jd(169),x.ic(),x.ic(),x.ic(),x.ic(),x.ic(),x.ec(170,"div",57),x.jc(171,"div",57),x.jc(172,"table",44),x.jc(173,"tr"),x.jc(174,"td",59),x.jc(175,"b"),x.jd(176),x.ic(),x.ic(),x.jc(177,"td",55),x.jc(178,"b"),x.jd(179),x.zc(180,"number"),x.ic(),x.ic(),x.ic(),x.jc(181,"tr"),x.jc(182,"td",59),x.jc(183,"b"),x.jd(184," Taxable Amount"),x.ic(),x.ic(),x.jc(185,"td",55),x.jc(186,"b"),x.jd(187),x.zc(188,"number"),x.ic(),x.ic(),x.ic(),x.hd(189,V,8,4,"tr",0),x.hd(190,K,8,4,"tr",0),x.hd(191,Q,8,4,"tr",0),x.jc(192,"tr"),x.jc(193,"td",59),x.jc(194,"b"),x.jd(195,"Net Amount"),x.ic(),x.ic(),x.jc(196,"td",55),x.jc(197,"b"),x.jd(198),x.zc(199,"number"),x.ic(),x.ic(),x.ic(),x.ic(),x.ic(),x.ic(),x.ic(),x.jc(200,"div",113),x.hd(201,nt,35,11,"div",63),x.ic(),x.jc(202,"div",64),x.jc(203,"div",10),x.jc(204,"div",65),x.jc(205,"div",66),x.jc(206,"div",10),x.jc(207,"div",57),x.jc(208,"div",67),x.jc(209,"b"),x.jd(210,"BANK NAME"),x.ic(),x.ic(),x.ic(),x.jc(211,"div",68),x.jc(212,"div",67),x.jd(213," : HDFC BANK LTD. "),x.ic(),x.ic(),x.jc(214,"div",57),x.jc(215,"div",67),x.jc(216,"b"),x.jd(217," A/c No."),x.ic(),x.ic(),x.ic(),x.jc(218,"div",68),x.jc(219,"div",67),x.jd(220," : 59227111222333 "),x.ic(),x.ic(),x.jc(221,"div",57),x.jc(222,"div",67),x.jc(223,"b"),x.jd(224,"Branch IFS Code"),x.ic(),x.ic(),x.ic(),x.jc(225,"div",68),x.jc(226,"div",67),x.jd(227," : HDFC0001706 , SACHIN "),x.ic(),x.ic(),x.ic(),x.ic(),x.ic(),x.jc(228,"div",69),x.jc(229,"div",70),x.jc(230,"b"),x.jd(231,"GLORY DYEING MILLS PVT. LTD."),x.ic(),x.ic(),x.ic(),x.ic(),x.jc(232,"div",10),x.jc(233,"div",65),x.jc(234,"div",73),x.jc(235,"b"),x.jd(236,"TERMS CONDITION :"),x.ic(),x.jc(237,"ul",74),x.jc(238,"li"),x.jd(239," 1. Goods once sold will not be taken back ."),x.ic(),x.jc(240,"li"),x.jd(241," 2. Our responsibility ceases once the goods is delivered to the carrier. "),x.ic(),x.jc(242,"li"),x.jd(243," 3. GST Payable on Reverse Charge : No"),x.ic(),x.jc(244,"li"),x.jd(245," 4. If any complaint regarding Goods/Bill kindly contact within 7 days, after that we are not responsible for anything."),x.ic(),x.ic(),x.ic(),x.ic(),x.jc(246,"div",69),x.jc(247,"div",75),x.jd(248,"Authorised Signatory"),x.ic(),x.ic(),x.ic(),x.ic(),x.ic(),x.ic(),x.ic(),x.ic(),x.ic(),x.ic()),2&t){var n=e.$implicit,i=e.index;x.Pb(1),x.Jc("id","printpdf",i,""),x.Pb(49),x.kd(x.Ac(51,21,n.partyName)),x.Pb(12),x.ld(" ",x.Ac(63,23,n.address)," "),x.Pb(13),x.kd(n.gst),x.Pb(7),x.ld(" ",n.contactNo," "),x.Pb(12),x.ld(" ",n.invoiceNo," "),x.Pb(11),x.ld(" ",x.Bc(106,25,n.createdDate,"dd/MM/yyyy")," "),x.Pb(35),x.Hc("ngForOf",n.qualityList),x.Pb(9),x.ld(" ",x.Bc(150,28,n.totalMtr,"1.2-2")," "),x.Pb(3),x.ld(" ",n.totalPcs," "),x.Pb(2),x.ld(" ",x.Bc(155,31,n.totalFinishMtr,"1.2-2")," "),x.Pb(4),x.ld(" ",n.totalAmt," "),x.Pb(11),x.kd(n.remark),x.Pb(7),x.ld("Discount @",n.percentageDiscount,"%"),x.Pb(3),x.kd(x.Bc(180,34,n.discount,"1.2-2")),x.Pb(8),x.kd(x.Bc(188,37,n.taxAmt,"1.2-2")),x.Pb(2),x.Hc("ngIf","Gujarat"==n.state),x.Pb(1),x.Hc("ngIf","Gujarat"==n.state),x.Pb(1),x.Hc("ngIf","Gujarat"!==n.state),x.Pb(7),x.kd(x.Bc(199,40,n.netAmt,"1.2-2")),x.Pb(3),x.Hc("ngForOf",n.batchWithGrList)}}function ct(t,e){if(1&t){var n=x.kc();x.jc(0,"div",87),x.jc(1,"div",88),x.jc(2,"p",89),x.jc(3,"b"),x.jd(4,"Invoice Preview"),x.ic(),x.ic(),x.jc(5,"button",90),x.uc("click",(function(){return x.Xc(n),x.yc().activeModal.close(!1)})),x.jc(6,"span",91),x.jd(7,"\xd7"),x.ic(),x.ic(),x.ic(),x.hd(8,it,249,43,"div",92),x.jc(9,"div",93),x.jc(10,"button",94),x.uc("click",(function(){return x.Xc(n),x.yc().onCancel()})),x.jd(11,"Cancel"),x.ic(),x.jc(12,"button",95),x.uc("click",(function(){return x.Xc(n),x.yc().onSave()})),x.jd(13,"Save"),x.ic(),x.jc(14,"button",95),x.uc("click",(function(){return x.Xc(n),x.yc().onPrint()})),x.jd(15,"Save & Print"),x.ic(),x.ic(),x.ic()}if(2&t){var i=x.yc();x.Pb(8),x.Hc("ngForOf",i.printInvoiceData)}}var ot,at,rt=((ot=function(){function t(e,n,i,c,a,r){o(this,t),this.datePipe=e,this.toastr=n,this.printService=i,this.router=c,this._route=a,this.activeModal=r,this.printInvoiceFlag=!1,this.previewFlag=!1,this.rowd=[{},{},{}],this.lotRowd=[{},{},{},{}],this.col=[{},{},{},{},{},{},{},{},{},{}],this.invoiceData=[],this.copyType=["Original","Duplicate","Triplicate"],this.destroy$=new h.a}return c(t,[{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}},{key:"ngOnInit",value:function(){var t=this,e=this._route.snapshot.queryParamMap.get("myArray"),n=this._route.snapshot.queryParamMap.get("invoice");this.invoiceIds=null===e?new Array:JSON.parse(e),this.finalInvoice?this.printService.getInvoiceByBatchAndStock(this.finalInvoice).pipe(Object(g.a)(this.destroy$)).subscribe((function(e){e.success&&(t.printInvoiceData=e.data,t.start())}),(function(t){})):n?this.printService.getInvoiceByNoToPrintWithPchallan(n).pipe(Object(g.a)(this.destroy$)).subscribe((function(e){e.success&&(t.printInvoiceData=e.data,t.start(),t.print())}),(function(t){})):this.start()}},{key:"start",value:function(){var t=this;if(this.invoiceIds.length>0)!function(){t.myDate=new Date,t.myDate=t.datePipe.transform(t.myDate,"dd-MM-yyyy");var n=0;t.printInvoiceData=[];var i,c=function(t,n){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=e(t))||n&&t&&"number"==typeof t.length){i&&(t=i);var c=0,o=function(){};return{s:o,n:function(){return c>=t.length?{done:!0}:{done:!1,value:t[c++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,d=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return r=t.done,t},e:function(t){d=!0,a=t},f:function(){try{r||null==i.return||i.return()}finally{if(d)throw a}}}}(t.invoiceIds);try{for(c.s();!(i=c.n()).done;){var o=i.value;t.invoiceNo=o,t.printService.getInvoiceByNoToPrintWithPchallan(t.invoiceNo).pipe(Object(g.a)(t.destroy$)).subscribe((function(e){if(e.success){t.printInvoiceData.push(new M),t.printInvoiceData[n]=e.data;for(var i=0;i<4;i++)t.printInvoiceData[n].qualityList[i]||t.printInvoiceData[n].qualityList.push(new C),t.printInvoiceData[n].batchWithGrList.forEach((function(t){t.batchDataList.sort((function(t,e){return t.sequenceId-e.sequenceId})),t.batchDataList.forEach((function(t){"0"==t.mtr&&(t.mtr="-")}))}));t.printInvoiceData[n].totalMtr=0,t.printInvoiceData[n].totalAmt=0,t.printInvoiceData[n].totalPcs=0,t.printInvoiceData[n].totalFinishMtr=0,t.printInvoiceData[n].qualityList.forEach((function(e,i){e.totalMtr&&(t.printInvoiceData[n].totalMtr+=e.totalMtr,t.printInvoiceData[n].totalAmt+=e.amt,t.printInvoiceData[n].totalPcs+=e.pcs,t.printInvoiceData[n].totalFinishMtr+=e.finishMtr)})),t.printInvoiceData[n].batchWithGrList.forEach((function(e){var i=t.printInvoiceData[n].batchWithGrList.filter((function(t){return t.batchId==e.batchId&&!t.calculationDone}));if(i.length>1){var c,o=0,a=0,r=0,d=0;i.forEach((function(t){t.calculationDone=!0,t.batchDataList.forEach((function(t){"-"==t.mtr&&(t.mtr="0"),o+=Number(t.mtr),a+=t.finishMtr,"0"==t.mtr&&(t.mtr="-"),t.srNo=++d})),r+=t.batchDataList.length,t.totalFMtr="-",t.totalMtr="-",t.shrinkage="-",t.lotDataLength="-"})),o=o.toFixed(2),a=a.toFixed(2),c=((o-a)/o*100).toFixed(2),i[i.length-1].totalMtr=o,i[i.length-1].totalFMtr=a,i[i.length-1].shrinkage=c,i[i.length-1].lotDataLength=r}else e.calculationDone||(e.calculationDone=!0,e.totalMtr=0,e.totalFMtr=0,e.shrinkage=0,e.lotDataLength=e.batchDataList.length,e.batchDataList.forEach((function(t){"-"==t.mtr&&(t.mtr="0"),e.totalMtr+=Number(t.mtr),e.totalFMtr+=t.finishMtr,"0"==t.mtr&&(t.mtr="-")})),e.totalMtr=e.totalMtr.toFixed(2),e.totalFMtr=e.totalFMtr.toFixed(2),e.shrinkage=((e.totalMtr-e.totalFMtr)/e.totalMtr*100).toFixed(2))}));for(var c=t.printInvoiceData[n].batchWithGrList.length,o=0;o<4-c;o++)t.printInvoiceData[n].batchWithGrList.push(new y);t.printInvoiceData[n].discount||(t.printInvoiceData[n].discount=Number((t.printInvoiceData[n].totalAmt*t.discount/100).toFixed(2))),t.printInvoiceData[n].taxAmt||(t.printInvoiceData[n].taxAmt=Number((t.printInvoiceData[n].totalAmt-t.printInvoiceData[n].discount).toFixed(2))),t.printInvoiceData[n].sgst||(t.printInvoiceData[n].sgst=t.printInvoiceData[n].cgst=Number((.025*t.printInvoiceData[n].taxAmt).toFixed(2))),t.printInvoiceData[n].igst||(t.printInvoiceData[n].igst=t.printInvoiceData[n].cgst+t.printInvoiceData[n].sgst),t.printInvoiceData[n].netAmt||(t.printInvoiceData[n].netAmt=t.printInvoiceData[n].sgst+t.printInvoiceData[n].cgst+t.printInvoiceData[n].taxAmt,t.printInvoiceData[n].netAmt=Math.round(t.printInvoiceData[n].netAmt)),++n==t.invoiceIds.length&&t.print()}else t.toastr.error(e.msg),t.router.navigate(["pages/generate_invoice"])}),(function(e){t.router.navigate(["pages/generate_invoice"])}))}}catch(a){c.e(a)}finally{c.f()}}();else{var n=[];n.push(this.printInvoiceData),this.printInvoiceData=n,this.printInvoiceData[0].batchWithGrList.forEach((function(e){e.batchDataList.sort((function(t,e){return t.sequenceId-e.sequenceId}));for(var n=0;n<4;n++)t.printInvoiceData[0].qualityList[n]||t.printInvoiceData[0].qualityList.push(new C);e.batchDataList.forEach((function(t){"0"==t.mtr&&(t.mtr="-")}))})),this.printInvoiceData[0].totalMtr=0,this.printInvoiceData[0].totalAmt=0,this.printInvoiceData[0].totalPcs=0,this.printInvoiceData[0].totalFinishMtr=0,this.printInvoiceData[0].qualityList.forEach((function(e,n){e.totalMtr&&(t.printInvoiceData[0].totalMtr+=e.totalMtr,t.printInvoiceData[0].totalAmt+=e.amt,t.printInvoiceData[0].totalPcs+=e.pcs,t.printInvoiceData[0].totalFinishMtr+=e.finishMtr)})),this.printInvoiceData[0].batchWithGrList.forEach((function(e){var n=t.printInvoiceData[0].batchWithGrList.filter((function(t){return t.batchId==e.batchId&&t.pchallanRef==e.pchallanRef&&!t.calculationDone}));if(n.length>1){var i,c=0,o=0,a=0,r=0;n.forEach((function(t){t.calculationDone=!0,t.batchDataList.forEach((function(t){"-"==t.mtr&&(t.mtr="0"),c+=Number(t.mtr),o+=t.finishMtr,"0"==t.mtr&&(t.mtr="-"),t.srNo=++r})),a+=t.batchDataList.length,t.totalFMtr="-",t.totalMtr="-",t.shrinkage="-",t.lotDataLength="-"})),c=c.toFixed(2),o=o.toFixed(2),i=((c-o)/c*100).toFixed(2),n[n.length-1].totalMtr=c,n[n.length-1].totalFMtr=o,n[n.length-1].shrinkage=i,n[n.length-1].lotDataLength=a}else e.calculationDone||(e.calculationDone=!0,e.totalMtr=0,e.totalFMtr=0,e.shrinkage=0,e.lotDataLength=e.batchDataList.length,e.batchDataList.forEach((function(t){"-"==t.mtr&&(t.mtr="0"),e.totalMtr+=Number(t.mtr),e.totalFMtr+=t.finishMtr,"0"==t.mtr&&(t.mtr="-")})),e.totalMtr=e.totalMtr.toFixed(2),e.totalFMtr=e.totalFMtr.toFixed(2),e.shrinkage=((e.totalMtr-e.totalFMtr)/e.totalMtr*100).toFixed(2))}));for(var i=this.printInvoiceData[0].batchWithGrList.length,c=0;c<4-i;c++)this.printInvoiceData[0].batchWithGrList.push(new y);this.printInvoiceData[0].discount||(this.printInvoiceData[0].discount=Number((this.printInvoiceData[0].totalAmt*this.discount/100).toFixed(2))),this.printInvoiceData[0].taxAmt||(this.printInvoiceData[0].taxAmt=Number((this.printInvoiceData[0].totalAmt-this.printInvoiceData[0].discount).toFixed(2))),this.printInvoiceData[0].sgst||(this.printInvoiceData[0].sgst=this.printInvoiceData[0].cgst=Number((.025*this.printInvoiceData[0].taxAmt).toFixed(2))),this.printInvoiceData[0].igst||(this.printInvoiceData[0].igst=this.printInvoiceData[0].cgst+this.printInvoiceData[0].sgst),this.printInvoiceData[0].netAmt||(this.printInvoiceData[0].netAmt=this.printInvoiceData[0].sgst+this.printInvoiceData[0].cgst+this.printInvoiceData[0].taxAmt,this.printInvoiceData[0].netAmt=Math.round(this.printInvoiceData[0].netAmt))}}},{key:"getInvoiceDataToPrint",value:function(){}},{key:"print",value:function(){var t=this,e=new P.PrintDocument({title:""});e.append('<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/paper-css/0.3.0/paper.css">'),e.append('<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">'),e.append('<link href="https://cdn.grapecity.com/wijmo/5.latest/styles/wijmo.min.css" rel="stylesheet">');for(var n=function(t){var n=setInterval((function(){var i=document.getElementById("printpdf"+t);null!=i&&(e.append(i),clearInterval(n))}),10)},i=0;i<this.printInvoiceData.length;i++)n(i);setTimeout((function(){e.print(),t.router.navigate(["pages/generate_invoice"])}),1e3)}},{key:"onCancel",value:function(){this.activeModal.close(!1)}},{key:"onPrint",value:function(){var t;t={cgst:this.printInvoiceData[0].cgst,discount:this.printInvoiceData[0].discount,taxAmt:this.printInvoiceData[0].taxAmt,sgst:this.printInvoiceData[0].sgst,netAmt:this.printInvoiceData[0].netAmt,igst:this.printInvoiceData[0].igst,print:"print"},this.activeModal.close(t)}},{key:"onSave",value:function(){var t={};this.printInvoiceData&&this.printInvoiceData.length&&(t={cgst:this.printInvoiceData[0].cgst,discount:this.printInvoiceData[0].discount,taxAmt:this.printInvoiceData[0].taxAmt,sgst:this.printInvoiceData[0].sgst,netAmt:this.printInvoiceData[0].netAmt,igst:this.printInvoiceData[0].igst}),this.activeModal.close(t)}}]),t}()).\u0275fac=function(t){return new(t||ot)(x.dc(d.e),x.dc(w.b),x.dc(I),x.dc(l.c),x.dc(l.a),x.dc(k.a))},ot.\u0275cmp=x.Xb({type:ot,selectors:[["ngx-print-layout"]],inputs:{finalInvoice:"finalInvoice",previewFlag:"previewFlag",discount:"discount",deliveryMode:"deliveryMode",remark:"remark",updateFlag:"updateFlag"},decls:2,vars:2,consts:[[4,"ngIf"],["class","main-modal-invoice-review",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"pad-print",3,"id"],["printpdf{{i}}",""],["class","border-margin-d-t",4,"ngFor","ngForOf"],[1,"border-margin-d-t"],[1,"printpage"],[1,"border-margin"],[1,"container"],[1,"row"],[1,"top-print-head","width-63"],[1,"top-print-head","border-width","width-37"],[1,"border","duplicate-border"],[1,"print-in-border"],[1,"border-dark","row","pd-0"],[1,"col-sm-10"],[1,"card","border-zero"],[1,"card-body","display-flex-end"],[1,"card-block"],[1,"col-sm-12","text-center","font-30"],[1,"text-center","col-sm-12","font-10","formally"],[1,"text-center","col-sm-12","font-18"],[1,"text-center","col-sm-12","font-20"],[1,"col-sm-2","jus-con-center"],[1,"invoice-logo","jus-con-center"],["src","../../../../assets/GLORY SYMBOL.png",1,"print-logo-style"],[1,"content"],[1,"invoice"],[1,"row","col-sm-12","pd-0","mr-0"],[1,"col-sm-8","border-dark"],[1,"col-sm-2","text-nowrap"],[1,"font-15"],[1,"text-left","col-sm-10","border","border-width","font-15"],[1,"col-sm-2"],[1,"col-sm-5","pl-0"],[1,"col-sm-7","border-left","border-width","font-15"],[1,"text-left","col-sm-5","text-nowrap","pl-0",2,"border-right","1px solid rgb(143, 143, 143)"],[1,"display-between","font-15"],[1,"col-sm-7","text-left"],[1,"col-sm-4","border-dark"],[1,"col-md-2","width-33"],[1,"col-md-10","border-left","border-bottom","border-width","width-65",2,"font-size","18px"],[1,"border-dark","font-15"],[1,"table","spacing-low","table-bordered"],[1,"font-14","width-4px"],[1,"font-14","width-37"],[1,"font-14","width-3"],[1,"font-14","width-10"],[1,"font-14","width-8"],[1,"font-14","width-13"],[1,"font-14","width-4"],[1,"font-14"],[1,"font-14","width-15"],[1,"font-bold"],[1,"text-right"],[1,"border-dark","disc-style"],[1,"col-sm-4"],[2,"padding-left","5px"],[1,"text-left"],[1,"text-left","font-18"],[1,"text-right","font-18"],[1,"row","main-invoice-row"],["class","col-md-3",4,"ngFor","ngForOf"],[1,"footer-border",2,"margin-top","3px"],[1,"col-sm-7"],[1,"footer-bottom"],[1,"font-big"],[1,"col-sm-8"],[1,"col-sm-5"],[1,"company-ltd","text-center"],[1,"row","terms-print-fix"],[1,"col-sm-7","terms-border"],[1,"border-top-none","font-big"],[1,"terms-cond"],[1,"auth-font","display-flex","pd-top-60"],["class","text-left",4,"ngIf"],[1,"col-md-3"],[1,"table","lot-border"],["id","invoice-table"],[1,"table","print-invoice-table","border-bootom-none","table-bordered"],["scope","col",1,"pd-top-bottom-2"],["scope","col","class","pd-top-bottom-2",4,"ngIf"],[1,"table-footer"],[1,"pd-top-bottom-0"],["colspan","3",1,"pd-top-bottom-0"],[1,"pd-top-1","text-right"],[1,"main-modal-invoice-review"],[1,"modal-header","inovice-reiview-header"],[1,"text-center","in-pre-text"],["aria-label","Close",1,"close","invoice-close",3,"click"],["aria-hidden","true",1,"invoice-close-cross"],["class","mr-tb-26",4,"ngFor","ngForOf"],[1,"modal-footer","inovice-reiview-footer"],["type","button",1,"btn","btn-primary","btn-sm","btn-design-cancel",3,"click"],["type","button",1,"btn","btn-primary","btn-sm","btn-design-save",3,"click"],[1,"mr-tb-26"],[1,"printpage",3,"id"],[1,"col-sm-12","text-center","font-30","p-mr-bt"],[1,"text-center","col-sm-12","font-20","p-mr-bt"],[1,"col-md-2","width-30"],[1,"col-md-2","width-10"],[1,"col-md-8","border","border-width","font-15","width-60"],[1,"col-sm-3"],[1,"col-sm-1"],[1,"col-sm-8","border","border-width","font-15"],[1,"col-sm-5","text-nowrap"],[1,"col-md-8","border","border-width","width-60",2,"font-size","18px"],[1,"width-4px"],[1,"width-30"],[1,"width-9"],[1,"width-4"],[1,"width-15"],[1,"row","main-invoice-row",2,"padding-bottom","28px"],[2,"height","184mm"]],template:function(t,e){1&t&&(x.hd(0,$,2,1,"div",0),x.hd(1,ct,16,1,"div",1)),2&t&&(x.Hc("ngIf",!e.previewFlag),x.Pb(1),x.Hc("ngIf",e.previewFlag))},directives:[d.n,d.m],pipes:[d.y,d.e,d.f,d.w],styles:["@media print{.section[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{margin:0;box-shadow:0}.img[_ngcontent-%COMP%]{max-width:500px}.col-sm-1[_ngcontent-%COMP%], .col-sm-2[_ngcontent-%COMP%], .col-sm-3[_ngcontent-%COMP%], .col-sm-4[_ngcontent-%COMP%], .col-sm-5[_ngcontent-%COMP%], .col-sm-6[_ngcontent-%COMP%], .col-sm-7[_ngcontent-%COMP%], .col-sm-8[_ngcontent-%COMP%], .col-sm-9[_ngcontent-%COMP%], .col-sm-10[_ngcontent-%COMP%], .col-sm-11[_ngcontent-%COMP%], .col-sm-12[_ngcontent-%COMP%]{float:left}.col-sm-12[_ngcontent-%COMP%]{width:100%}.col-sm-11[_ngcontent-%COMP%]{width:91.66666666666666%}.col-sm-10[_ngcontent-%COMP%]{width:83.33333333333334%}.col-sm-9[_ngcontent-%COMP%]{width:75%}.col-sm-8[_ngcontent-%COMP%]{width:66.66666666666666%}.col-sm-7[_ngcontent-%COMP%]{width:58.333333333333336%}.col-sm-6[_ngcontent-%COMP%]{width:50%}.col-sm-5[_ngcontent-%COMP%]{width:41.66666666666667%}.col-sm-4[_ngcontent-%COMP%]{width:33.33333333333333%}.col-sm-3[_ngcontent-%COMP%]{width:25%}.col-sm-2[_ngcontent-%COMP%]{width:16.666666666666664%}.col-sm-1[_ngcontent-%COMP%]{width:8.333333333333332%}.col-md-3[_ngcontent-%COMP%]{width:25%}.lot-border[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border:2px solid #8f8f8f}.footer-border[_ngcontent-%COMP%]{border:1px solid #8f8f8f}.border-top-none[_ngcontent-%COMP%], .footer-bottom[_ngcontent-%COMP%]{padding:5px 15px}.border-top[_ngcontent-%COMP%]{border-top:1px solid;padding:15px}.terms-cond[_ngcontent-%COMP%]{list-style:none}.terms-cond[_ngcontent-%COMP%], .terms-cond[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-left:0!important;padding-left:0!important}.footer-bottom[_ngcontent-%COMP%]{padding-left:15px;border:1px solid #8f8f8f}.border-top-none[_ngcontent-%COMP%]{border:1px solid #8f8f8f;border-top:none}.display-flex[_ngcontent-%COMP%]{display:flex}.display-flex[_ngcontent-%COMP%], .display-flex-end[_ngcontent-%COMP%]{justify-content:center;align-items:flex-end}.height-100[_ngcontent-%COMP%]{height:100%}.company-ltd[_ngcontent-%COMP%]{margin-top:30px}#invoice-table[_ngcontent-%COMP%]{border:1px solid #8f8f8f;border-spacing:0;clear:both;margin:0;height:200mm;width:100%}.lot-border[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding-top:3px;padding-bottom:3px;font-size:15px}#invoice-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border-left:1px solid #8f8f8f}#invoice-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child, td[_ngcontent-%COMP%]:first-child{border-left:none}#invoice-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-bottom:1px solid #8f8f8f}#invoice-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle;font-size:6pt}th[_ngcontent-%COMP%]{font-weight:400}.amount[_ngcontent-%COMP%], .spacing-low[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{text-align:center}.auth-font[_ngcontent-%COMP%], .font-big[_ngcontent-%COMP%], .font-big[_ngcontent-%COMP%]   .terms-cond[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .font-big[_ngcontent-%COMP%]   b[_ngcontent-%COMP%], .invoice_line[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:15px}.company-ltd[_ngcontent-%COMP%]{font-size:18px}.amount[_ngcontent-%COMP%], .invoice_line[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .site[_ngcontent-%COMP%]{font-size:40px;font-weight:600}.invoice_line[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .invoice_line[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:1mm;text-align:center}.lot-border[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 0;font-size:40px}.card-block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:2px}.card-block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:first-child{margin-bottom:1px}.border-margin[_ngcontent-%COMP%]{padding:5px 0 15px}.border-margin-d-t[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:5px}.top-print-head[_ngcontent-%COMP%]{text-align:right;display:inline-block;font-size:15px;padding-top:0;margin-top:0}.spacing-low[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#90ee90!important}.spacing-low[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .spacing-low[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .spacing-low[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-left:2px solid #8f8f8f!important;border-right:2px solid #8f8f8f!important}.spacing-low[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .spacing-low[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child, .spacing-low[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-top:2px solid #8f8f8f!important;border-bottom:2px solid #8f8f8f!important}.spacing-low[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .spacing-low[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:1px .75rem!important}.border-width[_ngcontent-%COMP%], .spacing-low[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{border-width:2px!important}.lot-border[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], table.lot-border[_ngcontent-%COMP%], table.spacing-low[_ngcontent-%COMP%]{margin-bottom:1px!important}.border[_ngcontent-%COMP%], .border-dark[_ngcontent-%COMP%], .border-top[_ngcontent-%COMP%]{border:1px solid #8f8f8f!important}.border-bootom-none[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child, .border-zero[_ngcontent-%COMP%]{border:0!important}.border-bootom-none[_ngcontent-%COMP%]{border-bottom:2px solid #8f8f8f!important}.display-between[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.spacing-low[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;bottom:0}tfoot.spacing-low[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #8f8f8f!important}tfoot.spacing-low[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child{text-align:left!important}.print-invoice-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{height:178mm;overflow:hidden;overflow-x:hidden;display:block;width:100%}.print-invoice-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%], .print-invoice-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}.print-invoice-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%], .print-invoice-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%}.print-invoice-table[_ngcontent-%COMP%], .print-invoice-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .print-invoice-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:2px solid #8f8f8f!important}.print-invoice-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-bottom:2px solid #8f8f8f!important;border-top:0 solid #8f8f8f!important}.print-invoice-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-left:0!important;border-right:0!important}.width-63[_ngcontent-%COMP%]{width:63%}.width-65[_ngcontent-%COMP%]{width:65%}.width-60[_ngcontent-%COMP%]{width:60%}.width-37[_ngcontent-%COMP%]{width:37%}.width-8[_ngcontent-%COMP%]{width:8%}.width-10[_ngcontent-%COMP%]{width:10%}.width-13[_ngcontent-%COMP%]{width:13%}.width-30[_ngcontent-%COMP%]{width:30%}.width-33[_ngcontent-%COMP%]{width:33%}.width-4px[_ngcontent-%COMP%]{width:4px}.width-4[_ngcontent-%COMP%]{width:4%}.width-15[_ngcontent-%COMP%]{width:15%}.width-9[_ngcontent-%COMP%]{width:9%}.duplicate-border[_ngcontent-%COMP%]{border-top-width:3px!important;border-left-width:3px!important;border-right-width:3px!important}.pd-0[_ngcontent-%COMP%]{padding:0}.mr-0[_ngcontent-%COMP%]{margin:0}.display-flex-end[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center}.font-20[_ngcontent-%COMP%]{font-size:20px}.font-18[_ngcontent-%COMP%]{font-size:18px}.font-10[_ngcontent-%COMP%]{font-size:10px}.font-12[_ngcontent-%COMP%]{font-size:12px}.font-14[_ngcontent-%COMP%]{font-size:14px}.font-30[_ngcontent-%COMP%]{font-size:30px}.font-15[_ngcontent-%COMP%]{font-size:15px}.jus-con-center[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.print-logo-style[_ngcontent-%COMP%]{width:380px;height:auto}.font-bold[_ngcontent-%COMP%]{font-weight:700}.disc-style[_ngcontent-%COMP%]{font-size:15px;border-top:0!important}.main-invoice-row[_ngcontent-%COMP%]{margin:3px 2px 5px}.pd-top-bottom-2[_ngcontent-%COMP%]{padding-top:2px!important;padding-bottom:2px!important}.pd-top-bottom-1[_ngcontent-%COMP%]{font-size:13px!important;padding-top:1px!important;padding-bottom:1px!important}.pd-top-1[_ngcontent-%COMP%]{font-size:13.5px!important;padding-top:.8px!important;padding-bottom:.8px!important}.pd-top-bottom-0[_ngcontent-%COMP%]{padding-top:0!important;padding-bottom:0!important}.pd-top-60[_ngcontent-%COMP%]{padding-top:60px!important}}@media print{.printpage[_ngcontent-%COMP%]{display:table;table-layout:fixed;height:auto}}@media print{.pad-print[_ngcontent-%COMP%], .printpage[_ngcontent-%COMP%]{padding-top:.05cm}}@media print{.print-in-border[_ngcontent-%COMP%]{border:3px solid #8f8f8f}.border-margin[_ngcontent-%COMP%]{padding:1rem 4rem}.t-table[_ngcontent-%COMP%]{height:800px}.table-left-right[_ngcontent-%COMP%]{border-left:0!important;border-right:0!important}.tr[_ngcontent-%COMP%]::nth-child(2){height:100vh}.table-left-right[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:3px .75rem;vertical-align:top;text-align:center;width:100%;border-collapse:collapse;height:100%}.table-left-right[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table-left-right[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-left:1px solid #c3c3c3;border-right:1px solid #c3c3c3}.table-left-right[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-top:1px solid #c3c3c3;border-bottom:1px solid #c3c3c3}}.p-mr-bt[_ngcontent-%COMP%]{margin-bottom:20px!important}.section[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{margin:0;box-shadow:0}.img[_ngcontent-%COMP%]{max-width:500px}.col-sm-1[_ngcontent-%COMP%], .col-sm-2[_ngcontent-%COMP%], .col-sm-3[_ngcontent-%COMP%], .col-sm-4[_ngcontent-%COMP%], .col-sm-5[_ngcontent-%COMP%], .col-sm-6[_ngcontent-%COMP%], .col-sm-7[_ngcontent-%COMP%], .col-sm-8[_ngcontent-%COMP%], .col-sm-9[_ngcontent-%COMP%], .col-sm-10[_ngcontent-%COMP%], .col-sm-11[_ngcontent-%COMP%], .col-sm-12[_ngcontent-%COMP%]{float:left}.col-sm-12[_ngcontent-%COMP%]{width:100%}.col-sm-11[_ngcontent-%COMP%]{width:91.66666666666666%}.col-sm-10[_ngcontent-%COMP%]{width:83.33333333333334%}.col-sm-9[_ngcontent-%COMP%]{width:75%}.col-sm-8[_ngcontent-%COMP%]{width:66.66666666666666%}.col-sm-7[_ngcontent-%COMP%]{width:58.333333333333336%}.col-sm-6[_ngcontent-%COMP%]{width:50%}.col-sm-5[_ngcontent-%COMP%]{width:41.66666666666667%}.col-sm-4[_ngcontent-%COMP%]{width:33.33333333333333%}.col-sm-3[_ngcontent-%COMP%]{width:25%}.col-sm-2[_ngcontent-%COMP%]{width:16.666666666666664%}.col-sm-1[_ngcontent-%COMP%]{width:8.333333333333332%}.col-md-3[_ngcontent-%COMP%]{width:25%}.lot-border[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border:2px solid #8f8f8f}.footer-border[_ngcontent-%COMP%]{border:1px solid #8f8f8f}.border-top-none[_ngcontent-%COMP%], .footer-bottom[_ngcontent-%COMP%]{padding:5px 15px}.border-top[_ngcontent-%COMP%]{border-top:1px solid;padding:15px}.terms-cond[_ngcontent-%COMP%]{list-style:none}.terms-cond[_ngcontent-%COMP%], .terms-cond[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-left:0!important;padding-left:0!important}.footer-bottom[_ngcontent-%COMP%]{padding-left:15px;border:1px solid #8f8f8f}.border-top-none[_ngcontent-%COMP%]{border:1px solid #8f8f8f;border-top:none}.display-flex[_ngcontent-%COMP%]{display:flex}.display-flex[_ngcontent-%COMP%], .display-flex-end[_ngcontent-%COMP%]{justify-content:center;align-items:flex-end}.height-100[_ngcontent-%COMP%]{height:100%}.company-ltd[_ngcontent-%COMP%]{margin-top:30px}#invoice-table[_ngcontent-%COMP%]{border:1px solid #8f8f8f;border-spacing:0;clear:both;margin:0;height:200mm;width:100%}.lot-border[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding-top:3px;padding-bottom:3px;font-size:15px}#invoice-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border-left:1px solid #8f8f8f}#invoice-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child, td[_ngcontent-%COMP%]:first-child{border-left:none}#invoice-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-bottom:1px solid #8f8f8f}#invoice-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle;font-size:6pt}th[_ngcontent-%COMP%]{font-weight:400}.amount[_ngcontent-%COMP%], .spacing-low[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{text-align:center}.auth-font[_ngcontent-%COMP%], .font-big[_ngcontent-%COMP%], .font-big[_ngcontent-%COMP%]   .terms-cond[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .font-big[_ngcontent-%COMP%]   b[_ngcontent-%COMP%], .invoice_line[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:15px}.company-ltd[_ngcontent-%COMP%]{font-size:18px}.amount[_ngcontent-%COMP%], .invoice_line[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .site[_ngcontent-%COMP%]{font-size:40px;font-weight:600}.invoice_line[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .invoice_line[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:1mm;text-align:center}.lot-border[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 0;font-size:40px}.card-block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:2px}.card-block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:first-child{margin-bottom:1px}.border-margin[_ngcontent-%COMP%]{padding:5px 0 15px}.top-print-head[_ngcontent-%COMP%]{text-align:right;display:inline-block;font-size:15px;padding-top:0;margin-top:0}.spacing-low[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f5f5f5!important}.spacing-low[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .spacing-low[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .spacing-low[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-left:2px solid #8f8f8f!important;border-right:2px solid #8f8f8f!important}.spacing-low[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .spacing-low[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child, .spacing-low[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-top:2px solid #8f8f8f!important;border-bottom:2px solid #8f8f8f!important}.spacing-low[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .spacing-low[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:1px .75rem!important}.border-width[_ngcontent-%COMP%], .spacing-low[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{border-width:2px!important}.lot-border[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], table.lot-border[_ngcontent-%COMP%], table.spacing-low[_ngcontent-%COMP%]{margin-bottom:1px!important}.border[_ngcontent-%COMP%], .border-dark[_ngcontent-%COMP%], .border-top[_ngcontent-%COMP%]{border:1px solid #8f8f8f!important}.border-bootom-none[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child, .border-zero[_ngcontent-%COMP%]{border:0!important}.border-bootom-none[_ngcontent-%COMP%]{border-bottom:2px solid #8f8f8f!important}.display-between[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.spacing-low[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;bottom:0}tfoot.spacing-low[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #8f8f8f!important}tfoot.spacing-low[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child{text-align:left!important}.print-invoice-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{height:178mm;overflow:hidden;overflow-x:hidden;display:block;width:100%}.print-invoice-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%], .print-invoice-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}.print-invoice-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%], .print-invoice-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%}.print-invoice-table[_ngcontent-%COMP%], .print-invoice-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .print-invoice-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:2px solid #8f8f8f!important}.print-invoice-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-bottom:2px solid #8f8f8f!important;border-top:0 solid #8f8f8f!important}.print-invoice-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-left:0!important;border-right:0!important}.width-63[_ngcontent-%COMP%]{width:63%}.width-65[_ngcontent-%COMP%]{width:65%}.width-60[_ngcontent-%COMP%]{width:60%}.width-37[_ngcontent-%COMP%]{width:37%}.width-8[_ngcontent-%COMP%]{width:8%}.width-10[_ngcontent-%COMP%]{width:10%}.width-13[_ngcontent-%COMP%]{width:13%}.width-30[_ngcontent-%COMP%]{width:30%}.width-33[_ngcontent-%COMP%]{width:33%}.width-4px[_ngcontent-%COMP%]{width:4px}.width-4[_ngcontent-%COMP%]{width:4%}.width-15[_ngcontent-%COMP%]{width:15%}.width-9[_ngcontent-%COMP%]{width:9%}.duplicate-border[_ngcontent-%COMP%]{border-top-width:3px!important;border-left-width:3px!important;border-right-width:3px!important}.pd-0[_ngcontent-%COMP%]{padding:0}.mr-0[_ngcontent-%COMP%]{margin:0}.display-flex-end[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center}.font-20[_ngcontent-%COMP%]{font-size:20px}.font-18[_ngcontent-%COMP%]{font-size:18px}.font-10[_ngcontent-%COMP%]{font-size:10px}.font-12[_ngcontent-%COMP%]{font-size:12px}.font-30[_ngcontent-%COMP%]{font-size:30px}.font-13[_ngcontent-%COMP%]{font-size:13px}.font-15[_ngcontent-%COMP%]{font-size:15px}.jus-con-center[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.print-logo-style[_ngcontent-%COMP%]{width:180px;height:auto}.font-bold[_ngcontent-%COMP%]{font-weight:700}.disc-style[_ngcontent-%COMP%]{font-size:15px;border-top:0!important}.main-invoice-row[_ngcontent-%COMP%]{margin:3px 2px 5px}.pd-top-bottom-2[_ngcontent-%COMP%]{padding-top:2px!important;padding-bottom:2px!important}.pd-top-bottom-1[_ngcontent-%COMP%]{font-size:13px!important;padding-top:1px!important;padding-bottom:1px!important}.pd-top-bottom-0[_ngcontent-%COMP%]{padding-top:0!important;padding-bottom:0!important}.pd-top-60[_ngcontent-%COMP%]{padding-top:60px!important}.printpage[_ngcontent-%COMP%]{background:#fff;display:block;margin:0 auto .5cm;box-shadow:0 0 .5cm rgba(0,0,0,.5)}.print-in-border[_ngcontent-%COMP%]{border:3px solid #8f8f8f}.border-margin[_ngcontent-%COMP%]{padding:1rem 4rem}.t-table[_ngcontent-%COMP%]{height:800px}.table-left-right[_ngcontent-%COMP%]{border-left:0!important;border-right:0!important}.tr[_ngcontent-%COMP%]::nth-child(2){height:100vh}.table-left-right[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:3px .75rem;vertical-align:top;text-align:center;width:100%;border-collapse:collapse;height:100%}.table-left-right[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table-left-right[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-left:1px solid #c3c3c3;border-right:1px solid #c3c3c3}.table-left-right[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-top:1px solid #c3c3c3;border-bottom:1px solid #c3c3c3}.mr-bt-5[_ngcontent-%COMP%]{margin-bottom:15px!important}.main-modal-invoice-review[_ngcontent-%COMP%]{max-height:calc(100vh - 60px);overflow-y:auto}.inovice-reiview-footer[_ngcontent-%COMP%]{bottom:0}.inovice-reiview-footer[_ngcontent-%COMP%], .inovice-reiview-header[_ngcontent-%COMP%]{position:absolute;width:100%;background:#fff;padding:6px 0}.inovice-reiview-header[_ngcontent-%COMP%]{top:0;z-index:99999999}.in-pre-text[_ngcontent-%COMP%]{width:100%;margin:0}.mr-tb-26[_ngcontent-%COMP%]{margin-top:26px;margin-bottom:50px}.invoice-close[_ngcontent-%COMP%]{position:absolute;right:13px;top:1px;opacity:1!important}.invoice-close-cross[_ngcontent-%COMP%]{color:#aa3634!important}.invoice-close[_ngcontent-%COMP%]:focus{outline:none!important;border:none!important}.formally[_ngcontent-%COMP%]{margin-top:-9px}.print-heading-refix[_ngcontent-%COMP%]{margin-top:-8px}.terms-print-fix[_ngcontent-%COMP%]{margin-bottom:-2px}.terms-border[_ngcontent-%COMP%]{margin-bottom:-3px}.left-side[_ngcontent-%COMP%]{text-align:left!important}.right-side[_ngcontent-%COMP%]{text-align:right!important}"]}),ot),dt=a("+kI6"),lt=a("aceb"),st=a("3Pt+"),pt=((at=function(){function t(e,n){o(this,t),this.activeModal=e,this.router=n,this.finalcheckedrows=[],this.destroy$=new h.a}return c(t,[{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}},{key:"ngOnInit",value:function(){}},{key:"printInvoice",value:function(){if(this.invoiceNo){this.finalcheckedrows.push(this.invoiceNo);var t={},e=this.finalcheckedrows;if(0!=e.length){t.myArray=JSON.stringify(e);var n={queryParams:t};this.activeModal.close(),this.router.navigate(["/pages/generate_invoice/print/"],n),this.activeModal.close()}}}},{key:"closeModal",value:function(){this.activeModal.close()}}]),t}()).\u0275fac=function(t){return new(t||at)(x.dc(k.a),x.dc(l.c))},at.\u0275cmp=x.Xb({type:at,selectors:[["ngx-input-invoice"]],decls:19,vars:1,consts:[[1,"nbStyle"],[1,"nb-header"],[1,"row"],[1,"col-md-12"],[1,"nb-text","txt-ov-elips"],[1,"col-md-6"],[1,"form-group"],["type","number","name","invoice","id","invoice",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-md-9","mobile-btn-center","text-btn-right","mt-50"],["type","button",1,"btn","btn-primary","btn-sm","btn-design-cancel",3,"click"],["type","button",1,"btn","btn-primary","btn-sm","btn-design-save","mob-stock","button-base","ripple",3,"click"]],template:function(t,e){1&t&&(x.jc(0,"nb-card",0),x.jc(1,"nb-card-header",1),x.jc(2,"div",2),x.jc(3,"div",3),x.jc(4,"h2",4),x.jd(5,"Print Invoice"),x.ic(),x.ic(),x.ic(),x.ic(),x.jc(6,"nb-card-body"),x.jc(7,"div",2),x.jc(8,"div",5),x.jc(9,"div",6),x.jc(10,"label"),x.jd(11,"Invoice No"),x.ic(),x.jc(12,"input",7),x.uc("ngModelChange",(function(t){return e.invoiceNo=t})),x.ic(),x.ic(),x.ic(),x.ic(),x.jc(13,"div",2),x.jc(14,"div",8),x.jc(15,"button",9),x.uc("click",(function(){return e.closeModal()})),x.jd(16,"CANCEL"),x.ic(),x.jc(17,"button",10),x.uc("click",(function(){return e.printInvoice()})),x.jd(18,"OK"),x.ic(),x.ic(),x.ic(),x.ic(),x.ic()),2&t&&(x.Pb(12),x.Hc("ngModel",e.invoiceNo))},directives:[lt.u,lt.x,lt.t,st.q,st.a,st.l,st.o],styles:[""]}),at),gt=a("ZOsW"),ht=a("lDzL");function ut(t,e){1&t&&(x.jc(0,"div"),x.jc(1,"h2",37),x.jd(2,"Add Invoice"),x.ic(),x.ic())}function ft(t,e){1&t&&(x.jc(0,"h2",37),x.jd(1,"Update Invoice"),x.ic())}function vt(t,e){if(1&t&&(x.jc(0,"ng-option",38),x.jd(1),x.ic()),2&t){var n=e.$implicit;x.Hc("value",n.id),x.Pb(1),x.kd(n.partyName)}}function bt(t,e){1&t&&(x.jc(0,"div",39),x.jc(1,"span"),x.jd(2,"Party name is required"),x.ic(),x.ic())}function mt(t,e){1&t&&(x.jc(0,"div",39),x.jc(1,"span"),x.jd(2,"Discount is required"),x.ic(),x.ic())}var jt=function(t){return{"is-invalid":t}};function Pt(t,e){if(1&t){var n=x.kc();x.jc(0,"div",40),x.jc(1,"label",16),x.jd(2,"Discount %"),x.ic(),x.jc(3,"input",41,42),x.uc("ngModelChange",(function(t){return x.Xc(n),x.yc().discountChange=t})),x.ic(),x.hd(5,mt,3,0,"div",20),x.ic()}if(2&t){var i=x.Uc(4),c=x.yc();x.Pb(3),x.Hc("ngModel",c.discountChange)("ngClass",x.Nc(3,jt,i.invalid&&(c.formSubmitted||i.touched))),x.Pb(2),x.Hc("ngIf",c.formSubmitted&&i.invalid||i.invalid&&i.touched)}}function Mt(t,e){if(1&t){var n=x.kc();x.jc(0,"div",40),x.jc(1,"label"),x.jd(2,"Remark"),x.ic(),x.jc(3,"input",43,44),x.uc("ngModelChange",(function(t){return x.Xc(n),x.yc().remark=t})),x.ic(),x.ic()}if(2&t){var i=x.yc();x.Pb(3),x.Hc("ngModel",i.remark)}}function yt(t,e){if(1&t&&(x.jc(0,"ng-option",38),x.jd(1),x.ic()),2&t){var n=e.$implicit;x.Hc("value",n.value),x.Pb(1),x.kd(n.name)}}function Ct(t,e){1&t&&(x.jc(0,"div",39),x.jc(1,"span"),x.jd(2,"Delivery Mode is required"),x.ic(),x.ic())}function Ot(t,e){if(1&t){var n=x.kc();x.jc(0,"div",14),x.jc(1,"div",15),x.jc(2,"label",16),x.jd(3,"Delivery Mode"),x.ic(),x.jc(4,"ng-select",45,46),x.uc("ngModelChange",(function(t){return x.Xc(n),x.yc().deliveryMode=t})),x.hd(6,yt,2,2,"ng-option",19),x.ic(),x.hd(7,Ct,3,0,"div",20),x.ic(),x.ic()}if(2&t){var i=x.Uc(5),c=x.yc();x.Pb(4),x.Hc("ngModel",c.deliveryMode)("ngClass",x.Nc(4,jt,i.invalid&&(c.formSubmitted||i.touched))),x.Pb(2),x.Hc("ngForOf",c.deliveryList),x.Pb(1),x.Hc("ngIf",c.formSubmitted&&i.invalid||i.invalid&&i.touched)}}function xt(t,e){1&t&&(x.jc(0,"div",50),x.jc(1,"span"),x.jd(2,"Required"),x.ic(),x.ic())}function _t(t,e){if(1&t){var n=x.kc();x.jc(0,"input",47,48),x.uc("ngModelChange",(function(t){return x.Xc(n),e.row.rate=t}))("keyup",(function(t){x.Xc(n);var i=e.rowIndex;return x.yc().enterClicked(i,t)})),x.ic(),x.hd(2,xt,3,0,"div",49)}if(2&t){var i=e.row,c=e.rowIndex,o=x.Uc(1),a=x.yc();x.Jc("name","rateChnage",c,""),x.Hc("ngModel",i.rate)("id","invoice"+c+"-rateChange"),x.Pb(2),x.Hc("ngIf",a.formSubmitted&&o.invalid)}}var It,wt=((It=function(){function e(t,n,i,c,a,r,d,l){o(this,e),this.generateInvoiceService=t,this.partyService=n,this.route=i,this._route=c,this.toastr=a,this.jwt=r,this.commonService=d,this.modalService=l,this.deliveryMode=null,this.discountFlag=!1,this.obj={batchAndStockIdList:[],createdBy:null,invoiceNo:null,userHeadId:null},this.invoiceObj={batchAndStockIdList:[]},this.finalcheckedrows=[],this.finalbatch=[],this.deliveryList=[{name:"Hand Delivery",value:"hand"},{name:"Tempo Delivery",value:"tempo"}],this.disableButton=!1,this.errorData=u,this.mtr=[],this.invoiceValues=new f.a,this.formSubmitted=!1,this.loading=!1,this.merge=[],this.invoiceLotLimit=4,this.limitError=!1,this.destroy$=new h.a,this.final=[],this.selected=[]}return c(e,[{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}},{key:"ngOnInit",value:function(){this.userId=this.jwt.getDecodeToken("userId"),this.userHeadId=this.commonService.getUserHeadId().userHeadId,this.getPartyList(),this.getUserId(),this.currentInvoiceId&&this.getUpdateData()}},{key:"getUserId",value:function(){this.currentInvoiceId=this._route.snapshot.paramMap.get("id")}},{key:"getUpdateData",value:function(){var e=this;this.loading=!0,null!=this.currentInvoiceId&&this.generateInvoiceService.getDataByInvoiceNumberByChallan(this.currentInvoiceId).pipe(Object(g.a)(this.destroy$)).subscribe((function(n){n.success?(e.invoiceValues.partyId=n.data.partyId,e.discountFlag=!0,e.discountChange=n.data.percentageDiscount,e.remark=n.data.remark,e.deliveryMode=n.data.deliveryMode,e.flag=n.data.isSendToParty,e.batch=n.data.batchWithControlIdList,e.finalbatch=t(e.batch),e.merge=t(e.finalbatch),e.loading=!1,e.disableButton=!1,e.selected=n.data.batchWithControlIdList,e.finalcheckedrows=t(e.selected)):(e.loading=!1,e.disableButton=!1,e.merge=[])}),(function(t){e.loading=!1,e.disableButton=!1,e.merge=[]})),this.disableButton=!1}},{key:"getPartyList",value:function(){var t=this;this.loading=!0,this.partyService.getAllPartyNameList().pipe(Object(g.a)(this.destroy$)).subscribe((function(e){e.success?(t.party=e.data,t.loading=!1):t.loading=!1}),(function(e){t.loading=!1}))}},{key:"getPChallanList",value:function(t){var e=this;this.party.forEach((function(t){t.id==e.invoiceValues.partyId&&(e.discountChange=t.percentageDiscount)})),this.discountFlag=!0,this.loading=!0,null!=t?this.invoiceValues.partyId&&this.generateInvoiceService.getPChallanByParty(this.invoiceValues.partyId).pipe(Object(g.a)(this.destroy$)).subscribe((function(t){t.success?(e.finalbatch=t.data,e.finalbatch.forEach((function(t){t.wt=t.wt.toFixed(2)})),e.merge=e.finalbatch,e.finalcheckedrows=[],e.selected=[],e.loading=!1):(e.loading=!1,e.merge=[])}),(function(t){e.loading=!1,e.merge=[]})):this.loading=!1}},{key:"addInvoice",value:function(t){var e=this;if(this.limitError)this.toastr.error("Gr limit exceeds");else if(this.deliveryMode){var n=this.party.filter((function(t){return t.id==e.invoiceValues.partyId}));if(this.finalcheckedrows.length<=4){if(this.formSubmitted=!0,this.final=[],this.finalcheckedrows.length>0){this.finalcheckedrows.map((function(t){var n=new f.c;n.batchId=t.batchId,n.pchallanRef=t.pchallanRef,n.stockId=t.controlId,n.rate=t.rate,e.final.push(n)}));var i={batchAndStockIdList:this.final,createdBy:this.userId,userHeadId:this.userHeadId,cgst:null,sgst:null,igst:null,percentageDiscount:this.discountChange,deliveryMode:this.deliveryMode,discount:null,taxAmt:null,netAmt:null,password:"",passwordFlag:null,remark:this.remark,createFlag:!0};if(n[0].pendingAmt>n[0].creditLimit)this.modalService.open(dt.a).result.then((function(n){if(n){var c=e.modalService.open(rt,{size:"xl"});c.componentInstance.finalInvoice=i,c.componentInstance.previewFlag=!0,c.componentInstance.discount=e.discountChange,c.componentInstance.remark=e.remark,c.componentInstance.updateFlag=!1,c.result.then((function(c){c?(i.cgst=c.cgst,i.sgst=c.sgst,i.igst=c.igst,i.discount=c.discount,i.netAmt=Math.round(c.netAmt),i.taxAmt=c.taxAmt,i.password=n,i.passwordFlag=!0,t.valid?e.generateInvoiceService.addInvoicedataWithPchallan(i).pipe(Object(g.a)(e.destroy$)).subscribe((function(t){return Object(p.a)(e,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.success?(this.invoiceNo=t.data,this.toastr.success(u.Add_Success),this.merge=[],this.disableButton=!1,"print"===c.print&&this.print(this.invoiceNo),this.limitError=!1,this.invoiceLotLimit=4):(this.disableButton=!1,this.toastr.error(u.Add_Error),this.merge=[]);case 1:case"end":return e.stop()}}),e,this)})))}),(function(t){e.disableButton=!1,e.toastr.error(u.Serever_Error)})):e.disableButton=!1,e.invoiceValues.partyId=null,e.discountFlag=!1,e.discountChange=null,e.remark=""):e.disableButton=!1}))}}));else{var c=this.modalService.open(rt,{size:"xl"});c.componentInstance.finalInvoice=i,c.componentInstance.previewFlag=!0,c.componentInstance.discount=this.discountChange,c.componentInstance.deliveryMode=this.deliveryMode,c.componentInstance.remark=this.remark,c.componentInstance.updateFlag=!1,c.result.then((function(n){n?(i.cgst=n.cgst,i.sgst=n.sgst,i.igst=n.igst,i.discount=n.discount,i.netAmt=Math.round(n.netAmt),i.taxAmt=n.taxAmt,i.password="",i.passwordFlag=!1,t.valid?e.generateInvoiceService.addInvoicedataWithPchallan(i).pipe(Object(g.a)(e.destroy$)).subscribe((function(t){return Object(p.a)(e,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.success?(this.invoiceNo=t.data,this.toastr.success(u.Add_Success),this.merge=[],this.disableButton=!1,this.limitError=!1,this.invoiceLotLimit=4,"print"===n.print&&this.print(this.invoiceNo)):(this.disableButton=!1,this.toastr.error(u.Add_Error),this.merge=[]);case 1:case"end":return e.stop()}}),e,this)})))}),(function(t){e.disableButton=!1,e.toastr.error(u.Serever_Error)})):e.disableButton=!1,e.invoiceValues.partyId=null,e.discountFlag=!1,e.discountChange=null,e.remark=""):e.disableButton=!1}))}}}else this.toastr.warning("Select upto 4 batches only")}else this.toastr.error("Delivery Mode required")}},{key:"print",value:function(t){var e={};e.invoice=t,this.route.navigate(["/pages/generate_invoice/print"],{queryParams:e})}},{key:"updateInvoice",value:function(t){var e=this;if(this.limitError)this.toastr.error("Gr limit exceeds");else if(this.deliveryMode){var n=this.party.filter((function(t){return t.id==e.invoiceValues.partyId}));if(this.finalcheckedrows.length<=4){this.disableButton=!0,this.formSubmitted=!0,this.final=[],this.finalcheckedrows.map((function(t,n){var i=new f.c;i.batchId=t.batchId,i.pchallanRef=t.pchallanRef,i.stockId=t.controlId,i.rate=t.rate,e.final.push(i)}));var i={batchAndStockIdList:this.final,createdBy:this.userId,userHeadId:this.userHeadId,invoiceNo:this.currentInvoiceId,cgst:null,sgst:null,igst:null,percentageDiscount:this.discountChange,deliveryMode:this.deliveryMode,discount:null,taxAmt:null,netAmt:null,password:"",passwordFlag:null,remark:this.remark,createFlag:!1};if(n[0].pendingAmt>n[0].creditLimit)this.modalService.open(dt.a).result.then((function(n){if(n){var c=e.modalService.open(rt,{size:"xl"});c.componentInstance.finalInvoice=i,c.componentInstance.previewFlag=!0,c.componentInstance.discount=e.discountChange,c.componentInstance.deliveryMode=e.deliveryMode,c.componentInstance.remark=e.remark,c.componentInstance.updateFlag=!0,c.result.then((function(c){c?(i.cgst=c.cgst,i.sgst=c.sgst,i.igst=c.igst,i.discount=c.discount,i.netAmt=Math.round(c.netAmt),i.taxAmt=c.taxAmt,i.password=n,i.passwordFlag=!0,t.valid?e.generateInvoiceService.updateInvoiceWithPchallan(i).pipe(Object(g.a)(e.destroy$)).subscribe((function(t){t.success?(e.invoiceNo=t.data,"print"===c.print&&e.print(e.invoiceNo),e.limitError=!1,e.invoiceLotLimit=4,e.toastr.success(u.Update_Success),e.disableButton=!1):(e.disableButton=!1,e.toastr.error(u.Update_Error))}),(function(t){e.disableButton=!1,e.toastr.error(u.Serever_Error)})):e.disableButton=!1,e.invoiceValues.partyId=null,e.discountFlag=!1,e.discountChange=null,e.remark=""):e.disableButton=!1}))}}));else{var c=this.modalService.open(rt,{size:"xl"});c.componentInstance.finalInvoice=i,c.componentInstance.previewFlag=!0,c.componentInstance.discount=this.discountChange,c.componentInstance.remark=this.remark,c.componentInstance.updateFlag=!0,c.result.then((function(n){n?(i.cgst=n.cgst,i.sgst=n.sgst,i.igst=n.igst,i.discount=n.discount,i.netAmt=Math.round(n.netAmt),i.taxAmt=n.taxAmt,i.password="",i.passwordFlag=!1,t.valid?e.generateInvoiceService.updateInvoiceWithPchallan(i).pipe(Object(g.a)(e.destroy$)).subscribe((function(t){t.success?(e.invoiceNo=t.data,"print"===n.print&&e.print(e.invoiceNo),e.limitError=!1,e.invoiceLotLimit=4,e.toastr.success(u.Update_Success),e.disableButton=!1):(e.disableButton=!1,e.toastr.error(u.Update_Error))}),(function(t){e.disableButton=!1,e.toastr.error(u.Serever_Error)})):e.disableButton=!1,e.invoiceValues.partyId=null,e.discountFlag=!1,e.discountChange=null,e.remark=""):e.disableButton=!1}))}}else this.toastr.warning("Select upto 4 batches only")}else this.toastr.error("Delivery Mode required")}},{key:"onSelect",value:function(t){var e=this;this.limitError=!1,this.finalcheckedrows=[],this.invoiceLotLimit=4,t.selected.length<=4?(t.selected.forEach((function(t){t.totalPcs<=30?e.invoiceLotLimit>0?(e.finalcheckedrows.push(t),e.invoiceLotLimit--):e.limitError=!0:t.totalPcs>30&&t.totalPcs<=60?e.invoiceLotLimit>1?(e.finalcheckedrows.push(t),e.invoiceLotLimit-=2):e.limitError=!0:t.totalPcs>60&&t.totalPcs<=90?e.invoiceLotLimit>2?(e.finalcheckedrows.push(t),e.invoiceLotLimit-=3):e.limitError=!0:t.totalPcs>90&&t.totalPcs<=120&&(e.invoiceLotLimit>3?(e.finalcheckedrows.push(t),e.invoiceLotLimit-=4):e.limitError=!0)})),this.limitError&&this.toastr.error("Gr limit exceeds")):(this.limitError=!0,this.toastr.warning("Select upto 4 batches only"))}},{key:"tableChange",value:function(t){"view table"===t?this.route.navigate(["/pages/generate_invoice/view"]):"report"===t?this.route.navigate(["/pages/all-report"]):"sign"==t?this.route.navigate(["/pages/generate_invoice/sign"]):"received"==t?this.route.navigate(["/pages/generate_invoice/sign/view"]):"print"==t?this.modalService.open(pt):"return"==t&&this.route.navigate(["/pages/stock-batch/return-lot"])}},{key:"enterClicked",value:function(t,e){if(13==(e.keyCode?e.keyCode:e.which)&&t<this.merge.length)var n="invoice"+(t+1)+"-rateChange",i=setInterval((function(){var t=document.getElementById(n);t&&(t.focus(),t.select(),clearInterval(i))}))}}]),e}()).\u0275fac=function(t){return new(t||It)(x.dc(v.a),x.dc(m.a),x.dc(l.c),x.dc(l.a),x.dc(w.b),x.dc(b.a),x.dc(j.a),x.dc(k.e))},It.\u0275cmp=x.Xb({type:It,selectors:[["ngx-add-edit-invoice"]],decls:52,vars:20,consts:[[1,"nb-header"],[1,"row"],[1,"col-md-5","col-6","display-flex-start","max-width-device"],["placeholder","Select",1,"btn","btn-md",3,"change"],["value","view table"],["value","report"],["value","print"],["value","received"],["value","sign"],["value","return"],[1,"col-md-7","col-6"],[4,"ngIf","ngIfElse"],["updateS",""],["invoiceForm","ngForm"],[1,"col-md-3"],[1,"form-group"],[1,"required"],["name","partyId","appendTo","body","required","","placeholder","Party Name",1,"required-error-dropdown","dropdown-name",3,"ngModel","ngClass","readonly","ngModelChange","change"],["partyId1","ngModel"],[3,"value",4,"ngFor","ngForOf"],["class","input-required",4,"ngIf"],["class","form-group col-md-3",4,"ngIf"],["class","col-md-3",4,"ngIf"],[1,"material",3,"rows","headerHeight","footerHeight","selectionType","selected","select"],["name","Batch Id","prop","batchId",3,"headerCheckboxable","checkboxable","maxWidth"],["name","Pchallan","prop","pchallanRef"],["name","MTR","prop","mtr"],["name","WT","prop","wt"],["name","Quality Id","prop","qualityId"],["name","Quality Name","prop","qualityName"],["name","Rate","prop","rate"],["ngx-datatable-cell-template",""],["name","Total Finish Mtr","prop","totalFinishMtr"],["name","Total Pcs","prop","totalPcs"],[1,"col-md-12","mobile-btn-center","text-btn-right"],[1,"padding-bt-tp"],["type","button",1,"btn","btn-primary","btn-sm","btn-design-save","button-base","ripple",2,"margin-right","20px",3,"click"],[1,"nb-text"],[3,"value"],[1,"input-required"],[1,"form-group","col-md-3"],["type","number","id","percentageDiscount","nbinput","","fullwidth","","fieldsize","small","name","percentageDiscount","placeholder","Discount",1,"form-control","size-small",3,"ngModel","ngClass","ngModelChange"],["disChange","ngModel"],["type","text","id","remark","nbinput","","fullwidth","","fieldsize","small","name","remark","placeholder","Remark",1,"form-control","size-small",3,"ngModel","ngModelChange"],["remarkInvoice","ngModel"],["name","delivery","appendTo","body","required","","placeholder","Delivery Mode",1,"required-error-dropdown","dropdown-name",3,"ngModel","ngClass","ngModelChange"],["delivery1","ngModel"],["type","number","id","rateChnage","min","0",1,"tableForm","line-height-subtable",3,"name","ngModel","id","ngModelChange","keyup"],["rateChnage","ngModel"],["class","input-required display-inlineblock",4,"ngIf"],[1,"input-required","display-inlineblock"]],template:function(t,e){if(1&t){var n=x.kc();x.jc(0,"nb-card"),x.jc(1,"nb-card-header",0),x.jc(2,"div",1),x.jc(3,"div",2),x.jc(4,"ng-select",3),x.uc("change",(function(t){return e.tableChange(t)})),x.jc(5,"ng-option",4),x.jd(6,"View Table"),x.ic(),x.jc(7,"ng-option",5),x.jd(8,"Report"),x.ic(),x.jc(9,"ng-option",6),x.jd(10,"Print Invoice"),x.ic(),x.jc(11,"ng-option",7),x.jd(12,"Received Invoices"),x.ic(),x.jc(13,"ng-option",8),x.jd(14,"Sign New Invoices"),x.ic(),x.jc(15,"ng-option",9),x.jd(16,"Lot return"),x.ic(),x.ic(),x.ic(),x.jc(17,"div",10),x.hd(18,ut,3,0,"div",11),x.hd(19,ft,2,0,"ng-template",null,12,x.id),x.ic(),x.ic(),x.ic(),x.jc(21,"nb-card-body"),x.jc(22,"form",null,13),x.jc(24,"div",1),x.jc(25,"div",14),x.jc(26,"div",15),x.jc(27,"label",16),x.jd(28,"Party Name"),x.ic(),x.jc(29,"ng-select",17,18),x.uc("ngModelChange",(function(t){return e.invoiceValues.partyId=t}))("change",(function(t){return e.getPChallanList(t)})),x.hd(31,vt,2,2,"ng-option",19),x.ic(),x.hd(32,bt,3,0,"div",20),x.ic(),x.ic(),x.hd(33,Pt,6,5,"div",21),x.hd(34,Mt,5,1,"div",21),x.hd(35,Ot,8,6,"div",22),x.ic(),x.jc(36,"ngx-datatable",23),x.uc("select",(function(t){return e.onSelect(t)})),x.ec(37,"ngx-datatable-column",24),x.ec(38,"ngx-datatable-column",25),x.ec(39,"ngx-datatable-column",26),x.ec(40,"ngx-datatable-column",27),x.ec(41,"ngx-datatable-column",28),x.ec(42,"ngx-datatable-column",29),x.jc(43,"ngx-datatable-column",30),x.hd(44,_t,3,4,"ng-template",31),x.ic(),x.ec(45,"ngx-datatable-column",32),x.ec(46,"ngx-datatable-column",33),x.ic(),x.jc(47,"div",1),x.jc(48,"div",34),x.jc(49,"div",35),x.jc(50,"button",36),x.uc("click",(function(){x.Xc(n);var t=x.Uc(23);return null==e.currentInvoiceId?e.addInvoice(t):e.updateInvoice(t)})),x.jd(51,"Generate Invoice"),x.ic(),x.ic(),x.ic(),x.ic(),x.ic(),x.ic(),x.ic()}if(2&t){var i=x.Uc(20),c=x.Uc(30);x.Pb(18),x.Hc("ngIf",null==e.currentInvoiceId)("ngIfElse",i),x.Pb(11),x.Hc("ngModel",e.invoiceValues.partyId)("ngClass",x.Nc(18,jt,c.invalid&&(e.formSubmitted||c.touched)))("readonly",null!=e.currentInvoiceId),x.Pb(2),x.Hc("ngForOf",e.party),x.Pb(1),x.Hc("ngIf",e.formSubmitted&&c.invalid||c.invalid&&c.touched),x.Pb(1),x.Hc("ngIf",e.discountFlag),x.Pb(1),x.Hc("ngIf",e.discountFlag),x.Pb(1),x.Hc("ngIf",e.discountFlag),x.Pb(1),x.Hc("rows",e.merge)("headerHeight",31)("footerHeight",31)("selectionType","checkbox")("selected",e.selected),x.Pb(1),x.Hc("headerCheckboxable",!0)("checkboxable",!0)("maxWidth",150)}},directives:[lt.u,lt.x,gt.a,gt.c,d.n,lt.t,st.x,st.m,st.n,st.t,st.l,st.o,d.l,d.m,ht.e,ht.b,ht.a,st.q,st.a],styles:[""]}),It),kt=a("3jao"),Dt=a("dfbw"),St=a("klsY"),Ft=a("qZsz"),At=a("+lss"),Lt=["searchfilter"];function Nt(t,e){if(1&t){var n=x.kc();x.jc(0,"div",39),x.jc(1,"span",40),x.jd(2),x.ic(),x.jd(3," : "),x.jc(4,"span",41),x.jd(5),x.ic(),x.jc(6,"span",42),x.uc("click",(function(){x.Xc(n);var t=e.$implicit;return x.yc(2).onClear(t.field[0])})),x.jc(7,"strong"),x.jd(8,"x"),x.ic(),x.ic(),x.ic()}if(2&t){var i=e.$implicit;x.Pb(2),x.kd(i.field[0]),x.Pb(3),x.kd(i.value)}}function Ht(t,e){if(1&t){var n=x.kc();x.hc(0),x.jc(1,"div",33),x.jc(2,"label",34),x.jd(3,"Filter By : "),x.ic(),x.jc(4,"div",35),x.jc(5,"div",36),x.hd(6,Nt,9,2,"div",37),x.jc(7,"div",38),x.uc("click",(function(){return x.Xc(n),x.yc().onClearFilter()})),x.jd(8,"Clear All"),x.ic(),x.ic(),x.ic(),x.ic(),x.gc()}if(2&t){var i=x.yc();x.Pb(6),x.Hc("ngForOf",i.requestData.data.parameters)}}var zt=function(){return{type:"zoom"}},Tt=function(t){return{animation:t}},qt=function(t){return["/pages/generate_invoice/edit",t]};function Et(t,e){if(1&t&&x.ec(0,"nb-icon",46),2&t){var n=x.yc().row;x.Hc("options",x.Nc(3,Tt,x.Mc(2,zt)))("routerLink",x.Nc(5,qt,n.invoiceNo))}}function Wt(t,e){if(1&t){var n=x.kc();x.jc(0,"nb-icon",43),x.uc("click",(function(t){x.Xc(n);var i=e.row;return x.yc().printCurrentInvoice(t,i)})),x.ic(),x.hd(1,Et,1,7,"nb-icon",44),x.jc(2,"nb-icon",45),x.uc("click",(function(){x.Xc(n);var t=e.row;return x.yc().deleteInvoice(t.invoiceNo)})),x.ic()}if(2&t){var i=e.row;x.Hc("options",x.Nc(4,Tt,x.Mc(3,zt))),x.Pb(1),x.Hc("ngIf",!i.signByParty),x.Pb(1),x.Hc("options",x.Nc(7,Tt,x.Mc(6,zt)))}}function Bt(t,e){if(1&t){var n=x.kc();x.jd(0,"Invoice No "),x.jc(1,"div",47),x.jc(2,"nb-icon",48),x.uc("click",(function(){return x.Xc(n),x.yc().onOpenFilter("invoiceNo")})),x.ic(),x.ic()}if(2&t){x.yc();var i=x.Uc(56);x.Pb(2),x.Hc("nbPopover",i)}}function Rt(t,e){if(1&t){var n=x.kc();x.jd(0,"Party Name "),x.jc(1,"div",47),x.jc(2,"nb-icon",48),x.uc("click",(function(){return x.Xc(n),x.yc().onOpenFilter("partyName")})),x.ic(),x.ic()}if(2&t){x.yc();var i=x.Uc(56);x.Pb(2),x.Hc("nbPopover",i)}}function $t(t,e){if(1&t){var n=x.kc();x.jd(0,"Batch "),x.jc(1,"div",47),x.jc(2,"nb-icon",48),x.uc("click",(function(){return x.Xc(n),x.yc().onOpenFilter("batchList")})),x.ic(),x.ic()}if(2&t){x.yc();var i=x.Uc(56);x.Pb(2),x.Hc("nbPopover",i)}}function Gt(t,e){if(1&t&&(x.hc(0),x.jc(1,"span",50),x.jd(2),x.ic(),x.gc()),2&t){var n=e.$implicit;x.Pb(2),x.ld("",n.batchId," ")}}function Xt(t,e){1&t&&x.hd(0,Gt,3,1,"ng-container",49),2&t&&x.Hc("ngForOf",e.row.batchList)}function Ut(t,e){1&t&&x.jd(0,"Total Mtr ")}function Vt(t,e){1&t&&x.jd(0,"Total Finish Mtr ")}function Kt(t,e){if(1&t){var n=x.kc();x.jd(0,"Net Amt "),x.jc(1,"div",47),x.jc(2,"nb-icon",48),x.uc("click",(function(){return x.Xc(n),x.yc().onOpenFilter("netAmt")})),x.ic(),x.ic()}if(2&t){x.yc();var i=x.Uc(56);x.Pb(2),x.Hc("nbPopover",i)}}function Qt(t,e){if(1&t){var n=x.kc();x.jd(0,"Created Date "),x.jc(1,"div",47),x.jc(2,"nb-icon",48),x.uc("click",(function(){return x.Xc(n),x.yc().onOpenFilter("date")})),x.ic(),x.ic()}if(2&t){x.yc();var i=x.Uc(56);x.Pb(2),x.Hc("nbPopover",i)}}function Yt(t,e){1&t&&x.jd(0),2&t&&x.ld(" ",e.row.date," ")}function Zt(t,e){if(1&t&&(x.jc(0,"option",51),x.jd(1),x.ic()),2&t){var n=e.$implicit;x.Hc("value",n),x.Pb(1),x.kd(n)}}function Jt(t,e){if(1&t){var n=x.kc();x.hc(0),x.jc(1,"ng-select",63),x.uc("ngModelChange",(function(t){return x.Xc(n),x.yc(2).operatorSelected=t})),x.jc(2,"ng-option",64),x.jd(3,"Conatins"),x.ic(),x.jc(4,"ng-option",65),x.jd(5,"Equals"),x.ic(),x.jc(6,"ng-option",66),x.jd(7,"Not Equals"),x.ic(),x.jc(8,"ng-option",67),x.jd(9,"Starts With"),x.ic(),x.jc(10,"ng-option",68),x.jd(11,"Ends With"),x.ic(),x.ic(),x.gc()}if(2&t){var i=x.yc(2);x.Pb(1),x.Hc("ngModel",i.operatorSelected)}}function te(t,e){if(1&t){var n=x.kc();x.hc(0),x.jc(1,"ng-select",63),x.uc("ngModelChange",(function(t){return x.Xc(n),x.yc(2).operatorSelected=t})),x.jc(2,"ng-option",69),x.jd(3,"Greater Than"),x.ic(),x.jc(4,"ng-option",70),x.jd(5,"Less Than"),x.ic(),x.jc(6,"ng-option",65),x.jd(7,"Equals"),x.ic(),x.jc(8,"ng-option",66),x.jd(9,"Not Equals"),x.ic(),x.ic(),x.gc()}if(2&t){var i=x.yc(2);x.Pb(1),x.Hc("ngModel",i.operatorSelected)}}function ee(t,e){if(1&t){var n=x.kc();x.jc(0,"div",52),x.jc(1,"div",53),x.jc(2,"div",54),x.jc(3,"span",55),x.jd(4,"Filter"),x.ic(),x.ic(),x.jc(5,"div",56),x.jc(6,"div",57),x.uc("click",(function(){return x.Xc(n),x.yc().closeFilterPopover()})),x.jc(7,"strong"),x.jd(8,"X"),x.ic(),x.ic(),x.ic(),x.ic(),x.jc(9,"div",58),x.jc(10,"div",59),x.hd(11,Jt,12,1,"ng-container",17),x.hd(12,te,10,1,"ng-container",17),x.ic(),x.jc(13,"div",59),x.jc(14,"input",60),x.uc("ngModelChange",(function(t){return x.Xc(n),x.yc().filterWord=t})),x.ic(),x.ic(),x.ic(),x.jc(15,"button",61),x.uc("click",(function(){return x.Xc(n),x.yc().onApplyFilter()})),x.jd(16,"Apply"),x.ic(),x.jc(17,"button",62),x.uc("click",(function(){return x.Xc(n),x.yc().closeFilterPopover()})),x.jd(18,"Close"),x.ic(),x.ic()}if(2&t){var i=x.yc();x.Pb(11),x.Hc("ngIf",i.stringFlag),x.Pb(1),x.Hc("ngIf",i.numberFlag),x.Pb(2),x.Hc("ngModel",i.filterWord)}}var ne,ie=function(){return["/pages/generate_invoice"]},ce=((ne=function(){function t(e,n,i,c,a){o(this,t),this.generateInvoiceService=e,this.router=n,this.modalService=i,this.toastr=c,this.datePipe=a,this.checked=!1,this.in=2,this.loading=!1,this.InvoiceList=[],this.copyInvoiceList=[],this.Invoice=[],this.finalcheckedrows=[],this.hidden=!0,this.hiddenEdit=!0,this.hiddenView=!0,this.numberFlag=!1,this.stringFlag=!1,this.pageSizes=[10,20,50,100],this.selectedPageSize=20,this.requestData=new Dt.a,this.filterWord="",this.selectedColumnForFilter="",this.operatorSelected=null,this.tableHeaders=["invoiceNo","partyName","batchList","totalMtr","finishMtr","netAmt","date"],this.searchStr="",this.searchANDCondition=!1,this.destroy$=new h.a}return c(t,[{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}},{key:"ngOnInit",value:function(){this.requestData.data=new kt.a,this.requestData.getBy="all",this.getAllInvoice()}},{key:"filter",value:function(t){var e=t.toString().toLowerCase().trim(),n=Object.keys(this.copyInvoiceList[0]);this.InvoiceList=this.copyInvoiceList.filter((function(t){for(var i=0;i<n.length;i++)if("batchList"==n[i]){for(var c=0;c<t[n[i]].length;c++)if(t[n[i]][c].batchId&&-1!==t[n[i]][c].batchId.toString().toLowerCase().indexOf(e)||!e)return!0}else if(t[n[i]]&&-1!==t[n[i]].toString().toLowerCase().indexOf(e)||!e)return!0}))}},{key:"getAllInvoice",value:function(){var t=this;this.loading=!0,this.generateInvoiceService.getAllDipatchV1(this.requestData).pipe(Object(g.a)(this.destroy$)).subscribe((function(e){if(e.success){var n=e.data;t.InvoiceList=n.data,t.requestData.data.total=n.total,t.InvoiceList.forEach((function(e){e.netAmt=e.netAmt.toFixed(2),e.date=t.datePipe.transform(e.date,"dd/MM/yyyy")})),t.copyInvoiceList=n.data,t.copyInvoiceList.forEach((function(t){t.netAmt=Number(t.netAmt).toFixed(2)})),t.Invoice=t.InvoiceList.map((function(t){return{date:t.date,id:t.id,invoiceNo:t.invoiceNo,partyName:t.partyName,isSendToParty:t.isSendToParty,netAmt:t.netAmt,totalMtr:t.totalMtr,finishMtr:t.finishMtr}})),t.copyInvoiceList=t.InvoiceList.map((function(t){return{id:t.id,date:t.date,invoiceNo:t.invoiceNo,partyName:t.partyName,isSendToParty:t.isSendToParty,netAmt:t.netAmt,totalMtr:t.totalMtr,finishMtr:t.finishMtr}}))}t.loading=!1}),(function(e){t.loading=!1}))}},{key:"print",value:function(){var t={},e=this.finalcheckedrows;0!=e.length&&(t.myArray=JSON.stringify(e),this.router.navigate(["/pages/generate_invoice/print/"],{queryParams:t}))}},{key:"goToReport",value:function(){this.router.navigate(["/pages/generate_invoice/report"])}},{key:"onSelect",value:function(t){var e=this;this.finalcheckedrows=[],t.selected.forEach((function(t){e.finalcheckedrows.push(t.invoiceNo)}))}},{key:"printCurrentInvoice",value:function(t,e){this.finalcheckedrows=[],this.finalcheckedrows.push(e.invoiceNo),this.print()}},{key:"deleteInvoice",value:function(t){var e=this,n=this.modalService.open(St.c,{size:"sm"});n.componentInstance.title="Delete Invoice",n.result.then((function(n){n&&(e.loading=!0,e.generateInvoiceService.deleteByInvoiceNo(t).pipe(Object(g.a)(e.destroy$)).subscribe((function(t){t.success?(e.toastr.success("Deleted Successfully."),e.getAllInvoice(),e.loading=!1):e.loading=!1})))}))}},{key:"setPage",value:function(t){this.requestData.data.pageIndex=t.offset,this.getAllInvoice()}},{key:"pageSizeChanged",value:function(){this.requestData.data.pageSize=Number(this.selectedPageSize),this.getAllInvoice()}},{key:"onOpenFilter",value:function(t){"invoiceNo"==t||"partyName"==t||"createdAt"==t?(this.stringFlag=!0,this.numberFlag=!1):(this.numberFlag=!0,this.stringFlag=!1);var e=this.requestData.data.parameters.findIndex((function(e){return e.field.find((function(e){return e==t}))}));e>-1?(this.filterWord=this.requestData.data.parameters[e].value,this.operatorSelected=this.requestData.data.parameters[e].operator):(this.filterWord="",this.operatorSelected=null),this.selectedColumnForFilter=t,this.popover.show()}},{key:"onApplyFilter",value:function(){var t=this;this.popover.hide();var e=this.requestData.data.parameters.findIndex((function(e){return e.field.find((function(e){return e==t.selectedColumnForFilter}))}));if(e>-1)this.requestData.data.parameters[e].operator=this.operatorSelected,this.requestData.data.parameters[e].value=this.filterWord;else{var n=new Ft.a;n.field=[this.selectedColumnForFilter],n.value=this.filterWord,n.operator=this.operatorSelected,this.requestData.data.parameters.push(n)}this.requestData.data.pageIndex=0,this.getAllInvoice()}},{key:"onClear",value:function(t){var e,n=this;(e=this.requestData.data.parameters.findIndex(t?function(e){return e.field.find((function(e){return e==t}))}:function(t){return t.field.find((function(t){return t==n.selectedColumnForFilter}))}))>-1&&(this.filterWord="",this.operatorSelected=null,this.requestData.data.parameters.splice(e,1),this.requestData.data.pageIndex=0,this.getAllInvoice())}},{key:"closeFilterPopover",value:function(){this.popover.hide()}},{key:"onClearFilter",value:function(){this.popover.hide(),this.requestData.data.parameters.length>0&&(this.requestData.data.parameters=[],this.getAllInvoice())}}]),t}()).\u0275fac=function(t){return new(t||ne)(x.dc(v.a),x.dc(l.c),x.dc(k.e),x.dc(w.b),x.dc(d.e))},ne.\u0275cmp=x.Xb({type:ne,selectors:[["ngx-generate-invoice"]],viewQuery:function(t,e){var n;1&t&&(x.cd(Lt,!0),x.nd(lt.ab,!0)),2&t&&(x.Tc(n=x.vc())&&(e.filterTextBox=n.first),x.Tc(n=x.vc())&&(e.popover=n.first))},decls:57,vars:30,consts:[[1,"nb-style"],[1,"nb-header"],[1,"row"],[1,"col-md-2","col-3","display-flex-start","max-width-device"],[1,"btn","btn-primary","btn-md","btn-design","txt-ov-elips",3,"routerLink"],[1,"col-md-8","col-3"],[1,"nb-text","txt-ov-elips"],[1,"col-md-1","col-2","display-flex-start","desktop-justify-flexend","mobile-pd-0"],[1,"btn","btn-primary","btn-md","btn-design",3,"click"],[1,"col-md-6"],[1,"col-md-4"],[2,"display","flex"],[2,"margin-top","4px","margin-right","2px"],["status","primary","labelPosition","start","name","shift",3,"ngModel","checkedChange","ngModelChange"],[2,"margin-top","4px","margin-left","2px"],[1,"col-md-8"],["type","text","placeholder","Search","aria-label","Search","aria-describedby","basic-addon1",1,"form-control",3,"ngModel","ngModelChange"],[4,"ngIf"],[1,"material","table-responsive",3,"rows","ngClass","headerHeight","footerHeight","externalPaging","count","offset","limit","page"],["name","Action","sortable","false","prop","id",3,"headerCheckboxable","checkboxable","maxWidth"],["ngx-datatable-cell-template",""],["name","Invoice No","prop","invoiceNo",3,"maxWidth"],["ngx-datatable-header-template",""],["name","Party Name","prop","partyName",3,"maxWidth"],["name","Batch","prop","batchList",3,"maxWidth"],["name","Total Mtr","prop","totalMtr",3,"maxWidth"],["name","Total Finish Mtr","prop","finishMtr",3,"maxWidth"],["name","Net Amt","prop","netAmt",3,"maxWidth"],["name","Created Date","prop","date",3,"maxWidth"],[1,"page-sizer","d-flex"],["name","pageSizer",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],["templateRef",""],[1,"filter-by-row"],["for",""],[1,"filter-by-col"],[1,"tag-style-con"],["class","tag-style",4,"ngFor","ngForOf"],[1,"filter-by-clear-all",3,"click"],[1,"tag-style"],[1,"filter-by-title"],[1,"filter-by-val"],[2,"cursor","pointer",3,"click"],["icon","clipboard","nbTooltip","Print","nbTooltipStatus","primary","status","danger",3,"options","click"],["icon","edit","status","primary",3,"options","routerLink",4,"ngIf"],["status","danger","icon","trash",3,"options","click"],["icon","edit","status","primary",3,"options","routerLink"],[1,"filter-icon"],["icon","menu-outline","nbPopoverTrigger","noop",1,"nb-icon-filter",3,"nbPopover","click"],[4,"ngFor","ngForOf"],[1,"invpice-batch-style"],[3,"value"],["id","filterDiv",2,"padding","2px 14px","width","250px"],[1,"row",2,"background-color","#aa3634"],[1,"col-md-10"],[2,"color","white"],[1,"col-md-2",2,"margin-top","3px","color","white"],[2,"cursor","pointer","text-align","center",3,"click"],[1,"row",2,"margin-top","8px"],[1,"col-md-12","mb-1"],["type","text","placeholder","Filter...",1,"form-control",3,"ngModel","ngModelChange"],["nbButton","","status","primary",2,"margin-right","5px",3,"click"],["nbButton","","status","danger",3,"click"],["appendTo","body","placeholder","Select Filter",1,"popup-select",3,"ngModel","ngModelChange"],["value","LIKE"],["value","EQUALS"],["value","NOT_EQUALS"],["value","START_WITH"],["value","END_WITH"],["value","GREATER_THAN"],["value","LESS_THAN"]],template:function(t,e){1&t&&(x.jc(0,"nb-card",0),x.jc(1,"nb-card-header",1),x.jc(2,"div",2),x.jc(3,"div",3),x.jc(4,"button",4),x.jd(5,"Generate Invoice"),x.ic(),x.ic(),x.jc(6,"div",5),x.jc(7,"h2",6),x.jd(8,"Generate Invoice"),x.ic(),x.ic(),x.jc(9,"div",7),x.jc(10,"button",8),x.uc("click",(function(){return e.goToReport()})),x.jd(11,"REPORT"),x.ic(),x.ic(),x.jc(12,"div",7),x.jc(13,"button",8),x.uc("click",(function(){return e.print()})),x.jd(14,"PRINT"),x.ic(),x.ic(),x.ic(),x.ic(),x.jc(15,"nb-card-body"),x.jc(16,"div",2),x.jc(17,"div",9),x.jc(18,"div",2),x.jc(19,"div",10),x.jc(20,"div",11),x.jc(21,"p",12),x.jd(22,"OR"),x.ic(),x.jc(23,"nb-toggle",13),x.uc("checkedChange",(function(){return e.getAllInvoice()}))("ngModelChange",(function(t){return e.requestData.data.isAnd=t})),x.ic(),x.jc(24,"p",14),x.jd(25,"AND"),x.ic(),x.ic(),x.ic(),x.jc(26,"div",15),x.jc(27,"input",16),x.uc("ngModelChange",(function(t){return e.searchStr=t})),x.ic(),x.ic(),x.ic(),x.ic(),x.ic(),x.jc(28,"div",2),x.hd(29,Ht,9,1,"ng-container",17),x.ic(),x.jc(30,"ngx-datatable",18),x.uc("page",(function(t){return e.setPage(t)})),x.zc(31,"searchInTable"),x.jc(32,"ngx-datatable-column",19),x.hd(33,Wt,3,9,"ng-template",20),x.ic(),x.jc(34,"ngx-datatable-column",21),x.hd(35,Bt,3,1,"ng-template",22),x.ic(),x.jc(36,"ngx-datatable-column",23),x.hd(37,Rt,3,1,"ng-template",22),x.ic(),x.jc(38,"ngx-datatable-column",24),x.hd(39,$t,3,1,"ng-template",22),x.hd(40,Xt,1,1,"ng-template",20),x.ic(),x.jc(41,"ngx-datatable-column",25),x.hd(42,Ut,1,0,"ng-template",22),x.ic(),x.jc(43,"ngx-datatable-column",26),x.hd(44,Vt,1,0,"ng-template",22),x.ic(),x.jc(45,"ngx-datatable-column",27),x.hd(46,Kt,3,1,"ng-template",22),x.ic(),x.jc(47,"ngx-datatable-column",28),x.hd(48,Qt,3,1,"ng-template",22),x.hd(49,Yt,1,1,"ng-template",20),x.ic(),x.ic(),x.jc(50,"div",29),x.jc(51,"span"),x.jd(52,"Page Size: "),x.ic(),x.jc(53,"select",30),x.uc("ngModelChange",(function(t){return e.selectedPageSize=t}))("change",(function(){return e.pageSizeChanged()})),x.hd(54,Zt,2,2,"option",31),x.ic(),x.ic(),x.ic(),x.ic(),x.hd(55,ee,19,3,"ng-template",null,32,x.id)),2&t&&(x.Pb(4),x.Hc("routerLink",x.Mc(29,ie)),x.Pb(19),x.Hc("ngModel",e.requestData.data.isAnd),x.Pb(4),x.Hc("ngModel",e.searchStr),x.Pb(2),x.Hc("ngIf",e.requestData.data.parameters&&e.requestData.data.parameters.length),x.Pb(1),x.Hc("rows",x.Dc(31,24,e.InvoiceList,e.searchStr,e.requestData.data.isAnd,e.tableHeaders))("ngClass","bootstrap")("headerHeight",31)("footerHeight",40)("externalPaging",!0)("count",e.requestData.data.total)("offset",e.requestData.data.pageIndex)("limit",e.requestData.data.pageSize),x.Pb(2),x.Hc("headerCheckboxable",!0)("checkboxable",!0)("maxWidth",110),x.Pb(2),x.Hc("maxWidth",110),x.Pb(2),x.Hc("maxWidth",500),x.Pb(2),x.Hc("maxWidth",200),x.Pb(3),x.Hc("maxWidth",500),x.Pb(2),x.Hc("maxWidth",500),x.Pb(2),x.Hc("maxWidth",500),x.Pb(2),x.Hc("maxWidth",200),x.Pb(6),x.Hc("ngModel",e.selectedPageSize),x.Pb(1),x.Hc("ngForOf",e.pageSizes))},directives:[lt.u,lt.x,l.d,lt.t,lt.wb,st.l,st.o,st.a,d.n,ht.e,d.l,ht.b,ht.a,ht.c,st.u,d.m,lt.I,lt.yb,lt.ab,st.p,st.w,lt.q,gt.a,gt.c],pipes:[At.a],styles:[""]}),ne),oe=a("U498"),ae=a("LvDl"),re=a("kF6S"),de=["searchfilter"],le=function(){return{type:"zoom"}},se=function(t){return{animation:t}};function pe(t,e){if(1&t){var n=x.kc();x.jc(0,"nb-icon",26),x.uc("click",(function(){x.Xc(n);var t=e.row;return x.yc().deleteSignedInvoice(t.invoiceNo)})),x.ic(),x.jd(1,"\xa0\xa0 ")}2&t&&x.Hc("options",x.Nc(2,se,x.Mc(1,le)))}function ge(t,e){if(1&t){var n=x.kc();x.jd(0,"Invoice No "),x.jc(1,"div",27),x.jc(2,"nb-icon",28),x.uc("click",(function(){return x.Xc(n),x.yc().onOpenFilter("invoiceNo")})),x.ic(),x.ic()}if(2&t){x.yc();var i=x.Uc(39);x.Pb(2),x.Hc("nbPopover",i)}}function he(t,e){if(1&t){var n=x.kc();x.jd(0,"Party Name "),x.jc(1,"div",27),x.jc(2,"nb-icon",28),x.uc("click",(function(){return x.Xc(n),x.yc().onOpenFilter("partyName")})),x.ic(),x.ic()}if(2&t){x.yc();var i=x.Uc(39);x.Pb(2),x.Hc("nbPopover",i)}}function ue(t,e){if(1&t&&(x.hc(0),x.jc(1,"span",30),x.jd(2),x.ic(),x.gc()),2&t){var n=e.$implicit;x.Pb(2),x.ld("",n.batchId," ")}}function fe(t,e){1&t&&x.hd(0,ue,3,1,"ng-container",29),2&t&&x.Hc("ngForOf",e.row.batchList)}function ve(t,e){if(1&t){var n=x.kc();x.jd(0,"Net Amt "),x.jc(1,"div",27),x.jc(2,"nb-icon",28),x.uc("click",(function(){return x.Xc(n),x.yc().onOpenFilter("netAmt")})),x.ic(),x.ic()}if(2&t){x.yc();var i=x.Uc(39);x.Pb(2),x.Hc("nbPopover",i)}}function be(t,e){if(1&t){var n=x.kc();x.jd(0,"Created Date "),x.jc(1,"div",27),x.jc(2,"nb-icon",28),x.uc("click",(function(){return x.Xc(n),x.yc().onOpenFilter("date")})),x.ic(),x.ic()}if(2&t){x.yc();var i=x.Uc(39);x.Pb(2),x.Hc("nbPopover",i)}}function me(t,e){1&t&&(x.jd(0),x.zc(1,"date")),2&t&&x.ld(" ",x.Bc(1,1,e.row.date,"fullDate")," ")}function je(t,e){if(1&t&&(x.jc(0,"option",31),x.jd(1),x.ic()),2&t){var n=e.$implicit;x.Hc("value",n),x.Pb(1),x.kd(n)}}function Pe(t,e){if(1&t){var n=x.kc();x.hc(0),x.jc(1,"ng-select",44),x.uc("ngModelChange",(function(t){return x.Xc(n),x.yc(2).operatorSelected=t})),x.jc(2,"ng-option",45),x.jd(3,"Conatins"),x.ic(),x.jc(4,"ng-option",46),x.jd(5,"Equals"),x.ic(),x.jc(6,"ng-option",47),x.jd(7,"Not Equals"),x.ic(),x.jc(8,"ng-option",48),x.jd(9,"Starts With"),x.ic(),x.jc(10,"ng-option",49),x.jd(11,"Ends With"),x.ic(),x.ic(),x.gc()}if(2&t){var i=x.yc(2);x.Pb(1),x.Hc("ngModel",i.operatorSelected)}}function Me(t,e){if(1&t){var n=x.kc();x.hc(0),x.jc(1,"ng-select",44),x.uc("ngModelChange",(function(t){return x.Xc(n),x.yc(2).operatorSelected=t})),x.jc(2,"ng-option",50),x.jd(3,"Greater Than"),x.ic(),x.jc(4,"ng-option",51),x.jd(5,"Less Than"),x.ic(),x.jc(6,"ng-option",46),x.jd(7,"Equals"),x.ic(),x.jc(8,"ng-option",47),x.jd(9,"Not Equals"),x.ic(),x.ic(),x.gc()}if(2&t){var i=x.yc(2);x.Pb(1),x.Hc("ngModel",i.operatorSelected)}}function ye(t,e){if(1&t){var n=x.kc();x.jc(0,"div",32),x.jc(1,"div",33),x.jc(2,"div",34),x.jc(3,"span",35),x.jd(4,"Filter"),x.ic(),x.ic(),x.jc(5,"div",36),x.jc(6,"div",37),x.uc("click",(function(){return x.Xc(n),x.yc().closeFilterPopover()})),x.jc(7,"strong"),x.jd(8,"X"),x.ic(),x.ic(),x.ic(),x.ic(),x.jc(9,"div",38),x.jc(10,"div",39),x.hd(11,Pe,12,1,"ng-container",40),x.hd(12,Me,10,1,"ng-container",40),x.ic(),x.jc(13,"div",39),x.jc(14,"input",41),x.uc("ngModelChange",(function(t){return x.Xc(n),x.yc().filterWord=t})),x.ic(),x.ic(),x.ic(),x.jc(15,"button",42),x.uc("click",(function(){return x.Xc(n),x.yc().onApplyFilter()})),x.jd(16,"Apply"),x.ic(),x.jc(17,"button",43),x.uc("click",(function(){return x.Xc(n),x.yc().closeFilterPopover()})),x.jd(18,"Close"),x.ic(),x.ic()}if(2&t){var i=x.yc();x.Pb(11),x.Hc("ngIf",i.stringFlag),x.Pb(1),x.Hc("ngIf",i.numberFlag),x.Pb(2),x.Hc("ngModel",i.filterWord)}}var Ce,Oe=((Ce=function(){function t(e,n,i,c){o(this,t),this.route=e,this.generateInvoiceService=n,this.toastr=i,this.modalService=c,this.InvoiceList=[],this.copyInvoiceList=[],this.loading=!1,this.destroy$=new h.a,this.numberFlag=!1,this.stringFlag=!1,this.pageSizes=[10,20,50,100],this.selectedPageSize=20,this.requestData=new Dt.a,this.filterWord="",this.selectedColumnForFilter="",this.operatorSelected=null,this.tableHeaders=["invoiceNo","partyName","batchList","totalMtr","finishMtr","netAmt","date"],this.searchStr="",this.searchANDCondition=!1}return c(t,[{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}},{key:"ngOnInit",value:function(){this.requestData.data=new kt.a,this.requestData.getBy="all",this.getAllInvoice()}},{key:"tableChange",value:function(t){"sign"===t?this.route.navigate(["/pages/generate_invoice/sign"]):"generate"===t&&this.route.navigate(["/pages/generate_invoice/"])}},{key:"deleteSignedInvoice",value:function(t){var e=this;this.modalService.open(re.a,{size:"sm"}).result.then((function(n){n&&e.generateInvoiceService.saveNewSignedInvoice([{invoiceNo:t,signByParty:!1}]).pipe(Object(g.a)(e.destroy$)).subscribe((function(t){t.success?(e.toastr.success(t.msg),e.getAllInvoice()):e.toastr.error(t.msg),e.loading=!1}),(function(t){e.loading=!1}))}))}},{key:"filter",value:function(t){var e=this,n=t.toString().toLowerCase().trim();this.InvoiceList=n?this.copyInvoiceList.filter((function(t){return e.matchString(t,"partyName",n)||e.matchString(t,"invoiceNo",n)||e.matchString(t,"totalMtr",n)||e.matchString(t,"batchList",n)||e.matchString(t,"finishMtr",n)||e.matchString(t,"netAmt",n)})):Object(ae.cloneDeep)(this.copyInvoiceList)}},{key:"matchString",value:function(t,e,n){return"batchList"==e?t[e].filter((function(t){return t.batchId.toLowerCase().includes(n)})).length>0:t[e].toString().toLowerCase().includes(n)}},{key:"getAllInvoice",value:function(){var t=this;this.loading=!0,this.InvoiceList=[],this.copyInvoiceList=[],this.generateInvoiceService.getAllDipatchV1(this.requestData,"signed").pipe(Object(g.a)(this.destroy$)).subscribe((function(e){if(e.success){var n=e.data;t.InvoiceList=n.data,t.requestData.data.total=n.total,t.InvoiceList.forEach((function(t){t.netAmt=t.netAmt.toFixed(2)})),t.copyInvoiceList=e.data}t.loading=!1}),(function(e){t.loading=!1}))}},{key:"setPage",value:function(t){this.requestData.data.pageIndex=t.offset,this.getAllInvoice()}},{key:"pageSizeChanged",value:function(){this.requestData.data.pageSize=Number(this.selectedPageSize),this.getAllInvoice()}},{key:"onOpenFilter",value:function(t){"invoiceNo"==t||"partyName"==t||"createdAt"==t?(this.stringFlag=!0,this.numberFlag=!1):(this.numberFlag=!0,this.stringFlag=!1);var e=this.requestData.data.parameters.findIndex((function(e){return e.field.find((function(e){return e==t}))}));e>-1?(this.filterWord=this.requestData.data.parameters[e].value,this.operatorSelected=this.requestData.data.parameters[e].operator):(this.filterWord="",this.operatorSelected=null),this.selectedColumnForFilter=t,this.popover.show()}},{key:"onApplyFilter",value:function(){var t=this;this.popover.hide();var e=this.requestData.data.parameters.findIndex((function(e){return e.field.find((function(e){return e==t.selectedColumnForFilter}))}));if(e>-1)this.requestData.data.parameters[e].operator=this.operatorSelected,this.requestData.data.parameters[e].value=this.filterWord;else{var n=new Ft.a;n.field=[this.selectedColumnForFilter],n.value=this.filterWord,n.operator=this.operatorSelected,this.requestData.data.parameters.push(n)}this.requestData.data.pageIndex=0,this.getAllInvoice()}},{key:"onClear",value:function(t){var e,n=this;(e=this.requestData.data.parameters.findIndex(t?function(e){return e.field.find((function(e){return e==t}))}:function(t){return t.field.find((function(t){return t==n.selectedColumnForFilter}))}))>-1&&(this.filterWord="",this.operatorSelected=null,this.requestData.data.parameters.splice(e,1),this.requestData.data.pageIndex=0,this.getAllInvoice())}},{key:"closeFilterPopover",value:function(){this.popover.hide()}},{key:"onClearFilter",value:function(){this.popover.hide(),this.requestData.data.parameters.length>0&&(this.requestData.data.parameters=[],this.getAllInvoice())}}]),t}()).\u0275fac=function(t){return new(t||Ce)(x.dc(l.c),x.dc(v.a),x.dc(w.b),x.dc(k.e))},Ce.\u0275cmp=x.Xb({type:Ce,selectors:[["ngx-received-invoice"]],viewQuery:function(t,e){var n;1&t&&(x.cd(de,!0),x.nd(lt.ab,!0)),2&t&&(x.Tc(n=x.vc())&&(e.filterTextBox=n.first),x.Tc(n=x.vc())&&(e.popover=n.first))},decls:40,vars:24,consts:[[1,"nb-style"],[1,"nb-header"],[1,"row"],[1,"col-md-2","col-3","display-flex-start","max-width-device"],["placeholder","Select",1,"btn","btn-md",3,"change"],["value","sign"],["value","generate"],[1,"col-md-5","col-3","display-flex-start","max-width-device"],[1,"nb-text","txt-ov-elips"],[1,"col-md-6"],["type","text","placeholder","Search","aria-label","Search","aria-describedby","basic-addon1",1,"form-control",3,"keyup"],["let","","index","",1,"material","table-responsive",3,"rows","ngClass","headerHeight","footerHeight","externalPaging","count","offset","limit","selectionType","page"],["name","Action","sortable","false","prop","id",3,"maxWidth"],["ngx-datatable-cell-template",""],["name","Invoice No","prop","invoiceNo",3,"maxWidth"],["ngx-datatable-header-template",""],["name","Party Name","prop","partyName",3,"maxWidth"],["name","Batch","prop","batchList",3,"maxWidth"],["name","Total Mtr","prop","totalMtr",3,"maxWidth"],["name","Total Finish Mtr","prop","finishMtr",3,"maxWidth"],["name","Net Amt","prop","netAmt",3,"maxWidth"],["name","Created Date","prop","date",3,"maxWidth"],[1,"page-sizer","d-flex"],["name","pageSizer",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],["templateRef",""],["icon","trash","status","danger",3,"options","click"],[1,"filter-icon"],["icon","menu-outline","nbPopoverTrigger","noop",1,"nb-icon-filter",3,"nbPopover","click"],[4,"ngFor","ngForOf"],[1,"invpice-batch-style"],[3,"value"],["id","filterDiv",2,"padding","2px 14px","width","250px"],[1,"row",2,"background-color","#aa3634"],[1,"col-md-10"],[2,"color","white"],[1,"col-md-2",2,"margin-top","3px","color","white"],[2,"cursor","pointer","text-align","center",3,"click"],[1,"row",2,"margin-top","8px"],[1,"col-md-12","mb-1"],[4,"ngIf"],["type","text","placeholder","Filter...",1,"form-control",3,"ngModel","ngModelChange"],["nbButton","","status","primary",2,"margin-right","5px",3,"click"],["nbButton","","status","danger",3,"click"],["appendTo","body","placeholder","Select Filter",1,"popup-select",3,"ngModel","ngModelChange"],["value","LIKE"],["value","EQUALS"],["value","NOT_EQUALS"],["value","START_WITH"],["value","END_WITH"],["value","GREATER_THAN"],["value","LESS_THAN"]],template:function(t,e){1&t&&(x.jc(0,"nb-card",0),x.jc(1,"nb-card-header",1),x.jc(2,"div",2),x.jc(3,"div",3),x.jc(4,"ng-select",4),x.uc("change",(function(t){return e.tableChange(t)})),x.jc(5,"ng-option",5),x.jd(6,"Sign New Invoices"),x.ic(),x.jc(7,"ng-option",6),x.jd(8,"Generate Invoice"),x.ic(),x.ic(),x.ic(),x.jc(9,"div",7),x.jc(10,"h2",8),x.jd(11,"Signed Invoice"),x.ic(),x.ic(),x.ic(),x.ic(),x.jc(12,"nb-card-body"),x.jc(13,"div",2),x.jc(14,"div",9),x.jc(15,"input",10),x.uc("keyup",(function(t){return e.filter(t.target.value)})),x.ic(),x.ic(),x.ic(),x.jc(16,"ngx-datatable",11),x.uc("page",(function(t){return e.setPage(t)})),x.zc(17,"searchInTable"),x.jc(18,"ngx-datatable-column",12),x.hd(19,pe,2,4,"ng-template",13),x.ic(),x.jc(20,"ngx-datatable-column",14),x.hd(21,ge,3,1,"ng-template",15),x.ic(),x.jc(22,"ngx-datatable-column",16),x.hd(23,he,3,1,"ng-template",15),x.ic(),x.jc(24,"ngx-datatable-column",17),x.hd(25,fe,1,1,"ng-template",13),x.ic(),x.ec(26,"ngx-datatable-column",18),x.ec(27,"ngx-datatable-column",19),x.jc(28,"ngx-datatable-column",20),x.hd(29,ve,3,1,"ng-template",15),x.ic(),x.jc(30,"ngx-datatable-column",21),x.hd(31,be,3,1,"ng-template",15),x.hd(32,me,2,4,"ng-template",13),x.ic(),x.ic(),x.jc(33,"div",22),x.jc(34,"span"),x.jd(35,"Page Size: "),x.ic(),x.jc(36,"select",23),x.uc("ngModelChange",(function(t){return e.selectedPageSize=t}))("change",(function(){return e.pageSizeChanged()})),x.hd(37,je,2,2,"option",24),x.ic(),x.ic(),x.ic(),x.ic(),x.hd(38,ye,19,3,"ng-template",null,25,x.id)),2&t&&(x.Pb(16),x.Hc("rows",x.Dc(17,19,e.InvoiceList,e.searchStr,e.requestData.data.isAnd,e.tableHeaders))("ngClass","bootstrap")("headerHeight",31)("footerHeight",40)("externalPaging",!0)("count",e.requestData.data.total)("offset",e.requestData.data.pageIndex)("limit",e.requestData.data.pageSize)("selectionType","checkbox"),x.Pb(2),x.Hc("maxWidth",110),x.Pb(2),x.Hc("maxWidth",110),x.Pb(2),x.Hc("maxWidth",500),x.Pb(2),x.Hc("maxWidth",200),x.Pb(2),x.Hc("maxWidth",500),x.Pb(1),x.Hc("maxWidth",500),x.Pb(1),x.Hc("maxWidth",500),x.Pb(2),x.Hc("maxWidth",200),x.Pb(6),x.Hc("ngModel",e.selectedPageSize),x.Pb(1),x.Hc("ngForOf",e.pageSizes))},directives:[lt.u,lt.x,gt.a,gt.c,lt.t,ht.e,d.l,ht.b,ht.a,ht.c,st.u,st.l,st.o,d.m,lt.I,lt.ab,st.p,st.w,d.n,st.a,lt.q],pipes:[At.a,d.e],styles:[""]}),Ce),xe=a("qC+V"),_e=["searchfilter"];function Ie(t,e){if(1&t){var n=x.kc();x.jd(0,"Invoice No "),x.jc(1,"div",29),x.jc(2,"nb-icon",30),x.uc("click",(function(){return x.Xc(n),x.yc().onOpenFilter("invoiceNo")})),x.ic(),x.ic()}if(2&t){x.yc();var i=x.Uc(43);x.Pb(2),x.Hc("nbPopover",i)}}function we(t,e){if(1&t){var n=x.kc();x.jd(0,"Party Name "),x.jc(1,"div",29),x.jc(2,"nb-icon",30),x.uc("click",(function(){return x.Xc(n),x.yc().onOpenFilter("partyName")})),x.ic(),x.ic()}if(2&t){x.yc();var i=x.Uc(43);x.Pb(2),x.Hc("nbPopover",i)}}function ke(t,e){if(1&t){var n=x.kc();x.jd(0,"Batch "),x.jc(1,"div",29),x.jc(2,"nb-icon",30),x.uc("click",(function(){return x.Xc(n),x.yc().onOpenFilter("batchList")})),x.ic(),x.ic()}if(2&t){x.yc();var i=x.Uc(43);x.Pb(2),x.Hc("nbPopover",i)}}function De(t,e){if(1&t){var n=x.kc();x.jd(0,"Batch "),x.jc(1,"div",29),x.jc(2,"nb-icon",30),x.uc("click",(function(){return x.Xc(n),x.yc(2).onOpenFilter("batchList")})),x.ic(),x.ic()}if(2&t){x.yc(2);var i=x.Uc(43);x.Pb(2),x.Hc("nbPopover",i)}}function Se(t,e){if(1&t&&(x.hc(0),x.jc(1,"span",32),x.jd(2),x.ic(),x.gc()),2&t){var n=e.$implicit;x.Pb(2),x.ld("",n.batchId," ")}}function Fe(t,e){if(1&t&&(x.hd(0,De,3,1,"ng-template",14),x.hd(1,Se,3,1,"ng-container",31)),2&t){var n=e.row;x.Pb(1),x.Hc("ngForOf",n.batchList)}}function Ae(t,e){if(1&t){var n=x.kc();x.jd(0,"Net Amt "),x.jc(1,"div",29),x.jc(2,"nb-icon",30),x.uc("click",(function(){return x.Xc(n),x.yc().onOpenFilter("netAmt")})),x.ic(),x.ic()}if(2&t){x.yc();var i=x.Uc(43);x.Pb(2),x.Hc("nbPopover",i)}}function Le(t,e){if(1&t){var n=x.kc();x.jd(0,"Created Date "),x.jc(1,"div",29),x.jc(2,"nb-icon",30),x.uc("click",(function(){return x.Xc(n),x.yc().onOpenFilter("date")})),x.ic(),x.ic()}if(2&t){x.yc();var i=x.Uc(43);x.Pb(2),x.Hc("nbPopover",i)}}function Ne(t,e){if(1&t&&(x.jc(0,"option",33),x.jd(1),x.ic()),2&t){var n=e.$implicit;x.Hc("value",n),x.Pb(1),x.kd(n)}}function He(t,e){if(1&t){var n=x.kc();x.hc(0),x.jc(1,"ng-select",46),x.uc("ngModelChange",(function(t){return x.Xc(n),x.yc(2).operatorSelected=t})),x.jc(2,"ng-option",47),x.jd(3,"Conatins"),x.ic(),x.jc(4,"ng-option",48),x.jd(5,"Equals"),x.ic(),x.jc(6,"ng-option",49),x.jd(7,"Not Equals"),x.ic(),x.jc(8,"ng-option",50),x.jd(9,"Starts With"),x.ic(),x.jc(10,"ng-option",51),x.jd(11,"Ends With"),x.ic(),x.ic(),x.gc()}if(2&t){var i=x.yc(2);x.Pb(1),x.Hc("ngModel",i.operatorSelected)}}function ze(t,e){if(1&t){var n=x.kc();x.hc(0),x.jc(1,"ng-select",46),x.uc("ngModelChange",(function(t){return x.Xc(n),x.yc(2).operatorSelected=t})),x.jc(2,"ng-option",52),x.jd(3,"Greater Than"),x.ic(),x.jc(4,"ng-option",53),x.jd(5,"Less Than"),x.ic(),x.jc(6,"ng-option",48),x.jd(7,"Equals"),x.ic(),x.jc(8,"ng-option",49),x.jd(9,"Not Equals"),x.ic(),x.ic(),x.gc()}if(2&t){var i=x.yc(2);x.Pb(1),x.Hc("ngModel",i.operatorSelected)}}function Te(t,e){if(1&t){var n=x.kc();x.jc(0,"div",34),x.jc(1,"div",35),x.jc(2,"div",36),x.jc(3,"span",37),x.jd(4,"Filter"),x.ic(),x.ic(),x.jc(5,"div",38),x.jc(6,"div",39),x.uc("click",(function(){return x.Xc(n),x.yc().closeFilterPopover()})),x.jc(7,"strong"),x.jd(8,"X"),x.ic(),x.ic(),x.ic(),x.ic(),x.jc(9,"div",40),x.jc(10,"div",41),x.hd(11,He,12,1,"ng-container",42),x.hd(12,ze,10,1,"ng-container",42),x.ic(),x.jc(13,"div",41),x.jc(14,"input",43),x.uc("ngModelChange",(function(t){return x.Xc(n),x.yc().filterWord=t})),x.ic(),x.ic(),x.ic(),x.jc(15,"button",44),x.uc("click",(function(){return x.Xc(n),x.yc().onApplyFilter()})),x.jd(16,"Apply"),x.ic(),x.jc(17,"button",45),x.uc("click",(function(){return x.Xc(n),x.yc().closeFilterPopover()})),x.jd(18,"Close"),x.ic(),x.ic()}if(2&t){var i=x.yc();x.Pb(11),x.Hc("ngIf",i.stringFlag),x.Pb(1),x.Hc("ngIf",i.numberFlag),x.Pb(2),x.Hc("ngModel",i.filterWord)}}var qe,Ee,We,Be=[{path:"",component:wt,canActivate:[s.a],canLoad:[s.a],data:{PermissionName:["add"]}},{path:"view",component:ce,canActivate:[s.a],canLoad:[s.a],data:{PermissionName:["view","view group","view all"]}},{path:"sign/view",component:Oe,canActivate:[s.a],canLoad:[s.a],data:{PermissionName:["view","view group","view all"]}},{path:"edit/:id",component:wt,canActivate:[s.a],canLoad:[s.a],data:{PermissionName:["edit","edit group","edit all"]}},{path:"sign",component:(qe=function(){function t(e,n,i,c){o(this,t),this.route=e,this.generateInvoiceService=n,this.toastr=i,this.datePipe=c,this.finalcheckedrows=[],this.InvoiceList=[],this.copyInvoiceList=[],this.loading=!1,this.destroy$=new h.a,this.numberFlag=!1,this.stringFlag=!1,this.pageSizes=[10,20,50,100],this.selectedPageSize=20,this.requestData=new Dt.a,this.filterWord="",this.selectedColumnForFilter="",this.operatorSelected=null,this.tableHeaders=["invoiceNo","partyName","batchList","totalMtr","finishMtr","netAmt","date"],this.searchStr="",this.searchANDCondition=!1}return c(t,[{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}},{key:"ngOnInit",value:function(){this.requestData.data=new kt.a,this.requestData.getBy="all",this.getAllInvoice()}},{key:"tableChange",value:function(t){"received"===t?this.route.navigate(["/pages/generate_invoice/sign/view"]):"generate"===t&&this.route.navigate(["/pages/generate_invoice/"])}},{key:"signNewInvoice",value:function(){var t=this;if(this.finalcheckedrows.length){this.loading=!0;var e=[];this.finalcheckedrows.forEach((function(t){e.push({invoiceNo:t.invoiceNo,signByParty:!0})})),this.generateInvoiceService.saveNewSignedInvoice(e).pipe(Object(g.a)(this.destroy$)).subscribe((function(e){e.success?(t.toastr.success(e.msg),t.getAllInvoice()):t.toastr.error(e.msg),t.loading=!1}),(function(e){t.loading=!1}))}else this.toastr.error("Select at least one invoice.")}},{key:"onSelect",value:function(t){this.finalcheckedrows=[],this.finalcheckedrows=t.selected}},{key:"getAllInvoice",value:function(){var t=this;this.loading=!0,this.finalcheckedrows=[],this.InvoiceList=[],this.copyInvoiceList=[],this.generateInvoiceService.getAllDipatchV1(this.requestData,"unsigned").pipe(Object(g.a)(this.destroy$)).subscribe((function(e){if(e.success){var n=e.data;t.InvoiceList=n.data,t.requestData.data.total=n.total,t.InvoiceList.forEach((function(e){e.netAmt=e.netAmt.toFixed(2),e.date=t.datePipe.transform(e.date,"dd/MM/yyyy")})),t.copyInvoiceList=Object(ae.cloneDeep)(t.InvoiceList)}t.loading=!1}),(function(e){t.loading=!1}))}},{key:"filter",value:function(t){var e=this,n=t.toString().toLowerCase().trim();this.InvoiceList=n?this.copyInvoiceList.filter((function(t){return e.matchString(t,"partyName",n)||e.matchString(t,"invoiceNo",n)||e.matchString(t,"totalMtr",n)||e.matchString(t,"batchList",n)||e.matchString(t,"finishMtr",n)||e.matchString(t,"netAmt",n)})):Object(ae.cloneDeep)(this.copyInvoiceList)}},{key:"matchString",value:function(t,e,n){return"batchList"==e?t[e].filter((function(t){return t.batchId.toLowerCase().includes(n)})).length>0:t[e].toString().toLowerCase().includes(n)}},{key:"setPage",value:function(t){this.requestData.data.pageIndex=t.offset,this.getAllInvoice()}},{key:"pageSizeChanged",value:function(){this.requestData.data.pageSize=Number(this.selectedPageSize),this.getAllInvoice()}},{key:"onOpenFilter",value:function(t){"invoiceNo"==t||"partyName"==t||"createdAt"==t?(this.stringFlag=!0,this.numberFlag=!1):(this.numberFlag=!0,this.stringFlag=!1);var e=this.requestData.data.parameters.findIndex((function(e){return e.field.find((function(e){return e==t}))}));e>-1?(this.filterWord=this.requestData.data.parameters[e].value,this.operatorSelected=this.requestData.data.parameters[e].operator):(this.filterWord="",this.operatorSelected=null),this.selectedColumnForFilter=t,this.popover.show()}},{key:"onApplyFilter",value:function(){var t=this;this.popover.hide();var e=this.requestData.data.parameters.findIndex((function(e){return e.field.find((function(e){return e==t.selectedColumnForFilter}))}));if(e>-1)this.requestData.data.parameters[e].operator=this.operatorSelected,this.requestData.data.parameters[e].value=this.filterWord;else{var n=new Ft.a;n.field=[this.selectedColumnForFilter],n.value=this.filterWord,n.operator=this.operatorSelected,this.requestData.data.parameters.push(n)}this.requestData.data.pageIndex=0,this.getAllInvoice()}},{key:"onClear",value:function(t){var e,n=this;(e=this.requestData.data.parameters.findIndex(t?function(e){return e.field.find((function(e){return e==t}))}:function(t){return t.field.find((function(t){return t==n.selectedColumnForFilter}))}))>-1&&(this.filterWord="",this.operatorSelected=null,this.requestData.data.parameters.splice(e,1),this.requestData.data.pageIndex=0,this.getAllInvoice())}},{key:"closeFilterPopover",value:function(){this.popover.hide()}},{key:"onClearFilter",value:function(){this.popover.hide(),this.requestData.data.parameters.length>0&&(this.requestData.data.parameters=[],this.getAllInvoice())}}]),t}(),qe.\u0275fac=function(t){return new(t||qe)(x.dc(l.c),x.dc(v.a),x.dc(w.b),x.dc(d.e))},qe.\u0275cmp=x.Xb({type:qe,selectors:[["ngx-sign-invoice"]],viewQuery:function(t,e){var n;1&t&&(x.cd(_e,!0),x.nd(lt.ab,!0)),2&t&&(x.Tc(n=x.vc())&&(e.filterTextBox=n.first),x.Tc(n=x.vc())&&(e.popover=n.first))},decls:44,vars:26,consts:[[1,"nb-style"],[1,"nb-header"],[1,"row"],[1,"col-md-2","col-3","display-flex-start","max-width-device"],["placeholder","Select",1,"btn","btn-md",3,"change"],["value","received"],["value","generate"],[1,"col-md-5","col-3","display-flex-start","max-width-device"],[1,"nb-text","txt-ov-elips"],[3,"show"],[1,"col-md-6"],["type","text","placeholder","Search","aria-label","Search","aria-describedby","basic-addon1",1,"form-control",3,"keyup"],["let","","index","",1,"material","table-responsive",3,"rows","ngClass","headerHeight","footerHeight","externalPaging","count","offset","limit","selectionType","page"],["name","Invoice No","prop","invoiceNo",3,"headerCheckboxable","checkboxable","maxWidth"],["ngx-datatable-header-template",""],["name","Party Name","prop","partyName",3,"maxWidth"],["name","Batch","prop","batchList",3,"maxWidth"],["ngx-datatable-cell-template",""],["name","Total Mtr","prop","totalMtr",3,"maxWidth"],["name","Total Finish Mtr","prop","finishMtr",3,"maxWidth"],["name","Net Amt","prop","netAmt",3,"maxWidth"],["name","Created Date","prop","date",3,"maxWidth"],[1,"page-sizer","d-flex"],["name","pageSizer",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-12","mobile-btn-center","text-btn-right"],[1,"padding-bt-tp"],["type","button",1,"btn","btn-primary","btn-sm","btn-design-save","button-base","ripple",2,"margin-right","20px",3,"click"],["templateRef",""],[1,"filter-icon"],["icon","menu-outline","nbPopoverTrigger","noop",1,"nb-icon-filter",3,"nbPopover","click"],[4,"ngFor","ngForOf"],[1,"invpice-batch-style"],[3,"value"],["id","filterDiv",2,"padding","2px 14px","width","250px"],[1,"row",2,"background-color","#aa3634"],[1,"col-md-10"],[2,"color","white"],[1,"col-md-2",2,"margin-top","3px","color","white"],[2,"cursor","pointer","text-align","center",3,"click"],[1,"row",2,"margin-top","8px"],[1,"col-md-12","mb-1"],[4,"ngIf"],["type","text","placeholder","Filter...",1,"form-control",3,"ngModel","ngModelChange"],["nbButton","","status","primary",2,"margin-right","5px",3,"click"],["nbButton","","status","danger",3,"click"],["appendTo","body","placeholder","Select Filter",1,"popup-select",3,"ngModel","ngModelChange"],["value","LIKE"],["value","EQUALS"],["value","NOT_EQUALS"],["value","START_WITH"],["value","END_WITH"],["value","GREATER_THAN"],["value","LESS_THAN"]],template:function(t,e){1&t&&(x.jc(0,"nb-card",0),x.jc(1,"nb-card-header",1),x.jc(2,"div",2),x.jc(3,"div",3),x.jc(4,"ng-select",4),x.uc("change",(function(t){return e.tableChange(t)})),x.jc(5,"ng-option",5),x.jd(6,"View Signed Invoices"),x.ic(),x.jc(7,"ng-option",6),x.jd(8,"Generate Invoice"),x.ic(),x.ic(),x.ic(),x.jc(9,"div",7),x.jc(10,"h2",8),x.jd(11,"Sign Invoice"),x.ic(),x.ic(),x.ic(),x.ic(),x.jc(12,"nb-card-body"),x.ec(13,"ngx-loading",9),x.jc(14,"div",2),x.jc(15,"div",10),x.jc(16,"input",11),x.uc("keyup",(function(t){return e.filter(t.target.value)})),x.ic(),x.ic(),x.ic(),x.jc(17,"ngx-datatable",12),x.uc("page",(function(t){return e.setPage(t)})),x.zc(18,"searchInTable"),x.jc(19,"ngx-datatable-column",13),x.hd(20,Ie,3,1,"ng-template",14),x.ic(),x.jc(21,"ngx-datatable-column",15),x.hd(22,we,3,1,"ng-template",14),x.ic(),x.jc(23,"ngx-datatable-column",16),x.hd(24,ke,3,1,"ng-template",14),x.hd(25,Fe,2,1,"ng-template",17),x.ic(),x.ec(26,"ngx-datatable-column",18),x.ec(27,"ngx-datatable-column",19),x.jc(28,"ngx-datatable-column",20),x.hd(29,Ae,3,1,"ng-template",14),x.ic(),x.jc(30,"ngx-datatable-column",21),x.hd(31,Le,3,1,"ng-template",14),x.ic(),x.ic(),x.jc(32,"div",22),x.jc(33,"span"),x.jd(34,"Page Size: "),x.ic(),x.jc(35,"select",23),x.uc("ngModelChange",(function(t){return e.selectedPageSize=t}))("change",(function(){return e.pageSizeChanged()})),x.hd(36,Ne,2,2,"option",24),x.ic(),x.ic(),x.jc(37,"div",2),x.jc(38,"div",25),x.jc(39,"div",26),x.jc(40,"button",27),x.uc("click",(function(){return e.signNewInvoice()})),x.jd(41,"Sign"),x.ic(),x.ic(),x.ic(),x.ic(),x.ic(),x.ic(),x.hd(42,Te,19,3,"ng-template",null,28,x.id)),2&t&&(x.Pb(13),x.Hc("show",e.loading),x.Pb(4),x.Hc("rows",x.Dc(18,21,e.InvoiceList,e.searchStr,e.requestData.data.isAnd,e.tableHeaders))("ngClass","bootstrap")("headerHeight",31)("footerHeight",40)("externalPaging",!0)("count",e.requestData.data.total)("offset",e.requestData.data.pageIndex)("limit",e.requestData.data.pageSize)("selectionType","checkbox"),x.Pb(2),x.Hc("headerCheckboxable",!0)("checkboxable",!0)("maxWidth",110),x.Pb(2),x.Hc("maxWidth",500),x.Pb(2),x.Hc("maxWidth",200),x.Pb(3),x.Hc("maxWidth",500),x.Pb(1),x.Hc("maxWidth",500),x.Pb(1),x.Hc("maxWidth",500),x.Pb(2),x.Hc("maxWidth",200),x.Pb(5),x.Hc("ngModel",e.selectedPageSize),x.Pb(1),x.Hc("ngForOf",e.pageSizes))},directives:[lt.u,lt.x,gt.a,gt.c,lt.t,xe.a,ht.e,d.l,ht.b,ht.c,ht.a,st.u,st.l,st.o,d.m,lt.I,lt.ab,st.p,st.w,d.n,st.a,lt.q],pipes:[At.a],styles:[""]}),qe),canActivate:[s.a],canLoad:[s.a],data:{PermissionName:["edit","edit group","edit all"]}},{path:"report",component:oe.a},{path:"print",component:rt}],Re=((Ee=function t(){o(this,t)}).\u0275mod=x.bc({type:Ee}),Ee.\u0275inj=x.ac({factory:function(t){return new(t||Ee)},imports:[[l.g.forChild(Be)],l.g]}),Ee),$e=a("yzeJ"),Ge=a("vTDv"),Xe=((We=function t(){o(this,t)}).\u0275mod=x.bc({type:We}),We.\u0275inj=x.ac({factory:function(t){return new(t||We)},providers:[k.a],imports:[[d.c,Re,$e.a,k.f,Ge.a]]}),We)},U498:function(e,n,i){"use strict";i.d(n,"a",(function(){return m}));var a=i("tcrU"),r=i("LvDl"),d=i("fXoL"),l=i("ofXK"),s=i("aceb"),p=i("3Pt+");function g(t,e){if(1&t&&(d.jc(0,"span"),d.jd(1),d.ic()),2&t){var n=e.$implicit,i=e.index,c=d.yc().$implicit,o=d.yc(2);d.Pb(1),d.md(" ",n," : ",c[o.copyHeaderKeys[i]]," , ")}}function h(t,e){if(1&t&&(d.jc(0,"th"),d.jd(1),d.ic()),2&t){var n=e.$implicit;d.Pb(1),d.kd(n)}}function u(t,e){if(1&t&&(d.jc(0,"td"),d.jd(1),d.ic()),2&t){var n=e.$implicit,i=d.yc().$implicit;d.Pb(1),d.kd(i[n])}}function f(t,e){if(1&t&&(d.jc(0,"tr"),d.hd(1,u,2,1,"td",16),d.ic()),2&t){var n=e.index,i=d.yc(3);d.ed("background",n%2==0?"#ffffff":"#f2f2f2"),d.Pb(1),d.Hc("ngForOf",i.headerArray)}}function v(t,e){if(1&t&&(d.jc(0,"div",12),d.jc(1,"div",13),d.jc(2,"div",14),d.jc(3,"h5",15),d.hd(4,g,2,2,"span",16),d.ic(),d.ic(),d.jc(5,"table",17),d.jc(6,"tr"),d.hd(7,h,2,1,"th",16),d.ic(),d.hd(8,f,2,3,"tr",18),d.ic(),d.ic(),d.ic()),2&t){var n=e.$implicit,i=d.yc(2);d.Pb(4),d.Hc("ngForOf",i.headerKeys),d.Pb(3),d.Hc("ngForOf",i.headers),d.Pb(1),d.Hc("ngForOf",n.list)}}function b(t,e){if(1&t&&(d.jc(0,"div",2),d.jc(1,"div",3),d.jc(2,"div",4),d.jc(3,"span"),d.jc(4,"h3"),d.jd(5,"INVOICE REPORT"),d.ic(),d.jc(6,"span",5),d.jd(7),d.zc(8,"date"),d.ic(),d.ic(),d.ic(),d.ic(),d.jc(9,"div",6),d.jc(10,"div",7),d.ec(11,"div",8),d.jc(12,"div",9),d.jc(13,"span",10),d.jc(14,"h3"),d.jd(15),d.zc(16,"number"),d.ic(),d.ic(),d.ic(),d.jc(17,"div",9),d.jc(18,"span",10),d.jc(19,"h3"),d.jd(20),d.zc(21,"number"),d.ic(),d.ic(),d.ic(),d.jc(22,"div",9),d.jc(23,"span",10),d.jc(24,"h3"),d.jd(25),d.zc(26,"number"),d.ic(),d.ic(),d.ic(),d.ic(),d.ic(),d.hd(27,v,9,3,"div",11),d.ec(28,"br"),d.ec(29,"br"),d.jc(30,"div",6),d.jc(31,"div",7),d.ec(32,"div",8),d.jc(33,"div",9),d.jc(34,"span",10),d.jc(35,"h3"),d.jd(36),d.zc(37,"number"),d.ic(),d.ic(),d.ic(),d.jc(38,"div",9),d.jc(39,"span",10),d.jc(40,"h3"),d.jd(41),d.zc(42,"number"),d.ic(),d.ic(),d.ic(),d.jc(43,"div",9),d.jc(44,"span",10),d.jc(45,"h3"),d.jd(46),d.zc(47,"number"),d.ic(),d.ic(),d.ic(),d.ic(),d.ic(),d.ic()),2&t){var n=d.yc();d.Pb(7),d.kd(d.Bc(8,8,n.currentDate,"dd/MM/yyyy")),d.Pb(8),d.ld(" Total Grey Meter - ",d.Bc(16,11,n.totalGrayMeter,"1.2-2")," "),d.Pb(5),d.ld(" Total Finished Meter - ",d.Bc(21,14,n.totalFinishedMeter,"1.2-2")," "),d.Pb(5),d.ld("Total Amount - ",d.Bc(26,17,n.totalAmount,"1.2-2"),""),d.Pb(2),d.Hc("ngForOf",n.shortReport),d.Pb(9),d.ld(" Total Grey Meter - ",d.Bc(37,20,n.totalGrayMeter,"1.2-2")," "),d.Pb(5),d.ld(" Total Finished Meter - ",d.Bc(42,23,n.totalFinishedMeter,"1.2-2")," "),d.Pb(5),d.ld("Total Amount - ",d.Bc(47,26,n.totalAmount,"1.2-2"),"")}}var m=function(){var e=function(){function e(t){o(this,e),this.datepipe=t,this.currentDate=new Date,this.shortReport=[],this.headerArray=[],this.headerKeys=[],this.copyHeaderKeys=[]}return c(e,[{key:"ngOnInit",value:function(){this.maxDate=new Date(this.currentDate.getFullYear(),this.currentDate.getMonth(),this.currentDate.getDate(),23,59),this.getShortReport()}},{key:"getShortReport",value:function(){var e=this;if(this.totalAmount=0,this.totalFinishedMeter=0,this.totalGrayMeter=0,this.shortReport&&this.shortReport.length){var n=/([A-Z])([A-Z])([a-z])|([a-z])([A-Z])/g;this.copyHeaderKeys=Object.keys(this.shortReport[0]);var i=[];if(this.copyHeaderKeys.forEach((function(t,e){i.push(t.replace(n,"$1$4 $2$3$5")),i[e]=i[e].charAt(0).toUpperCase()+i[e].slice(1)})),i=i.filter((function(t){return"List"!==t})),this.copyHeaderKeys=this.copyHeaderKeys.filter((function(t){return"list"!==t})),this.headerKeys=t(i),this.shortReport[0].list&&this.shortReport[0].list.length){var c=/([A-Z])([A-Z])([a-z])|([a-z])([A-Z])/g;this.headerArray=Object.keys(this.shortReport[0].list[0]);var o=[];this.headerArray.forEach((function(t,e){o.push(t.replace(c,"$1$4 $2$3$5")),o[e]=o[e].charAt(0).toUpperCase()+o[e].slice(1)})),this.headers=[].concat(o),this.shortReport.forEach((function(t){t.list.forEach((function(t){e.totalFinishedMeter+=t.totalFinishMtr,e.totalGrayMeter+=t.totalMtr,e.totalAmount+=t.taxAmt}))}))}this.shortReport=Object(r.sortBy)(this.shortReport,"invoiceNo"),this.printReport()}}},{key:"printReport",value:function(){var t=this,e=new a.PrintDocument({title:""});e.append('<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/paper-css/0.3.0/paper.css">'),e.append('<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">'),e.append('<link href="https://cdn.grapecity.com/wijmo/5.latest/styles/wijmo.min.css" rel="stylesheet">');var n=setInterval((function(){var i=document.getElementById("shortReport");null!=i&&(e.append(i),clearInterval(n),setTimeout((function(){e.print(),t.shortReport=[]}),1e3))}),10)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(d.dc(l.e))},e.\u0275cmp=d.Xb({type:e,selectors:[["ngx-invoice-report"]],inputs:{shortReport:"shortReport"},decls:5,vars:1,consts:[["invoiceForm","ngForm"],["id","shortReport","class","print-body",4,"ngIf"],["id","shortReport",1,"print-body"],[1,"row","report-header"],[1,"col-md-12","print-layout-report"],[1,"font-20"],[1,"row","align-item-right","justify-content-end","mr-5"],[1,"justify-content-space-between"],[1,"col-sm-3"],[1,"text-right","table-bordered"],[2,"font-size","large"],["class","mb-5",4,"ngFor","ngForOf"],[1,"mb-5"],[1,"print-body"],[1,"invoice-no-heading",2,"width","fit-content"],[1,"bold-invoice",2,"font-size","18px"],[4,"ngFor","ngForOf"],[1,"print-layout-report","table-bordered","table-striped","table-process-fnt","width-100",2,"font-size","large"],[3,"background",4,"ngFor","ngForOf"]],template:function(t,e){1&t&&(d.jc(0,"nb-card"),d.jc(1,"nb-card-body"),d.jc(2,"form",null,0),d.hd(4,b,48,29,"div",1),d.ic(),d.ic(),d.ic()),2&t&&(d.Pb(4),d.Hc("ngIf",e.shortReport&&e.shortReport.length>0))},directives:[s.u,s.t,p.x,p.m,p.n,l.n,l.m],pipes:[l.e,l.f],styles:[".font-styles[_ngcontent-%COMP%]{font-size:large}.report-header[_ngcontent-%COMP%]{background:#c6d9f1;color:#4f6072}.invoice-no-heading[_ngcontent-%COMP%]{padding:2px;border:1px solid #000}.print-body[_ngcontent-%COMP%]{margin:10px}.bold-invoice[_ngcontent-%COMP%]{font-weight:700}.tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#90ee90}"]}),e}()}}])}();