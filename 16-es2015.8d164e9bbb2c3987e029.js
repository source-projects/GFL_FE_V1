(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{g0Zo:function(e,t,i){"use strict";i.r(t),i.d(t,"DyeingProcessModule",(function(){return Re}));var c=i("ofXK"),s=i("tyNb"),n=i("1G5W"),a=i("XNiG"),o=i("5+WD"),d=i("yodA"),r=i("4/8P"),l=i("iLL0"),g=i("LvDl"),h=i("fXoL"),p=i("1kSV"),u=i("5eHb"),m=i("3Pt+"),y=i("ZOsW"),b=i("aceb"),j=i("HpUL"),f=i("IgRl");const v=["data"];function P(e,t){if(1&e&&(h.jc(0,"ng-option",32),h.jd(1),h.ic()),2&e){const e=t.$implicit;h.Hc("value",e.id),h.Pb(1),h.ld("",e.tagProcessName," ")}}function S(e,t){if(1&e&&(h.jc(0,"ng-option",32),h.jd(1),h.ic()),2&e){const e=t.$implicit;h.Hc("value",e),h.Pb(1),h.ld("",e," ")}}function M(e,t){1&e&&(h.jc(0,"div",33),h.jd(1," Process Type is required. "),h.ic())}function C(e,t){if(1&e&&(h.jc(0,"ng-option",32),h.jd(1),h.ic()),2&e){const e=t.$implicit;h.Hc("value",e),h.Pb(1),h.kd(e)}}function L(e,t){1&e&&(h.jc(0,"div",33),h.jd(1," Step Position is required. "),h.ic())}function T(e,t){1&e&&(h.jc(0,"div",33),h.jd(1," Temprature is required. "),h.ic())}function D(e,t){1&e&&(h.jc(0,"div",33),h.jd(1," Hold Time is required. "),h.ic())}function x(e,t){1&e&&(h.jc(0,"div",33),h.jd(1," Liquor ratio is required. "),h.ic())}function I(e,t){if(1&e&&(h.jc(0,"ng-option",54),h.jc(1,"div",6),h.jc(2,"div",38),h.jc(3,"div",39),h.jd(4),h.ic(),h.ic(),h.jc(5,"div",38),h.jc(6,"div",40),h.jd(7),h.ic(),h.ic(),h.ic(),h.ic()),2&e){const e=t.$implicit;h.Hc("value",e.itemId),h.Pb(4),h.kd(e.itemName),h.Pb(3),h.ld("",e.supplierName," ")}}function w(e,t){if(1&e&&(h.jc(0,"ng-option",32),h.jd(1),h.ic()),2&e){const e=t.$implicit;h.Hc("value",e.id),h.Pb(1),h.ld("",e.value," ")}}function F(e,t){if(1&e&&(h.jc(0,"ng-option",32),h.jd(1),h.ic()),2&e){const e=t.$implicit;h.Hc("value",e),h.Pb(1),h.ld(" ",e," ")}}const N=function(){return{type:"zoom"}},k=function(e){return{animation:e}};function H(e,t){if(1&e){const e=h.kc();h.jc(0,"tr"),h.jc(1,"td",34),h.jc(2,"ng-select",35,36),h.uc("ngModelChange",(function(i){return h.Xc(e),t.$implicit.itemId=i}))("change",(function(){h.Xc(e);const i=t.index;return h.yc().itemSelected(i)})),h.jc(5,"ng-option",37),h.jc(6,"div",6),h.jc(7,"div",38),h.jc(8,"div",39),h.jd(9,"Item"),h.ic(),h.ic(),h.jc(10,"div",38),h.jc(11,"div",40),h.jd(12,"Supplier "),h.ic(),h.ic(),h.ic(),h.ic(),h.hd(13,I,8,3,"ng-option",41),h.zc(14,"showOnlyChemicalFilter"),h.ic(),h.ic(),h.jc(15,"td",42),h.jc(16,"input",43,44),h.uc("ngModelChange",(function(i){return h.Xc(e),t.$implicit.supplierName=i}))("keyup",(function(i){h.Xc(e);const c=t.index;return h.yc().onKeyUp(i,c,1,"supplierName")})),h.ic(),h.ic(),h.jc(18,"td",45),h.jc(19,"input",46,47),h.uc("ngModelChange",(function(i){return h.Xc(e),t.$implicit.concentration=i}))("keypress",(function(t){return h.Xc(e),h.yc().numberOnly(t)}))("keyup",(function(i){h.Xc(e);const c=t.index;return h.yc().onKeyUp(i,c,2,"concentration")})),h.ic(),h.ic(),h.jc(21,"td",45),h.jc(22,"ng-select",48,47),h.uc("ngModelChange",(function(i){return h.Xc(e),t.$implicit.byChemical=i}))("keyup",(function(i){h.Xc(e);const c=t.index;return h.yc().onKeyUp(i,c,3,"byChemical")})),h.hd(24,w,2,2,"ng-option",10),h.ic(),h.ic(),h.jc(25,"td",49),h.jc(26,"ng-select",50,51),h.uc("ngModelChange",(function(i){return h.Xc(e),t.$implicit.shadeType=i})),h.hd(29,F,2,2,"ng-option",10),h.ic(),h.ic(),h.jc(30,"td",52),h.jc(31,"nb-icon",53),h.uc("click",(function(){h.Xc(e);const i=t.index;return h.yc().removeItem(i)})),h.ic(),h.ic(),h.ic()}if(2&e){const e=t.$implicit,i=t.index,c=h.yc();h.Pb(2),h.Kc("name","itemId",e._id,"_",i,""),h.Hc("ngModel",e.itemId)("id","supplierList"+i+"-0"),h.Pb(11),h.Hc("ngForOf",h.Bc(14,24,c.itemListArray,!1)),h.Pb(3),h.Kc("name","supplierName",e._id,"_",i,""),h.Hc("ngModel",e.supplierName)("id","supplierList"+i+"-supplierName"),h.Pb(3),h.Kc("name","concentration",e._id,"_",i,""),h.Hc("ngModel",e.concentration)("id","supplierList"+i+"-concentration"),h.Pb(3),h.Kc("name","byChemical",e._id,"_",i,""),h.Hc("ngModel",e.byChemical)("id","supplierList"+i+"-byChemical"),h.Pb(2),h.Hc("ngForOf",c.byChemicalList),h.Pb(2),h.Kc("name","shadeType",e._id,"_",i,""),h.Hc("ngModel",e.shadeType)("id","supplierList"+i+"-4"),h.Pb(3),h.Hc("ngForOf",c.shadeTypeList),h.Pb(2),h.Hc("options",h.Nc(28,k,h.Mc(27,N)))}}function O(e,t){if(1&e){const e=h.kc();h.jc(0,"tr"),h.jc(1,"td"),h.jd(2),h.ic(),h.jc(3,"td"),h.jc(4,"input",56),h.uc("ngModelChange",(function(i){h.Xc(e);const c=t.index;return h.yc(2).dyeingProcessStep.dyeingplcMast.dyeingplcDataList[c].l=i}))("keyup",(function(i){h.Xc(e);const c=t.index,s=t.$implicit;return h.yc(2).onKeyUpForTable(i,c,s,"L")})),h.ic(),h.ic(),h.jc(5,"td"),h.jc(6,"input",56),h.uc("ngModelChange",(function(i){h.Xc(e);const c=t.index;return h.yc(2).dyeingProcessStep.dyeingplcMast.dyeingplcDataList[c].m=i}))("keyup",(function(i){h.Xc(e);const c=t.index,s=t.$implicit;return h.yc(2).onKeyUpForTable(i,c,s,"M")})),h.ic(),h.ic(),h.jc(7,"td"),h.jc(8,"input",56),h.uc("ngModelChange",(function(i){h.Xc(e);const c=t.index;return h.yc(2).dyeingProcessStep.dyeingplcMast.dyeingplcDataList[c].d=i}))("keyup",(function(i){h.Xc(e);const c=t.index,s=t.$implicit;return h.yc(2).onKeyUpForTable(i,c,s,"D")})),h.ic(),h.ic(),h.jc(9,"td"),h.jc(10,"input",56),h.uc("ngModelChange",(function(i){h.Xc(e);const c=t.index;return h.yc(2).dyeingProcessStep.dyeingplcMast.dyeingplcDataList[c].s=i}))("keyup",(function(i){h.Xc(e);const c=t.index,s=t.$implicit;return h.yc(2).onKeyUpForTable(i,c,s,"S")})),h.ic(),h.ic(),h.ic()}if(2&e){const e=t.$implicit,i=t.index,c=h.yc(2);h.Pb(2),h.ld(" ",e," "),h.Pb(2),h.Kc("name","",e,"L-",i,""),h.Hc("ngModel",c.dyeingProcessStep.dyeingplcMast.dyeingplcDataList[i].l)("id","attL-"+i),h.Pb(2),h.Kc("name","",e,"M-",i,""),h.Hc("ngModel",c.dyeingProcessStep.dyeingplcMast.dyeingplcDataList[i].m)("id","attM-"+i),h.Pb(2),h.Kc("name","",e,"D-",i,""),h.Hc("ngModel",c.dyeingProcessStep.dyeingplcMast.dyeingplcDataList[i].d)("id","attD-"+i),h.Pb(2),h.Kc("name","",e,"S-",i,""),h.Hc("ngModel",c.dyeingProcessStep.dyeingplcMast.dyeingplcDataList[i].s)("id","attS-"+i)}}function q(e,t){if(1&e&&(h.jc(0,"div",6),h.jc(1,"table",25),h.jc(2,"tr"),h.jc(3,"th"),h.jd(4,"Attribute"),h.ic(),h.jc(5,"th"),h.jd(6,"L"),h.ic(),h.jc(7,"th"),h.jd(8,"M"),h.ic(),h.jc(9,"th"),h.jd(10,"D"),h.ic(),h.jc(11,"th"),h.jd(12,"S"),h.ic(),h.ic(),h.hd(13,O,11,17,"tr",55),h.ic(),h.ic()),2&e){const e=h.yc();h.Pb(13),h.Hc("ngForOf",e.attributesArray)}}const A=function(e){return{"is-invalid":e}};let U=(()=>{class e{constructor(e,t,i){this.activeModal=e,this.DyeingProcessService=t,this.toastr=i,this.dyeingChemicalData=[],this.itemListArray=[],this.modalSubmitted=!1,this.tagList=[],this.submitButton="Add",this.stepList=[],this.byChemicalList=[{id:"L",value:"L"},{id:"W",value:"W"},{id:"F",value:"F"}],this.processTypes=["Scouring","Acid Wash","Dyeing","RC","Cold Wash"],this.shadeTypeList=["DEFAULT","LIGHT","MEDIUM","DARK","SPECIAL"],this.destroy$=new a.a,this.attributesArray=[],this.dyeingFlag=!1,this.dyeingProcessStep=new d.c,this.positionValues=[],this.dyeingChemicalData.push(new d.a)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}ngOnInit(){if(this.getAllTags(),this.getItemData(),this.editStep){if(this.submitButton="Update",this.position>0){this.dyeingChemicalData=this.stepList[this.position-1].dyeingChemicalData,this.dyeingProcessStep.dyeingChemicalData=this.stepList[this.position-1].dyeingChemicalData,this.dyeingProcessStep.sequence=this.position,this.dyeingProcessStep.temp=this.stepList[this.position-1].temp,this.dyeingProcessStep.holdTime=this.stepList[this.position-1].holdTime,this.dyeingProcessStep.liquerRation=this.stepList[this.position-1].liquerRation,this.dyeingProcessStep.processType=this.stepList[this.position-1].processType;for(let e=1;e<=this.stepList.length;e++)this.positionValues.push(e);"Dyeing"==this.dyeingProcessStep.processType&&(this.getAllAttributes(),this.dyeingFlag=!0)}}else if(this.position>0){this.dyeingProcessStep.sequence=this.position;for(let e=1;e<=this.position;e++)this.positionValues.push(e)}}getAllTags(){this.DyeingProcessService.getAllTags().subscribe(e=>{e.success&&(this.tagList=e.data)},e=>{})}getData(){this.dyeingProcessStep.dyeingplcMast.id=this.stepList[this.position-1].dyeingplcMast.id,this.dyeingProcessStep.dyeingplcMast.dyeingProcessMastId=this.stepList[this.position-1].dyeingplcMast.dyeingProcessMastId,this.stepList[this.position-1].dyeingplcMast.dyeingplcDataList.forEach((e,t)=>{this.dyeingProcessStep.dyeingplcMast.dyeingplcDataList[t].plcName=this.stepList[this.position-1].dyeingplcMast.dyeingplcDataList[t].plcName,this.dyeingProcessStep.dyeingplcMast.dyeingplcDataList[t].id=this.stepList[this.position-1].dyeingplcMast.dyeingplcDataList[t].id,this.dyeingProcessStep.dyeingplcMast.dyeingplcDataList[t].controlId=this.stepList[this.position-1].dyeingplcMast.dyeingplcDataList[t].controlId,this.dyeingProcessStep.dyeingplcMast.dyeingplcDataList[t].l=this.stepList[this.position-1].dyeingplcMast.dyeingplcDataList[t].l,this.dyeingProcessStep.dyeingplcMast.dyeingplcDataList[t].m=this.stepList[this.position-1].dyeingplcMast.dyeingplcDataList[t].m,this.dyeingProcessStep.dyeingplcMast.dyeingplcDataList[t].d=this.stepList[this.position-1].dyeingplcMast.dyeingplcDataList[t].d,this.dyeingProcessStep.dyeingplcMast.dyeingplcDataList[t].s=this.stepList[this.position-1].dyeingplcMast.dyeingplcDataList[t].s})}getAllAttributes(){this.DyeingProcessService.getAttributes().subscribe(e=>{e.success&&(this.attributesArray=e.data,this.dyeingProcessStep.dyeingplcMast=new d.d,this.attributesArray.forEach((e,t)=>{this.dyeingProcessStep.dyeingplcMast.dyeingplcDataList.push(new d.e),this.dyeingProcessStep.dyeingplcMast.dyeingplcDataList[t].plcName=e,this.dyeingProcessStep.dyeingplcMast.dyeingplcDataList[t].l=null,this.dyeingProcessStep.dyeingplcMast.dyeingplcDataList[t].m=null,this.dyeingProcessStep.dyeingplcMast.dyeingplcDataList[t].d=null,this.dyeingProcessStep.dyeingplcMast.dyeingplcDataList[t].s=null}),this.editStep&&this.stepList[this.position-1].dyeingplcMast?this.getData():this.editStep&&!this.stepList[this.position-1].dyeingplcMast&&(this.dyeingProcessStep.dyeingplcMast.dyeingProcessMastId=this.id))},e=>{})}onCreate(e){let t;this.modalSubmitted=!0,e.valid?this.dyeingProcessStep&&this.dyeingProcessStep.dyeingplcMast&&this.dyeingProcessStep.dyeingplcMast.dyeingplcDataList?(this.dyeingProcessStep.dyeingplcMast.dyeingplcDataList.forEach(e=>{null!=e.l&&null!=e.m&&null!=e.d&&null!=e.s||(t=!0)}),t?this.toastr.warning("Enter all fields in PLC Table"):this.activeModal.close({processType:this.dyeingProcessStep.processType,position:this.dyeingProcessStep.sequence,temp:this.dyeingProcessStep.temp,holdTime:this.dyeingProcessStep.holdTime,liquerRation:this.dyeingProcessStep.liquerRation,chemicalList:this.dyeingChemicalData,dyeingplcMast:this.dyeingFlag&&this.dyeingProcessStep.dyeingplcMast?this.dyeingProcessStep.dyeingplcMast:null})):this.activeModal.close({processType:this.dyeingProcessStep.processType,position:this.dyeingProcessStep.sequence,temp:this.dyeingProcessStep.temp,holdTime:this.dyeingProcessStep.holdTime,liquerRation:this.dyeingProcessStep.liquerRation,chemicalList:this.dyeingChemicalData}):this.toastr.error("Fill empty fields")}tagSelected(e){if(e){let e=this.tagList.filter(e=>e.id==this.selectedTagName);e&&e.length&&(this.dyeingProcessStep.holdTime=e[0].holdTime,this.dyeingProcessStep.liquerRation=e[0].liquerRation,this.dyeingProcessStep.temp=e[0].temp,this.dyeingChemicalData=e[0].dyeingTagDataList,this.dyeingChemicalData.forEach((e,t)=>{this.itemSelected(t),delete e.id,delete e.controlId}),this.dyeingProcessStep.dyeingChemicalData=e[0].dyeingTagDataList)}else{let e=this.dyeingProcessStep.sequence;this.dyeingProcessStep=new d.c,this.dyeingChemicalData=[],this.dyeingChemicalData.push(new d.a),this.dyeingProcessStep.sequence=e}}getItemData(){this.DyeingProcessService.getAllItemWithSupplier().pipe(Object(n.a)(this.destroy$)).subscribe(e=>{e.success&&(this.itemListArray=e.data)},e=>{})}onKeyUp(e,t,i,c){if(13==(e.keyCode?e.keyCode:e.which))if(this.index="supplierList"+(t+1)+"-"+c,t===this.dyeingChemicalData.length-1){let e=this.dyeingChemicalData[t];if("concentration"==c){if(!e.concentration)return}else if("byChemical"==c&&!e.byChemical)return;let i=new d.a;this.dyeingChemicalData.push(i),this.data.changes.pipe(Object(n.a)(this.destroy$)).subscribe(()=>{this.data.last.focus()})}else{let e=setInterval(()=>{let t=document.getElementById(this.index);null!=t&&(t.focus(),clearInterval(e))},10)}}numberOnly(e){var t=e.which?e.which:e.keyCode;return!(t>31&&(t<48||t>57)||69==t)||46==t}removeItem(e){1==this.dyeingChemicalData.length?(this.dyeingChemicalData[0].byChemical="L",this.dyeingChemicalData[0].concentration=null,this.dyeingChemicalData[0].controlId=null,this.dyeingChemicalData[0].id=null,this.dyeingChemicalData[0].itemId=null,this.dyeingChemicalData[0].itemName=null,this.dyeingChemicalData[0].supplierName=null):this.dyeingChemicalData.splice(e,1)}verify(){if(this.dyeingChemicalData&&this.dyeingChemicalData.length){let e=Object(g.uniqBy)(this.dyeingChemicalData,(function(e){return e.itemId&&e.shadeType}));this.dyeingChemicalData.length!=e.length?this.dyeingChemicalData.forEach(e=>{let t=0;for(let i of this.dyeingChemicalData)e.shadeType==i.shadeType&&e.itemId==i.itemId&&(t++,i.duplicateError=!!(t>1&&i.shadeType&&i.itemId))}):this.dyeingChemicalData.map(e=>e.duplicateError=!1)}else this.dyeingChemicalData.map(e=>e.duplicateError=!1)}itemSelected(e){this.itemListArray.forEach(t=>{t.itemId==this.dyeingChemicalData[e].itemId&&(this.dyeingChemicalData[e].supplierName=t.supplierName,this.dyeingChemicalData[e].itemName=t.itemName)}),this.verify(),this.dyeingChemicalData[e].duplicateError&&(this.toastr.error("Same Item and Shade Type present"),this.dyeingChemicalData.splice(e,1))}trackByFn(e,t){return t?t._id||t:e}processChange(e){"Dyeing"==e?(this.getAllAttributes(),this.dyeingFlag=!0):this.dyeingFlag=!1}onKeyUpForTable(e,t,i,c){if(13==(e.keyCode?e.keyCode:e.which)){this.index="att"+c+"-"+(t+1);let e=setInterval(()=>{let t=document.getElementById(this.index);null!=t&&(t.focus(),clearInterval(e))},10)}}}return e.\u0275fac=function(t){return new(t||e)(h.dc(p.a),h.dc(l.a),h.dc(u.b))},e.\u0275cmp=h.Xb({type:e,selectors:[["ngx-add-dyeing-process-step"]],viewQuery:function(e,t){var i;1&e&&h.nd(v,!0),2&e&&h.Tc(i=h.vc())&&(t.data=i)},inputs:{position:"position",editStep:"editStep",stepList:"stepList",id:"id"},decls:82,vars:37,consts:[[1,"modal-header","nb-header"],["id","modal-basic-title",1,"modal-title","nb-text"],["type","button","aria-label","Close",1,"close","btn-foucs-none",3,"click"],["aria-hidden","true",1,"close-icon"],["stepForm","ngForm"],[1,"modal-body"],[1,"row"],[1,"col-md-6"],[1,"form-group"],["placeholder","Select Process-Tag","name","tagName",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[1,"required"],["placeholder","Select Process-type","name","processType","required","",3,"ngModel","ngClass","ngModelChange","change"],["processType1","ngModel"],["class","input-required",4,"ngIf"],["placeholder","Sequence No","name","stepNo","required","",3,"disabled","ngModel","ngClass","ngModelChange"],["position1","ngModel"],["type","number","min","0","name","temp","required","","placeholder","Temprature",1,"form-control","input-group",3,"ngModel","ngClass","ngModelChange"],["temp1","ngModel"],["min","0","type","number","name","holdTime","required","","placeholder","Hold Time",1,"form-control","input-group",3,"ngModel","ngClass","ngModelChange"],["holdTime1","ngModel"],["min","0","type","number","name","liquerRation","required","","placeholder","Liquor ratio",1,"form-control","input-group",3,"ngModel","ngClass","ngModelChange","keypress"],["liquerRation1","ngModel"],[1,"col-md-12"],[1,"nb-badges","mr-0"],[1,"table","table-responsive","table-bordered","table-striped","table-process-fnt"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"container"],["class","row",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-primary","btn-sm","btn-design-save",3,"click"],["type","button",1,"btn","btn-primary","btn-sm","btn-design-cancel",3,"click"],[3,"value"],[1,"input-required"],[1,"width-70"],["itemId1","ngModel","required","","appendTo","body",1,"ng-select-br-none",3,"name","ngModel","id","ngModelChange","change"],["data","","itemId1","ngModel"],["disabled","true"],[1,"col-md-6","col-6"],[1,"text-left","txt-ov-elips"],[1,"text-center","txt-ov-elips"],["placeholder","Select Item",3,"value",4,"ngFor","ngForOf"],[1,"width-20"],["type","text","readonly","",1,"tableForm","line-height-subtable",3,"name","ngModel","id","ngModelChange","keyup"],["supplierName1","ngModel"],[1,"width-5"],["type","number","min","0",1,"tableForm","line-height-subtable",3,"name","ngModel","id","ngModelChange","keypress","keyup"],["concentration1","ngModel"],["required","",1,"tableForm",3,"name","ngModel","id","ngModelChange","keyup"],[1,"width-70",2,"width","50px !important"],["placeholder","Select Shade-type","shadeType","ngModel","required","","appendTo","body",1,"ng-select-br-none",3,"name","ngModel","id","ngModelChange"],["shadeType","","itemId1","ngModel"],[1,"text-center","width-1"],["icon","trash","status","danger",3,"options","click"],["placeholder","Select Item",3,"value"],[4,"ngFor","ngForOf"],["type","number","min","0",1,"form-control",3,"ngModel","name","id","ngModelChange","keyup"]],template:function(e,t){if(1&e){const e=h.kc();h.jc(0,"div"),h.jc(1,"div",0),h.jc(2,"h4",1),h.jd(3,"Add Step"),h.ic(),h.jc(4,"button",2),h.uc("click",(function(){return t.activeModal.close(!1)})),h.jc(5,"span",3),h.jd(6,"\xd7"),h.ic(),h.ic(),h.ic(),h.jc(7,"form",null,4),h.jc(9,"div",5),h.jc(10,"div",6),h.jc(11,"div",7),h.jc(12,"div",8),h.jc(13,"label"),h.jd(14,"Process-Tag"),h.ic(),h.jc(15,"ng-select",9),h.uc("ngModelChange",(function(e){return t.selectedTagName=e}))("change",(function(e){return t.tagSelected(e)})),h.hd(16,P,2,2,"ng-option",10),h.ic(),h.ic(),h.ic(),h.ic(),h.jc(17,"div",6),h.jc(18,"div",7),h.jc(19,"div",8),h.jc(20,"label",11),h.jd(21,"Process Type"),h.ic(),h.jc(22,"ng-select",12,13),h.uc("ngModelChange",(function(e){return t.dyeingProcessStep.processType=e}))("change",(function(e){return t.processChange(e)})),h.hd(24,S,2,2,"ng-option",10),h.zc(25,"filterOutSelected"),h.ic(),h.hd(26,M,2,0,"div",14),h.ic(),h.ic(),h.jc(27,"div",7),h.jc(28,"div",8),h.jc(29,"label",11),h.jd(30,"Step Sequence"),h.ic(),h.jc(31,"ng-select",15,16),h.uc("ngModelChange",(function(e){return t.dyeingProcessStep.sequence=e})),h.hd(33,C,2,2,"ng-option",10),h.ic(),h.hd(34,L,2,0,"div",14),h.ic(),h.ic(),h.jc(35,"div",7),h.jc(36,"div",8),h.jc(37,"label",11),h.jd(38,"Temprature"),h.ic(),h.jc(39,"input",17,18),h.uc("ngModelChange",(function(e){return t.dyeingProcessStep.temp=e})),h.ic(),h.hd(41,T,2,0,"div",14),h.ic(),h.ic(),h.jc(42,"div",7),h.jc(43,"div",8),h.jc(44,"label",11),h.jd(45,"Hold Time"),h.ic(),h.jc(46,"input",19,20),h.uc("ngModelChange",(function(e){return t.dyeingProcessStep.holdTime=e})),h.ic(),h.hd(48,D,2,0,"div",14),h.ic(),h.ic(),h.jc(49,"div",7),h.jc(50,"div",8),h.jc(51,"label",11),h.jd(52,"Liquor Ratio"),h.ic(),h.jc(53,"input",21,22),h.uc("ngModelChange",(function(e){return t.dyeingProcessStep.liquerRation=e}))("keypress",(function(e){return t.numberOnly(e)})),h.ic(),h.hd(55,x,2,0,"div",14),h.ic(),h.ic(),h.jc(56,"div",23),h.jc(57,"div",11),h.jc(58,"h5",24),h.jd(59,"Add Chemical List"),h.ic(),h.ic(),h.jc(60,"table",25),h.jc(61,"tr"),h.jc(62,"th"),h.jd(63,"Item name"),h.ic(),h.jc(64,"th"),h.jd(65,"Supplier name"),h.ic(),h.jc(66,"th"),h.jd(67,"Concentration"),h.ic(),h.jc(68,"th"),h.jd(69,"By"),h.ic(),h.jc(70,"th"),h.jd(71,"Shade type"),h.ic(),h.jc(72,"th"),h.jd(73,"Action"),h.ic(),h.ic(),h.hd(74,H,32,30,"tr",26),h.ic(),h.ic(),h.ic(),h.jc(75,"div",27),h.hd(76,q,14,1,"div",28),h.ic(),h.ic(),h.jc(77,"div",29),h.jc(78,"button",30),h.uc("click",(function(){h.Xc(e);const i=h.Uc(8);return t.onCreate(i)})),h.jd(79),h.ic(),h.jc(80,"button",31),h.uc("click",(function(){return t.activeModal.close(!1)})),h.jd(81,"Cancel"),h.ic(),h.ic(),h.ic(),h.ic()}if(2&e){const e=h.Uc(23),i=h.Uc(32),c=h.Uc(40),s=h.Uc(47),n=h.Uc(54);h.Pb(15),h.Hc("ngModel",t.selectedTagName),h.Pb(1),h.Hc("ngForOf",t.tagList),h.Pb(6),h.Hc("ngModel",t.dyeingProcessStep.processType)("ngClass",h.Nc(27,A,e.invalid&&(t.modalSubmitted||e.touched))),h.Pb(2),h.Hc("ngForOf",h.Bc(25,24,t.processTypes,t.stepList)),h.Pb(2),h.Hc("ngIf",e.invalid&&(t.modalSubmitted||e.touched)),h.Pb(5),h.Hc("disabled",t.editStep)("ngModel",t.dyeingProcessStep.sequence)("ngClass",h.Nc(29,A,i.invalid&&(t.modalSubmitted||i.touched))),h.Pb(2),h.Hc("ngForOf",t.positionValues),h.Pb(1),h.Hc("ngIf",i.invalid&&(t.modalSubmitted||i.touched)),h.Pb(5),h.Hc("ngModel",t.dyeingProcessStep.temp)("ngClass",h.Nc(31,A,c.invalid&&(t.modalSubmitted||c.touched))),h.Pb(2),h.Hc("ngIf",c.invalid&&(t.modalSubmitted||c.touched)),h.Pb(5),h.Hc("ngModel",t.dyeingProcessStep.holdTime)("ngClass",h.Nc(33,A,s.invalid&&(t.modalSubmitted||s.touched))),h.Pb(2),h.Hc("ngIf",s.invalid&&(t.modalSubmitted||s.touched)),h.Pb(5),h.Hc("ngModel",t.dyeingProcessStep.liquerRation)("ngClass",h.Nc(35,A,n.invalid&&(t.modalSubmitted||n.touched))),h.Pb(2),h.Hc("ngIf",n.invalid&&(t.modalSubmitted||n.touched)),h.Pb(19),h.Hc("ngForOf",t.dyeingChemicalData)("ngForTrackBy",t.trackByFn),h.Pb(2),h.Hc("ngIf",t.dyeingFlag),h.Pb(3),h.kd(t.submitButton)}},directives:[m.x,m.m,m.n,y.a,m.l,m.o,c.m,m.t,c.l,c.n,m.q,m.a,y.c,b.I],pipes:[j.a,f.a],styles:[".ng-dropdown-panel.ng-select-bottom[_ngcontent-%COMP%]{width:auto!important}"]}),e})();var $=i("8k+d");function E(e,t){1&e&&(h.jc(0,"div",25),h.jc(1,"span"),h.jd(2,"Process name is required."),h.ic(),h.ic())}function X(e,t){1&e&&(h.jc(0,"div",25),h.jc(1,"span"),h.jd(2,"Process Name is already Exist "),h.ic(),h.ic())}function B(e,t){if(1&e&&(h.jc(0,"tr"),h.jc(1,"td"),h.jd(2),h.ic(),h.jc(3,"td"),h.jd(4),h.ic(),h.jc(5,"td"),h.jd(6),h.ic(),h.jc(7,"td"),h.jd(8),h.ic(),h.jc(9,"td"),h.jd(10),h.ic(),h.ic()),2&e){const e=t.$implicit;h.Pb(2),h.ld(" ",e.itemName," "),h.Pb(2),h.ld(" ",e.supplierName," "),h.Pb(2),h.ld(" ",e.concentration," "),h.Pb(2),h.kd(e.byChemical),h.Pb(2),h.kd(e.shadeType)}}function R(e,t){if(1&e&&(h.jc(0,"tr"),h.jc(1,"td"),h.jd(2),h.ic(),h.jc(3,"td"),h.jd(4),h.ic(),h.jc(5,"td"),h.jd(6),h.ic(),h.jc(7,"td"),h.jd(8),h.ic(),h.jc(9,"td"),h.jd(10),h.ic(),h.ic()),2&e){const e=t.$implicit,i=t.index,c=h.yc(2).$implicit;h.Pb(2),h.ld(" ",e," "),h.Pb(2),h.ld(" ",c.dyeingplcMast.dyeingplcDataList[i].l," "),h.Pb(2),h.ld(" ",c.dyeingplcMast.dyeingplcDataList[i].m," "),h.Pb(2),h.ld(" ",c.dyeingplcMast.dyeingplcDataList[i].d," "),h.Pb(2),h.ld(" ",c.dyeingplcMast.dyeingplcDataList[i].s," ")}}function _(e,t){if(1&e&&(h.jc(0,"div"),h.jc(1,"table",45),h.jc(2,"tr"),h.jc(3,"th"),h.jd(4,"Attribute"),h.ic(),h.jc(5,"th"),h.jd(6,"L"),h.ic(),h.jc(7,"th"),h.jd(8,"M"),h.ic(),h.jc(9,"th"),h.jd(10,"D"),h.ic(),h.jc(11,"th"),h.jd(12,"S"),h.ic(),h.ic(),h.hd(13,R,11,5,"tr",46),h.ic(),h.ic()),2&e){const e=h.yc(3);h.Pb(13),h.Hc("ngForOf",e.attributesArray)}}const K=function(){return{type:"zoom"}},W=function(e){return{animation:e}};function V(e,t){if(1&e){const e=h.kc();h.jc(0,"nb-accordion",29),h.jc(1,"nb-accordion-item",30,31),h.uc("click",(function(){h.Xc(e);const i=t.$implicit;return h.yc(2).onStepClick(i)})),h.jc(3,"nb-accordion-item-header",32),h.jc(4,"div",33),h.jd(5),h.ic(),h.jc(6,"div",34),h.jc(7,"nb-icon",35),h.uc("click",(function(){h.Xc(e);const i=t.$implicit;return h.yc(2).onDeleteStep(i)})),h.ic(),h.jc(8,"nb-icon",36),h.uc("click",(function(){h.Xc(e);const i=t.$implicit;return h.yc(2).onEditStep(i)})),h.ic(),h.ic(),h.ic(),h.jc(9,"nb-accordion-item-body",37),h.jc(10,"div",38),h.jc(11,"div",39),h.jc(12,"div",40),h.jc(13,"div",41),h.jc(14,"span",42),h.jc(15,"b"),h.jd(16,"Temprature:"),h.ic(),h.ic(),h.jc(17,"span",43),h.jd(18),h.ic(),h.ic(),h.ic(),h.jc(19,"div",40),h.jc(20,"div",41),h.jc(21,"span",42),h.jc(22,"b"),h.jd(23,"Hold Time:"),h.ic(),h.ic(),h.jc(24,"span",43),h.jd(25),h.ic(),h.ic(),h.ic(),h.jc(26,"div",40),h.jc(27,"div",41),h.jc(28,"span",42),h.jc(29,"b"),h.jd(30,"Liqure Ratio:"),h.ic(),h.ic(),h.jc(31,"span",43),h.jd(32),h.ic(),h.ic(),h.ic(),h.ic(),h.ic(),h.jc(33,"div",44),h.jc(34,"div",39),h.jc(35,"table",45),h.jc(36,"tr"),h.jc(37,"th"),h.jd(38,"Item name"),h.ic(),h.jc(39,"th"),h.jd(40,"Supplier name"),h.ic(),h.jc(41,"th"),h.jd(42,"Concentration"),h.ic(),h.jc(43,"th"),h.jd(44,"By"),h.ic(),h.jc(45,"th"),h.jd(46,"Shade type"),h.ic(),h.ic(),h.hd(47,B,11,5,"tr",46),h.ic(),h.ic(),h.ic(),h.hd(48,_,14,1,"div",47),h.ic(),h.ic(),h.ic()}if(2&e){const e=t.$implicit;h.Pb(5),h.ld(" ",e.processType," "),h.Pb(2),h.Hc("options",h.Nc(9,W,h.Mc(8,K))),h.Pb(1),h.Hc("options",h.Nc(12,W,h.Mc(11,K))),h.Pb(10),h.ld(" ",e.temp," "),h.Pb(7),h.ld("",e.holdTime," "),h.Pb(7),h.ld("",e.liquerRation," "),h.Pb(15),h.Hc("ngForOf",e.dyeingChemicalData),h.Pb(1),h.Hc("ngIf","Dyeing"==e.processType&&e.dyeingplcMast&&e.dyeingplcMast.dyeingplcDataList&&e.dyeingplcMast.dyeingplcDataList.length)}}function z(e,t){if(1&e){const e=h.kc();h.jc(0,"div",26),h.jc(1,"div",27),h.uc("cdkDropListDropped",(function(t){return h.Xc(e),h.yc().drop(t)})),h.hd(2,V,49,14,"nb-accordion",28),h.ic(),h.ic()}if(2&e){const e=h.yc();h.Pb(2),h.Hc("ngForOf",e.dyeingProcessSteps)}}function J(e,t){if(1&e){const e=h.kc();h.jc(0,"button",48),h.uc("click",(function(){h.Xc(e);const t=h.yc(),i=h.Uc(17);return t.addUpdateDyeingProcess(i)})),h.jd(1,"SAVE"),h.ic()}}function G(e,t){if(1&e){const e=h.kc();h.jc(0,"button",48),h.uc("click",(function(){h.Xc(e);const t=h.yc(),i=h.Uc(17);return t.addUpdateDyeingProcess(i)})),h.jd(1,"Update"),h.ic()}}const Z=function(e){return{"is-invalid":e}};let Q=(()=>{class e{constructor(e,t,i,c,s,n,o){this._modalService=e,this.toastr=t,this.commonService=i,this.dyeingProcessService=c,this.route=s,this.currentRoute=n,this.partyService=o,this.dyeingProcessSteps=[],this.formSubmitted=!1,this.addFlag=!0,this.updateFlag=!1,this.processNameExist=!1,this.disableButton=!1,this.loading=!1,this.attributesArray=[],this.destroy$=new a.a,this.dyeingProcess=new d.b,this.getItemList(),this.getMaster()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}ngOnInit(){this.getAllAttributes(),this.currentDyeingProcessId=this.currentRoute.snapshot.paramMap.get("id"),this.currentDyeingProcessId&&(this.getDyeingProcessById(this.currentDyeingProcessId),this.addFlag=!1,this.updateFlag=!0)}getMaster(){this.loading=!0,this.master=[],this.partyService.getAllMaster().pipe(Object(n.a)(this.destroy$)).subscribe(e=>{e.success?(this.master=e.data,this.loading=!1):this.loading=!1},e=>{this.loading=!1})}getItemList(){this.dyeingProcessService.getAllItemWithSupplier().pipe(Object(n.a)(this.destroy$)).subscribe(e=>{e.success&&(this.itemList=e.data)},e=>{})}getAllAttributes(){this.dyeingProcessService.getAttributes().subscribe(e=>{e.success&&(this.attributesArray=e.data)},e=>{})}getDyeingProcessById(e){this.dyeingProcessService.getDyeingProcessById(e).pipe(Object(n.a)(this.destroy$)).subscribe(e=>{e.success?(this.dyeingProcess=e.data,this.dyeingProcessSteps=this.dyeingProcess.dyeingProcessData,this.setChemicalData()):this.toastr.error(e.msg)},e=>{})}setChemicalData(){let e=setInterval(()=>{this.itemList&&(this.dyeingProcessSteps.forEach(e=>{e.dyeingChemicalData.forEach(e=>{this.itemList.forEach(t=>{e.itemId==t.itemId&&(e.supplierName=t.supplierName)})})}),clearInterval(e))},10)}drop(e){Object(o.d)(this.dyeingProcessSteps,e.previousIndex,e.currentIndex)}onStepClick(e){this.selectedStep=e.sequence}onEditStep(e){const t=this._modalService.open(U,{size:"lg"});t.componentInstance.position=e.sequence,t.componentInstance.id=this.dyeingProcess.id,t.componentInstance.stepList=JSON.parse(JSON.stringify(this.dyeingProcessSteps)),t.componentInstance.editStep=!0,t.result.then(t=>{t&&(this.dyeingProcessSteps[e.sequence-1].processType=t.processType,this.dyeingProcessSteps[e.sequence-1].dyeingChemicalData=t.chemicalList,this.dyeingProcessSteps[e.sequence-1].liquerRation=t.liquerRation,this.dyeingProcessSteps[e.sequence-1].holdTime=t.holdTime,this.dyeingProcessSteps[e.sequence-1].temp=t.temp,this.dyeingProcessSteps[e.sequence-1].sequence=t.position,this.dyeingProcessSteps[e.sequence-1].dyeingplcMast=t.dyeingplcMast?t.dyeingplcMast:null)})}onDeleteStep(e){let t=this.dyeingProcessSteps.findIndex(t=>t.sequence==e.sequence);t>-1&&(this.dyeingProcessSteps.splice(t,1),this.dyeingProcessSteps.forEach((e,t)=>{e.sequence=t+1}))}addProcessStep(){if(5==this.dyeingProcessSteps.length)this.toastr.warning("You are done with all the steps!");else{const e=this._modalService.open(U,{size:"lg"});e.componentInstance.position=this.dyeingProcessSteps.length+1,e.componentInstance.stepList=this.dyeingProcessSteps,e.componentInstance.editStep=!1,e.result.then(e=>{if(e){let t=new d.c;t.processType=e.processType,t.liquerRation=e.liquerRation,t.sequence=e.position,t.dyeingChemicalData=e.chemicalList,t.temp=e.temp,t.holdTime=e.holdTime,t.dyeingplcMast=e.dyeingplcMast?e.dyeingplcMast:null,this.dyeingProcessSteps.length&&e.position!=this.dyeingProcessSteps.length+1?this.dyeingProcessSteps.splice(e.position-1,0,t):this.dyeingProcessSteps.push(t)}})}}addUpdateDyeingProcess(e){if(this.disableButton=!0,this.formSubmitted=!0,e.valid&&!this.processNameExist){if(this.addFlag){if(0==this.dyeingProcessSteps.length)return this.disableButton=!1,void this.toastr.error("Please enter steps");this.dyeingProcess.createdBy=this.commonService.getUser().userId,this.dyeingProcess.dyeingProcessData=this.dyeingProcessSteps,this.dyeingProcessService.saveDyeingProcess(this.dyeingProcess).pipe(Object(n.a)(this.destroy$)).subscribe(t=>{t.success?(this.resetFormValues(e),this.toastr.success(t.msg)):(this.disableButton=!1,this.toastr.error(t.msg))},e=>{this.disableButton=!1})}else if(this.updateFlag){if(0==this.dyeingProcessSteps.length)return this.disableButton=!1,void this.toastr.error("Please enter steps");this.dyeingProcess.updatedBy=this.commonService.getUser().userId,this.dyeingProcess.dyeingProcessData=this.dyeingProcessSteps,this.dyeingProcessService.updateDyeingProcess(this.dyeingProcess).pipe(Object(n.a)(this.destroy$)).subscribe(e=>{e.success?(this.disableButton=!1,this.route.navigate(["/pages/dyeing-process"]),this.toastr.success(e.msg)):(this.disableButton=!1,this.toastr.error(e.msg))},e=>{this.disableButton=!1})}}else this.disableButton=!1}isProcessNameAlreadyExist(){if(this.processNameExist=!1,this.dyeingProcess.processName){let e=0;this.dyeingProcess.id&&(e=this.dyeingProcess.id),this.dyeingProcessService.isProcessNameExist(this.dyeingProcess.processName,e).pipe(Object(n.a)(this.destroy$)).subscribe(e=>{e.success&&(this.processNameExist=e.data)},e=>{})}}resetFormValues(e){this.formSubmitted=!1,e.reset(),this.dyeingProcessSteps=[],this.addFlag=!0,this.updateFlag=!1}tableChange(e){switch(e){case"view table":this.route.navigate(["/pages/dyeing-process/view"]);break;case"add tag":this.route.navigate(["/pages/dyeing-process/tag"]);break;case"show tag":this.route.navigate(["/pages/dyeing-process/tag/view"])}}}return e.\u0275fac=function(t){return new(t||e)(h.dc(p.e),h.dc(u.b),h.dc(r.a),h.dc(l.a),h.dc(s.c),h.dc(s.a),h.dc($.a))},e.\u0275cmp=h.Xb({type:e,selectors:[["ngx-add-edit-dyeing-process"]],decls:39,vars:13,consts:[[1,"container"],[1,"nb-style"],[1,"nb-header"],[1,"row"],[1,"col-md-5","col-6","display-flex-start","max-width-device"],["placeholder","Select",1,"btn","btn-md",2,"width","175px",3,"change"],["value","view table"],["value","add tag"],["value","show tag"],[1,"col-md-7","col-7"],[1,"nb-text","txt-ov-elips"],["myForm","ngForm"],[1,"col-md-4","col-12"],[1,"form-group"],[1,"required"],["type","text","name","processName","fieldsize","small","nbinput","","required","","placeholder","Process Name",1,"form-control","size-small",3,"ngModel","ngClass","ngModelChange","change"],["processName1","ngModel"],["class","input-required",4,"ngIf"],[1,"form-group","text-right","align-dis"],["icon","plus-circle","status","primary",1,"plus-add","add-modal","width-40",3,"options","click"],["class","col-md-12 mr-top-10",4,"ngIf"],[1,"col-md-12","mobile-btn-center","text-btn-right"],[1,"padding-bt-tp"],["type","button",1,"btn","btn-primary","btn-sm","btn-design-cancel",3,"click"],["type","button","class","btn btn-primary btn-sm btn-design-save button-base ripple",3,"click",4,"ngIf"],[1,"input-required"],[1,"col-md-12","mr-top-10"],["cdkDropList","",1,"acc-under-css",3,"cdkDropListDropped"],["multi","","cdkDrag","","class","acc-start",4,"ngFor","ngForOf"],["multi","","cdkDrag","",1,"acc-start"],[1,"item","accordian-process",3,"click"],["item",""],[1,"item-header","nb-accordian-fn-size","nb-accordian","display-flex-between"],[1,""],[1,"nb-action"],["icon","trash","status","danger",1,"trash",3,"options","click"],["icon","edit","status","primary",1,"edit",3,"options","click"],[1,"nb-item-body"],[1,"row","dis-fl-di"],[1,"col-md-11","col-12"],[1,"div-fl-1"],[1,"user-per-check-display"],[1,"tb-ui"],[1,"num-bd"],[1,"row","dis-fl"],[1,"table","process-tb","table-bordered","table-striped","table-process-fnt","dying-table","width-100"],[4,"ngFor","ngForOf"],[4,"ngIf"],["type","button",1,"btn","btn-primary","btn-sm","btn-design-save","button-base","ripple",3,"click"]],template:function(e,t){if(1&e){const e=h.kc();h.jc(0,"div",0),h.jc(1,"nb-card",1),h.jc(2,"nb-card-header",2),h.jc(3,"div",3),h.jc(4,"div",4),h.jc(5,"ng-select",5),h.uc("change",(function(e){return t.tableChange(e)})),h.jc(6,"ng-option",6),h.jd(7,"View Table"),h.ic(),h.jc(8,"ng-option",7),h.jd(9,"Add New Tag"),h.ic(),h.jc(10,"ng-option",8),h.jd(11,"View Tags"),h.ic(),h.ic(),h.ic(),h.jc(12,"div",9),h.jc(13,"h2",10),h.jd(14,"Dyeing Process"),h.ic(),h.ic(),h.ic(),h.ic(),h.jc(15,"nb-card-body"),h.jc(16,"form",null,11),h.jc(18,"div",3),h.jc(19,"div",12),h.jc(20,"div",13),h.jc(21,"label",14),h.jd(22,"Process Name"),h.ic(),h.jc(23,"input",15,16),h.uc("ngModelChange",(function(e){return t.dyeingProcess.processName=e}))("change",(function(){return t.isProcessNameAlreadyExist()})),h.ic(),h.hd(25,E,3,0,"div",17),h.hd(26,X,3,0,"div",17),h.ic(),h.ic(),h.jc(27,"div",12),h.jc(28,"div",18),h.jc(29,"nb-icon",19),h.uc("click",(function(){return t.addProcessStep()})),h.ic(),h.ic(),h.ic(),h.hd(30,z,3,1,"div",20),h.ec(31,"br"),h.ic(),h.jc(32,"div",3),h.jc(33,"div",21),h.jc(34,"div",22),h.jc(35,"button",23),h.uc("click",(function(){h.Xc(e);const i=h.Uc(17);return t.resetFormValues(i)})),h.jd(36,"CANCEL"),h.ic(),h.hd(37,J,2,0,"button",24),h.hd(38,G,2,0,"button",24),h.ic(),h.ic(),h.ic(),h.ic(),h.ic(),h.ic(),h.ic()}if(2&e){const e=h.Uc(24);h.Pb(23),h.Hc("ngModel",t.dyeingProcess.processName)("ngClass",h.Nc(8,Z,e.invalid&&(t.formSubmitted||e.touched)||t.processNameExist)),h.Pb(2),h.Hc("ngIf",e.invalid&&(t.formSubmitted||e.touched)),h.Pb(1),h.Hc("ngIf",t.processNameExist),h.Pb(3),h.Hc("options",h.Nc(11,W,h.Mc(10,K))),h.Pb(1),h.Hc("ngIf",t.dyeingProcessSteps?t.dyeingProcessSteps.length:t.dyeingProcessSteps),h.Pb(7),h.Hc("ngIf",t.addFlag),h.Pb(1),h.Hc("ngIf",t.updateFlag)}},directives:[b.u,b.x,y.a,y.c,b.t,m.x,m.m,m.n,m.a,m.t,m.l,m.o,c.l,c.n,b.I,c.m,b.g,b.i,b.j,b.h],styles:[""]}),e})();var Y=i("cpoq"),ee=i("kF6S"),te=i("Cma1"),ie=i("lDzL");const ce=function(){return{type:"zoom"}},se=function(e){return{animation:e}},ne=function(e){return["/pages/dyeing-process/edit",e]};function ae(e,t){if(1&e){const e=h.kc();h.ec(0,"nb-icon",14),h.jc(1,"nb-icon",15),h.uc("click",(function(){h.Xc(e);const i=t.row;return h.yc().deleteDyeingProcess(i.id)})),h.ic()}if(2&e){const e=t.row;h.Hc("options",h.Nc(6,se,h.Mc(5,ce)))("routerLink",h.Nc(8,ne,e.id))("hidden",!1),h.Pb(1),h.Hc("options",h.Nc(11,se,h.Mc(10,ce)))("hidden",!1)}}const oe=function(){return["/pages/dyeing-process"]};let de=(()=>{class e{constructor(e,t,i){this.toastr=e,this.dyeingProcessService=t,this.modalService=i,this.flag=!1,this.process=[],this.headers=["Name"],this.module="dyeing process",this.destroy$=new a.a}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}ngOnInit(){this.getAllDyeingProcesses()}getAllDyeingProcesses(){this.dyeingProcessService.getAllDyeingProcessList().pipe(Object(n.a)(this.destroy$)).subscribe(e=>{e.success&&(this.dyeingProcessList=e.data)},e=>{})}deleteDyeingProcess(e){this.modalService.open(ee.a,{size:"sm"}).result.then(t=>{t&&this.dyeingProcessService.deleteDyeingProcess(e).pipe(Object(n.a)(this.destroy$)).subscribe(e=>{e.success?(this.toastr.success(e.msg),this.dyeingProcessList=[],this.getAllDyeingProcesses()):this.toastr.error(e.msg)},e=>{})})}open(){this.flag=!0;const e=this.modalService.open(te.a);e.componentInstance.headers=this.headers,e.componentInstance.list=this.process,e.componentInstance.moduleName=this.module}}return e.\u0275fac=function(t){return new(t||e)(h.dc(u.b),h.dc(l.a),h.dc(p.e))},e.\u0275cmp=h.Xb({type:e,selectors:[["ngx-dyeing-process"]],decls:19,vars:8,consts:[[1,"row"],[1,"col-lg-12"],[1,"nb-style"],[1,"nb-header"],[1,"col-md-2","col-2","display-flex-start"],[1,"btn","btn-primary","btn-md","btn-design",3,"click"],[1,"col-md-1","col-3","display-flex-start"],[1,"btn","btn-primary","btn-md","btn-design",3,"routerLink","disabled"],[1,"col-md-9","col-7"],[1,"nb-text"],[1,"material",3,"rows","ngClass","rowHeight","headerHeight"],["name","Actions","sortable","false",3,"maxWidth"],["ngx-datatable-cell-template",""],["name","Dyeing Process Name","props","dyeingProcessName"],["status","primary","icon","edit",3,"options","routerLink","hidden"],["status","danger","icon","trash",3,"options","hidden","click"]],template:function(e,t){1&e&&(h.jc(0,"div",0),h.jc(1,"div",1),h.jc(2,"nb-card",2),h.jc(3,"nb-card-header",3),h.jc(4,"div",0),h.jc(5,"div",4),h.jc(6,"button",5),h.uc("click",(function(){return t.open()})),h.jd(7,"EXPORT"),h.ic(),h.ic(),h.jc(8,"div",6),h.jc(9,"button",7),h.jd(10,"Add"),h.ic(),h.ic(),h.jc(11,"div",8),h.jc(12,"h2",9),h.jd(13,"Dyeing Process"),h.ic(),h.ic(),h.ic(),h.ic(),h.jc(14,"nb-card-body"),h.jc(15,"ngx-datatable",10),h.jc(16,"ngx-datatable-column",11),h.hd(17,ae,2,13,"ng-template",12),h.ic(),h.ec(18,"ngx-datatable-column",13),h.ic(),h.ic(),h.ic(),h.ic(),h.ic()),2&e&&(h.Pb(9),h.Hc("routerLink",h.Mc(7,oe))("disabled",!1),h.Pb(6),h.Hc("rows",t.dyeingProcessList)("ngClass","bootstrap")("rowHeight","auto")("headerHeight",31),h.Pb(1),h.Hc("maxWidth",90))},directives:[b.u,b.x,s.d,b.t,ie.e,c.l,ie.b,ie.a,b.I],styles:["ngb-modal-window[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{width:1002px}ngx-add-dyeing-process-step[_ngcontent-%COMP%]{width:1000px}"]}),e})();class re{constructor(){this.dyeingTagDataList=[],this.dyeingTagDataList.push(new le)}}class le{constructor(){this.byChemical="L",this.shadeType="DEFAULT",this._id=this.uuidv4()}uuidv4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))}}var ge=i("qC+V");function he(e,t){1&e&&(h.jc(0,"div",41),h.jd(1," Tag Name is required. "),h.ic())}function pe(e,t){1&e&&(h.jc(0,"div",41),h.jd(1," Tag Name already exist. "),h.ic())}function ue(e,t){1&e&&(h.jc(0,"div",41),h.jd(1," Temprature is required. "),h.ic())}function me(e,t){1&e&&(h.jc(0,"div",41),h.jd(1," Hold Time is required. "),h.ic())}function ye(e,t){1&e&&(h.jc(0,"div",41),h.jd(1," Liquor ratio is required. "),h.ic())}const be=function(){return{type:"zoom"}},je=function(e){return{animation:e}};function fe(e,t){if(1&e){const e=h.kc();h.jc(0,"nb-icon",42),h.uc("click",(function(){h.Xc(e);const i=t.rowIndex;return h.yc().removeItem(i)})),h.ic()}2&e&&h.Hc("options",h.Nc(2,je,h.Mc(1,be)))}function ve(e,t){if(1&e&&(h.jc(0,"option",50),h.jc(1,"div",4),h.jc(2,"div",46),h.jc(3,"div",47),h.jd(4),h.ic(),h.ic(),h.jc(5,"div",46),h.jc(6,"div",48),h.jd(7),h.ic(),h.ic(),h.ic(),h.ic()),2&e){const e=t.$implicit;h.Hc("value",e.itemId),h.Pb(4),h.ld("",e.itemName," - "),h.Pb(3),h.ld("",e.supplierName," ")}}function Pe(e,t){1&e&&(h.jc(0,"div",41),h.jd(1," Required "),h.ic())}const Se=function(e){return{"is-invalid":e}};function Me(e,t){if(1&e){const e=h.kc();h.jc(0,"select",43,44),h.uc("ngModelChange",(function(i){return h.Xc(e),t.row.itemId=i}))("change",(function(){h.Xc(e);const i=t.rowIndex;return h.yc().itemSelected(i)})),h.jc(3,"option",45),h.jc(4,"div",4),h.jc(5,"div",46),h.jc(6,"div",47),h.jd(7,"Item - "),h.ic(),h.ic(),h.jc(8,"div",46),h.jc(9,"div",48),h.jd(10,"Supplier "),h.ic(),h.ic(),h.ic(),h.ic(),h.hd(11,ve,8,3,"option",49),h.zc(12,"showOnlyChemicalFilter"),h.ic(),h.hd(13,Pe,2,0,"div",19)}if(2&e){const e=t.row,i=t.rowIndex,c=h.Uc(1),s=h.yc();h.Kc("name","itemId",e._id,"_",i,""),h.Hc("ngModel",e.itemId)("id","supplierList"+i+"-0")("ngClass",h.Nc(10,Se,c.invalid&&(s.formSubmitted||c.touched))),h.Pb(11),h.Hc("ngForOf",h.Bc(12,7,s.itemListArray,!1)),h.Pb(2),h.Hc("ngIf",c.invalid&&(s.formSubmitted||c.touched))}}function Ce(e,t){1&e&&(h.jc(0,"div",41),h.jd(1," Required "),h.ic())}function Le(e,t){if(1&e){const e=h.kc();h.jc(0,"input",51,52),h.uc("ngModelChange",(function(i){return h.Xc(e),t.row.supplierName=i}))("keyup",(function(i){h.Xc(e);const c=t.rowIndex;return h.yc().onKeyUp(i,c,0,"supplierName")})),h.ic(),h.hd(2,Ce,2,0,"div",19)}if(2&e){const e=t.row,i=t.rowIndex,c=h.Uc(1),s=h.yc();h.Kc("name","supplierName",e._id,"_",i,""),h.Hc("ngModel",e.supplierName)("id","supplierList"+i+"-supplierName")("ngClass",h.Nc(6,Se,c.invalid&&(s.formSubmitted||c.touched))),h.Pb(2),h.Hc("ngIf",c.invalid&&(s.formSubmitted||c.touched))}}function Te(e,t){1&e&&(h.jc(0,"div",41),h.jd(1," Required "),h.ic())}function De(e,t){if(1&e){const e=h.kc();h.jc(0,"input",53,54),h.uc("ngModelChange",(function(i){return h.Xc(e),t.row.concentration=i}))("keypress",(function(t){return h.Xc(e),h.yc().numberOnly(t)}))("keyup",(function(i){h.Xc(e);const c=t.rowIndex;return h.yc().onKeyUp(i,c,0,"concentration")})),h.ic(),h.hd(2,Te,2,0,"div",19)}if(2&e){const e=t.row,i=t.rowIndex,c=h.Uc(1),s=h.yc();h.Kc("name","concentration",e._id,"_",i,""),h.Hc("ngModel",e.concentration)("id","supplierList"+i+"-concentration")("ngClass",h.Nc(6,Se,c.invalid&&(s.formSubmitted||c.touched))),h.Pb(2),h.Hc("ngIf",c.invalid&&(s.formSubmitted||c.touched))}}function xe(e,t){if(1&e&&(h.jc(0,"option",58),h.jd(1),h.ic()),2&e){const e=t.$implicit;h.Hc("value",e.id),h.Pb(1),h.ld("",e.value," ")}}function Ie(e,t){1&e&&(h.jc(0,"div",41),h.jd(1," Required "),h.ic())}function we(e,t){if(1&e){const e=h.kc();h.jc(0,"select",55,56),h.uc("ngModelChange",(function(i){return h.Xc(e),t.row.byChemical=i})),h.hd(2,xe,2,2,"option",57),h.ic(),h.hd(3,Ie,2,0,"div",19)}if(2&e){const e=t.row,i=t.rowIndex,c=h.Uc(1),s=h.yc();h.Kc("name","byChemical",e._id,"_",i,""),h.Hc("ngModel",e.byChemical)("id","supplierList"+i+"-byChemical")("ngClass",h.Nc(7,Se,c.invalid&&(s.formSubmitted||c.touched))),h.Pb(2),h.Hc("ngForOf",s.byChemicalList),h.Pb(1),h.Hc("ngIf",c.invalid&&(s.formSubmitted||c.touched))}}function Fe(e,t){if(1&e&&(h.jc(0,"option",58),h.jd(1),h.ic()),2&e){const e=t.$implicit;h.Hc("value",e),h.Pb(1),h.ld(" ",e," ")}}function Ne(e,t){1&e&&(h.jc(0,"div",41),h.jd(1," Required "),h.ic())}function ke(e,t){if(1&e){const e=h.kc();h.jc(0,"select",59,60),h.uc("ngModelChange",(function(i){return h.Xc(e),t.row.shadeType=i})),h.hd(3,Fe,2,2,"option",57),h.ic(),h.hd(4,Ne,2,0,"div",19)}if(2&e){const e=t.row,i=t.rowIndex,c=h.Uc(2),s=h.yc();h.Kc("name","shadeType",e._id,"_",i,""),h.Hc("ngModel",e.shadeType)("id","supplierList"+i+"-4")("ngClass",h.Nc(7,Se,c.invalid&&(s.formSubmitted||c.touched))),h.Pb(3),h.Hc("ngForOf",s.shadeTypeList),h.Pb(1),h.Hc("ngIf",c.invalid&&(s.formSubmitted||c.touched))}}let He=(()=>{class e{constructor(e,t,i,c,s,n){this.route=e,this.activeRoute=t,this.tagService=i,this.toastr=c,this.commonService=s,this.cdr=n,this.updateFlag=!1,this.loading=!1,this.formSubmitted=!1,this.isNotTagUnique=!1,this.itemListArray=[],this.byChemicalList=[{id:"L",value:"L"},{id:"W",value:"W"},{id:"F",value:"F"}],this.shadeTypeList=["DEFAULT","LIGHT","MEDIUM","DARK","SPECIAL"],this.unsubscribe$=new a.a,this.tagFormObject=new re}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}ngOnInit(){this.getItemData(e=>{this.currentTagId=Number(this.activeRoute.snapshot.paramMap.get("id")),this.currentTagId?(this.updateFlag=!0,this.getTagById()):this.updateFlag=!1})}getItemData(e){this.loading=!0,this.tagService.getAllItemWithSupplier().pipe(Object(n.a)(this.unsubscribe$)).subscribe(t=>{t.success&&(this.itemListArray=t.data,e()),this.loading=!1},e=>{this.loading=!0})}getTagById(){this.loading=!0,this.tagService.getTagNameById(this.currentTagId).pipe(Object(n.a)(this.unsubscribe$)).subscribe(e=>{e.success?(this.tagFormObject=e.data,this.tagFormObject.dyeingTagDataList.forEach((e,t)=>{this.itemSelected(t)})):this.toastr.error(e.msg),this.loading=!1},e=>{this.loading=!1})}checkUniqTagName(){let e=0;this.currentTagId&&(e=this.currentTagId),this.tagFormObject.tagProcessName&&(this.loading=!0,this.tagService.checkUniqTag(e,this.tagFormObject.tagProcessName).pipe(Object(n.a)(this.unsubscribe$)).subscribe(e=>{this.isNotTagUnique=e.data,this.loading=!1},e=>{this.loading=!1}))}numberOnly(e){var t=e.which?e.which:e.keyCode;return!(t>31&&(t<48||t>57)||69==t)||46==t}itemSelected(e){this.itemListArray.forEach(t=>{t.itemId==this.tagFormObject.dyeingTagDataList[e].itemId&&(this.tagFormObject.dyeingTagDataList[e].supplierName=t.supplierName,this.tagFormObject.dyeingTagDataList[e].itemName=t.itemName)}),this.verify(),this.tagFormObject.dyeingTagDataList[e].duplicateError&&(this.toastr.error("Same Item and Shade Type present"),this.tagFormObject.dyeingTagDataList.splice(e,1))}verify(){if(this.tagFormObject.dyeingTagDataList&&this.tagFormObject.dyeingTagDataList.length){let e=Object(g.uniqBy)(this.tagFormObject.dyeingTagDataList,(function(e){return e.itemId&&e.shadeType}));this.tagFormObject.dyeingTagDataList.length!=e.length?this.tagFormObject.dyeingTagDataList.forEach(e=>{let t=0;for(let i of this.tagFormObject.dyeingTagDataList)e.shadeType==i.shadeType&&e.itemId==i.itemId&&(t++,i.duplicateError=!!(t>1&&i.shadeType&&i.itemId))}):this.tagFormObject.dyeingTagDataList.map(e=>e.duplicateError=!1)}else this.tagFormObject.dyeingTagDataList.map(e=>e.duplicateError=!1)}onKeyUp(e,t,i,c){if(13==(e.keyCode?e.keyCode:e.which))if(this.index="supplierList"+(t+1)+"-"+c,t===this.tagFormObject.dyeingTagDataList.length-1){let e=this.tagFormObject.dyeingTagDataList[t];if("concentration"==c){if(!e.concentration)return}else if("byChemical"==c&&!e.byChemical)return;let i=new le;this.tagFormObject.dyeingTagDataList.push(i),this.tagFormObject.dyeingTagDataList=[...this.tagFormObject.dyeingTagDataList];let s=setInterval(()=>{let e=document.getElementById(this.index);null!=e&&(e.focus(),clearInterval(s))},10)}else{let e=setInterval(()=>{let t=document.getElementById(this.index);null!=t&&(t.focus(),clearInterval(e))},10);this.cdr.detectChanges()}}removeItem(e){1==this.tagFormObject.dyeingTagDataList.length?(this.tagFormObject.dyeingTagDataList[0].byChemical="L",this.tagFormObject.dyeingTagDataList[0].concentration=null,this.tagFormObject.dyeingTagDataList[0].controlId=null,this.tagFormObject.dyeingTagDataList[0].id=null,this.tagFormObject.dyeingTagDataList[0].itemId=null,this.tagFormObject.dyeingTagDataList[0].itemName=null,this.tagFormObject.dyeingTagDataList[0].supplierName=null):this.tagFormObject.dyeingTagDataList.splice(e,1),this.tagFormObject.dyeingTagDataList=[...this.tagFormObject.dyeingTagDataList]}cancelForm(e){e.reset(),this.tagFormObject=new re,this.formSubmitted=!1,this.isNotTagUnique=!1}submitForm(e){this.formSubmitted=!0,e.valid&&!this.isNotTagUnique?this.updateFlag?this.editcurrentTag():this.addNewTag(e):this.tagFormObject.dyeingTagDataList.forEach(e=>{e.byChemical&&e.concentration&&e.itemId&&e.shadeType&&e.supplierName||this.toastr.error("Please fill all chemical data")})}addNewTag(e){this.tagFormObject.userHeadId=this.commonService.getUserHeadId().userHeadId,this.tagFormObject.createdBy=this.commonService.getUser().userId,this.loading=!0,this.tagService.addTagName(this.tagFormObject).pipe(Object(n.a)(this.unsubscribe$)).subscribe(t=>{t.success?(this.toastr.success(t.msg),this.cancelForm(e)):this.toastr.error(t.msg),this.loading=!1},e=>{this.loading=!1})}editcurrentTag(){this.tagFormObject.updatedBy=this.commonService.getUser().userId,this.loading=!0,this.tagService.updateTagName(this.tagFormObject).pipe(Object(n.a)(this.unsubscribe$)).subscribe(e=>{e.success?(this.toastr.success(e.msg),this.route.navigate(["pages/dyeing-process/tag/view"])):this.toastr.error(e.msg),this.loading=!1},e=>{this.loading=!1})}trackByFn(e,t){return t?t._id||t:e}tableChange(e){switch(e){case"view table":this.route.navigate(["/pages/dyeing-process/view"]);break;case"add process":this.route.navigate(["/pages/dyeing-process/"]);break;case"show tag":this.route.navigate(["/pages/dyeing-process/tag/view"])}}}return e.\u0275fac=function(t){return new(t||e)(h.dc(s.c),h.dc(s.a),h.dc(l.a),h.dc(u.b),h.dc(r.a),h.dc(h.i))},e.\u0275cmp=h.Xb({type:e,selectors:[["ngx-add-edit-tag-name"]],decls:76,vars:35,consts:[[3,"show"],[1,"container"],[1,"nb-style"],[1,"nb-header"],[1,"row"],[1,"col-md-5","col-6","display-flex-start","max-width-device"],["placeholder","Select",1,"btn","btn-md",2,"width","175px",3,"change"],["value","view table"],["value","add process"],["value","show tag"],[1,"col-md-7","col-7"],[1,"nb-text","txt-ov-elips"],["tagForm","ngForm"],[1,"modal-body"],[1,"col-md-6"],[1,"form-group"],[1,"required"],["type","text","name","tagProcessName","required","","placeholder","Tag Name",1,"form-control","input-group",3,"ngModel","ngClass","ngModelChange","change"],["tagProcessName","ngModel"],["class","input-required",4,"ngIf"],["type","number","min","0","name","temp","required","","placeholder","Temprature",1,"form-control","input-group",3,"ngModel","ngClass","ngModelChange"],["temp1","ngModel"],["min","0","type","number","name","holdTime","required","","placeholder","Hold Time",1,"form-control","input-group",3,"ngModel","ngClass","ngModelChange"],["holdTime1","ngModel"],["min","0","type","number","name","liquerRation","required","","placeholder","Liquor ratio",1,"form-control","input-group",3,"ngModel","ngClass","ngModelChange","keypress"],["liquerRation1","ngModel"],[1,"col-md-12"],[1,"nb-badges","mr-0"],["id","fmtr-table",1,"col-md-12"],[1,"material","common-table","datatable-auto-height","box-shadow-none","box-mr-bt","tag-table-body-height",3,"rows","headerHeight","footerHeight","scrollbarV"],["table",""],["name","Action",3,"sortable","maxWidth"],["ngx-datatable-cell-template",""],["name","Item Name",3,"sortable","width"],["name","Supplier Name",3,"sortable"],["name","Concentration",3,"sortable"],["name","By",3,"sortable"],["name","Shade type",3,"sortable"],[1,"modal-footer"],["type","button",1,"btn","btn-primary","btn-sm","btn-design-save",3,"click"],["type","button",1,"btn","btn-primary","btn-sm","btn-design-cancel",3,"click"],[1,"input-required"],["icon","trash","status","danger",3,"options","click"],["itemId1","ngModel","required","","appendTo","body",1,"tableForm",2,"width","100%",3,"name","ngModel","id","ngClass","ngModelChange","change"],["data","ngModel","itemId1","ngModel"],["disabled","true"],[1,"col-md-6","col-6"],[1,"text-left","txt-ov-elips"],[1,"text-center","txt-ov-elips"],["placeholder","Select Item",3,"value",4,"ngFor","ngForOf"],["placeholder","Select Item",3,"value"],["type","text","readonly","",1,"tableForm",3,"name","ngModel","id","ngClass","ngModelChange","keyup"],["supplierName1","ngModel"],["type","number","min","0",1,"tableForm",3,"name","ngModel","id","ngClass","ngModelChange","keypress","keyup"],["concentration1","ngModel"],["required","",1,"tableForm",2,"width","100%",3,"name","ngModel","id","ngClass","ngModelChange"],["byChemical","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["placeholder","Select Shade-type","shadeType","ngModel","required","","appendTo","body",1,"tableForm",2,"width","100%",3,"name","ngModel","id","ngClass","ngModelChange"],["shadeType","","itemId1","ngModel"]],template:function(e,t){if(1&e){const e=h.kc();h.ec(0,"ngx-loading",0),h.jc(1,"div",1),h.jc(2,"nb-card",2),h.jc(3,"nb-card-header",3),h.jc(4,"div",4),h.jc(5,"div",5),h.jc(6,"ng-select",6),h.uc("change",(function(e){return t.tableChange(e)})),h.jc(7,"ng-option",7),h.jd(8,"View Table"),h.ic(),h.jc(9,"ng-option",8),h.jd(10,"Add Process"),h.ic(),h.jc(11,"ng-option",9),h.jd(12,"View Process-Tags"),h.ic(),h.ic(),h.ic(),h.jc(13,"div",10),h.jc(14,"h2",11),h.jd(15),h.ic(),h.ic(),h.ic(),h.ic(),h.jc(16,"nb-card-body"),h.jc(17,"form",null,12),h.jc(19,"div",13),h.jc(20,"div",4),h.jc(21,"div",14),h.jc(22,"div",15),h.jc(23,"label",16),h.jd(24,"Tag Name"),h.ic(),h.jc(25,"input",17,18),h.uc("ngModelChange",(function(e){return t.tagFormObject.tagProcessName=e}))("change",(function(){return t.checkUniqTagName()})),h.ic(),h.hd(27,he,2,0,"div",19),h.hd(28,pe,2,0,"div",19),h.ic(),h.ic(),h.jc(29,"div",14),h.jc(30,"div",15),h.jc(31,"label",16),h.jd(32,"Temprature"),h.ic(),h.jc(33,"input",20,21),h.uc("ngModelChange",(function(e){return t.tagFormObject.temp=e})),h.ic(),h.hd(35,ue,2,0,"div",19),h.ic(),h.ic(),h.jc(36,"div",14),h.jc(37,"div",15),h.jc(38,"label",16),h.jd(39,"Hold Time"),h.ic(),h.jc(40,"input",22,23),h.uc("ngModelChange",(function(e){return t.tagFormObject.holdTime=e})),h.ic(),h.hd(42,me,2,0,"div",19),h.ic(),h.ic(),h.jc(43,"div",14),h.jc(44,"div",15),h.jc(45,"label",16),h.jd(46,"Liquor Ratio"),h.ic(),h.jc(47,"input",24,25),h.uc("ngModelChange",(function(e){return t.tagFormObject.liquerRation=e}))("keypress",(function(e){return t.numberOnly(e)})),h.ic(),h.hd(49,ye,2,0,"div",19),h.ic(),h.ic(),h.ic(),h.ic(),h.jc(50,"div",4),h.jc(51,"div",26),h.jc(52,"div",16),h.jc(53,"h5",27),h.jd(54,"Chemical List"),h.ic(),h.ic(),h.ic(),h.ic(),h.jc(55,"div",4),h.jc(56,"div",28),h.jc(57,"ngx-datatable",29,30),h.jc(59,"ngx-datatable-column",31),h.hd(60,fe,1,4,"ng-template",32),h.ic(),h.jc(61,"ngx-datatable-column",33),h.hd(62,Me,14,12,"ng-template",32),h.ic(),h.jc(63,"ngx-datatable-column",34),h.hd(64,Le,3,8,"ng-template",32),h.ic(),h.jc(65,"ngx-datatable-column",35),h.hd(66,De,3,8,"ng-template",32),h.ic(),h.jc(67,"ngx-datatable-column",36),h.hd(68,we,4,9,"ng-template",32),h.ic(),h.jc(69,"ngx-datatable-column",37),h.hd(70,ke,5,9,"ng-template",32),h.ic(),h.ic(),h.ic(),h.ic(),h.jc(71,"div",38),h.jc(72,"button",39),h.uc("click",(function(){h.Xc(e);const i=h.Uc(18);return t.submitForm(i)})),h.jd(73,"Save"),h.ic(),h.jc(74,"button",40),h.uc("click",(function(){h.Xc(e);const i=h.Uc(18);return t.cancelForm(i)})),h.jd(75,"Cancel"),h.ic(),h.ic(),h.ic(),h.ic(),h.ic(),h.ic()}if(2&e){const e=h.Uc(26),i=h.Uc(34),c=h.Uc(41),s=h.Uc(48);h.Hc("show",t.loading),h.Pb(15),h.kd(t.updateFlag?"Edit Process-Tag":"Add Process-Tag"),h.Pb(10),h.Hc("ngModel",t.tagFormObject.tagProcessName)("ngClass",h.Nc(27,Se,e.invalid&&(t.formSubmitted||e.touched)||t.isNotTagUnique)),h.Pb(2),h.Hc("ngIf",e.invalid&&(t.formSubmitted||e.touched)),h.Pb(1),h.Hc("ngIf",t.isNotTagUnique),h.Pb(5),h.Hc("ngModel",t.tagFormObject.temp)("ngClass",h.Nc(29,Se,i.invalid&&(t.formSubmitted||i.touched))),h.Pb(2),h.Hc("ngIf",i.invalid&&(t.formSubmitted||i.touched)),h.Pb(5),h.Hc("ngModel",t.tagFormObject.holdTime)("ngClass",h.Nc(31,Se,c.invalid&&(t.formSubmitted||c.touched))),h.Pb(2),h.Hc("ngIf",c.invalid&&(t.formSubmitted||c.touched)),h.Pb(5),h.Hc("ngModel",t.tagFormObject.liquerRation)("ngClass",h.Nc(33,Se,s.invalid&&(t.formSubmitted||s.touched))),h.Pb(2),h.Hc("ngIf",s.invalid&&(t.formSubmitted||s.touched)),h.Pb(8),h.Hc("rows",t.tagFormObject.dyeingTagDataList)("headerHeight",31)("footerHeight",31)("scrollbarV",!0),h.Pb(2),h.Hc("sortable",!1)("maxWidth",90),h.Pb(2),h.Hc("sortable",!1)("width",500),h.Pb(2),h.Hc("sortable",!1),h.Pb(2),h.Hc("sortable",!1),h.Pb(2),h.Hc("sortable",!1),h.Pb(2),h.Hc("sortable",!1)}},directives:[ge.a,b.u,b.x,y.a,y.c,b.t,m.x,m.m,m.n,m.a,m.t,m.l,m.o,c.l,c.n,m.q,ie.e,ie.b,ie.a,b.I,m.u,m.p,m.w,c.m],pipes:[f.a],styles:[""]}),e})();const Oe=function(){return{type:"zoom"}},qe=function(e){return{animation:e}},Ae=function(e){return["/pages/dyeing-process/tag/edit",e]};function Ue(e,t){if(1&e){const e=h.kc();h.ec(0,"nb-icon",17),h.jd(1,"\xa0\xa0 "),h.jc(2,"nb-icon",18),h.uc("click",(function(){h.Xc(e);const i=t.rowIndex;return h.yc().deleteTag(i)})),h.ic()}if(2&e){const e=t.row;h.Hc("options",h.Nc(4,qe,h.Mc(3,Oe)))("routerLink",h.Nc(6,Ae,e.id)),h.Pb(2),h.Hc("options",h.Nc(9,qe,h.Mc(8,Oe)))}}const $e=[{path:"",component:Q,canActivate:[Y.a],canLoad:[Y.a],data:{PermissionName:["add"]}},{path:"view",component:de,canActivate:[Y.a],canLoad:[Y.a],data:{PermissionName:["view","view group","view all"]}},{path:"edit/:id",component:Q,canActivate:[Y.a],canLoad:[Y.a],data:{PermissionName:["edit","edit group","edit all"]}},{path:"tag",component:He,canActivate:[Y.a],canLoad:[Y.a],data:{PermissionName:["add"]}},{path:"tag/view",component:(()=>{class e{constructor(e,t,i){this.route=e,this.tagService=t,this.toastr=i,this.tagList=[],this.loading=!1}ngOnInit(){this.getAllProcessTags()}getAllProcessTags(){this.tagList=[],this.loading=!0,this.tagService.getAllTags().subscribe(e=>{e.success&&(this.tagList=e.data),this.loading=!1},e=>{this.loading=!1})}deleteTag(e){this.loading=!0,this.tagService.deleteProcessTag(this.tagList[e].id).subscribe(e=>{e.success?(this.toastr.success(e.msg),this.getAllProcessTags()):this.toastr.error(e.msg),this.loading=!1},e=>{this.loading=!1})}addProcessTag(){this.route.navigate(["/pages/dyeing-process/tag/"])}tableChange(e){switch(e){case"view table":this.route.navigate(["/pages/dyeing-process/view"]);break;case"add process":this.route.navigate(["/pages/dyeing-process/"])}}}return e.\u0275fac=function(t){return new(t||e)(h.dc(s.c),h.dc(l.a),h.dc(u.b))},e.\u0275cmp=h.Xb({type:e,selectors:[["ngx-show-tag-name"]],decls:22,vars:6,consts:[[1,"container"],[1,"nb-style"],[1,"nb-header"],[1,"row"],[1,"col-md-5","col-6","display-flex-start","max-width-device"],["placeholder","Select",1,"btn","btn-md",2,"width","175px",3,"change"],["value","view table"],["value","add process"],[1,"col-md-3","col-3"],["type","button",1,"btn","btn-md","btn-design",3,"click"],[1,"col-md-4","col-4"],[1,"nb-text","txt-ov-elips"],[1,"material","common-table","datatable-auto-height",3,"rows","headerHeight","footerHeight"],["table",""],["name","Action",3,"sortable","width","maxWidth"],["ngx-datatable-cell-template",""],["name","Process-Tag Name","prop","tagProcessName"],["status","primary","icon","edit",3,"options","routerLink"],["icon","trash","status","danger",3,"options","click"]],template:function(e,t){1&e&&(h.jc(0,"div",0),h.jc(1,"nb-card",1),h.jc(2,"nb-card-header",2),h.jc(3,"div",3),h.jc(4,"div",4),h.jc(5,"ng-select",5),h.uc("change",(function(e){return t.tableChange(e)})),h.jc(6,"ng-option",6),h.jd(7,"View Dyeing Process Table"),h.ic(),h.jc(8,"ng-option",7),h.jd(9,"Add Dyeing Process"),h.ic(),h.ic(),h.ic(),h.jc(10,"div",8),h.jc(11,"button",9),h.uc("click",(function(){return t.addProcessTag()})),h.jd(12,"Add Process-Tag"),h.ic(),h.ic(),h.jc(13,"div",10),h.jc(14,"h2",11),h.jd(15,"Process Tags"),h.ic(),h.ic(),h.ic(),h.ic(),h.jc(16,"nb-card-body"),h.jc(17,"ngx-datatable",12,13),h.jc(19,"ngx-datatable-column",14),h.hd(20,Ue,3,11,"ng-template",15),h.ic(),h.ec(21,"ngx-datatable-column",16),h.ic(),h.ic(),h.ic(),h.ic()),2&e&&(h.Pb(17),h.Hc("rows",t.tagList)("headerHeight",31)("footerHeight",31),h.Pb(2),h.Hc("sortable",!1)("width",300)("maxWidth",90))},directives:[b.u,b.x,y.a,y.c,b.t,ie.e,ie.b,ie.a,b.I,s.d],styles:[""]}),e})(),canActivate:[Y.a],canLoad:[Y.a],data:{PermissionName:["view","view group","view all"]}},{path:"tag/edit/:id",component:He,canActivate:[Y.a],canLoad:[Y.a],data:{PermissionName:["edit","edit group","edit all"]}}];let Ee=(()=>{class e{}return e.\u0275mod=h.bc({type:e}),e.\u0275inj=h.ac({factory:function(t){return new(t||e)},imports:[[s.g.forChild($e)],s.g]}),e})();var Xe=i("yzeJ"),Be=i("vTDv");let Re=(()=>{class e{}return e.\u0275mod=h.bc({type:e}),e.\u0275inj=h.ac({factory:function(t){return new(t||e)},imports:[[c.c,Ee,Xe.a,m.g,Be.a]]}),e})()},iLL0:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var c=i("4/8P"),s=i("fXoL"),n=i("tk/3");let a=(()=>{class e{constructor(e,t){this.httpClient=e,this.commonService=t}getDyeingSlipData(){return this.httpClient.get(this.commonService.envUrl()+"api/dyeingSlip/all")}getDyeingProcessById(e){return this.httpClient.get(this.commonService.envUrl()+"api/dyeingProcess/"+e)}isProcessNameExist(e,t){return this.httpClient.get(this.commonService.envUrl()+"api/dyeingProcess/isProcessExistWithName/"+e+"/"+t)}getAllDyeingProcessList(){return this.httpClient.get(this.commonService.envUrl()+"api/dyeingProcess/all")}getAllItemWithSupplier(){return this.httpClient.get(this.commonService.envUrl()+"api/supplier/getItemWithSupplierName/all")}saveDyeingProcess(e){return this.httpClient.post(this.commonService.envUrl()+"api/dyeingProcess",e)}deleteDyeingProcess(e){return this.httpClient.delete(this.commonService.envUrl()+"api/dyeingProcess/"+e)}updateDyeingProcess(e){return this.httpClient.put(this.commonService.envUrl()+"api/dyeingProcess",e)}checkUniqTag(e,t){return this.httpClient.get(this.commonService.envUrl()+"api/dyeingProcess/exist/tagProcess?id="+e+"&name="+t)}getAllTags(){return this.httpClient.get(this.commonService.envUrl()+"api/dyeingProcess/all/tagProcess")}getTagNameById(e){return this.httpClient.get(this.commonService.envUrl()+"api/dyeingProcess/get/tagProcess?id="+e)}addTagName(e){return this.httpClient.post(this.commonService.envUrl()+"api/dyeingProcess/add/tagProcess",e)}updateTagName(e){return this.httpClient.put(this.commonService.envUrl()+"api/dyeingProcess/update/tagProcess",e)}deleteProcessTag(e){return this.httpClient.delete(this.commonService.envUrl()+"api/dyeingProcess/delete/tagProcess?id="+e)}getAttributes(){return this.httpClient.get(this.commonService.envUrl()+"api/dyeingProcess/getPlcNameList")}}return e.\u0275fac=function(t){return new(t||e)(s.rc(n.b),s.rc(c.a))},e.\u0275prov=s.Zb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},yodA:function(e,t,i){"use strict";i.d(t,"b",(function(){return c})),i.d(t,"c",(function(){return s})),i.d(t,"d",(function(){return n})),i.d(t,"e",(function(){return a})),i.d(t,"a",(function(){return o}));class c{}class s{}class n{constructor(){this.id=null,this.dyeingProcessMastId=null,this.dyeingplcDataList=[]}}class a{constructor(){this.l=null,this.m=null,this.d=null,this.s=null}}class o{constructor(){this.byChemical="L",this.shadeType="DEFAULT",this._id="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))}}}}]);