!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var i=0;i<t.length;i++){var c=t[i];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(e,c.key,c)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{tJF0:function(i,c,o){"use strict";o.r(c),o.d(c,"SalesReportModule",(function(){return U}));var r=o("ofXK"),n=o("yzeJ"),a=o("tyNb"),s=o("rj63"),d=o("mrSG"),l=o("tcrU"),u=o("LvDl"),p=o("wd/R"),h=o("XNiG"),v=o("1G5W"),m=o("v1rY"),f=o("8tQ5"),g=o("bidh"),y=o("cmeu"),j=o("tA+f"),b=o("8k+d"),R=o("RNo3"),q=o("IYph"),M=o("fXoL"),P=o("5eHb"),S=o("aceb"),w=o("3Pt+"),L=o("ZOsW"),N=o("z17N");function x(e,t){if(1&e&&(M.jc(0,"ng-option",32),M.jd(1),M.ic()),2&e){var i=t.$implicit;M.Hc("value",i),M.Pb(1),M.ld("",i.name," ")}}function I(e,t){1&e&&(M.jc(0,"div",33),M.jc(1,"span"),M.jd(2,"From date is required."),M.ic(),M.ic())}function T(e,t){1&e&&(M.jc(0,"div",33),M.jc(1,"span"),M.jd(2,"To date is required."),M.ic(),M.ic())}function k(e,t){if(1&e&&(M.jc(0,"ng-option",32),M.jc(1,"div",1),M.jc(2,"div",22),M.jc(3,"div",23),M.jd(4),M.ic(),M.ic(),M.jc(5,"div",22),M.jc(6,"div",24),M.jd(7),M.ic(),M.ic(),M.ic(),M.ic()),2&e){var i=t.$implicit;M.Hc("value",i.id),M.Pb(4),M.ld(" ",i.partyName," "),M.Pb(3),M.ld(" ",i.partyCode," ")}}function D(e,t){if(1&e&&(M.jc(0,"ng-option",32),M.jc(1,"div",1),M.jc(2,"div",22),M.jc(3,"div",23),M.jd(4),M.ic(),M.ic(),M.jc(5,"div",22),M.jc(6,"div",24),M.jd(7),M.ic(),M.ic(),M.ic(),M.ic()),2&e){var i=t.$implicit;M.Hc("value",i.qualityEntryId),M.Pb(4),M.ld(" ",i.qualityId," "),M.Pb(3),M.ld(" ",i.partyName," ")}}function F(e,t){if(1&e&&(M.jc(0,"ng-option",32),M.jd(1),M.ic()),2&e){var i=t.$implicit;M.Hc("value",i.id),M.Pb(1),M.kd(i.userName)}}function C(e,t){if(1&e&&(M.jc(0,"ng-option",32),M.jc(1,"div",1),M.jc(2,"div",22),M.jc(3,"div",23),M.jd(4),M.ic(),M.ic(),M.ic(),M.ic()),2&e){var i=t.$implicit;M.Hc("value",i.id),M.Pb(4),M.ld(" ",i.qualityName,"")}}var H,O,$,E=function(e){return{"is-invalid":e}},A=[{path:"",component:(H=function(){function i(t,c,o,r,n,a,s,d,l){e(this,i),this.invoiceService=t,this.partyService=c,this.qualityService=o,this.shadeService=r,this.adminService=n,this.exportService=a,this.reportService=s,this.datepipe=d,this.toaster=l,this.currentDate=new Date,this.disableButton=!1,this.masterList=[],this.partyList=[],this.qualityNameList=[],this.shortReport=[],this.reportType=null,this.destroy$=new h.a,this.formSubmitted=!1,this.reportList=[{name:"Sales Report",value:"salesReport"},{name:"Sales Pending Report",value:"salesPendingReport"}],this.apiObject={reportId:"",apiForExcel:"",apiForReport:""},this.invoiceReportRequest=new f.b}var c,o,r;return c=i,(o=[{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}},{key:"ngOnInit",value:function(){this.getReportList(),this.maxDate=new Date(this.currentDate.getFullYear(),this.currentDate.getMonth(),this.currentDate.getDate(),23,59),this.getAllMasters(),this.getAllParties(),this.getQualityList(),this.getQualityNameList()}},{key:"getReportList",value:function(){var e=this;this.reportService.getAllReportType("sales").pipe(Object(v.a)(this.destroy$)).subscribe((function(t){t.success&&(e.reportList=t.data)}),(function(e){}))}},{key:"getQualityNameList",value:function(){var e=this;this.adminService.getAllQualityData().pipe(Object(v.a)(this.destroy$)).subscribe((function(t){t.success&&(e.qualityNameList=t.data)}),(function(e){}))}},{key:"getAllMasters",value:function(){var e=this;this.partyService.getAllMaster().pipe(Object(v.a)(this.destroy$)).subscribe((function(t){t.success&&(e.masterList=t.data)}),(function(e){}))}},{key:"getAllParties",value:function(){var e=this;this.partyService.getAllPartyList(0,"all").pipe(Object(v.a)(this.destroy$)).subscribe((function(t){t.success&&(e.partyList=t.data)}),(function(e){}))}},{key:"getQualityList",value:function(){return Object(d.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,i){t.qualityService.getQualityNameData().pipe(Object(v.a)(t.destroy$)).subscribe((function(e){e.success&&(t.qualityList=e.data||[],t.qualityList&&t.qualityList.length&&t.qualityList.forEach((function(e){e.qualityEntryId=e.id})))}),(function(e){}))}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))}},{key:"getQualityFromParty",value:function(e){var t=this;this.shadeService.getQualityFromParty(this.invoiceReportRequest.partyId).pipe(Object(v.a)(this.destroy$)).subscribe((function(e){e.success?(t.qualityList=e.data.qualityDataList,t.qualityList.forEach((function(t){t.partyName=e.data.partyName}))):t.qualityList=null}),(function(e){}))}},{key:"getShortReport",value:function(e){var t=this;this.totalAmount=0,this.totalFinishedMeter=0,this.totalGrayMeter=0,this.shortReport=[],this.formSubmitted=!0,e.valid&&(this.invoiceReportRequest.from=p(this.invoiceReportRequest.from).format(),this.invoiceReportRequest.to=p(this.invoiceReportRequest.to).format(),this.invoiceService.getShortInvoiceReport(this.invoiceReportRequest).pipe(Object(v.a)(this.destroy$)).subscribe((function(i){if(i.success&&(t.shortReport=i.data,t.shortReport&&t.shortReport.length)){if(t.shortReport[0].consolidatedBillDataList&&t.shortReport[0].consolidatedBillDataList.length){var c=/([A-Z])([A-Z])([a-z])|([a-z])([A-Z])/g,o=Object.keys(t.shortReport[0].consolidatedBillDataList[0]),r=[];o.forEach((function(e,t){r.push(e.replace(c,"$1$4 $2$3$5")),r[t]=r[t].charAt(0).toUpperCase()+r[t].slice(1)})),t.headers=[].concat(r),t.shortReport.forEach((function(e){e.consolidatedBillDataList.forEach((function(e){t.totalFinishedMeter+=e.totalFinishMtr,t.totalGrayMeter+=e.totalMtr,t.totalAmount+=e.taxAmt}))}))}t.shortReport=Object(u.sortBy)(t.shortReport,"invoiceNo"),t.printReport(e)}}),(function(e){})))}},{key:"printReport",value:function(e){var t=this,i=new l.PrintDocument({title:""});i.append('<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/paper-css/0.3.0/paper.css">'),i.append('<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">'),i.append('<link href="https://cdn.grapecity.com/wijmo/5.latest/styles/wijmo.min.css" rel="stylesheet">');var c=setInterval((function(){var e=document.getElementById("shortReport");null!=e&&(i.append(e),clearInterval(c),setTimeout((function(){i.print(),t.shortReport=[],t.invoiceReportRequest=new f.b,t.formSubmitted=!1}),1e3))}),10)}},{key:"downLoadExcel",value:function(e){var t=this;this.formSubmitted=!0,this.reportType?e.valid&&(this.invoiceReportRequest.from&&(this.invoiceReportRequest.from=p(this.invoiceReportRequest.from).format()),this.invoiceReportRequest.to&&(this.invoiceReportRequest.to=p(this.invoiceReportRequest.to).format()),this.invoiceService.getShortInvoiceReport(this.invoiceReportRequest).pipe(Object(v.a)(this.destroy$)).subscribe((function(e){if(e.success){var i=e.data;t.headers=Object.keys(i),t.formSubmitted=!1,t.headers.forEach((function(e){e.replace(/([A-Z])/g," $1").replace(/^./,(function(e){return e.toUpperCase()}))})),t.exportService.exportExcel(i,"Sales Report",t.headers)}}),(function(e){}))):(this.toaster.error("Select Report Type"),this.formSubmitted=!1)}},{key:"selectedReport",value:function(e){this.apiObject={reportId:"",apiForExcel:"",apiForReport:""},this.apiObject.reportId=e.id,this.apiObject.apiForExcel=e.urlForExcel,this.apiObject.apiForReport=e.urlForReport,this.invoiceReportRequest.reportType=e.id}}])&&t(c.prototype,o),r&&t(c,r),i}(),H.\u0275fac=function(e){return new(e||H)(M.dc(j.a),M.dc(b.a),M.dc(R.a),M.dc(q.a),M.dc(g.a),M.dc(y.a),M.dc(m.a),M.dc(r.e),M.dc(P.b))},H.\u0275cmp=M.Xb({type:H,selectors:[["ngx-sales-report"]],decls:87,vars:30,consts:[[1,"nb-header"],[1,"row"],[1,"col-md-10","col-6"],[1,"nb-text"],["invoiceForm","ngForm"],[1,"form-group","col-md-4"],[1,"required"],["name","report","appendTo","body","id","report","placeholder","Select Report",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-4"],[1,"form-group"],["required","","name","fromDate","placeholder","Select Date",1,"form-control",3,"max","ngModel","owlDateTimeTrigger","owlDateTime","ngClass","ngModelChange"],["from","ngModel"],[3,"pickerType","afterPickerClosed"],["dtFrom1",""],["class","input-required",4,"ngIf"],["required","","name","toDate","placeholder","Select Date",1,"form-control",3,"max","disabled","ngModel","owlDateTimeTrigger","owlDateTime","min","ngClass","ngModelChange"],["to","ngModel"],["dtTo1",""],["appendTo","body","placeholder","Select Party Name","name","partyName","partyName1","ngModel",3,"ngModel","ngModelChange","change"],["partyName1","ngModel"],["disabled","true"],[1,"col-md-6","col-6"],[1,"text-left","txt-ov-elips"],[1,"text-right","txt-ov-elips"],["appendTo","body","placeholder","Select Quality Id","name","qualityId",3,"ngModel","ngModelChange"],["qualityId1","ngModel"],["name","userHeadId","appendTo","body","id","userHeadId","name","userHeadId","placeholder","Select Master",3,"ngModel","ngModelChange"],["name","qualityName","appendTo","body","id","qualityName","placeholder","Quality Name",3,"ngModel","ngModelChange"],[1,"col-md-6","mobile-btn-center","text-btn-right"],[1,"padding-bt-tp"],["type","button",1,"btn","btn-primary","btn-sm","btn-design-save","button-base","ripple",3,"click"],[3,"value"],[1,"input-required"]],template:function(e,t){if(1&e){var i=M.kc();M.jc(0,"nb-card"),M.jc(1,"nb-card-header",0),M.jc(2,"div",1),M.jc(3,"div",2),M.jc(4,"h2",3),M.jd(5,"Sales Report"),M.ic(),M.ic(),M.ic(),M.ic(),M.jc(6,"nb-card-body"),M.jc(7,"form",null,4),M.jc(9,"div",1),M.jc(10,"div",5),M.jc(11,"label",6),M.jd(12,"Report Type"),M.ic(),M.jc(13,"ng-select",7),M.uc("ngModelChange",(function(e){return t.reportType=e}))("change",(function(e){return t.selectedReport(e)})),M.jc(14,"div"),M.hd(15,x,2,2,"ng-option",8),M.ic(),M.ic(),M.ic(),M.ic(),M.jc(16,"div",1),M.jc(17,"div",9),M.jc(18,"div",10),M.jc(19,"label",6),M.jd(20,"From date"),M.ic(),M.jc(21,"input",11,12),M.uc("ngModelChange",(function(e){return t.invoiceReportRequest.from=e})),M.ic(),M.jc(23,"owl-date-time",13,14),M.uc("afterPickerClosed",(function(){return null})),M.ic(),M.ic(),M.hd(25,I,3,0,"div",15),M.ic(),M.jc(26,"div",9),M.jc(27,"div",10),M.jc(28,"label",6),M.jd(29,"To date"),M.ic(),M.jc(30,"input",16,17),M.uc("ngModelChange",(function(e){return t.invoiceReportRequest.to=e})),M.ic(),M.jc(32,"owl-date-time",13,18),M.uc("afterPickerClosed",(function(){return null})),M.ic(),M.ic(),M.hd(34,T,3,0,"div",15),M.ic(),M.jc(35,"div",9),M.jc(36,"div",10),M.jc(37,"label"),M.jd(38,"Party Name"),M.ic(),M.jc(39,"ng-select",19,20),M.uc("ngModelChange",(function(e){return t.invoiceReportRequest.partyId=e}))("change",(function(e){return t.getQualityFromParty(e)})),M.jc(41,"ng-option",21),M.jc(42,"div",1),M.jc(43,"div",22),M.jc(44,"div",23),M.jd(45," Party Name "),M.ic(),M.ic(),M.jc(46,"div",22),M.jc(47,"div",24),M.jd(48," Party Code "),M.ic(),M.ic(),M.ic(),M.ic(),M.hd(49,k,8,3,"ng-option",8),M.ic(),M.ic(),M.ic(),M.ic(),M.jc(50,"div",1),M.jc(51,"div",9),M.jc(52,"div",10),M.jc(53,"label"),M.jd(54,"Quality Id"),M.ic(),M.jc(55,"ng-select",25,26),M.uc("ngModelChange",(function(e){return t.invoiceReportRequest.qualityEntryId=e})),M.jc(57,"ng-option",21),M.jc(58,"div",1),M.jc(59,"div",22),M.jc(60,"div",23),M.jd(61," Quality Id "),M.ic(),M.ic(),M.jc(62,"div",22),M.jc(63,"div",24),M.jd(64," Party Name "),M.ic(),M.ic(),M.ic(),M.ic(),M.hd(65,D,8,3,"ng-option",8),M.ic(),M.ic(),M.ic(),M.jc(66,"div",5),M.jc(67,"label"),M.jd(68,"Master Name"),M.ic(),M.jc(69,"ng-select",27),M.uc("ngModelChange",(function(e){return t.invoiceReportRequest.userHeadId=e})),M.jc(70,"div"),M.hd(71,F,2,2,"ng-option",8),M.ic(),M.ic(),M.ic(),M.jc(72,"div",5),M.jc(73,"label"),M.jd(74,"Quality Name"),M.ic(),M.jc(75,"ng-select",28),M.uc("ngModelChange",(function(e){return t.invoiceReportRequest.qualityNameId=e})),M.jc(76,"ng-option",21),M.jc(77,"div",1),M.jc(78,"div",22),M.jc(79,"div",23),M.jd(80,"Quality Name "),M.ic(),M.ic(),M.ic(),M.ic(),M.hd(81,C,5,2,"ng-option",8),M.ic(),M.ic(),M.ic(),M.jc(82,"div",1),M.jc(83,"div",29),M.jc(84,"div",30),M.jc(85,"button",31),M.uc("click",(function(){M.Xc(i);var e=M.Uc(8);return t.downLoadExcel(e)})),M.jd(86,"Get Excel"),M.ic(),M.ic(),M.ic(),M.ic(),M.ic(),M.ic(),M.ic()}if(2&e){var c=M.Uc(22),o=M.Uc(24),r=M.Uc(31),n=M.Uc(33);M.Pb(13),M.Hc("ngModel",t.reportType),M.Pb(2),M.Hc("ngForOf",t.reportList),M.Pb(6),M.Hc("max",t.maxDate)("ngModel",t.invoiceReportRequest.from)("owlDateTimeTrigger",o)("owlDateTime",o)("ngClass",M.Nc(26,E,c.invalid&&(t.formSubmitted||c.touched))),M.Pb(2),M.Hc("pickerType","calendar"),M.Pb(2),M.Hc("ngIf",c.invalid&&(t.formSubmitted||c.touched)),M.Pb(5),M.Hc("max",t.maxDate)("disabled",!t.invoiceReportRequest.from)("ngModel",t.invoiceReportRequest.to)("owlDateTimeTrigger",n)("owlDateTime",n)("min",t.invoiceReportRequest.from)("ngClass",M.Nc(28,E,r.invalid&&(t.formSubmitted||r.touched))),M.Pb(2),M.Hc("pickerType","calendar"),M.Pb(2),M.Hc("ngIf",r.invalid&&(t.formSubmitted||r.touched)),M.Pb(5),M.Hc("ngModel",t.invoiceReportRequest.partyId),M.Pb(10),M.Hc("ngForOf",t.partyList),M.Pb(6),M.Hc("ngModel",t.invoiceReportRequest.qualityEntryId),M.Pb(10),M.Hc("ngForOf",t.qualityList),M.Pb(4),M.Hc("ngModel",t.invoiceReportRequest.userHeadId),M.Pb(2),M.Hc("ngForOf",t.masterList),M.Pb(4),M.Hc("ngModel",t.invoiceReportRequest.qualityNameId),M.Pb(6),M.Hc("ngForOf",t.qualityNameList)}},directives:[S.u,S.x,S.t,w.x,w.m,w.n,L.a,w.l,w.o,r.m,w.a,N.c,w.t,N.e,r.l,N.b,r.n,L.c],styles:[""]}),H),canActivate:[s.a],canLoad:[s.a],data:{PermissionName:["view","view group","view all"]}}],Q=(($=function t(){e(this,t)}).\u0275mod=M.bc({type:$}),$.\u0275inj=M.ac({factory:function(e){return new(e||$)},imports:[[a.g.forChild(A)],a.g]}),$),U=((O=function t(){e(this,t)}).\u0275mod=M.bc({type:O}),O.\u0275inj=M.ac({factory:function(e){return new(e||O)},imports:[[r.c,n.a,Q]]}),O)}}])}();