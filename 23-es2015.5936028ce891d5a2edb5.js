(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{ENVk:function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));var a=i("4/8P"),r=i("fXoL"),s=i("tk/3");let n=(()=>{class t{constructor(t,e){this.httpClient=t,this.commonService=e}getAllQualityByParty(t){return this.httpClient.get(this.commonService.envUrl()+"api/Quality/ByParty/"+t)}getAllUserHeads(){return this.httpClient.get(this.commonService.envUrl()+"api/userHead")}getPartyQualityByMaster(t){return this.httpClient.get(this.commonService.envUrl()+"api/QualityAndParty/ByMaster/"+t)}getBatchByMasterId(t){return this.httpClient.get(this.commonService.envUrl()+"api/batch/ByMaster/"+t)}getBatchDataBybatchNo(t,e){return this.httpClient.get(this.commonService.envUrl()+"api/batch/"+e+"/"+t)}addFinishedMeter(t){return this.httpClient.put(this.commonService.envUrl()+"api/batch/finishMtr",t)}getBatchesByPartyQuality(t,e){return this.httpClient.get(this.commonService.envUrl()+"api/stockBatch/batch/ByQualityAndPartyWithProductionPlan/"+t+"/"+e)}getAllBatchForFinishMeter(){return this.httpClient.get(this.commonService.envUrl()+"api/stockBatch/getAllBatchForFinishMtr")}getAllBatchForFinishMeterPaginated(t){return this.httpClient.post(this.commonService.envUrl()+"api/stockBatch/getAllBatchForFinishMtr/allPaginated",t)}removeBatch(t){return this.httpClient.delete(this.commonService.envUrl()+"api/batch/removeBy?productionId="+t)}}return t.\u0275fac=function(e){return new(e||t)(r.rc(s.b),r.rc(a.a))},t.\u0275prov=r.Zb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},xcYi:function(t,e,i){"use strict";i.r(e),i.d(e,"FinishedMeterModule",(function(){return W}));var a=i("ofXK"),r=i("tyNb"),s=i("Fp+y"),n=i("1G5W"),c=i("XNiG"),d=i("O1SP");class h{constructor(){this.batchId=null}}class l{constructor(){this.isProductionPlanned=!1,this.isExtra=!1,this.mergeBatchId="",this.isBillGenrated=!1,this.seqNo=0,this.id=0,this.mtr=null,this.wt=null,this.batchId="",this.controlId=0,this.isProductionPlanned=!1,this.isExtra=!1,this.sequenceId=0,this.finishMtr="0",this.isBillGenrated=!1}}var o=i("4/8P"),u=i("ENVk"),m=i("8k+d"),f=i("RNo3"),b=i("kF6S"),p=i("dfbw"),g=i("3jao"),y=i("qZsz"),M=i("fXoL"),I=i("5eHb"),v=i("1kSV"),q=i("aceb"),F=i("3Pt+"),j=i("ZOsW"),D=i("lDzL");function S(t,e){if(1&t&&(M.jc(0,"ng-option",30),M.jc(1,"div",4),M.jc(2,"div",12),M.jc(3,"div",13),M.jd(4),M.ic(),M.ic(),M.jc(5,"div",12),M.jc(6,"div",14),M.jd(7),M.ic(),M.ic(),M.ic(),M.ic()),2&t){const t=e.$implicit;M.Hc("value",t.id),M.Pb(4),M.ld(" ",t.partyName,""),M.Pb(3),M.ld(" ",t.partyCode,"")}}function B(t,e){if(1&t&&(M.jc(0,"ng-option",30),M.jd(1),M.ic()),2&t){const t=e.$implicit;M.Hc("value",t.id?t.id:t.qualityEntryId),M.Pb(1),M.ld(" ",t.qualityId," ")}}function C(t,e){if(1&t&&(M.jc(0,"ng-option",30),M.jd(1),M.ic()),2&t){const t=e.$implicit;M.Hc("value",t.id),M.Pb(1),M.ld(" ",t.userName," ")}}const x=function(t,e){return{"active-button":t,"inactive-button":e}};function A(t,e){if(1&t){const t=M.kc();M.jc(0,"button",31),M.uc("click",(function(e){return M.Xc(t),M.yc().batchSelected(e)})),M.jd(1),M.jc(2,"nb-icon",32),M.uc("click",(function(i){M.Xc(t);const a=e.$implicit;return M.yc().remove(a),i.stopPropagation()})),M.ic(),M.ic()}if(2&t){const t=e.$implicit,i=M.yc();M.Hc("ngClass",M.Oc(4,x,t.batchId==i.finishedMeterForm.batchId,t.batchId!=i.finishedMeterForm.batchId))("disabled",!t.productionPlanned)("value",t.batchId),M.Pb(1),M.ld(" ",t.batchId," ")}}const w=function(){return{type:"zoom"}},P=function(t){return{animation:t}};function k(t,e){if(1&t){const t=M.kc();M.jc(0,"nb-icon",50),M.uc("click",(function(i){M.Xc(t);const a=e.rowIndex;return M.yc(2).removeMeter(i,a)})),M.ic()}2&t&&M.Hc("options",M.Nc(2,P,M.Mc(1,w)))}function E(t,e){1&t&&M.ec(0,"ngx-datatable-column",51),2&t&&M.Hc("sortable",!1)("width",200)}function L(t,e){1&t&&(M.jc(0,"div",55),M.jc(1,"span"),M.jd(2,"Required"),M.ic(),M.ic())}const H=function(t){return{"is-invalid":t}};function N(t,e){if(1&t){const t=M.kc();M.jc(0,"input",52,53),M.uc("ngModelChange",(function(i){return M.Xc(t),e.row.mtr=i}))("keypress",(function(e){return M.Xc(t),M.yc(2).numberOnly(e)}))("keyup",(function(i){M.Xc(t);const a=e.rowIndex;return M.yc(2).onKeyUpMeter(i,a,2,"Meter")})),M.ic(),M.hd(2,L,3,0,"div",54)}if(2&t){const t=e.row,i=e.rowIndex,a=M.Uc(1),r=M.yc(2);M.Jc("name","tableMeter",i,""),M.Hc("min",1)("ngModel",t.mtr)("id","batchData"+i+"-2")("ngClass",M.Nc(6,H,r.formSubmitted&&a.invalid)),M.Pb(2),M.Hc("ngIf",r.formSubmitted&&a.invalid)}}function O(t,e){1&t&&(M.jc(0,"div",55),M.jc(1,"span"),M.jd(2,"Required"),M.ic(),M.ic())}function U(t,e){if(1&t){const t=M.kc();M.jc(0,"input",56,57),M.uc("ngModelChange",(function(i){return M.Xc(t),e.row.finishMtr=i}))("keyup",(function(i){M.Xc(t);const a=e.rowIndex;return M.yc(2).onKeyUp(i,a,3,"fMeter")})),M.ic(),M.hd(2,O,3,0,"div",54)}if(2&t){const t=e.row,i=e.rowIndex,a=M.Uc(1),r=M.yc(2);M.Jc("name","tableFinishMeter",i,""),M.Hc("disabled",r.finishedMeterForm.batchData[i].isBillGenrated)("ngModel",t.finishMtr)("id","batchData"+i+"-3")("ngClass",M.Nc(6,H,r.formSubmitted&&a.invalid)),M.Pb(2),M.Hc("ngIf",r.formSubmitted&&a.invalid)}}function Q(t,e){1&t&&(M.jc(0,"div",55),M.jc(1,"span"),M.jd(2,"Required"),M.ic(),M.ic())}function G(t,e){if(1&t){const t=M.kc();M.jc(0,"input",58,59),M.uc("ngModelChange",(function(i){return M.Xc(t),e.row.sequenceId=i}))("keyup",(function(i){M.Xc(t);const a=e.rowIndex;return M.yc(2).onKeyUp(i,a,4,"sequence")})),M.ic(),M.hd(2,Q,3,0,"div",54)}if(2&t){const t=e.row,i=e.rowIndex,a=M.Uc(1),r=M.yc(2);M.Jc("name","tableSequence",i,""),M.Hc("disabled",r.finishedMeterForm.batchData[i].isBillGenrated)("ngModel",t.sequenceId)("id","batchData"+i+"-4")("ngClass",M.Nc(6,H,r.formSubmitted&&a.invalid)),M.Pb(2),M.Hc("ngIf",r.formSubmitted&&a.invalid)}}function z(t,e){if(1&t&&(M.jc(0,"div",4),M.jc(1,"nb-card-header",33),M.jc(2,"div",34),M.jc(3,"div",35),M.jc(4,"span"),M.jd(5),M.zc(6,"number"),M.ic(),M.ic(),M.jc(7,"div",36),M.jc(8,"span"),M.jd(9),M.zc(10,"number"),M.ic(),M.ic(),M.jc(11,"div",36),M.jc(12,"span"),M.jd(13),M.zc(14,"number"),M.ic(),M.ic(),M.jc(15,"div",37),M.jc(16,"span"),M.jd(17),M.zc(18,"number"),M.ic(),M.ic(),M.ic(),M.ic(),M.jc(19,"div",38),M.jc(20,"ngx-datatable",39,40),M.jc(22,"ngx-datatable-column",41),M.hd(23,k,1,4,"ng-template",42),M.ic(),M.hd(24,E,1,2,"ngx-datatable-column",43),M.ec(25,"ngx-datatable-column",44),M.ec(26,"ngx-datatable-column",45),M.ec(27,"ngx-datatable-column",46),M.jc(28,"ngx-datatable-column",47),M.hd(29,N,3,8,"ng-template",42),M.ic(),M.jc(30,"ngx-datatable-column",48),M.hd(31,U,3,8,"ng-template",42),M.ic(),M.jc(32,"ngx-datatable-column",49),M.hd(33,G,3,8,"ng-template",42),M.ic(),M.ic(),M.ic(),M.ic()),2&t){const t=M.yc();M.Pb(5),M.ld("Total Grs: ",t.finishedMeterForm.batchData?t.finishedMeterForm.batchData[t.finishedMeterForm.batchData.length-1].seqNo:M.Bc(6,20,0,"1.2-2"),""),M.Pb(4),M.ld("Total Weight: ",M.Bc(10,23,t.totalWeight,"1.2-2"),""),M.Pb(4),M.ld("Total Gr Meter: ",M.Bc(14,26,t.totalGrMeter,"1.2-2"),""),M.Pb(4),M.ld("Total Finish Meter: ",M.Bc(18,29,t.totalFinishMeter,"1.2-2"),""),M.Pb(3),M.Hc("rows",t.finishedMeterForm.batchData)("headerHeight",31)("scrollbarV",!0),M.Pb(4),M.Hc("ngIf",t.isMergeBatch),M.Pb(1),M.Hc("sortable",!1)("width",200),M.Pb(1),M.Hc("sortable",!1)("width",200),M.Pb(1),M.Hc("sortable",!1)("width",200),M.Pb(1),M.Hc("sortable",!1)("width",200),M.Pb(2),M.Hc("sortable",!1)("width",200),M.Pb(2),M.Hc("sortable",!1)("width",200)}}const X=[{path:"",component:(()=>{class t{constructor(t,e,i,a,r,s){this.commonService=t,this.partyService=e,this.qualityService=i,this.toastr=a,this.finishedMeterService=r,this.modalService=s,this.errorData=d,this.formSubmitted=!1,this.isAddButtonClicked=!1,this.isMergeBatch=!1,this.indexOfBatchData=1,this.sequenceArray=[],this.totalFinishMeter=0,this.totalGrMeter=0,this.totalWeight=0,this.selectedBatch="",this.searchBatchString="",this.batchListCopy=[],this.requestData=new p.a,this.currentPage=0,this.finishedMeterForm=new h,this.destroy$=new c.a}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}ngOnInit(){this.requestData.getBy="all",this.requestData.data=new g.a,this.requestData.data.isAnd=!0,this.getData(),this.getAllParty(),this.getAllQuality(),this.getAllMasters(),this.getAllBatchForFinishMtr()}resetAll(t){this.batchList=[],this.batchListCopy=[],this.getAllBatchForFinishMtr(),this.finishedMeterForm.batchId=null,t.reset()}pageChanged(t){this.requestData.data.pageIndex=t-1,this.getAllBatchForFinishMtr()}getData(){this.user=this.commonService.getUser(),this.userHead=this.commonService.getUserHeadId()}getAllParty(){this.partyService.getAllPartyWithNameOnly().pipe(Object(n.a)(this.destroy$)).subscribe(t=>{t.success&&(this.partyList=t.data)},t=>{})}getAllQuality(){this.qualityService.getAllQualityWithNameOnly().pipe(Object(n.a)(this.destroy$)).subscribe(t=>{t.success&&(this.qualityList=t.data)},t=>{})}getAllMasters(){this.finishedMeterService.getAllUserHeads().pipe(Object(n.a)(this.destroy$)).subscribe(t=>{t.success&&(this.masterList=t.data)},t=>{})}getAllBatchForFinishMtr(){this.batchList=[],this.batchListCopy=[],this.finishedMeterService.getAllBatchForFinishMeterPaginated(this.requestData).pipe(Object(n.a)(this.destroy$)).subscribe(t=>{if(t.success){const e=t.data;this.batchList=e.data,this.requestData.data.total=e.total,this.batchListCopy=e.data}},t=>{})}enableQuality(t){if(this.qualityList=null,this.finishedMeterForm.qualityId=null,null!=t){this.finishedMeterService.getAllQualityByParty(this.finishedMeterForm.partyId).pipe(Object(n.a)(this.destroy$)).subscribe(t=>{t.success?(this.qualityList=t.data.qualityDataList,this.qualityList.forEach(e=>{e.partyName=t.data.partyName,e.partyId=t.data.partyId})):this.toastr.error(t.msg)},t=>{this.toastr.error(d.Internal_Error)}),this.finishedMeterForm.masterId=null,this.requestData.data.parameters=this.requestData.data.parameters.filter(t=>"userHeadId"!=t.field[0]&&"qualityEntryId"!=t.field[0]);const t=this.requestData.data.parameters.findIndex(t=>t.field.find(t=>"partyId"==t));if(t>-1)this.requestData.data.parameters[t].field=["partyId"],this.requestData.data.parameters[t].operator="EQUALS",this.requestData.data.parameters[t].value=String(this.finishedMeterForm.partyId);else{let t=new y.a;t.field=["partyId"],t.value=String(this.finishedMeterForm.partyId),t.operator="EQUALS",this.requestData.data.parameters.push(t)}this.requestData.data.pageIndex=0,this.getAllBatchForFinishMtr()}else this.batchList=[],this.batchListCopy=[],this.getAllParty(),this.getAllQuality(),this.requestData.data.parameters=this.requestData.data.parameters.filter(t=>"userHeadId"!=t.field[0]&&"qualityEntryId"!=t.field[0]&&"partyId"!=t.field[0]),this.requestData.data.pageIndex=0,this.getAllBatchForFinishMtr()}filterBySearchBatches(){if(this.finishedMeterForm.batchId=null,this.searchBatchString){const t=this.requestData.data.parameters.findIndex(t=>t.field.find(t=>"batchId"==t));if(t>-1)this.requestData.data.parameters[t].field=["batchId"],this.requestData.data.parameters[t].operator="LIKE",this.requestData.data.parameters[t].value=this.searchBatchString;else{let t=new y.a;t.field=["batchId"],t.value=this.searchBatchString,t.operator="LIKE",this.requestData.data.parameters.push(t)}this.requestData.data.pageIndex=0,this.getAllBatchForFinishMtr()}else this.requestData.data.pageIndex=0,this.requestData.data.parameters=this.requestData.data.parameters.filter(t=>"batchId"!=t.field[0]),this.getAllBatchForFinishMtr()}batchSelected(t){if(t){let e;this.isMergeBatch=t.target.value.toString().indexOf("-")>-1,this.finishedMeterForm.batchId=t.target.value,this.batchList.forEach(t=>{this.finishedMeterForm.batchId==t.batchId&&(e=t.controlId,this.finishedMeterForm.masterId&&(this.finishedMeterForm.partyId=t.partyId,this.finishedMeterForm.qualityId=t.qualityEntryId))}),this.finishedMeterService.getBatchDataBybatchNo(this.finishedMeterForm.batchId,e).pipe(Object(n.a)(this.destroy$)).subscribe(t=>{t.success&&(this.finishedMeterForm.batchData=t.data,this.totalFinishMeter=0,this.finishedMeterForm.batchData.forEach(t=>{this.totalFinishMeter+=Number(t.finishMtr),t.mtr&&(t.sequenceId=t.id)}),this.CalculateTotalGrMtr(),this.setSequenceNo(!1),this.setArrayOfSequence(),this.setfinishedSequenceAccordingToIdReverse(),this.setSequenceNo(!1))},t=>{})}}qualitySelected(t){if(null!=t){let t,e;if(this.finishedMeterForm.batchId=null,this.batchList=null,this.batchListCopy=null,!this.finishedMeterForm.partyId){let t=this.qualityList.find(t=>t.id===this.finishedMeterForm.qualityId);this.finishedMeterForm.partyId=t.partyId}this.qualityList.forEach(i=>{let a=i.id?i.id:i.qualityEntryId;a==this.finishedMeterForm.qualityId&&(t=i.partyId,e=a)}),this.finishedMeterForm.masterId=null;const i=this.requestData.data.parameters.findIndex(t=>t.field.find(t=>"qualityEntryId"==t));if(i>-1)this.requestData.data.parameters[i].field=["qualityEntryId"],this.requestData.data.parameters[i].operator="EQUALS",this.requestData.data.parameters[i].value=String(this.finishedMeterForm.qualityId);else{let t=new y.a;t.field=["qualityEntryId"],t.value=String(this.finishedMeterForm.qualityId),t.operator="EQUALS",this.requestData.data.parameters.push(t)}this.requestData.data.pageIndex=0,this.getAllBatchForFinishMtr()}else{this.finishedMeterForm.batchId=null,this.batchList=[],this.batchListCopy=[],this.getAllQuality();const t=this.requestData.data.parameters.findIndex(t=>t.field.find(t=>"qualityEntryId"==t));t>-1&&this.requestData.data.parameters.splice(t,1),this.requestData.data.pageIndex=0,this.getAllBatchForFinishMtr()}}masterSelected(t){if(this.batchList=null,this.batchListCopy=null,this.finishedMeterForm.batchId=null,null!=t){this.qualityList.forEach(t=>{(t.id?t.id:t.qualityEntryId)==this.finishedMeterForm.qualityId&&(this.finishedMeterForm.partyId=t.partyId)}),this.finishedMeterForm.qualityId=null,this.finishedMeterForm.partyId=null,this.requestData.data.parameters=this.requestData.data.parameters.filter(t=>"partyId"!=t.field[0]&&"qualityEntryId"!=t.field[0]);const t=this.requestData.data.parameters.findIndex(t=>t.field.find(t=>"userHeadId"==t));if(t>-1)this.requestData.data.parameters[t].field=["userHeadId"],this.requestData.data.parameters[t].operator="EQUALS",this.requestData.data.parameters[t].value=String(this.finishedMeterForm.masterId);else{let t=new y.a;t.field=["userHeadId"],t.value=String(this.finishedMeterForm.masterId),t.operator="EQUALS",this.requestData.data.parameters.push(t)}this.requestData.data.pageIndex=0,this.getAllBatchForFinishMtr()}else this.getAllParty(),this.requestData.data.parameters=this.requestData.data.parameters.filter(t=>"partyId"!=t.field[0]&&"qualityEntryId"!=t.field[0]&&"userHeadId"!=t.field[0]),this.requestData.data.pageIndex=0,this.getAllBatchForFinishMtr()}numberOnly(t){var e=t.which?t.which:t.keyCode;return 46==e||!(e>31&&(e<48||e>57)||69==e)}CalculateTotalGrMtr(){this.totalGrMeter=0,this.totalWeight=0,this.finishedMeterForm.batchData.forEach(t=>{this.totalGrMeter+=Number(t.mtr?t.mtr:0),this.totalWeight+=Number(t.wt?t.wt:0)})}onKeyUpMeter(t,e,i,a){if(this.CalculateTotalGrMtr(),13==(t.keyCode?t.keyCode:t.which)&&2==i&&this.finishedMeterForm.batchData.length>e+1){this.index="batchData"+(e+1)+"-"+i;let t=setInterval(()=>{let e=document.getElementById(this.index);if(null!=e){e.focus(),e.select(),clearInterval(t);let i=document.getElementById(this.index);i&&i.scrollIntoView(!0)}else{let t=document.querySelector("datatable-scroller");t&&t.scrollBy(0,10)}},10)}}onKeyUp(t,e,i,a){if(this.totalFinishMeter=0,this.finishedMeterForm.batchData.forEach(t=>{let e=0,i=t.finishMtr.toString();if(i.indexOf("+")>-1){let t=i.split("+");for(let i of t)e+=Number(i)}this.totalFinishMeter+=Number(e||i)}),t&&e>-1&&i>-1&&a&&13==(t.keyCode?t.keyCode:t.which)&&(3==i||4==i)){this.index="batchData"+(e+1)+"-"+i;let t=setInterval(()=>{let e=document.getElementById(this.index);if(null!=e){e.focus(),e.select(),clearInterval(t);let i=document.getElementById(this.index);i&&i.scrollIntoView(!0)}else{let t=document.querySelector("datatable-scroller");t&&t.scrollBy(0,10)}},10)}}removeMeter(t,e){let i=this.finishedMeterForm.batchData;if(1==this.finishedMeterForm.batchData.length){let t=new l;t.batchId=this.finishedMeterForm.batchData[0].batchId,t.controlId=this.finishedMeterForm.batchData[0].controlId;let e=[Object.assign({},t)];this.finishedMeterForm.batchData=[...e]}else i.splice(e,1),this.finishedMeterForm.batchData=[...i];this.onKeyUp(),this.CalculateTotalGrMtr()}arrangeAllSequenceNo(){this.finishedMeterForm.batchData.forEach(t=>{t.sequenceId!=t.seqNo&&(t.sequenceId=t.seqNo)})}splitExtraMeters(){this.finishedMeterForm.batchData.forEach(t=>{if(t.finishMtr.toString().indexOf("+")>-1){let e=t.finishMtr.split("+");for(let i=0;i<e.length;i++)if(0==i)t.finishMtr=e[i];else{let a=new l;a.sequenceId=t.sequenceId,a.batchId=t.batchId,a.controlId=t.controlId,a.finishMtr=e[i],a.isExtra=!0,a.mtr=t.mtr,a.mergeBatchId=t.mergeBatchId;let r=[...this.finishedMeterForm.batchData];r.push(a),this.finishedMeterForm.batchData=[...r]}}})}addFinishedMeter(t){this.isAddButtonClicked=!0;let e=!1;if(this.finishedMeterForm.batchData.forEach(t=>{null==t.finishMtr&&(e=!0)}),0==e){let e=!1;if(this.finishedMeterForm.batchData.forEach(t=>{t.mtr&&!t.mtr||(!t.finishMtr||t.finishMtr<="0")&&t.sequenceId&&(e=!0)}),e)this.isAddButtonClicked=!1,this.toastr.error("Please fill sequence id and finish meter both.");else{let e=0;this.finishedMeterForm.batchData.forEach(t=>{0!=t.id||null!=t.mtr&&0!=t.mtr||!("0"==t.finishMtr||null==t.finishMtr||Number(t.finishMtr)<=0)||this.finishedMeterForm.batchData.splice(e,1),e++});let i=!0;this.setfinishedSequenceAccordingToId(),this.finishedMeterForm.batchData.forEach(t=>{this.finishedMeterForm.batchData.some(e=>e.id===t.sequenceId)||(i=!1)}),i?(this.splitExtraMeters(),this.finishedMeterService.addFinishedMeter(this.finishedMeterForm.batchData).pipe(Object(n.a)(this.destroy$)).subscribe(e=>{e.success?(this.toastr.success(e.msg),t.reset(),this.batchList=null,this.batchListCopy=null,this.isAddButtonClicked=!1,this.finishedMeterForm=new h,this.finishedMeterForm.batchData=null,this.totalFinishMeter=0,this.getAllBatchForFinishMtr()):(this.isAddButtonClicked=!1,this.toastr.error(e.msg),this.setSequenceNo(!1))},t=>{this.isAddButtonClicked=!1,this.toastr.error(d.Internal_Error),this.setSequenceNo(!1)})):(this.isAddButtonClicked=!1,this.toastr.error("Invalid sequence-id entered"),this.setfinishedSequenceAccordingToIdReverse())}}else this.isAddButtonClicked=!1,this.toastr.error("Enter all data")}setArrayOfSequence(){for(let t=0;t<this.indexOfBatchData-1;t++)this.finishedMeterForm.batchData[t].mtr&&(this.sequenceArray[t]=this.finishedMeterForm.batchData[t].id)}setfinishedSequenceAccordingToId(){this.finishedMeterForm.batchData.forEach(t=>{t.sequenceId=this.sequenceArray[t.sequenceId-1]})}setfinishedSequenceAccordingToIdReverse(){this.finishedMeterForm.batchData.forEach(t=>{t.sequenceId=this.sequenceArray.indexOf(t.sequenceId)+1})}setSequenceNo(t){this.indexOfBatchData=1,this.finishedMeterForm.batchData.forEach(e=>{e.seqNo=this.indexOfBatchData,this.indexOfBatchData++,t&&(e.sequenceId=e.id)})}remove(t){this.modalService.open(b.a).result.then(e=>{e&&this.finishedMeterService.removeBatch(t.productionId).pipe(Object(n.a)(this.destroy$)).subscribe(t=>{this.finishedMeterForm.batchId=null,this.toastr.success(d.Delete),this.getAllBatchForFinishMtr()},t=>{this.toastr.error(d.Serever_Error)})})}}return t.\u0275fac=function(e){return new(e||t)(M.dc(o.a),M.dc(m.a),M.dc(f.a),M.dc(I.b),M.dc(u.a),M.dc(v.e))},t.\u0275cmp=M.Xb({type:t,selectors:[["ngx-add-edit-finished-meter"]],decls:69,vars:17,consts:[[1,"nb-style"],[1,"nb-header"],[1,"nb-text"],["myForm","ngForm"],[1,"row"],[1,"col-md-6"],[1,"form-group","mb-1"],[1,"col-md-2","col-12","display-flex-start","label-0"],[1,"col-md-10","col-12"],["name","partyId","appendTo","body","placeholder","Select Party",3,"ngModel","ngModelChange","change"],["partyId1","ngModel"],["disabled","true"],[1,"col-md-6","col-6"],[1,"text-left","txt-ov-elips"],[1,"text-right","txt-ov-elips"],[3,"value",4,"ngFor","ngForOf"],[1,"form-group"],["name","qualityId","appendTo","body","placeholder","Select Quality",3,"ngModel","ngModelChange","change"],["qualityId1","ngModel"],["name","masterId","appendTo","body","required","","placeholder","Select Master",1,"required-error-dropdown",3,"ngModel","ngClass","ngModelChange","change"],["type","text","name","searchBatch","placeholder","Search By Batch-Id",1,"form-control",3,"ngModel","ngModelChange","keyup"],[1,"col-md-12"],[1,"batch-list-3line"],["type","button","nbButton","","size","small","class","p-badge-design",3,"ngClass","disabled","value","click",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-end",3,"pageSize","maxSize","collectionSize","page","pageChange"],["class","row",4,"ngIf"],[1,"col-md-12","mobile-btn-center","text-btn-right"],[1,"mobile-pad-top-15"],["type","button","type","button","routerLink","/pages/finishedMeter",1,"btn","btn-primary","btn-sm","btn-design-cancel",3,"click"],["type","button",1,"btn","btn-primary","btn-sm","btn-design-save","button-base","ripple",3,"disabled","click"],[3,"value"],["type","button","nbButton","","size","small",1,"p-badge-design",3,"ngClass","disabled","value","click"],["icon","close-circle-outline",1,"icon-pposition",3,"click"],[1,"nb-header","w-100"],[1,"row","nb-text"],[1,"col-md-2"],[1,"col-md-3"],[1,"col-md-4"],["id","fmtr-table",1,"col-md-12"],[1,"material","common-table","datatable-auto-height","fm-table-body-height",2,"height","200px",3,"rows","headerHeight","scrollbarV"],["table",""],["name","Action","sortable","false","prop","mtr"],["ngx-datatable-cell-template",""],["name","Batch ID","prop","batchId",3,"sortable","width",4,"ngIf"],["name","Gr Meter Sequence","prop","seqNo",3,"sortable","width"],["name","Pchallan Ref","prop","pchallanRef",3,"sortable","width"],["name","Weight","prop","wt",3,"sortable","width"],["name","Gr Meter","prop","mtr",3,"sortable","width"],["name","Finish Meter","prop","finishMtr",3,"sortable","width"],["name","Finish Meter Sequence","prop","sequenceId",3,"sortable","width"],["icon","trash","status","danger",3,"options","click"],["name","Batch ID","prop","batchId",3,"sortable","width"],["type","number","required","",1,"tableForm",3,"min","name","ngModel","id","ngClass","ngModelChange","keypress","keyup"],["tableMeter12","ngModel"],["class","input-required display-inlineblock",4,"ngIf"],[1,"input-required","display-inlineblock"],["type","text","required","",1,"tableForm",3,"disabled","name","ngModel","id","ngClass","ngModelChange","keyup"],["tableMeter1","ngModel"],["type","number","disabled","true","required","",1,"tableForm",3,"name","disabled","ngModel","id","ngClass","ngModelChange","keyup"],["tableWeight1","ngModel"]],template:function(t,e){if(1&t){const t=M.kc();M.jc(0,"nb-card",0),M.jc(1,"nb-card-header",1),M.jc(2,"div"),M.jc(3,"h2",2),M.jd(4,"Finished Meter"),M.ic(),M.ic(),M.ic(),M.jc(5,"nb-card-body"),M.jc(6,"div"),M.jc(7,"form",null,3),M.jc(9,"div",4),M.jc(10,"div",5),M.jc(11,"div",6),M.jc(12,"div",4),M.jc(13,"div",7),M.jc(14,"label"),M.jd(15,"Party"),M.ic(),M.ic(),M.jc(16,"div",8),M.jc(17,"ng-select",9,10),M.uc("ngModelChange",(function(t){return e.finishedMeterForm.partyId=t}))("change",(function(t){return e.enableQuality(t)})),M.jc(19,"ng-option",11),M.jc(20,"div",4),M.jc(21,"div",12),M.jc(22,"div",13),M.jd(23,"Party Name "),M.ic(),M.ic(),M.jc(24,"div",12),M.jc(25,"div",14),M.jd(26," Party Code"),M.ic(),M.ic(),M.ic(),M.ic(),M.hd(27,S,8,3,"ng-option",15),M.ic(),M.ic(),M.ic(),M.ic(),M.jc(28,"div",16),M.jc(29,"div",4),M.jc(30,"div",7),M.jc(31,"label"),M.jd(32,"Quality"),M.ic(),M.ic(),M.jc(33,"div",8),M.jc(34,"ng-select",17,18),M.uc("ngModelChange",(function(t){return e.finishedMeterForm.qualityId=t}))("change",(function(t){return e.qualitySelected(t)})),M.hd(36,B,2,2,"ng-option",15),M.ic(),M.ic(),M.ic(),M.ic(),M.ic(),M.jc(37,"div",5),M.jc(38,"div",6),M.jc(39,"div",4),M.jc(40,"div",7),M.jc(41,"label"),M.jd(42,"Master"),M.ic(),M.ic(),M.jc(43,"div",8),M.jc(44,"ng-select",19,10),M.uc("ngModelChange",(function(t){return e.finishedMeterForm.masterId=t}))("change",(function(t){return e.masterSelected(t)})),M.hd(46,C,2,2,"ng-option",15),M.ic(),M.ic(),M.ic(),M.ic(),M.jc(47,"div",16),M.jc(48,"div",4),M.jc(49,"div",7),M.jc(50,"label"),M.jd(51,"Batch Filter"),M.ic(),M.ic(),M.jc(52,"div",8),M.jc(53,"input",20),M.uc("ngModelChange",(function(t){return e.searchBatchString=t}))("keyup",(function(){return e.filterBySearchBatches()})),M.ic(),M.ic(),M.ic(),M.ic(),M.ic(),M.jc(54,"div",21),M.jc(55,"div",6),M.jc(56,"div",4),M.jc(57,"div",21),M.jc(58,"div",22),M.hd(59,A,3,7,"button",23),M.ic(),M.jc(60,"ngb-pagination",24),M.uc("pageChange",(function(t){return e.pageChanged(t)})),M.ic(),M.ic(),M.ic(),M.ic(),M.ic(),M.ic(),M.hd(61,z,34,32,"div",25),M.jc(62,"div",4),M.jc(63,"div",26),M.jc(64,"div",27),M.jc(65,"button",28),M.uc("click",(function(){M.Xc(t);const i=M.Uc(8);return e.resetAll(i)})),M.jd(66,"CANCEL"),M.ic(),M.jc(67,"button",29),M.uc("click",(function(){M.Xc(t);const i=M.Uc(8);return e.addFinishedMeter(i)})),M.jd(68,"SAVE"),M.ic(),M.ic(),M.ic(),M.ic(),M.ic(),M.ic(),M.ic(),M.ic()}if(2&t){const t=M.Uc(18);M.Pb(17),M.Hc("ngModel",e.finishedMeterForm.partyId),M.Pb(10),M.Hc("ngForOf",e.partyList),M.Pb(7),M.Hc("ngModel",e.finishedMeterForm.qualityId),M.Pb(2),M.Hc("ngForOf",e.qualityList),M.Pb(8),M.Hc("ngModel",e.finishedMeterForm.masterId)("ngClass",M.Nc(15,H,e.formSubmitted&&t.invalid)),M.Pb(2),M.Hc("ngForOf",e.masterList),M.Pb(7),M.Hc("ngModel",e.searchBatchString),M.Pb(6),M.Hc("ngForOf",e.batchList),M.Pb(1),M.Hc("pageSize",e.requestData.data.pageSize)("maxSize",5)("collectionSize",e.requestData.data.total)("page",e.requestData.data.pageIndex),M.Pb(1),M.Hc("ngIf",e.finishedMeterForm.batchId),M.Pb(6),M.Hc("disabled",e.isAddButtonClicked)}},directives:[q.u,q.x,q.t,F.x,F.m,F.n,j.a,F.l,F.o,j.c,a.m,F.t,a.l,F.a,v.g,a.n,r.d,q.q,q.I,D.e,D.b,D.a,F.q],pipes:[a.f],styles:[".active-button[_ngcontent-%COMP%]{background-color:#274fc4!important}.inactive-button[_ngcontent-%COMP%]{background-color:#5e5b5e!important}"]}),t})(),canActivate:[s.a],canLoad:[s.a],data:{PermissionName:["view","view group","view all"]}}];let T=(()=>{class t{}return t.\u0275mod=M.bc({type:t}),t.\u0275inj=M.ac({factory:function(e){return new(e||t)},imports:[[r.g.forChild(X)],r.g]}),t})();var $=i("yzeJ");let W=(()=>{class t{}return t.\u0275mod=M.bc({type:t}),t.\u0275inj=M.ac({factory:function(e){return new(e||t)},imports:[[a.c,$.a,F.s,q.B,D.g,T]]}),t})()}}]);