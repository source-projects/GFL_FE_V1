(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{z6fL:function(e,t,i){"use strict";i.r(t),i.d(t,"RegistrationModule",(function(){return pe}));var c=i("ofXK"),n=i("yzeJ"),o=i("vTDv"),d=i("tyNb"),r=i("1G5W"),a=i("XNiG"),s=i("tk/3"),l=i("hiuq"),h=i("+TCe"),p=i("O1SP");class m{}var g=i("4/8P"),u=i("Nd6e"),b=i("fXoL"),f=i("5eHb"),y=i("X9o6"),v=i("qC+V"),j=i("aceb"),w=i("ZOsW"),x=i("3Pt+"),I=i("K1R0"),U=i("Vwsh");function F(e,t){1&e&&(b.jc(0,"div"),b.jc(1,"h2",19),b.jd(2,"Add Employee"),b.ic(),b.ic())}function k(e,t){1&e&&(b.jc(0,"h2",19),b.jd(1,"Update Employee"),b.ic())}function P(e,t){1&e&&(b.jc(0,"div",44),b.jc(1,"span"),b.jd(2,"Profile is required"),b.ic(),b.ic())}function A(e,t){1&e&&(b.jc(0,"div",44),b.jc(1,"span"),b.jd(2,"Employee Name is required"),b.ic(),b.ic())}function C(e,t){1&e&&(b.jc(0,"div",44),b.jd(1," Enter 10 digit valid contact "),b.ic())}function S(e,t){if(1&e&&(b.hc(0,45),b.ec(1,"circle-progress",46),b.gc()),2&e){const e=b.yc(2);b.Pb(1),b.Hc("showInnerStroke",!1)("percent",e.processValue)("outerStrokeColor","#005ec2")("innerStrokeColor","#C7E596")("animation",!0)("animationDuration",300)("radius",10)("titleFontSize",6)("unitsFontSize",6)("outerStrokeWidth",2)("titleFontWeight",900)("unitsFontWeight",900)("showSubtitle",!1)}}function H(e,t){1&e&&(b.jc(0,"div",44),b.jc(1,"span"),b.jd(2,"Document is required"),b.ic(),b.ic())}function E(e,t){1&e&&(b.jc(0,"div",44),b.jc(1,"span"),b.jd(2,"Department is required."),b.ic(),b.ic())}function M(e,t){if(1&e){const e=b.kc();b.jc(0,"div",57),b.ec(1,"img",58),b.jc(2,"nb-icon",59),b.uc("click",(function(){b.Xc(e);const t=b.yc(4);return t.removeImage("docAdd",t.imageIndexFordocAdd)})),b.ic(),b.ic()}if(2&e){const e=t.$implicit;b.Pb(1),b.Hc("src",e,b.Zc)}}function D(e,t){if(1&e){const e=b.kc();b.hc(0),b.jc(1,"div",47),b.hd(2,M,3,1,"div",48),b.zc(3,"imagePreviewPipe"),b.jc(4,"div",49),b.jc(5,"div",50),b.jc(6,"nb-icon",51),b.uc("click",(function(){return b.Xc(e),b.yc(3).previous("docAdd")})),b.ic(),b.ic(),b.jc(7,"div",52),b.jc(8,"nb-icon",53),b.uc("click",(function(){return b.Xc(e),b.yc(3).next("docAdd")})),b.ic(),b.ic(),b.ic(),b.ic(),b.jc(9,"div"),b.jc(10,"div",54),b.jc(11,"div",55),b.jc(12,"span",56),b.jd(13),b.ic(),b.ic(),b.ic(),b.ic(),b.gc()}if(2&e){const e=b.yc(3);b.Pb(2),b.Hc("ngForOf",b.Bc(3,3,e.docAdd,e.imageIndexFordocAdd)),b.Pb(11),b.md(" ",e.imageIndexFordocAdd+1," / ",e.docAdd.length," ")}}function L(e,t){if(1&e&&(b.hc(0),b.hd(1,D,14,6,"ng-container",13),b.gc()),2&e){const e=b.yc(2);b.Pb(1),b.Hc("ngIf",e.imagePreviewFordocAdd&&e.docAdd.length)}}function q(e,t){if(1&e){const e=b.kc();b.jc(0,"div",57),b.ec(1,"img",58),b.jc(2,"nb-icon",59),b.uc("click",(function(){b.Xc(e);const t=b.yc(4);return t.removeImage("docUpdate",t.imageIndexFordocUpdate)})),b.ic(),b.ic()}if(2&e){const e=t.$implicit;b.Pb(1),b.Hc("src",e,b.Zc)}}function N(e,t){if(1&e){const e=b.kc();b.hc(0),b.jc(1,"div",47),b.hd(2,q,3,1,"div",48),b.zc(3,"imagePreviewPipe"),b.jc(4,"div",49),b.jc(5,"div",50),b.jc(6,"nb-icon",51),b.uc("click",(function(){return b.Xc(e),b.yc(3).previous("docUpdate")})),b.ic(),b.ic(),b.jc(7,"div",52),b.jc(8,"nb-icon",53),b.uc("click",(function(){return b.Xc(e),b.yc(3).next("docUpdate")})),b.ic(),b.ic(),b.ic(),b.ic(),b.jc(9,"div"),b.jc(10,"div",54),b.jc(11,"div",55),b.jc(12,"span",56),b.jd(13),b.ic(),b.ic(),b.ic(),b.ic(),b.gc()}if(2&e){const e=b.yc(3);b.Pb(2),b.Hc("ngForOf",b.Bc(3,3,e.docUpdate,e.imageIndexFordocUpdate)),b.Pb(11),b.md(" ",e.imageIndexFordocUpdate+1," / ",e.docUpdate.length," ")}}function O(e,t){if(1&e&&(b.hc(0),b.hd(1,N,14,6,"ng-container",13),b.gc()),2&e){const e=b.yc(2);b.Pb(1),b.Hc("ngIf",e.imagePreviewFordocUpdate&&e.docUpdate.length)}}const _=function(e){return{"background-image":e}},T=function(e){return{"is-invalid":e}};function R(e,t){if(1&e){const e=b.kc();b.jc(0,"div",4),b.jc(1,"div",20),b.jc(2,"div",21),b.jc(3,"div",22),b.jc(4,"input",23,24),b.uc("ngModelChange",(function(t){return b.Xc(e),b.yc().profile=t}))("change",(function(t){return b.Xc(e),b.yc().handleFileInput(t.target.files,"profile")})),b.ic(),b.hd(6,P,3,0,"div",25),b.ic(),b.jc(7,"label"),b.jd(8,"Profile"),b.ic(),b.ic(),b.ic(),b.jc(9,"div",20),b.jc(10,"div",26),b.jc(11,"label",27),b.jd(12,"Employee Name"),b.ic(),b.jc(13,"input",28,29),b.uc("ngModelChange",(function(t){return b.Xc(e),b.yc().registration.name=t})),b.ic(),b.hd(15,A,3,0,"div",25),b.ic(),b.ic(),b.jc(16,"div",20),b.jc(17,"div",26),b.jc(18,"label"),b.jd(19,"Phone No"),b.ic(),b.jc(20,"input",30,31),b.uc("ngModelChange",(function(t){return b.Xc(e),b.yc().registration.contact=t})),b.ic(),b.hd(22,C,2,0,"div",25),b.ic(),b.ic(),b.jc(23,"div",20),b.jc(24,"div",26),b.jc(25,"label"),b.jd(26,"Aadhar Card No"),b.ic(),b.jc(27,"input",32,33),b.uc("ngModelChange",(function(t){return b.Xc(e),b.yc().registration.aadhaar=t})),b.ic(),b.ic(),b.ic(),b.jc(29,"div",20),b.jc(30,"div",26),b.jc(31,"label",27),b.jd(32,"Document"),b.ic(),b.hd(33,S,2,13,"ng-container",34),b.jc(34,"input",35,36),b.uc("ngModelChange",(function(t){return b.Xc(e),b.yc().document=t}))("change",(function(t){return b.Xc(e),b.yc().handleFileInput(t.target.files,"document")})),b.ic(),b.hd(36,H,3,0,"div",25),b.ic(),b.ic(),b.jc(37,"div",20),b.jc(38,"div",26),b.jc(39,"label"),b.jd(40,"Department"),b.ic(),b.jc(41,"ng-select",37,38),b.uc("ngModelChange",(function(t){return b.Xc(e),b.yc().registration.departmentId=t})),b.ic(),b.hd(43,E,3,0,"div",25),b.ic(),b.ic(),b.jc(44,"div",20),b.jc(45,"div",26),b.jc(46,"label"),b.jd(47,"Remark2"),b.ic(),b.jc(48,"input",39,40),b.uc("ngModelChange",(function(t){return b.Xc(e),b.yc().registration.remark2=t})),b.ic(),b.ic(),b.ic(),b.jc(50,"div",20),b.jc(51,"div",26),b.jc(52,"label"),b.jd(53,"Remark3"),b.ic(),b.jc(54,"input",41,42),b.uc("ngModelChange",(function(t){return b.Xc(e),b.yc().registration.remark3=t})),b.ic(),b.ic(),b.ic(),b.jc(56,"div",43),b.hd(57,L,2,1,"ng-container",13),b.hd(58,O,2,1,"ng-container",13),b.ic(),b.ic()}if(2&e){const e=b.Uc(5),t=b.Uc(14),i=b.Uc(21),c=b.Uc(35),n=b.Uc(42),o=b.yc();b.Pb(4),b.Hc("ngStyle",b.Nc(24,_,"url("+o.imageUrl+")"))("ngModel",o.profile)("crossOrigin","anonymous")("ngClass",b.Nc(26,T,e.invalid&&(o.formSubmitted||e.touched))),b.Pb(2),b.Hc("ngIf",e.invalid&&(o.formSubmitted||e.touched)),b.Pb(7),b.Hc("ngModel",o.registration.name)("ngClass",b.Nc(28,T,t.invalid&&(o.formSubmitted||t.touched))),b.Pb(2),b.Hc("ngIf",t.invalid&&(o.formSubmitted||t.touched)),b.Pb(5),b.Hc("ngModel",o.registration.contact)("ngClass",b.Nc(30,T,i.invalid&&(o.formSubmitted||i.touched))),b.Pb(2),b.Hc("ngIf",i.invalid&&(o.formSubmitted||i.touched)),b.Pb(5),b.Hc("ngModel",o.registration.aadhaar),b.Pb(6),b.Hc("ngIf",o.uploadFlag),b.Pb(1),b.Hc("ngModel",o.document)("ngClass",b.Nc(32,T,c.invalid&&(o.formSubmitted||c.touched))),b.Pb(2),b.Hc("ngIf",c.invalid&&(o.formSubmitted||c.touched)),b.Pb(5),b.Hc("ngModel",o.registration.departmentId)("items",o.departmentList)("ngClass",b.Nc(34,T,n.invalid&&(o.formSubmitted||n.touched))),b.Pb(2),b.Hc("ngIf",n.invalid&&(o.formSubmitted||n.touched)),b.Pb(5),b.Hc("ngModel",o.registration.remark2),b.Pb(6),b.Hc("ngModel",o.registration.remark3),b.Pb(3),b.Hc("ngIf",!o.currentEmpId),b.Pb(1),b.Hc("ngIf",o.currentEmpId)}}function X(e,t){if(1&e){const e=b.kc();b.jc(0,"div"),b.ec(1,"ngx-qrcode",60),b.jc(2,"div",4),b.jc(3,"div",61),b.jc(4,"div",62),b.jc(5,"span",63),b.jd(6),b.ic(),b.jc(7,"div",64),b.jc(8,"div",65),b.jc(9,"a",66),b.uc("click",(function(){return b.Xc(e),b.yc().downloadImage()})),b.ec(10,"nb-icon",67),b.ic(),b.ic(),b.jc(11,"div",68),b.jc(12,"nb-icon",69),b.uc("click",(function(){return b.Xc(e),b.yc().shareImage()})),b.ic(),b.ic(),b.ic(),b.ic(),b.ic(),b.ic(),b.ic()}if(2&e){const e=b.yc();b.Pb(1),b.Hc("elementType",e.elementType)("errorCorrectionLevel",e.correctionLevel)("value",e.value),b.Pb(5),b.kd(e.emp_id),b.Pb(3),b.Hc("href",e.href,b.Zc)}}function z(e,t){if(1&e){const e=b.kc();b.jc(0,"button",70),b.uc("click",(function(){b.Xc(e);const t=b.yc(),i=b.Uc(16);return t.reset(i)})),b.jd(1,"CANCEL"),b.ic()}}const B=function(){return["/pages/registration/view"]};function W(e,t){1&e&&(b.jc(0,"button",71),b.jd(1,"CANCEL"),b.ic()),2&e&&b.Hc("routerLink",b.Mc(1,B))}function $(e,t){if(1&e){const e=b.kc();b.jc(0,"button",72),b.uc("click",(function(){b.Xc(e);const t=b.yc(),i=b.Uc(16);return t.updateEmployee(i)})),b.jd(1,"UPDATE"),b.ic()}if(2&e){const e=b.yc();b.Hc("disabled",e.disableButton)}}function V(e,t){if(1&e){const e=b.kc();b.jc(0,"button",72),b.uc("click",(function(){b.Xc(e);const t=b.yc(),i=b.Uc(16);return t.addEmployee(i)})),b.jd(1,"SAVE"),b.ic()}if(2&e){const e=b.yc();b.Hc("disabled",e.disableButton)}}let Q=(()=>{class e{constructor(e,t,i,c,n,o,d,r){this.commonService=e,this._route=t,this.registrationService=i,this.toastr=c,this.route=n,this.imageCompress=o,this.httpClient=d,this.userService=r,this.docAdd=[],this.docUpdate=[],this.imageIndexFordocAdd=0,this.imageIndexFordocUpdate=0,this.imagePreviewFordocAdd=!1,this.imagePreviewFordocUpdate=!1,this.imgLoading=!1,this.processValue=0,this.uploadFlag=!1,this.progress=0,this.registration=new m,this.employeeDocumentArray=[],this.loading=!1,this.fileToUpload=null,this.formSubmitted=!1,this.disableButton=!1,this.disableForm=!1,this.qrFlag=!1,this.elementType=l.b.URL,this.correctionLevel=l.c.HIGH,this.imageUrl="../../../../assets/scan/user-new.png",this.currentEmpData=[],this.docList=[],this.imageFile=null,this.destroy$=new a.a}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}ngOnInit(){let e=window.location.href.split("registration");this.url=e[0],this.uploadFlag=!1,this.getUserId(),this.getAllDepartment(),this.currentEmpId&&this.getCurrentEmpData(),this.imagePreviewFordocAdd=!1}getAllDepartment(){this.userService.getAllDepartmentData().pipe(Object(r.a)(this.destroy$)).subscribe(e=>{e.success&&(this.departmentList=e.data)},e=>{})}getUserId(){this.user=this.commonService.getUser(),this.userHead=this.commonService.getUserHeadId(),this.currentEmpId=this._route.snapshot.paramMap.get("id")}getCurrentEmpData(){this.docUpdate=[],this.registrationService.getEmployeeById(this.currentEmpId).pipe(Object(r.a)(this.destroy$)).subscribe(e=>{e.success&&(this.registration=e.data,this.docList=this.registration.employeeDocumentList,this.registration.employeeDocumentList.forEach(e=>{"profile"==e.type?this.imageUrl=e.url:this.docUpdate.push(e.url)}),this.imagePreviewFordocUpdate=!0)})}compressFile(e){"profile"==e?this.imageCompress.compressFile(this.imageUrl,-1,50,50).then(e=>{this.imgResultAfterCompress=e,this.dataURItoBlob(this.imgResultAfterCompress.split(",")[1]),this.imageFile=new File([e],this.fileToUpload.name,{type:"image/jpeg"}),this.fileUpload()}):this.imageCompress.compressFile(this.docUrl,-1,50,50).then(e=>{this.imgResultAfterCompress=e,this.dataURItoBlob(this.imgResultAfterCompress.split(",")[1]),this.imageFile=new File([e],this.fileToUpload.name,{type:"image/jpeg"}),this.fileUpload()})}dataURItoBlob(e){const t=window.atob(e),i=new ArrayBuffer(t.length),c=new Uint8Array(i);for(let n=0;n<t.length;n++)c[n]=t.charCodeAt(n);return new Blob([c],{type:"image/jpeg"})}fileUpload(){if(this.docAdd=[],this.docUpdate=[],this.imageFile){this.fileToUpload=this.imageFile;const e=new FormData;e.append("file",this.fileToUpload),e.append("upload_preset","gfl_upload"),e.append("cloud_name","dpemsdha5"),this.uploadFlag&&(this.processValue=0,this.httpClient.post("https://api.cloudinary.com/v1_1/dpemsdha5/image/upload",e,{reportProgress:!0,observe:"events"}).pipe(Object(r.a)(this.destroy$)).subscribe(e=>{e&&e.type===s.e.UploadProgress&&(this.processValue=Math.round(100*e.loaded/e.total))},e=>{})),this.registrationService.uploadImage(e).pipe(Object(r.a)(this.destroy$)).subscribe(e=>{if(e){let t={id:null,name:this.fileToUpload.name,type:this.docType,url:e.secure_url,controlId:null};this.employeeDocumentArray.push(t),this.docList.push(t),this.docList.forEach(e=>{this.currentEmpId?"document"==e.type&&(-1==this.docUpdate.indexOf(e.url)&&this.docUpdate.push(e.url),this.imageIndexFordocUpdate=0):("document"==e.type&&(-1==this.docAdd.indexOf(e.url)&&this.docAdd.push(e.url),this.imageIndexFordocAdd=0),this.imagePreviewFordocAdd=!0)})}})}}handleFileInput(e,t){if(this.uploadFlag=!1,"document"==t&&(this.uploadFlag=!0),this.fileToUpload=e.item(0),this.uploadFlag&&(this.document=this.fileToUpload.name),this.docType=t,this.document=this.fileToUpload.name,"profile"==t){const e=new FileReader;e.onload=()=>{this.imageUrl=e.result,this.compressFile(t)},e.readAsDataURL(this.fileToUpload)}else for(let i=0;i<e.length;i++){this.fileToUpload=e.item(i);const c=new FileReader;c.onload=()=>{this.docUrl=c.result,this.compressFile(t)},c.readAsDataURL(this.fileToUpload)}}reset(e){e.reset(),this.formSubmitted=!1,this.imageUrl="../../../../assets/scan/user-new.png"}updateEmployee(e){this.formSubmitted=!0,this.disableButton=!0,this.docUpdate.length&&this.registration.name?(this.registration.id=this.currentEmpId,this.docList.length>0&&this.docList.forEach((e,t)=>{("profile"==e.type||"document"==e.type)&&(this.docList[t]=e)}),this.registration.employeeDocumentList=this.docList,this.registrationService.updateEmployee(this.registration).pipe(Object(r.a)(this.destroy$)).subscribe(e=>{e.success?(this.formSubmitted=!1,this.toastr.success(e.msg),this.route.navigate(["/pages/registration"])):this.toastr.error(e.msg),this.disableButton=!1},e=>{this.toastr.error(p.Serever_Error)})):this.disableButton=!1}downloadImage(){this.href=document.getElementsByTagName("img")[0].src}shareImage(){this.href=document.getElementsByTagName("img")[0].src;const e=new FormData;e.append("upload_preset","gfl_upload"),e.append("cloud_name","dpemsdha5"),e.append("file",this.href),this.registrationService.uploadImage(e).pipe(Object(r.a)(this.destroy$)).subscribe(e=>{if(e){this.employeeDocumentArray.push({id:null,name:this.emp_id,type:"qr",url:e.secure_url,controlId:null});let t=e.secure_url;window.innerWidth>=1024?window.location.href="https://web.whatsapp.com/send?phone=+91"+this.registration.contact+"&text="+t:window.location.href="whatsapp://send?phone=+91"+this.registration.contact+"&text="+t}})}addEmployee(e){this.uploadFlag=!1,this.formSubmitted=!0,e.valid&&(this.loading=!0,this.disableButton=!0,this.registration.id=0,this.registration.employeeDocumentList=this.employeeDocumentArray,this.registrationService.addEmployee(this.registration).pipe(Object(r.a)(this.destroy$)).subscribe(e=>{e.success?(this.emp_id=e.data,this.formSubmitted=!1,this.disableButton=!1,this.toastr.success(e.msg),this.docAdd=[],this.generateQR(this.emp_id),this.processValue=0,this.loading=!1,this.qrFlag=!0):this.toastr.error(e.msg),this.disableButton=!1},e=>{this.toastr.error(p.Serever_Error),this.disableButton=!1}))}generateQR(e){this.value=this.url+"attendance/"+e,this.addQR(this.value),this.fileUpload()}addQR(e){let t={url:e,type:"qr",controlId:this.emp_id};this.employeeDocumentArray.push({id:null,name:this.emp_id,type:"qr",url:e,controlId:null}),this.registrationService.addQr(t).pipe(Object(r.a)(this.destroy$)).subscribe(e=>{e.success?(this.formSubmitted=!1,this.disableButton=!1,this.toastr.success(e.msg)):this.toastr.error(e.msg),this.disableButton=!1},e=>{this.toastr.error(p.Serever_Error),this.disableButton=!1})}removeImage(e,t){if("docAdd"==e){let e=this.docAdd.splice(t,1);this.docList.forEach((t,i)=>{t.url==e&&this.docList.splice(i,1)}),this.docAdd.length==t&&this.imageIndexFordocAdd--,this.docAdd=[...this.docAdd]}else if("docUpdate"==e){let e=this.docUpdate.splice(t,1);this.docList.forEach((t,i)=>{t.url==e&&this.docList.splice(i,1)}),this.docUpdate.length==t&&this.imageIndexFordocUpdate--,this.docUpdate=[...this.docUpdate]}}previous(e){"docAdd"==e?this.imageIndexFordocAdd?this.imageIndexFordocAdd--:this.imageIndexFordocAdd=this.docAdd.length-1:"docUpdate"==e&&(this.imageIndexFordocUpdate?this.imageIndexFordocUpdate--:this.imageIndexFordocUpdate=this.docUpdate.length-1)}next(e){"docAdd"==e?this.imageIndexFordocAdd<this.docAdd.length-1?this.imageIndexFordocAdd++:this.imageIndexFordocAdd=0:"docUpdate"==e&&(this.imageIndexFordocUpdate<this.docUpdate.length-1?this.imageIndexFordocUpdate++:this.imageIndexFordocUpdate=0)}tableChange(e){"view table"===e&&this.route.navigate(["/pages/registration/view"])}}return e.\u0275fac=function(t){return new(t||e)(b.dc(g.a),b.dc(d.a),b.dc(u.a),b.dc(f.b),b.dc(d.c),b.dc(y.a),b.dc(s.b),b.dc(h.a))},e.\u0275cmp=b.Xb({type:e,selectors:[["ngx-add-edit-registration"]],decls:26,vars:9,consts:[[3,"show"],["id","target"],[1,"nb-style"],[1,"nb-header"],[1,"row"],[1,"col-md-5","col-6","display-flex-start","max-width-device"],["placeholder","Select",1,"btn","btn-md",3,"change"],["value","view table"],[1,"col-md-7","col-5"],[4,"ngIf","ngIfElse"],["updateS",""],["empForm","ngForm"],["class","row",4,"ngIf"],[4,"ngIf"],[1,"col-md-12","mobile-btn-center","text-btn-right"],[1,"document-padding-bt-tp"],["class","btn btn-primary btn-sm btn-design-cancel","type","button",3,"click",4,"ngIf"],["class","btn btn-primary btn-sm btn-design-cancel","type","button",3,"routerLink",4,"ngIf"],["type","button","class","btn btn-primary btn-sm btn-design-save button-base ripple",3,"disabled","click",4,"ngIf"],[1,"nb-text","txt-ov-elips","mob-font-13"],[1,"col-md-3","col-12"],[1,"form-group","text-center"],[1,"display-flex-center"],["type","file","name","profile","id","profile","placeholder","Upload profile","accept","image/x-png,image/gif,image/jpeg",1,"form-control","size-small","registration-document","filepicker",2,"position","relative","overflow","hidden","background-color","#ffff","z-index","0",3,"ngStyle","ngModel","crossOrigin","ngClass","ngModelChange","change"],["profile1","ngModel"],["class","input-required",4,"ngIf"],[1,"form-group"],[1,"required"],["type","text","name","name","fieldsize","small","nbinput","","placeholder","Employee Name","required","",1,"form-control","size-small",3,"ngModel","ngClass","ngModelChange"],["name1","ngModel"],["type","number","fieldsize","small","nbinput","","name","contact","maxlength","10","minlength","10","ng-pattern-restrict","[A-Za-z]","pattern","[6-9]{1}[0-9]{9}","placeholder","Contact No",1,"form-control","size-small",3,"ngModel","ngClass","ngModelChange"],["contact1","ngModel"],["type","text","fieldsize","small","nbinput","","name","aadhar","placeholder","Aadhar Card No",1,"form-control","size-small",3,"ngModel","ngModelChange"],["aadhar1","ngModel"],["class","mar-left-for-prog",4,"ngIf"],["type","file","multiple","","name","document","id","file","placeholder","Upload document","required","","accept","image/x-png,image/gif,image/jpeg",1,"form-control","size-small","registration-document",2,"color","transparent",3,"ngModel","ngClass","ngModelChange","change"],["document1","ngModel"],["name","departmenty","appendTo","body","bindLabel","name","bindValue","id","placeholder","Select Department","required","",1,"required-error-dropdown","dropdown-name",3,"ngModel","items","ngClass","ngModelChange"],["department1","ngModel"],["type","text","fieldsize","small","nbinput","","name","remark2","placeholder","Remark",1,"form-control","size-small",3,"ngModel","ngModelChange"],["remark2","ngModel"],["type","text","fieldsize","small","nbinput","","name","remark3","placeholder","Remark",1,"form-control","size-small",3,"ngModel","ngModelChange"],["remark3","ngModel"],[1,"col-md-6","col-12"],[1,"input-required"],[1,"mar-left-for-prog"],[3,"showInnerStroke","percent","outerStrokeColor","innerStrokeColor","animation","animationDuration","radius","titleFontSize","unitsFontSize","outerStrokeWidth","titleFontWeight","unitsFontWeight","showSubtitle"],[1,"max-popup-purchase","mobile-width-100"],["class","text-center mobile-100 display-flex-purchase-view",4,"ngFor","ngForOf"],[1,"next-previous-btn"],[1,"back-btn"],["icon","arrow-back-outline",3,"click"],[1,"next-btn"],["icon","arrow-forward-outline",3,"click"],[1,"row","text-center","mt-3"],[1,"col-md-12"],[1,"bottom-count-img"],[1,"text-center","mobile-100","display-flex-purchase-view"],[3,"src"],["icon","close-circle-outline",1,"purchase-close-img",3,"click"],["cssClass","bshadow",1,"text-center",3,"elementType","errorCorrectionLevel","value"],[1,"col-md-12","col-12"],[1,"text-center"],[1,"scan-id-style"],[1,"qr-share-opt","display-qr-evenly"],[1,"download-qr"],["download","",3,"href","click"],["icon","cloud-download-outline",1,"icon-qr-wd-height"],[1,"share-qr"],["icon","share-outline",1,"icon-qr-wd-height",3,"click"],["type","button",1,"btn","btn-primary","btn-sm","btn-design-cancel",3,"click"],["type","button",1,"btn","btn-primary","btn-sm","btn-design-cancel",3,"routerLink"],["type","button",1,"btn","btn-primary","btn-sm","btn-design-save","button-base","ripple",3,"disabled","click"]],template:function(e,t){if(1&e&&(b.ec(0,"ngx-loading",0),b.ec(1,"div",1),b.jc(2,"nb-card",2),b.jc(3,"nb-card-header",3),b.jc(4,"div",4),b.jc(5,"div",5),b.jc(6,"ng-select",6),b.uc("change",(function(e){return t.tableChange(e)})),b.jc(7,"ng-option",7),b.jd(8,"View Table"),b.ic(),b.ic(),b.ic(),b.jc(9,"div",8),b.hd(10,F,3,0,"div",9),b.hd(11,k,2,0,"ng-template",null,10,b.id),b.ic(),b.ic(),b.ic(),b.jc(13,"nb-card-body"),b.jc(14,"div"),b.jc(15,"form",null,11),b.hd(17,R,59,36,"div",12),b.hd(18,X,13,5,"div",13),b.jc(19,"div",4),b.jc(20,"div",14),b.jc(21,"div",15),b.hd(22,z,2,0,"button",16),b.hd(23,W,2,2,"button",17),b.hd(24,$,2,1,"button",18),b.hd(25,V,2,1,"button",18),b.ic(),b.ic(),b.ic(),b.ic(),b.ic(),b.ic(),b.ic()),2&e){const e=b.Uc(12);b.Hc("show",t.loading),b.Pb(10),b.Hc("ngIf",null==t.currentEmpId)("ngIfElse",e),b.Pb(7),b.Hc("ngIf",!t.qrFlag),b.Pb(1),b.Hc("ngIf",t.qrFlag),b.Pb(4),b.Hc("ngIf",!t.currentEmpId&&!t.qrFlag),b.Pb(1),b.Hc("ngIf",t.currentEmpId&&!t.qrFlag),b.Pb(1),b.Hc("ngIf",t.currentEmpId),b.Pb(1),b.Hc("ngIf",!t.currentEmpId&&!t.qrFlag)}},directives:[v.a,j.u,j.x,w.a,w.c,c.n,j.t,x.x,x.m,x.n,x.a,c.o,x.l,x.o,c.l,x.t,x.q,x.h,x.i,x.r,I.a,c.m,j.I,l.d,d.d],pipes:[U.a],styles:[".bshadow[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;filter:drop-shadow(5px 5px 5px #222222);opacity:.5}textarea[_ngcontent-%COMP%]{margin-top:15px;display:block;margin-left:auto;margin-right:auto;width:250px;opacity:.5}.imageURL[_ngcontent-%COMP%]{height:50px;width:50px}.filepicker[_ngcontent-%COMP%]{-webkit-appearance:none;position:absolute;width:87px;height:87px!important;text-indent:100em;background-size:cover;overflow:hidden;outline:none;padding:0;border:0}@media (max-width:767px){.filepicker[_ngcontent-%COMP%]{width:100px;height:100px!important}}"]}),e})();var G=i("kF6S"),Z=i("Czu6"),J=i("1kSV"),K=i("lDzL"),Y=i("+lss");const ee=function(){return{type:"zoom"}},te=function(e){return{animation:e}},ie=function(e){return["/pages/registration/edit",e]};function ce(e,t){if(1&e){const e=b.kc();b.ec(0,"nb-icon",25),b.jd(1,"\xa0\xa0 "),b.jc(2,"nb-icon",26),b.uc("click",(function(){b.Xc(e);const i=t.row;return b.yc(2).deleteEmp(i.id)})),b.ic(),b.jc(3,"nb-icon",27),b.uc("click",(function(i){b.Xc(e);const c=t.row;return b.yc(2).generateQR(i,c)})),b.ic()}if(2&e){const e=t.row,i=b.yc(2);b.Hc("options",b.Nc(7,te,b.Mc(6,ee)))("hidden",i.hiddenEdit)("routerLink",b.Nc(9,ie,e.id)),b.Pb(2),b.Hc("options",b.Nc(12,te,b.Mc(11,ee)))("hidden",i.hiddenDelete),b.Pb(1),b.Hc("options",b.Nc(15,te,b.Mc(14,ee)))}}function ne(e,t){1&e&&(b.jc(0,"ngx-datatable-column",24),b.hd(1,ce,4,17,"ng-template",20),b.ic()),2&e&&b.Hc("maxWidth",90)}function oe(e,t){if(1&e&&(b.jc(0,"span",33),b.ec(1,"img",34),b.ic()),2&e){const e=b.yc().$implicit;b.Pb(1),b.Hc("src",e.url,b.Zc)}}function de(e,t){if(1&e&&(b.hc(0),b.hd(1,oe,2,1,"span",32),b.gc()),2&e){const e=t.$implicit;b.Pb(1),b.Hc("ngIf","profile"==e.type)}}function re(e,t){if(1&e&&(b.jc(0,"div",28),b.jc(1,"div",29),b.hd(2,de,2,1,"ng-container",30),b.ic(),b.jc(3,"div",31),b.jc(4,"span"),b.jd(5),b.ic(),b.ic(),b.ic()),2&e){const e=t.row;b.Pb(2),b.Hc("ngForOf",e.employeeDocumentList),b.Pb(3),b.kd(e.name)}}function ae(e,t){if(1&e){const e=b.kc();b.jc(0,"div"),b.ec(1,"ngx-qrcode",35),b.jc(2,"div",1),b.jc(3,"div",36),b.jc(4,"div",37),b.jc(5,"span",38),b.jd(6),b.ic(),b.jc(7,"div",39),b.jc(8,"div",40),b.jc(9,"a",41),b.uc("click",(function(){return b.Xc(e),b.yc().downloadImage()})),b.ec(10,"nb-icon",42),b.ic(),b.ic(),b.jc(11,"div",43),b.jc(12,"nb-icon",44),b.uc("click",(function(){return b.Xc(e),b.yc().shareImage()})),b.ic(),b.ic(),b.ic(),b.ic(),b.ic(),b.ic(),b.ic()}if(2&e){const e=b.yc();b.Pb(1),b.Hc("elementType",e.elementType)("errorCorrectionLevel",e.correctionLevel)("value",e.value),b.Pb(5),b.kd(e.emp_id),b.Pb(3),b.Hc("href",e.href,b.Zc)}}const se=function(){return["/pages/registration"]},le=[{path:"",component:Q,canActivate:[Z.a],canLoad:[Z.a],data:{PermissionName:["add"]}},{path:"view",component:(()=>{class e{constructor(e,t,i,c){this.registrationService=e,this.toastr=t,this.modalService=i,this.registrationGuard=c,this.empData=[],this.copyEmpData=[],this.profileData=[],this.loading=!1,this.qrFlag=!1,this.tablestyle="bootstrap",this.hiddenAdd=!0,this.hiddenEdit=!0,this.hiddenDelete=!0,this.destroy$=new a.a,this.tableHeaders=["empId","name","contact","aadhaar"],this.searchStr="",this.searchANDCondition=!1}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}ngOnInit(){this.getAccess(),this.getAllEmployee();let e=window.location.href.split("registration");this.url=e[0]}getAccess(){this.registrationGuard.accessRights("add")&&(this.hiddenAdd=!1),this.registrationGuard.accessRights("delete")&&(this.hiddenDelete=!1),this.registrationGuard.accessRights("edit")&&(this.hiddenEdit=!1)}getAllEmployee(){this.loading=!0,this.registrationService.getAllEmployee().pipe(Object(r.a)(this.destroy$)).subscribe(e=>{e.success&&(this.empData=e.data,this.copyEmpData=this.empData.map(e=>({id:e.id,empId:e.empId,name:e.name,contact:e.contact,aadhaar:e.aadhaar,employeeDocumentList:e.employeeDocumentList}))),this.loading=!1},e=>{this.toastr.error(p.Serever_Error)})}filter(e){const t=e.toString().toLowerCase().trim(),i=Object.keys(this.copyEmpData[0]);this.empData=this.copyEmpData.filter(e=>{for(let c=0;c<i.length;c++)if(e[i[c]]&&-1!==e[i[c]].toString().toLowerCase().indexOf(t)||!t)return!0})}deleteEmp(e){this.modalService.open(G.a,{size:"sm"}).result.then(t=>{t&&this.registrationService.deleteEmployee(e).pipe(Object(r.a)(this.destroy$)).subscribe(e=>{e.success?(this.toastr.success(e.msg),this.getAllEmployee()):this.toastr.error(e.msg)},e=>{})})}generateQR(e,t){this.emp_id=t.empId;let i=[];t.employeeDocumentList&&(i=t.employeeDocumentList,i.forEach(e=>{"qr"==e.type&&(this.value=e.url)})),this.qrFlag=!0}downloadImage(){this.href=document.getElementsByTagName("img")[0].src}shareImage(){this.href=document.getElementsByTagName("img")[0].src;const e=new FormData;e.append("upload_preset","gfl_upload"),e.append("cloud_name","dpemsdha5"),e.append("file",this.href),this.registrationService.uploadImage(e).pipe(Object(r.a)(this.destroy$)).subscribe(e=>{if(e){let t=e.secure_url;window.innerWidth>=1024?window.location.href="https://web.whatsapp.com/send?phone=+91"+this.contact+"&text="+t:window.location.href="whatsapp://send?phone=+91"+this.contact+"&text="+t}})}}return e.\u0275fac=function(t){return new(t||e)(b.dc(u.a),b.dc(f.b),b.dc(J.e),b.dc(Z.a))},e.\u0275cmp=b.Xb({type:e,selectors:[["ngx-registration"]],decls:32,vars:21,consts:[[3,"show"],[1,"row"],[1,"col-lg-12"],[1,"nb-style"],[1,"nb-header"],[1,"col-md-1","col-3","display-flex-start","max-width-device"],[1,"btn","btn-md","btn-design",3,"routerLink","disabled"],[1,"col-md-9","col-7"],[1,"nb-text"],[1,"col-md-4"],[2,"display","flex"],[2,"margin-top","4px","margin-right","2px"],["status","primary","labelPosition","start","name","shift",3,"ngModel","ngModelChange"],[2,"margin-top","4px","margin-left","2px"],[1,"col-md-8"],["type","text","placeholder","Search","aria-label","Search","aria-describedby","basic-addon1",1,"form-control",3,"ngModel","ngModelChange"],[1,"material",3,"rows","ngClass","headerHeight","footerHeight"],["name","Actions","sortable","false","props","id",3,"maxWidth",4,"ngIf"],["name","Employee Id","prop","empId",3,"maxWidth"],["name","Name","prop","name",3,"maxWidth"],["ngx-datatable-cell-template",""],["name","Contact","prop","contact",3,"maxWidth"],["name","Aadhar No.","prop","aadhaar",3,"maxWidth"],[4,"ngIf"],["name","Actions","sortable","false","props","id",3,"maxWidth"],["status","primary","icon","edit",3,"options","hidden","routerLink"],["status","danger","icon","trash",3,"options","hidden","click"],["icon","camera-outline","nbTooltip","QR","nbTooltipStatus","primary","status","danger",3,"options","click"],[1,"row","width-100"],[1,"col-md-3","col-3"],[4,"ngFor","ngForOf"],[1,"col-md-9","col-9"],["class","ngx-profile-table",4,"ngIf"],[1,"ngx-profile-table"],[1,"imageURL",3,"src"],["cssClass","bshadow",1,"text-center",3,"elementType","errorCorrectionLevel","value"],[1,"col-md-12","col-12"],[1,"text-center"],[1,"scan-id-style"],[1,"qr-share-opt","display-qr-evenly"],[1,"download-qr"],["download","",3,"href","click"],["icon","cloud-download-outline",1,"icon-qr-wd-height"],[1,"share-qr"],["icon","share-outline",1,"icon-qr-wd-height",3,"click"]],template:function(e,t){1&e&&(b.ec(0,"ngx-loading",0),b.jc(1,"div",1),b.jc(2,"div",2),b.jc(3,"nb-card",3),b.jc(4,"nb-card-header",4),b.jc(5,"div",1),b.jc(6,"div",5),b.jc(7,"button",6),b.jd(8,"ADD"),b.ic(),b.ic(),b.jc(9,"div",7),b.jc(10,"h2",8),b.jd(11,"Employee"),b.ic(),b.ic(),b.ic(),b.ic(),b.jc(12,"nb-card-body"),b.jc(13,"div",1),b.jc(14,"div",9),b.jc(15,"div",10),b.jc(16,"p",11),b.jd(17,"OR"),b.ic(),b.jc(18,"nb-toggle",12),b.uc("ngModelChange",(function(e){return t.searchANDCondition=e})),b.ic(),b.jc(19,"p",13),b.jd(20,"AND"),b.ic(),b.ic(),b.ic(),b.jc(21,"div",14),b.jc(22,"input",15),b.uc("ngModelChange",(function(e){return t.searchStr=e})),b.ic(),b.ic(),b.ic(),b.jc(23,"ngx-datatable",16),b.zc(24,"searchInTable"),b.hd(25,ne,2,1,"ngx-datatable-column",17),b.ec(26,"ngx-datatable-column",18),b.jc(27,"ngx-datatable-column",19),b.hd(28,re,6,2,"ng-template",20),b.ic(),b.ec(29,"ngx-datatable-column",21),b.ec(30,"ngx-datatable-column",22),b.ic(),b.hd(31,ae,13,5,"div",23),b.ic(),b.ic(),b.ic(),b.ic()),2&e&&(b.Hc("show",t.loading),b.Pb(7),b.Hc("routerLink",b.Mc(20,se))("disabled",t.hiddenAdd),b.Pb(11),b.Hc("ngModel",t.searchANDCondition),b.Pb(4),b.Hc("ngModel",t.searchStr),b.Pb(1),b.Hc("rows",b.Dc(24,15,t.empData,t.searchStr,t.searchANDCondition,t.tableHeaders))("ngClass",t.tablestyle)("headerHeight",31)("footerHeight",31),b.Pb(2),b.Hc("ngIf",!t.hiddenEdit||!t.hiddenDelete),b.Pb(1),b.Hc("maxWidth",200),b.Pb(1),b.Hc("maxWidth",300),b.Pb(2),b.Hc("maxWidth",200),b.Pb(1),b.Hc("maxWidth",200),b.Pb(1),b.Hc("ngIf",t.qrFlag))},directives:[v.a,j.u,j.x,d.d,j.t,j.wb,x.l,x.o,x.a,K.e,c.l,c.n,K.b,K.a,j.I,j.yb,c.m,l.d],pipes:[Y.a],styles:[".imageURL[_ngcontent-%COMP%]{height:30px;width:30px}"]}),e})(),canActivate:[Z.a],canLoad:[Z.a],data:{PermissionName:["view","view group","view all"]}},{path:"edit/:id",component:Q,canActivate:[Z.a],canLoad:[Z.a],data:{PermissionName:["edit","edit group","edit all"]}}];let he=(()=>{class e{}return e.\u0275mod=b.bc({type:e}),e.\u0275inj=b.ac({factory:function(t){return new(t||e)},imports:[[d.g.forChild(le)],d.g]}),e})(),pe=(()=>{class e{}return e.\u0275mod=b.bc({type:e}),e.\u0275inj=b.ac({factory:function(t){return new(t||e)},imports:[[c.c,he,o.a,n.a,x.g]]}),e})()}}]);