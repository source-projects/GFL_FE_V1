(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"/p2c":function(t,i,e){"use strict";e.r(i),e.d(i,"GenerateInvoiceModule",(function(){return Ai}));var n=e("ofXK"),c=e("tyNb"),o=e("dmB0"),a=e("mrSG"),r=e("1G5W"),d=e("XNiG"),s=e("O1SP"),l=e("8tQ5"),h=e("tA+f"),g=e("RWgp"),p=e("8k+d"),b=e("4/8P"),u=e("tcrU");class m{}class j{constructor(){this.totalMtr=0,this.totalFMtr=0,this.shrinkage=0,this.lotDataLength=0,this.calculationDone=!1}}class f{}var v=e("2Vo4"),P=e("fXoL"),M=e("tk/3");let C=(()=>{class t{constructor(t,i,e){this.router=t,this.httpClient=i,this.commonService=e,this.isPrinting=!1,this.isExport=!0,this.isPrint=!1,this.pdfContent=new v.a("")}printDocument(t,i,e){this.isPrinting=!0,e?this.router.navigate(["/export/invoice"]):(this.isExport=!1,this.isPrint=!0,this.router.navigate(["/",{outlets:{print:["print",t,i.join()]}}]))}onDataReady(){setTimeout(()=>{window.print(),this.isPrinting=!1,this.router.navigate([{outlets:{print:null}}])})}getInvoiceByNoToPrint(t){return this.httpClient.get(this.commonService.envUrl()+"api/dispatch/getPartyWithQualityDispatchBy/"+t)}getInvoiceByNoToPrintWithPchallan(t){return this.httpClient.get(this.commonService.envUrl()+"api/dispatch/getPChallanPartyWithQualityDispatchBy/"+t)}getInvoiceByBatchAndStock(t){return this.httpClient.post(this.commonService.envUrl()+"api/dispatch/get/receipt/getPartyWithQualityDispatchByPChallanAndStock/",t)}}return t.\u0275fac=function(i){return new(i||t)(P.rc(c.c),P.rc(M.b),P.rc(b.a))},t.\u0275prov=P.Zb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var y=e("5eHb"),O=e("1kSV");function x(t,i){if(1&t&&(P.jc(0,"td",59),P.jc(1,"b"),P.jd(2),P.zc(3,"uppercase"),P.zc(4,"slice"),P.ic(),P.ic()),2&t){const t=P.yc().$implicit;P.Pb(2),P.kd(P.Ac(3,1,P.Cc(4,3,t.qualityId,0,20)))}}function _(t,i){1&t&&P.ec(0,"td")}function I(t,i){if(1&t&&(P.jc(0,"tr"),P.jc(1,"td"),P.jc(2,"b"),P.jd(3),P.ic(),P.ic(),P.hd(4,x,5,7,"td",76),P.hd(5,_,1,0,"td",0),P.jc(6,"td"),P.jc(7,"b"),P.jd(8),P.ic(),P.ic(),P.jc(9,"td"),P.jc(10,"b"),P.jd(11),P.ic(),P.ic(),P.jc(12,"td"),P.jc(13,"b"),P.jd(14),P.ic(),P.ic(),P.jc(15,"td",55),P.jc(16,"b"),P.jd(17),P.zc(18,"number"),P.ic(),P.ic(),P.jc(19,"td",55),P.jc(20,"b"),P.jd(21),P.ic(),P.ic(),P.jc(22,"td",55),P.jc(23,"b"),P.jd(24),P.zc(25,"number"),P.ic(),P.ic(),P.jc(26,"td",55),P.jc(27,"b"),P.jd(28),P.zc(29,"number"),P.ic(),P.ic(),P.jc(30,"td",55),P.jc(31,"b"),P.jd(32),P.zc(33,"number"),P.ic(),P.ic(),P.ic()),2&t){const t=i.$implicit,e=i.index;P.Pb(3),P.kd(e+1),P.Pb(1),P.Hc("ngIf",t.qualityName),P.Pb(1),P.Hc("ngIf",!t.qualityName),P.Pb(3),P.kd(t.hsn),P.Pb(3),P.kd(t.pchallanRef),P.Pb(3),P.kd(t.batchId),P.Pb(3),P.kd(P.Bc(18,11,t.totalMtr,"1.2-2")),P.Pb(4),P.kd(t.pcs),P.Pb(3),P.kd(P.Bc(25,14,t.finishMtr,"1.2-2")),P.Pb(4),P.kd(P.Bc(29,17,t.rate,"1.2-2")),P.Pb(4),P.kd(P.Bc(33,20,t.amt,"1.2-2"))}}function w(t,i){if(1&t&&(P.jc(0,"tr"),P.jc(1,"td",59),P.jc(2,"b"),P.jd(3,"CGST: @2.5%"),P.ic(),P.ic(),P.jc(4,"td",55),P.jc(5,"b"),P.jd(6),P.zc(7,"number"),P.ic(),P.ic(),P.ic()),2&t){const t=P.yc(2).$implicit;P.Pb(6),P.kd(P.Bc(7,1,t.cgst,"1.2-2"))}}function k(t,i){if(1&t&&(P.jc(0,"tr"),P.jc(1,"td",59),P.jc(2,"b"),P.jd(3,"SGST: @2.5%"),P.ic(),P.ic(),P.jc(4,"td",55),P.jc(5,"b"),P.jd(6),P.zc(7,"number"),P.ic(),P.ic(),P.ic()),2&t){const t=P.yc(2).$implicit;P.Pb(6),P.kd(P.Bc(7,1,t.sgst,"1.2-2"))}}function D(t,i){if(1&t&&(P.jc(0,"tr"),P.jc(1,"td",59),P.jc(2,"b"),P.jd(3,"IGST: @5%"),P.ic(),P.ic(),P.jc(4,"td",55),P.jc(5,"b"),P.jd(6),P.zc(7,"number"),P.ic(),P.ic(),P.ic()),2&t){const t=P.yc(2).$implicit;P.Pb(6),P.kd(P.Bc(7,1,t.igst,"1.2-2"))}}function S(t,i){1&t&&(P.jc(0,"th",81),P.jc(1,"b"),P.jd(2,"GryMtr"),P.ic(),P.ic())}function F(t,i){1&t&&(P.jc(0,"th",81),P.jc(1,"b"),P.jd(2,"GryWt"),P.ic(),P.ic())}function A(t,i){1&t&&(P.jc(0,"th",81),P.jc(1,"b"),P.jd(2,"FinMtr"),P.ic(),P.ic())}function L(t,i){1&t&&(P.jc(0,"th",81),P.jc(1,"b"),P.jd(2,"FinWt"),P.ic(),P.ic())}function N(t,i){if(1&t&&(P.jc(0,"tr"),P.jc(1,"td",86),P.jd(2),P.ic(),P.jc(3,"td",86),P.jd(4),P.zc(5,"number"),P.ic(),P.jc(6,"td",86),P.jd(7),P.zc(8,"number"),P.ic(),P.ic()),2&t){const t=i.$implicit,e=i.index;P.Pb(2),P.ld(" ",t.srNo?t.srNo:e+1,""),P.Pb(2),P.kd("-"==t.mtr?"-":P.Bc(5,3,t.mtr,"1.2-2")),P.Pb(3),P.ld(" ",P.Bc(8,6,t.finishMtr,"1.2-2"),"")}}function H(t,i){if(1&t&&(P.jc(0,"div",77),P.jc(1,"div"),P.jc(2,"table",78),P.jc(3,"tr"),P.jc(4,"th",59),P.jc(5,"b"),P.jd(6),P.ic(),P.ic(),P.ic(),P.ic(),P.jc(7,"div",79),P.jc(8,"table",80),P.jc(9,"thead"),P.jc(10,"tr"),P.jc(11,"th",81),P.jc(12,"b"),P.jd(13,"Cops"),P.ic(),P.ic(),P.hd(14,S,3,0,"th",82),P.hd(15,F,3,0,"th",82),P.hd(16,A,3,0,"th",82),P.hd(17,L,3,0,"th",82),P.ic(),P.ic(),P.jc(18,"tbody"),P.hd(19,N,9,9,"tr",2),P.ic(),P.jc(20,"tfoot",83),P.jc(21,"tr"),P.jc(22,"th",84),P.jc(23,"b"),P.jd(24),P.ic(),P.ic(),P.jc(25,"th",84),P.jc(26,"b"),P.jd(27),P.ic(),P.ic(),P.jc(28,"th",84),P.jc(29,"b"),P.jd(30),P.ic(),P.ic(),P.ic(),P.jc(31,"tr"),P.jc(32,"th",85),P.jc(33,"b"),P.jd(34),P.ic(),P.ic(),P.ic(),P.ic(),P.ic(),P.ic(),P.ic(),P.ic()),2&t){const t=i.$implicit;P.Pb(6),P.md("LOT NO: ",t.pchallanRef," --- ",t.batchId,""),P.Pb(8),P.Hc("ngIf","meter"==t.billingUnit||!t.billingUnit),P.Pb(1),P.Hc("ngIf","weight"==t.billingUnit),P.Pb(1),P.Hc("ngIf","meter"==t.billingUnit||!t.billingUnit),P.Pb(1),P.Hc("ngIf","weight"==t.billingUnit),P.Pb(2),P.Hc("ngForOf",t.batchDataList),P.Pb(5),P.kd(t.lotDataLength),P.Pb(3),P.kd(t.totalMtr),P.Pb(3),P.kd(t.totalFMtr),P.Pb(4),P.ld("Sh_% : ",t.shrinkage,"")}}function z(t,i){if(1&t&&(P.jc(0,"div",6),P.jc(1,"section",7),P.jc(2,"div",8),P.jc(3,"div",9),P.jc(4,"div",10),P.jc(5,"div",11),P.jc(6,"b"),P.jd(7,"TAX INVOICE CUM DELIVERY CHALLAN"),P.ic(),P.ic(),P.jc(8,"div",12),P.jc(9,"strong",13),P.jd(10),P.ic(),P.ic(),P.ic(),P.ic(),P.jc(11,"div",14),P.jc(12,"div",9),P.jc(13,"div",15),P.jc(14,"div",16),P.jc(15,"div",17),P.jc(16,"div",18),P.jc(17,"div",19),P.jc(18,"div",10),P.jc(19,"p",20),P.jc(20,"b"),P.jd(21,"GLORY DYEING MILLS PVT. LTD."),P.ic(),P.ic(),P.ic(),P.jc(22,"div",10),P.jc(23,"p",21),P.jd(24," FORMALLY KNOWN AS : MUKESH PROCESSORS PVT. LTD. "),P.ic(),P.ic(),P.jc(25,"div",10),P.jc(26,"p",22),P.jd(27,"A-31, G.E.T.P, (Kala Ghoda), Palsana, Surat E-Mail : dyeing@gloryfab.com "),P.ic(),P.ic(),P.jc(28,"div",10),P.jc(29,"p",23),P.jd(30,"GSTIN :- 24AAFCM5028A1Z1 Place Of Supply : Surat"),P.ic(),P.ic(),P.ic(),P.ic(),P.ic(),P.ic(),P.jc(31,"div",24),P.jc(32,"div",25),P.ec(33,"img",26),P.ic(),P.ic(),P.ic(),P.ic(),P.jc(34,"div",27),P.jc(35,"div",28),P.jc(36,"div",29),P.jc(37,"div",30),P.jc(38,"div",10),P.jc(39,"div",31),P.jc(40,"b",32),P.jc(41,"span"),P.jd(42,"Party Name"),P.ic(),P.ic(),P.ic(),P.jc(43,"div",33),P.jc(44,"b"),P.jd(45),P.zc(46,"uppercase"),P.ic(),P.ic(),P.ic(),P.jc(47,"div",10),P.jc(48,"div",34),P.jc(49,"b",32),P.jc(50,"span"),P.jd(51,"Address"),P.ic(),P.ic(),P.ic(),P.jc(52,"div",33),P.jd(53),P.zc(54,"uppercase"),P.ic(),P.ic(),P.jc(55,"div",10),P.jc(56,"div",34),P.jc(57,"b",32),P.jc(58,"span"),P.jd(59,"GSTIN"),P.ic(),P.ic(),P.ic(),P.jc(60,"div",33),P.jc(61,"b",35),P.jd(62),P.ic(),P.jc(63,"div",36),P.jc(64,"div",37),P.jc(65,"b",38),P.jc(66,"span"),P.jd(67,"Phn No:"),P.ic(),P.ic(),P.ic(),P.jc(68,"div",39),P.jd(69),P.ic(),P.ic(),P.ic(),P.ic(),P.ic(),P.jc(70,"div",40),P.jc(71,"div",10),P.jc(72,"div",41),P.jc(73,"b",38),P.jc(74,"span"),P.jd(75,"Invoice"),P.ic(),P.ic(),P.ic(),P.jc(76,"div",42),P.jc(77,"b"),P.jd(78),P.ic(),P.ic(),P.ic(),P.jc(79,"div",10),P.jc(80,"div",41),P.jc(81,"b",38),P.jc(82,"span"),P.jd(83,"Date"),P.ic(),P.ic(),P.ic(),P.jc(84,"div",42),P.jd(85),P.zc(86,"date"),P.ic(),P.ic(),P.ic(),P.ic(),P.jc(87,"div",43),P.jc(88,"table",44),P.jc(89,"tr"),P.jc(90,"th",45),P.jc(91,"b"),P.jd(92,"Sr."),P.ic(),P.ic(),P.jc(93,"th",46),P.jc(94,"b"),P.jd(95,"Quality"),P.ic(),P.ic(),P.jc(96,"th",47),P.jc(97,"b"),P.jd(98,"HSN"),P.ic(),P.ic(),P.jc(99,"th",48),P.jc(100,"b"),P.jd(101,"P. Chl No"),P.ic(),P.ic(),P.jc(102,"th",49),P.jc(103,"b"),P.jd(104,"Lot No"),P.ic(),P.ic(),P.jc(105,"th",50),P.jc(106,"b"),P.jd(107,"Grey "),P.ic(),P.jc(108,"span"),P.jd(109,"(Mtr/Kg)"),P.ic(),P.ic(),P.jc(110,"th",51),P.jc(111,"b"),P.jd(112,"PCs"),P.ic(),P.ic(),P.jc(113,"th",50),P.jc(114,"b"),P.jd(115,"Finish "),P.ic(),P.jc(116,"span"),P.jd(117,"(Mtr/Kg)"),P.ic(),P.ic(),P.jc(118,"th",52),P.jc(119,"b"),P.jd(120,"Rate"),P.ic(),P.ic(),P.jc(121,"th",53),P.jc(122,"b"),P.jd(123,"Amount"),P.ic(),P.ic(),P.ic(),P.hd(124,I,34,23,"tr",2),P.jc(125,"tr",54),P.ec(126,"td"),P.ec(127,"td"),P.ec(128,"td"),P.ec(129,"td"),P.jc(130,"td"),P.jd(131," TOTAL "),P.ic(),P.jc(132,"td",55),P.jd(133),P.zc(134,"number"),P.ic(),P.jc(135,"td",55),P.jd(136),P.ic(),P.jc(137,"td",55),P.jd(138),P.zc(139,"number"),P.ic(),P.ec(140,"td"),P.jc(141,"td",55),P.jd(142),P.zc(143,"number"),P.ic(),P.ic(),P.ic(),P.ic(),P.jc(144,"div",56),P.jc(145,"div",10),P.jc(146,"div",57),P.jc(147,"table"),P.jc(148,"th"),P.jc(149,"b"),P.jd(150,"Remark"),P.ic(),P.ic(),P.jc(151,"tr"),P.jc(152,"td"),P.jc(153,"span",58),P.jd(154),P.ic(),P.ic(),P.ic(),P.ic(),P.ic(),P.ec(155,"div",57),P.jc(156,"div",57),P.jc(157,"table",44),P.jc(158,"tr"),P.jc(159,"td",59),P.jc(160,"b"),P.jd(161),P.ic(),P.ic(),P.jc(162,"td",55),P.jc(163,"b"),P.jd(164),P.zc(165,"number"),P.ic(),P.ic(),P.ic(),P.jc(166,"tr"),P.jc(167,"td",59),P.jc(168,"b"),P.jd(169," Taxable Amount"),P.ic(),P.ic(),P.jc(170,"td",55),P.jc(171,"b"),P.jd(172),P.zc(173,"number"),P.ic(),P.ic(),P.ic(),P.hd(174,w,8,4,"tr",0),P.hd(175,k,8,4,"tr",0),P.hd(176,D,8,4,"tr",0),P.jc(177,"tr"),P.jc(178,"td",60),P.jc(179,"b"),P.jd(180,"Net Amount"),P.ic(),P.ic(),P.jc(181,"td",61),P.jc(182,"b"),P.jd(183),P.zc(184,"number"),P.ic(),P.ic(),P.ic(),P.ic(),P.ic(),P.ic(),P.ic(),P.jc(185,"div",62),P.hd(186,H,35,11,"div",63),P.ic(),P.jc(187,"div",64),P.jc(188,"div",10),P.jc(189,"div",65),P.jc(190,"div",66),P.jc(191,"div",10),P.jc(192,"div",57),P.jc(193,"div",67),P.jc(194,"b"),P.jd(195,"BANK NAME"),P.ic(),P.ic(),P.ic(),P.jc(196,"div",68),P.jc(197,"div",67),P.jd(198," : HDFC BANK LTD.. "),P.ic(),P.ic(),P.jc(199,"div",57),P.jc(200,"div",67),P.jc(201,"b"),P.jd(202," A/c No."),P.ic(),P.ic(),P.ic(),P.jc(203,"div",68),P.jc(204,"div",67),P.jd(205," : 59227111222333 "),P.ic(),P.ic(),P.jc(206,"div",57),P.jc(207,"div",67),P.jc(208,"b"),P.jd(209,"Branch IFS Code"),P.ic(),P.ic(),P.ic(),P.jc(210,"div",68),P.jc(211,"div",67),P.jd(212," : HDFC0001706 , SACHIN "),P.ic(),P.ic(),P.ic(),P.ic(),P.ic(),P.jc(213,"div",69),P.jc(214,"div",70),P.jc(215,"b"),P.jd(216,"GLORY DYEING MILLS PVT. LTD."),P.ic(),P.ic(),P.ic(),P.ic(),P.jc(217,"div",71),P.jc(218,"div",72),P.jc(219,"div",73),P.jc(220,"b"),P.jd(221,"TERMS CONDITION :"),P.ic(),P.jc(222,"ul",74),P.jc(223,"li"),P.jd(224," 1. Goods once sold will not be taken back ."),P.ic(),P.jc(225,"li"),P.jd(226," 2. Our responsibility ceases once the goods is delivered to the carrier. "),P.ic(),P.jc(227,"li"),P.jd(228," 3. GST Payable on Reverse Charge : No"),P.ic(),P.jc(229,"li"),P.jd(230," 4. If any complaint regarding Goods/Bill kindly contact within 7 days, after that we are not responsible for anything."),P.ic(),P.ic(),P.ic(),P.ic(),P.jc(231,"div",69),P.jc(232,"div",75),P.jd(233,"Authorised Signatory"),P.ic(),P.ic(),P.ic(),P.ic(),P.ic(),P.ic(),P.ic(),P.ic(),P.ic(),P.ic()),2&t){const t=i.$implicit,e=P.yc().$implicit;P.Pb(10),P.kd(t),P.Pb(35),P.kd(P.Ac(46,21,e.partyName)),P.Pb(8),P.ld(" ",P.Ac(54,23,e.address)," "),P.Pb(9),P.kd(e.gst),P.Pb(7),P.ld(" ",e.contactNo," "),P.Pb(9),P.kd(e.invoiceNo),P.Pb(7),P.ld(" ",P.Bc(86,25,e.createdDate,"dd/MM/yyyy")," "),P.Pb(39),P.Hc("ngForOf",e.qualityList),P.Pb(9),P.ld(" ",P.Bc(134,28,e.totalMtr,"1.2-2")," "),P.Pb(3),P.ld(" ",e.totalPcs," "),P.Pb(2),P.ld(" ",P.Bc(139,31,e.totalFinishMtr,"1.2-2")," "),P.Pb(4),P.ld(" ",P.Bc(143,34,e.totalAmt,"1.2-2")," "),P.Pb(12),P.kd(e.remark),P.Pb(7),P.ld("Discount @",e.percentageDiscount,"%"),P.Pb(3),P.kd(P.Bc(165,37,e.discount,"1.2-2")),P.Pb(8),P.kd(P.Bc(173,40,e.taxAmt,"1.2-2")),P.Pb(2),P.Hc("ngIf","Gujarat"==e.state),P.Pb(1),P.Hc("ngIf","Gujarat"==e.state),P.Pb(1),P.Hc("ngIf","Gujarat"!==e.state),P.Pb(7),P.kd(P.Bc(184,43,e.netAmt,"1.2-2")),P.Pb(3),P.Hc("ngForOf",e.batchWithGrList)}}function T(t,i){if(1&t&&(P.jc(0,"div"),P.jc(1,"section",3,4),P.hd(3,z,234,46,"div",5),P.ic(),P.ic()),2&t){const t=i.index,e=P.yc(2);P.Pb(1),P.Jc("id","printpdf",t,""),P.Pb(2),P.Hc("ngForOf",e.copyType)}}function q(t,i){if(1&t&&(P.jc(0,"div"),P.hd(1,T,4,2,"div",2),P.ic()),2&t){const t=P.yc();P.Pb(1),P.Hc("ngForOf",t.printInvoiceData)}}function E(t,i){if(1&t&&(P.jc(0,"td"),P.jd(1),P.zc(2,"uppercase"),P.zc(3,"slice"),P.ic()),2&t){const t=P.yc().$implicit;P.Pb(1),P.ld(" ",P.Ac(2,1,P.Cc(3,3,t.qualityId,0,20))," ")}}function W(t,i){1&t&&P.ec(0,"td")}function B(t,i){if(1&t&&(P.jc(0,"tr"),P.jc(1,"td"),P.jd(2),P.ic(),P.hd(3,E,4,7,"td",0),P.hd(4,W,1,0,"td",0),P.jc(5,"td"),P.jd(6),P.ic(),P.jc(7,"td"),P.jd(8),P.ic(),P.jc(9,"td"),P.jd(10),P.ic(),P.jc(11,"td"),P.jd(12),P.zc(13,"number"),P.ic(),P.jc(14,"td"),P.jd(15),P.ic(),P.jc(16,"td"),P.jd(17),P.zc(18,"number"),P.ic(),P.jc(19,"td"),P.jd(20),P.ic(),P.jc(21,"td"),P.jd(22),P.ic(),P.ic()),2&t){const t=i.$implicit,e=i.index;P.Pb(2),P.ld(" ",e+1," "),P.Pb(1),P.Hc("ngIf",t.qualityName),P.Pb(1),P.Hc("ngIf",!t.qualityName),P.Pb(2),P.ld(" ",t.hsn," "),P.Pb(2),P.ld(" ",t.pchallanRef," "),P.Pb(2),P.ld(" ",t.batchId," "),P.Pb(2),P.ld(" ",P.Bc(13,11,t.totalMtr,"1.2-2")," "),P.Pb(3),P.ld(" ",t.pcs," "),P.Pb(2),P.ld(" ",P.Bc(18,14,t.finishMtr,"1.2-2")," "),P.Pb(3),P.ld(" ",t.rate," "),P.Pb(2),P.ld(" ",t.amt," ")}}function R(t,i){if(1&t&&(P.jc(0,"tr"),P.jc(1,"td",59),P.jc(2,"b"),P.jd(3,"CGST: @2.5%"),P.ic(),P.ic(),P.jc(4,"td",55),P.jc(5,"b"),P.jd(6),P.zc(7,"number"),P.ic(),P.ic(),P.ic()),2&t){const t=P.yc().$implicit;P.Pb(6),P.kd(P.Bc(7,1,t.cgst,"1.2-2"))}}function $(t,i){if(1&t&&(P.jc(0,"tr"),P.jc(1,"td",59),P.jc(2,"b"),P.jd(3,"SGST: @2.5%"),P.ic(),P.ic(),P.jc(4,"td",55),P.jc(5,"span"),P.jd(6),P.zc(7,"number"),P.ic(),P.ic(),P.ic()),2&t){const t=P.yc().$implicit;P.Pb(6),P.kd(P.Bc(7,1,t.sgst,"1.2-2"))}}function G(t,i){if(1&t&&(P.jc(0,"tr"),P.jc(1,"td",59),P.jc(2,"b"),P.jd(3,"IGST: @5%"),P.ic(),P.ic(),P.jc(4,"td",55),P.jc(5,"b"),P.jd(6),P.zc(7,"number"),P.ic(),P.ic(),P.ic()),2&t){const t=P.yc().$implicit;P.Pb(6),P.kd(P.Bc(7,1,t.igst,"1.2-2"))}}function X(t,i){1&t&&(P.jc(0,"th",81),P.jc(1,"b"),P.jd(2,"GryMtr"),P.ic(),P.ic())}function U(t,i){1&t&&(P.jc(0,"th",81),P.jc(1,"b"),P.jd(2,"GryWt"),P.ic(),P.ic())}function V(t,i){1&t&&(P.jc(0,"th",81),P.jc(1,"b"),P.jd(2,"FinMtr"),P.ic(),P.ic())}function K(t,i){1&t&&(P.jc(0,"th",81),P.jc(1,"b"),P.jd(2,"FinWt"),P.ic(),P.ic())}function Q(t,i){if(1&t&&(P.jc(0,"tr"),P.jc(1,"td",86),P.jd(2),P.ic(),P.jc(3,"td",86),P.jd(4),P.ic(),P.jc(5,"td",86),P.jd(6),P.ic(),P.ic()),2&t){const t=i.$implicit,e=i.index;P.Pb(2),P.ld(" ",t.srNo?t.srNo:e+1,""),P.Pb(2),P.kd(t.mtr),P.Pb(2),P.kd(t.finishMtr)}}function Y(t,i){if(1&t&&(P.jc(0,"div",77),P.jc(1,"div"),P.jc(2,"table",78),P.jc(3,"tr"),P.jc(4,"th",59),P.jc(5,"b"),P.jd(6),P.ic(),P.ic(),P.ic(),P.ic(),P.jc(7,"div",79),P.jc(8,"table",80),P.jc(9,"thead"),P.jc(10,"tr"),P.jc(11,"th",81),P.jc(12,"b"),P.jd(13,"Cops"),P.ic(),P.ic(),P.hd(14,X,3,0,"th",82),P.hd(15,U,3,0,"th",82),P.hd(16,V,3,0,"th",82),P.hd(17,K,3,0,"th",82),P.ic(),P.ic(),P.jc(18,"tbody",114),P.hd(19,Q,7,3,"tr",2),P.ic(),P.jc(20,"tfoot",83),P.jc(21,"tr"),P.jc(22,"th",84),P.jc(23,"b"),P.jd(24),P.ic(),P.ic(),P.jc(25,"th",84),P.jc(26,"b"),P.jd(27),P.ic(),P.ic(),P.jc(28,"th",84),P.jc(29,"b"),P.jd(30),P.ic(),P.ic(),P.ic(),P.jc(31,"tr"),P.jc(32,"th",85),P.jc(33,"b"),P.jd(34),P.ic(),P.ic(),P.ic(),P.ic(),P.ic(),P.ic(),P.ic(),P.ic()),2&t){const t=i.$implicit;P.Pb(6),P.md("LOT NO: ",t.pchallanRef," --- ",t.batchId,""),P.Pb(8),P.Hc("ngIf","meter"==t.billingUnit||!t.billingUnit),P.Pb(1),P.Hc("ngIf","weight"==t.billingUnit),P.Pb(1),P.Hc("ngIf","meter"==t.billingUnit||!t.billingUnit),P.Pb(1),P.Hc("ngIf","weight"==t.billingUnit),P.Pb(2),P.Hc("ngForOf",t.batchDataList),P.Pb(5),P.kd(t.lotDataLength),P.Pb(3),P.kd(t.totalMtr),P.Pb(3),P.kd(t.totalFMtr),P.Pb(4),P.ld("Sh_% : ",t.shrinkage,"")}}function Z(t,i){if(1&t&&(P.jc(0,"div",96),P.jc(1,"section",97,4),P.jc(3,"div",8),P.jc(4,"div",9),P.jc(5,"div",10),P.jc(6,"div",11),P.jc(7,"b"),P.jd(8,"TAX INVOICE CUM DELIVERY CHALLAN"),P.ic(),P.ic(),P.jc(9,"div",12),P.jc(10,"strong",13),P.jd(11,"Original/Duplicate/Triplicate"),P.ic(),P.ic(),P.ic(),P.ic(),P.jc(12,"div",14),P.jc(13,"div",9),P.jc(14,"div",15),P.jc(15,"div",16),P.jc(16,"div",17),P.jc(17,"div",18),P.jc(18,"div",19),P.jc(19,"div",10),P.jc(20,"p",98),P.jc(21,"b"),P.jd(22,"GLORY DYEING MILLS PVT. LTD."),P.ic(),P.ic(),P.ic(),P.jc(23,"div",10),P.jc(24,"p",22),P.jd(25," FORMALLY KNOWN AS : MUKESH PROCESSORS PVT. LTD. "),P.ic(),P.ic(),P.jc(26,"div",10),P.jc(27,"p",99),P.jd(28,"A-31, Eco Textile Park, (Kala Ghoda), Palsana, Surat E-Mail : varun@gloryfab.com "),P.ic(),P.ic(),P.jc(29,"div",10),P.jc(30,"p",99),P.jd(31,"GSTIN :- 24AAFCM5028A1Z1 Place Of Supply : Surat"),P.ic(),P.ic(),P.ic(),P.ic(),P.ic(),P.ic(),P.jc(32,"div",24),P.jc(33,"div",25),P.ec(34,"img",26),P.ic(),P.ic(),P.ic(),P.ic(),P.jc(35,"div",27),P.jc(36,"div",28),P.jc(37,"div",29),P.jc(38,"div",30),P.jc(39,"div",10),P.jc(40,"div",100),P.jc(41,"b",38),P.jc(42,"span"),P.jd(43,"Party Name"),P.ic(),P.ic(),P.ic(),P.jc(44,"div",101),P.jc(45,"b",38),P.jc(46,"span"),P.jd(47,":"),P.ic(),P.ic(),P.ic(),P.jc(48,"div",102),P.jc(49,"b"),P.jd(50),P.zc(51,"uppercase"),P.ic(),P.ic(),P.ic(),P.jc(52,"div",10),P.jc(53,"div",100),P.jc(54,"b",38),P.jc(55,"span"),P.jd(56,"Address"),P.ic(),P.ic(),P.ic(),P.jc(57,"div",101),P.jc(58,"b",38),P.jc(59,"span"),P.jd(60,":"),P.ic(),P.ic(),P.ic(),P.jc(61,"div",102),P.jd(62),P.zc(63,"uppercase"),P.ic(),P.ic(),P.jc(64,"div",10),P.jc(65,"div",103),P.jc(66,"b",38),P.jc(67,"span"),P.jd(68,"GSTIN"),P.ic(),P.ic(),P.ic(),P.jc(69,"div",104),P.jc(70,"b",32),P.jc(71,"span"),P.jd(72,":"),P.ic(),P.ic(),P.ic(),P.jc(73,"div",105),P.jc(74,"b",69),P.jd(75),P.ic(),P.jc(76,"div",36),P.jc(77,"div",106),P.jc(78,"b",38),P.jc(79,"span"),P.jd(80,"Phn No:"),P.ic(),P.ic(),P.ic(),P.jc(81,"div",65),P.jd(82),P.ic(),P.ic(),P.ic(),P.ic(),P.ic(),P.jc(83,"div",40),P.jc(84,"div",10),P.jc(85,"div",100),P.jc(86,"b",38),P.jc(87,"span"),P.jd(88,"Invoice"),P.ic(),P.ic(),P.ic(),P.jc(89,"div",101),P.jc(90,"b",38),P.jc(91,"span"),P.jd(92,":"),P.ic(),P.ic(),P.ic(),P.jc(93,"div",107),P.jd(94),P.ic(),P.ic(),P.jc(95,"div",10),P.jc(96,"div",100),P.jc(97,"b",38),P.jc(98,"span"),P.jd(99,"Date"),P.ic(),P.ic(),P.ic(),P.jc(100,"div",101),P.jc(101,"b",38),P.jc(102,"span"),P.jd(103,":"),P.ic(),P.ic(),P.ic(),P.jc(104,"div",107),P.jd(105),P.zc(106,"date"),P.ic(),P.ic(),P.ic(),P.ic(),P.jc(107,"div",43),P.jc(108,"table",44),P.jc(109,"tr"),P.jc(110,"th",108),P.jc(111,"b"),P.jd(112,"Sr."),P.ic(),P.ic(),P.jc(113,"th",109),P.jc(114,"b"),P.jd(115,"Quality"),P.ic(),P.ic(),P.jc(116,"th"),P.jc(117,"b"),P.jd(118,"HSN"),P.ic(),P.ic(),P.jc(119,"th"),P.jc(120,"b"),P.jd(121,"P. Chl No"),P.ic(),P.ic(),P.jc(122,"th"),P.jc(123,"b"),P.jd(124,"Lot No"),P.ic(),P.ic(),P.jc(125,"th",110),P.jc(126,"b"),P.jd(127,"Grey Mtr"),P.ic(),P.ic(),P.jc(128,"th",111),P.jc(129,"b"),P.jd(130,"PCs"),P.ic(),P.ic(),P.jc(131,"th",110),P.jc(132,"b"),P.jd(133,"Finish Mtr"),P.ic(),P.ic(),P.jc(134,"th"),P.jc(135,"b"),P.jd(136,"Rate"),P.ic(),P.ic(),P.jc(137,"th",112),P.jc(138,"b"),P.jd(139,"Amount"),P.ic(),P.ic(),P.ic(),P.hd(140,B,23,17,"tr",2),P.jc(141,"tr",54),P.ec(142,"td"),P.ec(143,"td"),P.ec(144,"td"),P.ec(145,"td"),P.jc(146,"td"),P.jd(147," TOTAL "),P.ic(),P.jc(148,"td"),P.jd(149),P.zc(150,"number"),P.ic(),P.jc(151,"td"),P.jd(152),P.ic(),P.jc(153,"td"),P.jd(154),P.zc(155,"number"),P.ic(),P.ec(156,"td"),P.jc(157,"td"),P.jd(158),P.ic(),P.ic(),P.ic(),P.ic(),P.jc(159,"div",56),P.jc(160,"div",10),P.jc(161,"div",57),P.jc(162,"table"),P.jc(163,"th"),P.jc(164,"b"),P.jd(165,"Remark"),P.ic(),P.ic(),P.jc(166,"tr"),P.jc(167,"td"),P.jc(168,"span",58),P.jd(169),P.ic(),P.ic(),P.ic(),P.ic(),P.ic(),P.ec(170,"div",57),P.jc(171,"div",57),P.jc(172,"table",44),P.jc(173,"tr"),P.jc(174,"td",59),P.jc(175,"b"),P.jd(176),P.ic(),P.ic(),P.jc(177,"td",55),P.jc(178,"b"),P.jd(179),P.zc(180,"number"),P.ic(),P.ic(),P.ic(),P.jc(181,"tr"),P.jc(182,"td",59),P.jc(183,"b"),P.jd(184," Taxable Amount"),P.ic(),P.ic(),P.jc(185,"td",55),P.jc(186,"b"),P.jd(187),P.zc(188,"number"),P.ic(),P.ic(),P.ic(),P.hd(189,R,8,4,"tr",0),P.hd(190,$,8,4,"tr",0),P.hd(191,G,8,4,"tr",0),P.jc(192,"tr"),P.jc(193,"td",59),P.jc(194,"b"),P.jd(195,"Net Amount"),P.ic(),P.ic(),P.jc(196,"td",55),P.jc(197,"b"),P.jd(198),P.zc(199,"number"),P.ic(),P.ic(),P.ic(),P.ic(),P.ic(),P.ic(),P.ic(),P.jc(200,"div",113),P.hd(201,Y,35,11,"div",63),P.ic(),P.jc(202,"div",64),P.jc(203,"div",10),P.jc(204,"div",65),P.jc(205,"div",66),P.jc(206,"div",10),P.jc(207,"div",57),P.jc(208,"div",67),P.jc(209,"b"),P.jd(210,"BANK NAME"),P.ic(),P.ic(),P.ic(),P.jc(211,"div",68),P.jc(212,"div",67),P.jd(213," : HDFC BANK LTD. "),P.ic(),P.ic(),P.jc(214,"div",57),P.jc(215,"div",67),P.jc(216,"b"),P.jd(217," A/c No."),P.ic(),P.ic(),P.ic(),P.jc(218,"div",68),P.jc(219,"div",67),P.jd(220," : 59227111222333 "),P.ic(),P.ic(),P.jc(221,"div",57),P.jc(222,"div",67),P.jc(223,"b"),P.jd(224,"Branch IFS Code"),P.ic(),P.ic(),P.ic(),P.jc(225,"div",68),P.jc(226,"div",67),P.jd(227," : HDFC0001706 , SACHIN "),P.ic(),P.ic(),P.ic(),P.ic(),P.ic(),P.jc(228,"div",69),P.jc(229,"div",70),P.jc(230,"b"),P.jd(231,"GLORY DYEING MILLS PVT. LTD."),P.ic(),P.ic(),P.ic(),P.ic(),P.jc(232,"div",10),P.jc(233,"div",65),P.jc(234,"div",73),P.jc(235,"b"),P.jd(236,"TERMS CONDITION :"),P.ic(),P.jc(237,"ul",74),P.jc(238,"li"),P.jd(239," 1. Goods once sold will not be taken back ."),P.ic(),P.jc(240,"li"),P.jd(241," 2. Our responsibility ceases once the goods is delivered to the carrier. "),P.ic(),P.jc(242,"li"),P.jd(243," 3. GST Payable on Reverse Charge : No"),P.ic(),P.jc(244,"li"),P.jd(245," 4. If any complaint regarding Goods/Bill kindly contact within 7 days, after that we are not responsible for anything."),P.ic(),P.ic(),P.ic(),P.ic(),P.jc(246,"div",69),P.jc(247,"div",75),P.jd(248,"Authorised Signatory"),P.ic(),P.ic(),P.ic(),P.ic(),P.ic(),P.ic(),P.ic(),P.ic(),P.ic(),P.ic()),2&t){const t=i.$implicit,e=i.index;P.Pb(1),P.Jc("id","printpdf",e,""),P.Pb(49),P.kd(P.Ac(51,21,t.partyName)),P.Pb(12),P.ld(" ",P.Ac(63,23,t.address)," "),P.Pb(13),P.kd(t.gst),P.Pb(7),P.ld(" ",t.contactNo," "),P.Pb(12),P.ld(" ",t.invoiceNo," "),P.Pb(11),P.ld(" ",P.Bc(106,25,t.createdDate,"dd/MM/yyyy")," "),P.Pb(35),P.Hc("ngForOf",t.qualityList),P.Pb(9),P.ld(" ",P.Bc(150,28,t.totalMtr,"1.2-2")," "),P.Pb(3),P.ld(" ",t.totalPcs," "),P.Pb(2),P.ld(" ",P.Bc(155,31,t.totalFinishMtr,"1.2-2")," "),P.Pb(4),P.ld(" ",t.totalAmt," "),P.Pb(11),P.kd(t.remark),P.Pb(7),P.ld("Discount @",t.percentageDiscount,"%"),P.Pb(3),P.kd(P.Bc(180,34,t.discount,"1.2-2")),P.Pb(8),P.kd(P.Bc(188,37,t.taxAmt,"1.2-2")),P.Pb(2),P.Hc("ngIf","Gujarat"==t.state),P.Pb(1),P.Hc("ngIf","Gujarat"==t.state),P.Pb(1),P.Hc("ngIf","Gujarat"!==t.state),P.Pb(7),P.kd(P.Bc(199,40,t.netAmt,"1.2-2")),P.Pb(3),P.Hc("ngForOf",t.batchWithGrList)}}function J(t,i){if(1&t){const t=P.kc();P.jc(0,"div",87),P.jc(1,"div",88),P.jc(2,"p",89),P.jc(3,"b"),P.jd(4,"Invoice Preview"),P.ic(),P.ic(),P.jc(5,"button",90),P.uc("click",(function(){return P.Xc(t),P.yc().activeModal.close(!1)})),P.jc(6,"span",91),P.jd(7,"\xd7"),P.ic(),P.ic(),P.ic(),P.hd(8,Z,249,43,"div",92),P.jc(9,"div",93),P.jc(10,"button",94),P.uc("click",(function(){return P.Xc(t),P.yc().onCancel()})),P.jd(11,"Cancel"),P.ic(),P.jc(12,"button",95),P.uc("click",(function(){return P.Xc(t),P.yc().onSave()})),P.jd(13,"Save"),P.ic(),P.jc(14,"button",95),P.uc("click",(function(){return P.Xc(t),P.yc().onPrint()})),P.jd(15,"Save & Print"),P.ic(),P.ic(),P.ic()}if(2&t){const t=P.yc();P.Pb(8),P.Hc("ngForOf",t.printInvoiceData)}}let tt=(()=>{class t{constructor(t,i,e,n,c,o){this.datePipe=t,this.toastr=i,this.printService=e,this.router=n,this._route=c,this.activeModal=o,this.printInvoiceFlag=!1,this.previewFlag=!1,this.rowd=[{},{},{}],this.lotRowd=[{},{},{},{}],this.col=[{},{},{},{},{},{},{},{},{},{}],this.invoiceData=[],this.copyType=["Original","Duplicate","Triplicate"],this.destroy$=new d.a}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}ngOnInit(){const t=this._route.snapshot.queryParamMap.get("myArray"),i=this._route.snapshot.queryParamMap.get("invoice");this.invoiceIds=null===t?new Array:JSON.parse(t),this.finalInvoice?this.printService.getInvoiceByBatchAndStock(this.finalInvoice).pipe(Object(r.a)(this.destroy$)).subscribe(t=>{t.success&&(this.printInvoiceData=t.data,this.start())},t=>{}):i?this.printService.getInvoiceByNoToPrintWithPchallan(i).pipe(Object(r.a)(this.destroy$)).subscribe(t=>{t.success&&(this.printInvoiceData=t.data,this.start(),this.print())},t=>{}):this.start()}start(){if(this.invoiceIds.length>0){this.myDate=new Date,this.myDate=this.datePipe.transform(this.myDate,"dd-MM-yyyy");let t=0;this.printInvoiceData=[];for(const i of this.invoiceIds)this.invoiceNo=i,this.printService.getInvoiceByNoToPrintWithPchallan(this.invoiceNo).pipe(Object(r.a)(this.destroy$)).subscribe(i=>{if(i.success){this.printInvoiceData.push(new m),this.printInvoiceData[t]=i.data;for(let i=0;i<4;i++)this.printInvoiceData[t].qualityList[i]||this.printInvoiceData[t].qualityList.push(new f),this.printInvoiceData[t].batchWithGrList.forEach(t=>{t.batchDataList.sort((function(t,i){return t.sequenceId-i.sequenceId})),t.batchDataList.forEach(t=>{"0"==t.mtr&&(t.mtr="-")})});this.printInvoiceData[t].totalMtr=0,this.printInvoiceData[t].totalAmt=0,this.printInvoiceData[t].totalPcs=0,this.printInvoiceData[t].totalFinishMtr=0,this.printInvoiceData[t].qualityList.forEach((i,e)=>{i.totalMtr&&(this.printInvoiceData[t].totalMtr+=i.totalMtr,this.printInvoiceData[t].totalAmt+=i.amt,this.printInvoiceData[t].totalPcs+=i.pcs,this.printInvoiceData[t].totalFinishMtr+=i.finishMtr)}),this.printInvoiceData[t].batchWithGrList.forEach(i=>{let e=this.printInvoiceData[t].batchWithGrList.filter(t=>t.batchId==i.batchId&&!t.calculationDone);if(e.length>1){let t=0,i=0,n=0,c=0,o=0;e.forEach(e=>{e.calculationDone=!0,e.batchDataList.forEach(e=>{"-"==e.mtr&&(e.mtr="0"),t+=Number(e.mtr),i+=e.finishMtr,"0"==e.mtr&&(e.mtr="-"),e.srNo=++o}),c+=e.batchDataList.length,e.totalFMtr="-",e.totalMtr="-",e.shrinkage="-",e.lotDataLength="-"}),t=t.toFixed(2),i=i.toFixed(2),n=((t-i)/t*100).toFixed(2),e[e.length-1].totalMtr=t,e[e.length-1].totalFMtr=i,e[e.length-1].shrinkage=n,e[e.length-1].lotDataLength=c}else i.calculationDone||(i.calculationDone=!0,i.totalMtr=0,i.totalFMtr=0,i.shrinkage=0,i.lotDataLength=i.batchDataList.length,i.batchDataList.forEach(t=>{"-"==t.mtr&&(t.mtr="0"),i.totalMtr+=Number(t.mtr),i.totalFMtr+=t.finishMtr,"0"==t.mtr&&(t.mtr="-")}),i.totalMtr=i.totalMtr.toFixed(2),i.totalFMtr=i.totalFMtr.toFixed(2),i.shrinkage=((i.totalMtr-i.totalFMtr)/i.totalMtr*100).toFixed(2))});let e=this.printInvoiceData[t].batchWithGrList.length;for(let i=0;i<4-e;i++)this.printInvoiceData[t].batchWithGrList.push(new j);this.printInvoiceData[t].discount||(this.printInvoiceData[t].discount=Number((this.printInvoiceData[t].totalAmt*this.discount/100).toFixed(2))),this.printInvoiceData[t].taxAmt||(this.printInvoiceData[t].taxAmt=Number((this.printInvoiceData[t].totalAmt-this.printInvoiceData[t].discount).toFixed(2))),this.printInvoiceData[t].sgst||(this.printInvoiceData[t].sgst=this.printInvoiceData[t].cgst=Number((.025*this.printInvoiceData[t].taxAmt).toFixed(2))),this.printInvoiceData[t].igst||(this.printInvoiceData[t].igst=this.printInvoiceData[t].cgst+this.printInvoiceData[t].sgst),this.printInvoiceData[t].netAmt||(this.printInvoiceData[t].netAmt=this.printInvoiceData[t].sgst+this.printInvoiceData[t].cgst+this.printInvoiceData[t].taxAmt,this.printInvoiceData[t].netAmt=Math.round(this.printInvoiceData[t].netAmt)),t++,t==this.invoiceIds.length&&this.print()}else this.toastr.error(i.msg),this.router.navigate(["pages/generate_invoice"])},t=>{this.router.navigate(["pages/generate_invoice"])})}else{let t=[];t.push(this.printInvoiceData),this.printInvoiceData=t;let i=0;this.printInvoiceData[i].batchWithGrList.forEach(t=>{t.batchDataList.sort((function(t,i){return t.sequenceId-i.sequenceId}));for(let e=0;e<4;e++)this.printInvoiceData[i].qualityList[e]||this.printInvoiceData[i].qualityList.push(new f);t.batchDataList.forEach(t=>{"0"==t.mtr&&(t.mtr="-")})}),this.printInvoiceData[i].totalMtr=0,this.printInvoiceData[i].totalAmt=0,this.printInvoiceData[i].totalPcs=0,this.printInvoiceData[i].totalFinishMtr=0,this.printInvoiceData[i].qualityList.forEach((t,e)=>{t.totalMtr&&(this.printInvoiceData[i].totalMtr+=t.totalMtr,this.printInvoiceData[i].totalAmt+=t.amt,this.printInvoiceData[i].totalPcs+=t.pcs,this.printInvoiceData[i].totalFinishMtr+=t.finishMtr)}),this.printInvoiceData[i].batchWithGrList.forEach(t=>{let e=this.printInvoiceData[i].batchWithGrList.filter(i=>i.batchId==t.batchId&&i.pchallanRef==t.pchallanRef&&!i.calculationDone);if(e.length>1){let t=0,i=0,n=0,c=0,o=0;e.forEach(e=>{e.calculationDone=!0,e.batchDataList.forEach(e=>{"-"==e.mtr&&(e.mtr="0"),t+=Number(e.mtr),i+=e.finishMtr,"0"==e.mtr&&(e.mtr="-"),e.srNo=++o}),c+=e.batchDataList.length,e.totalFMtr="-",e.totalMtr="-",e.shrinkage="-",e.lotDataLength="-"}),t=t.toFixed(2),i=i.toFixed(2),n=((t-i)/t*100).toFixed(2),e[e.length-1].totalMtr=t,e[e.length-1].totalFMtr=i,e[e.length-1].shrinkage=n,e[e.length-1].lotDataLength=c}else t.calculationDone||(t.calculationDone=!0,t.totalMtr=0,t.totalFMtr=0,t.shrinkage=0,t.lotDataLength=t.batchDataList.length,t.batchDataList.forEach(i=>{"-"==i.mtr&&(i.mtr="0"),t.totalMtr+=Number(i.mtr),t.totalFMtr+=i.finishMtr,"0"==i.mtr&&(i.mtr="-")}),t.totalMtr=t.totalMtr.toFixed(2),t.totalFMtr=t.totalFMtr.toFixed(2),t.shrinkage=((t.totalMtr-t.totalFMtr)/t.totalMtr*100).toFixed(2))});let e=this.printInvoiceData[i].batchWithGrList.length;for(let n=0;n<4-e;n++)this.printInvoiceData[i].batchWithGrList.push(new j);this.printInvoiceData[i].discount||(this.printInvoiceData[i].discount=Number((this.printInvoiceData[i].totalAmt*this.discount/100).toFixed(2))),this.printInvoiceData[i].taxAmt||(this.printInvoiceData[i].taxAmt=Number((this.printInvoiceData[i].totalAmt-this.printInvoiceData[i].discount).toFixed(2))),this.printInvoiceData[i].sgst||(this.printInvoiceData[i].sgst=this.printInvoiceData[i].cgst=Number((.025*this.printInvoiceData[i].taxAmt).toFixed(2))),this.printInvoiceData[i].igst||(this.printInvoiceData[i].igst=this.printInvoiceData[i].cgst+this.printInvoiceData[i].sgst),this.printInvoiceData[i].netAmt||(this.printInvoiceData[i].netAmt=this.printInvoiceData[i].sgst+this.printInvoiceData[i].cgst+this.printInvoiceData[i].taxAmt,this.printInvoiceData[i].netAmt=Math.round(this.printInvoiceData[i].netAmt))}}getInvoiceDataToPrint(){}print(){let t=new u.PrintDocument({title:""});t.append('<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/paper-css/0.3.0/paper.css">'),t.append('<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">'),t.append('<link href="https://cdn.grapecity.com/wijmo/5.latest/styles/wijmo.min.css" rel="stylesheet">');for(let i=0;i<this.printInvoiceData.length;i++){let e=setInterval(()=>{let n=document.getElementById("printpdf"+i);null!=n&&(t.append(n),clearInterval(e))},10)}setTimeout(()=>{t.print(),this.router.navigate(["pages/generate_invoice"])},1e3)}onCancel(){this.activeModal.close(!1)}onPrint(){let t={};t={cgst:this.printInvoiceData[0].cgst,discount:this.printInvoiceData[0].discount,taxAmt:this.printInvoiceData[0].taxAmt,sgst:this.printInvoiceData[0].sgst,netAmt:this.printInvoiceData[0].netAmt,igst:this.printInvoiceData[0].igst,print:"print"},this.activeModal.close(t)}onSave(){let t={};this.printInvoiceData&&this.printInvoiceData.length&&(t={cgst:this.printInvoiceData[0].cgst,discount:this.printInvoiceData[0].discount,taxAmt:this.printInvoiceData[0].taxAmt,sgst:this.printInvoiceData[0].sgst,netAmt:this.printInvoiceData[0].netAmt,igst:this.printInvoiceData[0].igst}),this.activeModal.close(t)}}return t.\u0275fac=function(i){return new(i||t)(P.dc(n.e),P.dc(y.b),P.dc(C),P.dc(c.c),P.dc(c.a),P.dc(O.a))},t.\u0275cmp=P.Xb({type:t,selectors:[["ngx-print-layout"]],inputs:{finalInvoice:"finalInvoice",previewFlag:"previewFlag",discount:"discount",deliveryMode:"deliveryMode",remark:"remark",updateFlag:"updateFlag"},decls:2,vars:2,consts:[[4,"ngIf"],["class","main-modal-invoice-review",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"pad-print",3,"id"],["printpdf{{i}}",""],["class","border-margin-d-t",4,"ngFor","ngForOf"],[1,"border-margin-d-t"],[1,"printpage"],[1,"border-margin"],[1,"container"],[1,"row"],[1,"top-print-head","width-63"],[1,"top-print-head","border-width","width-37"],[1,"border","duplicate-border"],[1,"print-in-border"],[1,"border-dark","row","pd-0"],[1,"col-sm-10"],[1,"card","border-zero"],[1,"card-body","display-flex-end"],[1,"card-block"],[1,"col-sm-12","text-center","font-30"],[1,"text-center","col-sm-12","font-10","formally"],[1,"text-center","col-sm-12","font-18"],[1,"text-center","col-sm-12","font-20"],[1,"col-sm-2","jus-con-center"],[1,"invoice-logo","jus-con-center"],["src","../../../../assets/GLORY SYMBOL.png",1,"print-logo-style"],[1,"content"],[1,"invoice"],[1,"row","col-sm-12","pd-0","mr-0"],[1,"col-sm-8","border-dark"],[1,"col-sm-2","text-nowrap"],[1,"font-15"],[1,"text-left","col-sm-10","border","border-width","font-15"],[1,"col-sm-2"],[1,"col-sm-5","pl-0"],[1,"col-sm-7","border-left","border-width","font-15"],[1,"text-left","col-sm-5","text-nowrap","pl-0",2,"border-right","1px solid rgb(143, 143, 143)"],[1,"display-between","font-15"],[1,"col-sm-7","text-left"],[1,"col-sm-4","border-dark"],[1,"col-md-2","width-33"],[1,"col-md-10","border-left","border-bottom","border-width","width-65",2,"font-size","18px"],[1,"border-dark","font-15"],[1,"table","spacing-low","table-bordered"],[1,"font-14","width-4px"],[1,"font-14","width-37"],[1,"font-14","width-3"],[1,"font-14","width-10"],[1,"font-14","width-8"],[1,"font-14","width-13"],[1,"font-14","width-4"],[1,"font-14"],[1,"font-14","width-15"],[1,"font-bold"],[1,"text-right"],[1,"border-dark","disc-style"],[1,"col-sm-4"],[2,"padding-left","5px"],[1,"text-left"],[1,"text-left","font-18"],[1,"text-right","font-18"],[1,"row","main-invoice-row"],["class","col-md-3",4,"ngFor","ngForOf"],[1,"footer-border",2,"margin-top","3px"],[1,"col-sm-7"],[1,"footer-bottom"],[1,"font-big"],[1,"col-sm-8"],[1,"col-sm-5"],[1,"company-ltd","text-center"],[1,"row","terms-print-fix"],[1,"col-sm-7","terms-border"],[1,"border-top-none","font-big"],[1,"terms-cond"],[1,"auth-font","display-flex","pd-top-60"],["class","text-left",4,"ngIf"],[1,"col-md-3"],[1,"table","lot-border"],["id","invoice-table"],[1,"table","print-invoice-table","border-bootom-none","table-bordered"],["scope","col",1,"pd-top-bottom-2"],["scope","col","class","pd-top-bottom-2",4,"ngIf"],[1,"table-footer"],[1,"pd-top-bottom-0"],["colspan","3",1,"pd-top-bottom-0"],[1,"pd-top-1","text-right"],[1,"main-modal-invoice-review"],[1,"modal-header","inovice-reiview-header"],[1,"text-center","in-pre-text"],["aria-label","Close",1,"close","invoice-close",3,"click"],["aria-hidden","true",1,"invoice-close-cross"],["class","mr-tb-26",4,"ngFor","ngForOf"],[1,"modal-footer","inovice-reiview-footer"],["type","button",1,"btn","btn-primary","btn-sm","btn-design-cancel",3,"click"],["type","button",1,"btn","btn-primary","btn-sm","btn-design-save",3,"click"],[1,"mr-tb-26"],[1,"printpage",3,"id"],[1,"col-sm-12","text-center","font-30","p-mr-bt"],[1,"text-center","col-sm-12","font-20","p-mr-bt"],[1,"col-md-2","width-30"],[1,"col-md-2","width-10"],[1,"col-md-8","border","border-width","font-15","width-60"],[1,"col-sm-3"],[1,"col-sm-1"],[1,"col-sm-8","border","border-width","font-15"],[1,"col-sm-5","text-nowrap"],[1,"col-md-8","border","border-width","width-60",2,"font-size","18px"],[1,"width-4px"],[1,"width-30"],[1,"width-9"],[1,"width-4"],[1,"width-15"],[1,"row","main-invoice-row",2,"padding-bottom","28px"],[2,"height","184mm"]],template:function(t,i){1&t&&(P.hd(0,q,2,1,"div",0),P.hd(1,J,16,1,"div",1)),2&t&&(P.Hc("ngIf",!i.previewFlag),P.Pb(1),P.Hc("ngIf",i.previewFlag))},directives:[n.n,n.m],pipes:[n.y,n.e,n.f,n.w],styles:["@media print{.section[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{margin:0;box-shadow:0}.img[_ngcontent-%COMP%]{max-width:500px}.col-sm-1[_ngcontent-%COMP%], .col-sm-2[_ngcontent-%COMP%], .col-sm-3[_ngcontent-%COMP%], .col-sm-4[_ngcontent-%COMP%], .col-sm-5[_ngcontent-%COMP%], .col-sm-6[_ngcontent-%COMP%], .col-sm-7[_ngcontent-%COMP%], .col-sm-8[_ngcontent-%COMP%], .col-sm-9[_ngcontent-%COMP%], .col-sm-10[_ngcontent-%COMP%], .col-sm-11[_ngcontent-%COMP%], .col-sm-12[_ngcontent-%COMP%]{float:left}.col-sm-12[_ngcontent-%COMP%]{width:100%}.col-sm-11[_ngcontent-%COMP%]{width:91.66666666666666%}.col-sm-10[_ngcontent-%COMP%]{width:83.33333333333334%}.col-sm-9[_ngcontent-%COMP%]{width:75%}.col-sm-8[_ngcontent-%COMP%]{width:66.66666666666666%}.col-sm-7[_ngcontent-%COMP%]{width:58.333333333333336%}.col-sm-6[_ngcontent-%COMP%]{width:50%}.col-sm-5[_ngcontent-%COMP%]{width:41.66666666666667%}.col-sm-4[_ngcontent-%COMP%]{width:33.33333333333333%}.col-sm-3[_ngcontent-%COMP%]{width:25%}.col-sm-2[_ngcontent-%COMP%]{width:16.666666666666664%}.col-sm-1[_ngcontent-%COMP%]{width:8.333333333333332%}.col-md-3[_ngcontent-%COMP%]{width:25%}.lot-border[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border:2px solid #8f8f8f}.footer-border[_ngcontent-%COMP%]{border:1px solid #8f8f8f}.border-top-none[_ngcontent-%COMP%], .footer-bottom[_ngcontent-%COMP%]{padding:5px 15px}.border-top[_ngcontent-%COMP%]{border-top:1px solid;padding:15px}.terms-cond[_ngcontent-%COMP%]{list-style:none}.terms-cond[_ngcontent-%COMP%], .terms-cond[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-left:0!important;padding-left:0!important}.footer-bottom[_ngcontent-%COMP%]{padding-left:15px;border:1px solid #8f8f8f}.border-top-none[_ngcontent-%COMP%]{border:1px solid #8f8f8f;border-top:none}.display-flex[_ngcontent-%COMP%]{display:flex}.display-flex[_ngcontent-%COMP%], .display-flex-end[_ngcontent-%COMP%]{justify-content:center;align-items:flex-end}.height-100[_ngcontent-%COMP%]{height:100%}.company-ltd[_ngcontent-%COMP%]{margin-top:30px}#invoice-table[_ngcontent-%COMP%]{border:1px solid #8f8f8f;border-spacing:0;clear:both;margin:0;height:200mm;width:100%}.lot-border[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding-top:3px;padding-bottom:3px;font-size:15px}#invoice-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border-left:1px solid #8f8f8f}#invoice-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child, td[_ngcontent-%COMP%]:first-child{border-left:none}#invoice-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-bottom:1px solid #8f8f8f}#invoice-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle;font-size:6pt}th[_ngcontent-%COMP%]{font-weight:400}.amount[_ngcontent-%COMP%], .spacing-low[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{text-align:center}.auth-font[_ngcontent-%COMP%], .font-big[_ngcontent-%COMP%], .font-big[_ngcontent-%COMP%]   .terms-cond[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .font-big[_ngcontent-%COMP%]   b[_ngcontent-%COMP%], .invoice_line[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:15px}.company-ltd[_ngcontent-%COMP%]{font-size:18px}.amount[_ngcontent-%COMP%], .invoice_line[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .site[_ngcontent-%COMP%]{font-size:40px;font-weight:600}.invoice_line[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .invoice_line[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:1mm;text-align:center}.lot-border[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 0;font-size:40px}.card-block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:2px}.card-block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:first-child{margin-bottom:1px}.border-margin[_ngcontent-%COMP%]{padding:5px 0 15px}.border-margin-d-t[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:5px}.top-print-head[_ngcontent-%COMP%]{text-align:right;display:inline-block;font-size:15px;padding-top:0;margin-top:0}.spacing-low[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#90ee90!important}.spacing-low[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .spacing-low[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .spacing-low[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-left:2px solid #8f8f8f!important;border-right:2px solid #8f8f8f!important}.spacing-low[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .spacing-low[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child, .spacing-low[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-top:2px solid #8f8f8f!important;border-bottom:2px solid #8f8f8f!important}.spacing-low[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .spacing-low[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:1px .75rem!important}.border-width[_ngcontent-%COMP%], .spacing-low[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{border-width:2px!important}.lot-border[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], table.lot-border[_ngcontent-%COMP%], table.spacing-low[_ngcontent-%COMP%]{margin-bottom:1px!important}.border[_ngcontent-%COMP%], .border-dark[_ngcontent-%COMP%], .border-top[_ngcontent-%COMP%]{border:1px solid #8f8f8f!important}.border-bootom-none[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child, .border-zero[_ngcontent-%COMP%]{border:0!important}.border-bootom-none[_ngcontent-%COMP%]{border-bottom:2px solid #8f8f8f!important}.display-between[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.spacing-low[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;bottom:0}tfoot.spacing-low[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #8f8f8f!important}tfoot.spacing-low[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child{text-align:left!important}.print-invoice-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{height:178mm;overflow:hidden;overflow-x:hidden;display:block;width:100%}.print-invoice-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%], .print-invoice-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}.print-invoice-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%], .print-invoice-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%}.print-invoice-table[_ngcontent-%COMP%], .print-invoice-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .print-invoice-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:2px solid #8f8f8f!important}.print-invoice-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-bottom:2px solid #8f8f8f!important;border-top:0 solid #8f8f8f!important}.print-invoice-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-left:0!important;border-right:0!important}.width-63[_ngcontent-%COMP%]{width:63%}.width-65[_ngcontent-%COMP%]{width:65%}.width-60[_ngcontent-%COMP%]{width:60%}.width-37[_ngcontent-%COMP%]{width:37%}.width-8[_ngcontent-%COMP%]{width:8%}.width-10[_ngcontent-%COMP%]{width:10%}.width-13[_ngcontent-%COMP%]{width:13%}.width-30[_ngcontent-%COMP%]{width:30%}.width-33[_ngcontent-%COMP%]{width:33%}.width-4px[_ngcontent-%COMP%]{width:4px}.width-4[_ngcontent-%COMP%]{width:4%}.width-15[_ngcontent-%COMP%]{width:15%}.width-9[_ngcontent-%COMP%]{width:9%}.duplicate-border[_ngcontent-%COMP%]{border-top-width:3px!important;border-left-width:3px!important;border-right-width:3px!important}.pd-0[_ngcontent-%COMP%]{padding:0}.mr-0[_ngcontent-%COMP%]{margin:0}.display-flex-end[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center}.font-20[_ngcontent-%COMP%]{font-size:20px}.font-18[_ngcontent-%COMP%]{font-size:18px}.font-10[_ngcontent-%COMP%]{font-size:10px}.font-12[_ngcontent-%COMP%]{font-size:12px}.font-14[_ngcontent-%COMP%]{font-size:14px}.font-30[_ngcontent-%COMP%]{font-size:30px}.font-15[_ngcontent-%COMP%]{font-size:15px}.jus-con-center[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.print-logo-style[_ngcontent-%COMP%]{width:380px;height:auto}.font-bold[_ngcontent-%COMP%]{font-weight:700}.disc-style[_ngcontent-%COMP%]{font-size:15px;border-top:0!important}.main-invoice-row[_ngcontent-%COMP%]{margin:3px 2px 5px}.pd-top-bottom-2[_ngcontent-%COMP%]{padding-top:2px!important;padding-bottom:2px!important}.pd-top-bottom-1[_ngcontent-%COMP%]{font-size:13px!important;padding-top:1px!important;padding-bottom:1px!important}.pd-top-1[_ngcontent-%COMP%]{font-size:13.5px!important;padding-top:.8px!important;padding-bottom:.8px!important}.pd-top-bottom-0[_ngcontent-%COMP%]{padding-top:0!important;padding-bottom:0!important}.pd-top-60[_ngcontent-%COMP%]{padding-top:60px!important}}@media print{.printpage[_ngcontent-%COMP%]{display:table;table-layout:fixed;height:auto}}@media print{.pad-print[_ngcontent-%COMP%], .printpage[_ngcontent-%COMP%]{padding-top:.05cm}}@media print{.print-in-border[_ngcontent-%COMP%]{border:3px solid #8f8f8f}.border-margin[_ngcontent-%COMP%]{padding:1rem 4rem}.t-table[_ngcontent-%COMP%]{height:800px}.table-left-right[_ngcontent-%COMP%]{border-left:0!important;border-right:0!important}.tr[_ngcontent-%COMP%]::nth-child(2){height:100vh}.table-left-right[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:3px .75rem;vertical-align:top;text-align:center;width:100%;border-collapse:collapse;height:100%}.table-left-right[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table-left-right[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-left:1px solid #c3c3c3;border-right:1px solid #c3c3c3}.table-left-right[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-top:1px solid #c3c3c3;border-bottom:1px solid #c3c3c3}}.p-mr-bt[_ngcontent-%COMP%]{margin-bottom:20px!important}.section[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{margin:0;box-shadow:0}.img[_ngcontent-%COMP%]{max-width:500px}.col-sm-1[_ngcontent-%COMP%], .col-sm-2[_ngcontent-%COMP%], .col-sm-3[_ngcontent-%COMP%], .col-sm-4[_ngcontent-%COMP%], .col-sm-5[_ngcontent-%COMP%], .col-sm-6[_ngcontent-%COMP%], .col-sm-7[_ngcontent-%COMP%], .col-sm-8[_ngcontent-%COMP%], .col-sm-9[_ngcontent-%COMP%], .col-sm-10[_ngcontent-%COMP%], .col-sm-11[_ngcontent-%COMP%], .col-sm-12[_ngcontent-%COMP%]{float:left}.col-sm-12[_ngcontent-%COMP%]{width:100%}.col-sm-11[_ngcontent-%COMP%]{width:91.66666666666666%}.col-sm-10[_ngcontent-%COMP%]{width:83.33333333333334%}.col-sm-9[_ngcontent-%COMP%]{width:75%}.col-sm-8[_ngcontent-%COMP%]{width:66.66666666666666%}.col-sm-7[_ngcontent-%COMP%]{width:58.333333333333336%}.col-sm-6[_ngcontent-%COMP%]{width:50%}.col-sm-5[_ngcontent-%COMP%]{width:41.66666666666667%}.col-sm-4[_ngcontent-%COMP%]{width:33.33333333333333%}.col-sm-3[_ngcontent-%COMP%]{width:25%}.col-sm-2[_ngcontent-%COMP%]{width:16.666666666666664%}.col-sm-1[_ngcontent-%COMP%]{width:8.333333333333332%}.col-md-3[_ngcontent-%COMP%]{width:25%}.lot-border[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border:2px solid #8f8f8f}.footer-border[_ngcontent-%COMP%]{border:1px solid #8f8f8f}.border-top-none[_ngcontent-%COMP%], .footer-bottom[_ngcontent-%COMP%]{padding:5px 15px}.border-top[_ngcontent-%COMP%]{border-top:1px solid;padding:15px}.terms-cond[_ngcontent-%COMP%]{list-style:none}.terms-cond[_ngcontent-%COMP%], .terms-cond[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-left:0!important;padding-left:0!important}.footer-bottom[_ngcontent-%COMP%]{padding-left:15px;border:1px solid #8f8f8f}.border-top-none[_ngcontent-%COMP%]{border:1px solid #8f8f8f;border-top:none}.display-flex[_ngcontent-%COMP%]{display:flex}.display-flex[_ngcontent-%COMP%], .display-flex-end[_ngcontent-%COMP%]{justify-content:center;align-items:flex-end}.height-100[_ngcontent-%COMP%]{height:100%}.company-ltd[_ngcontent-%COMP%]{margin-top:30px}#invoice-table[_ngcontent-%COMP%]{border:1px solid #8f8f8f;border-spacing:0;clear:both;margin:0;height:200mm;width:100%}.lot-border[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding-top:3px;padding-bottom:3px;font-size:15px}#invoice-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border-left:1px solid #8f8f8f}#invoice-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child, td[_ngcontent-%COMP%]:first-child{border-left:none}#invoice-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-bottom:1px solid #8f8f8f}#invoice-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle;font-size:6pt}th[_ngcontent-%COMP%]{font-weight:400}.amount[_ngcontent-%COMP%], .spacing-low[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{text-align:center}.auth-font[_ngcontent-%COMP%], .font-big[_ngcontent-%COMP%], .font-big[_ngcontent-%COMP%]   .terms-cond[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .font-big[_ngcontent-%COMP%]   b[_ngcontent-%COMP%], .invoice_line[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:15px}.company-ltd[_ngcontent-%COMP%]{font-size:18px}.amount[_ngcontent-%COMP%], .invoice_line[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .site[_ngcontent-%COMP%]{font-size:40px;font-weight:600}.invoice_line[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .invoice_line[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:1mm;text-align:center}.lot-border[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 0;font-size:40px}.card-block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:2px}.card-block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:first-child{margin-bottom:1px}.border-margin[_ngcontent-%COMP%]{padding:5px 0 15px}.top-print-head[_ngcontent-%COMP%]{text-align:right;display:inline-block;font-size:15px;padding-top:0;margin-top:0}.spacing-low[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f5f5f5!important}.spacing-low[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .spacing-low[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .spacing-low[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-left:2px solid #8f8f8f!important;border-right:2px solid #8f8f8f!important}.spacing-low[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .spacing-low[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child, .spacing-low[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-top:2px solid #8f8f8f!important;border-bottom:2px solid #8f8f8f!important}.spacing-low[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .spacing-low[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:1px .75rem!important}.border-width[_ngcontent-%COMP%], .spacing-low[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{border-width:2px!important}.lot-border[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], table.lot-border[_ngcontent-%COMP%], table.spacing-low[_ngcontent-%COMP%]{margin-bottom:1px!important}.border[_ngcontent-%COMP%], .border-dark[_ngcontent-%COMP%], .border-top[_ngcontent-%COMP%]{border:1px solid #8f8f8f!important}.border-bootom-none[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child, .border-zero[_ngcontent-%COMP%]{border:0!important}.border-bootom-none[_ngcontent-%COMP%]{border-bottom:2px solid #8f8f8f!important}.display-between[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.spacing-low[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;bottom:0}tfoot.spacing-low[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #8f8f8f!important}tfoot.spacing-low[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child{text-align:left!important}.print-invoice-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{height:178mm;overflow:hidden;overflow-x:hidden;display:block;width:100%}.print-invoice-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%], .print-invoice-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}.print-invoice-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%], .print-invoice-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%}.print-invoice-table[_ngcontent-%COMP%], .print-invoice-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .print-invoice-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:2px solid #8f8f8f!important}.print-invoice-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-bottom:2px solid #8f8f8f!important;border-top:0 solid #8f8f8f!important}.print-invoice-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-left:0!important;border-right:0!important}.width-63[_ngcontent-%COMP%]{width:63%}.width-65[_ngcontent-%COMP%]{width:65%}.width-60[_ngcontent-%COMP%]{width:60%}.width-37[_ngcontent-%COMP%]{width:37%}.width-8[_ngcontent-%COMP%]{width:8%}.width-10[_ngcontent-%COMP%]{width:10%}.width-13[_ngcontent-%COMP%]{width:13%}.width-30[_ngcontent-%COMP%]{width:30%}.width-33[_ngcontent-%COMP%]{width:33%}.width-4px[_ngcontent-%COMP%]{width:4px}.width-4[_ngcontent-%COMP%]{width:4%}.width-15[_ngcontent-%COMP%]{width:15%}.width-9[_ngcontent-%COMP%]{width:9%}.duplicate-border[_ngcontent-%COMP%]{border-top-width:3px!important;border-left-width:3px!important;border-right-width:3px!important}.pd-0[_ngcontent-%COMP%]{padding:0}.mr-0[_ngcontent-%COMP%]{margin:0}.display-flex-end[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center}.font-20[_ngcontent-%COMP%]{font-size:20px}.font-18[_ngcontent-%COMP%]{font-size:18px}.font-10[_ngcontent-%COMP%]{font-size:10px}.font-12[_ngcontent-%COMP%]{font-size:12px}.font-30[_ngcontent-%COMP%]{font-size:30px}.font-13[_ngcontent-%COMP%]{font-size:13px}.font-15[_ngcontent-%COMP%]{font-size:15px}.jus-con-center[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.print-logo-style[_ngcontent-%COMP%]{width:180px;height:auto}.font-bold[_ngcontent-%COMP%]{font-weight:700}.disc-style[_ngcontent-%COMP%]{font-size:15px;border-top:0!important}.main-invoice-row[_ngcontent-%COMP%]{margin:3px 2px 5px}.pd-top-bottom-2[_ngcontent-%COMP%]{padding-top:2px!important;padding-bottom:2px!important}.pd-top-bottom-1[_ngcontent-%COMP%]{font-size:13px!important;padding-top:1px!important;padding-bottom:1px!important}.pd-top-bottom-0[_ngcontent-%COMP%]{padding-top:0!important;padding-bottom:0!important}.pd-top-60[_ngcontent-%COMP%]{padding-top:60px!important}.printpage[_ngcontent-%COMP%]{background:#fff;display:block;margin:0 auto .5cm;box-shadow:0 0 .5cm rgba(0,0,0,.5)}.print-in-border[_ngcontent-%COMP%]{border:3px solid #8f8f8f}.border-margin[_ngcontent-%COMP%]{padding:1rem 4rem}.t-table[_ngcontent-%COMP%]{height:800px}.table-left-right[_ngcontent-%COMP%]{border-left:0!important;border-right:0!important}.tr[_ngcontent-%COMP%]::nth-child(2){height:100vh}.table-left-right[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:3px .75rem;vertical-align:top;text-align:center;width:100%;border-collapse:collapse;height:100%}.table-left-right[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table-left-right[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-left:1px solid #c3c3c3;border-right:1px solid #c3c3c3}.table-left-right[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-top:1px solid #c3c3c3;border-bottom:1px solid #c3c3c3}.mr-bt-5[_ngcontent-%COMP%]{margin-bottom:15px!important}.main-modal-invoice-review[_ngcontent-%COMP%]{max-height:calc(100vh - 60px);overflow-y:auto}.inovice-reiview-footer[_ngcontent-%COMP%]{bottom:0}.inovice-reiview-footer[_ngcontent-%COMP%], .inovice-reiview-header[_ngcontent-%COMP%]{position:absolute;width:100%;background:#fff;padding:6px 0}.inovice-reiview-header[_ngcontent-%COMP%]{top:0;z-index:99999999}.in-pre-text[_ngcontent-%COMP%]{width:100%;margin:0}.mr-tb-26[_ngcontent-%COMP%]{margin-top:26px;margin-bottom:50px}.invoice-close[_ngcontent-%COMP%]{position:absolute;right:13px;top:1px;opacity:1!important}.invoice-close-cross[_ngcontent-%COMP%]{color:#aa3634!important}.invoice-close[_ngcontent-%COMP%]:focus{outline:none!important;border:none!important}.formally[_ngcontent-%COMP%]{margin-top:-9px}.print-heading-refix[_ngcontent-%COMP%]{margin-top:-8px}.terms-print-fix[_ngcontent-%COMP%]{margin-bottom:-2px}.terms-border[_ngcontent-%COMP%]{margin-bottom:-3px}.left-side[_ngcontent-%COMP%]{text-align:left!important}.right-side[_ngcontent-%COMP%]{text-align:right!important}"]}),t})();var it=e("+kI6"),et=e("aceb"),nt=e("3Pt+");let ct=(()=>{class t{constructor(t,i){this.activeModal=t,this.router=i,this.finalcheckedrows=[],this.destroy$=new d.a}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}ngOnInit(){}printInvoice(){if(this.invoiceNo){this.finalcheckedrows.push(this.invoiceNo);const t={},i=this.finalcheckedrows;if(0!=i.length){t.myArray=JSON.stringify(i);const e={queryParams:t};this.activeModal.close(),this.router.navigate(["/pages/generate_invoice/print/"],e),this.activeModal.close()}}}closeModal(){this.activeModal.close()}}return t.\u0275fac=function(i){return new(i||t)(P.dc(O.a),P.dc(c.c))},t.\u0275cmp=P.Xb({type:t,selectors:[["ngx-input-invoice"]],decls:19,vars:1,consts:[[1,"nbStyle"],[1,"nb-header"],[1,"row"],[1,"col-md-12"],[1,"nb-text","txt-ov-elips"],[1,"col-md-6"],[1,"form-group"],["type","number","name","invoice","id","invoice",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-md-9","mobile-btn-center","text-btn-right","mt-50"],["type","button",1,"btn","btn-primary","btn-sm","btn-design-cancel",3,"click"],["type","button",1,"btn","btn-primary","btn-sm","btn-design-save","mob-stock","button-base","ripple",3,"click"]],template:function(t,i){1&t&&(P.jc(0,"nb-card",0),P.jc(1,"nb-card-header",1),P.jc(2,"div",2),P.jc(3,"div",3),P.jc(4,"h2",4),P.jd(5,"Print Invoice"),P.ic(),P.ic(),P.ic(),P.ic(),P.jc(6,"nb-card-body"),P.jc(7,"div",2),P.jc(8,"div",5),P.jc(9,"div",6),P.jc(10,"label"),P.jd(11,"Invoice No"),P.ic(),P.jc(12,"input",7),P.uc("ngModelChange",(function(t){return i.invoiceNo=t})),P.ic(),P.ic(),P.ic(),P.ic(),P.jc(13,"div",2),P.jc(14,"div",8),P.jc(15,"button",9),P.uc("click",(function(){return i.closeModal()})),P.jd(16,"CANCEL"),P.ic(),P.jc(17,"button",10),P.uc("click",(function(){return i.printInvoice()})),P.jd(18,"OK"),P.ic(),P.ic(),P.ic(),P.ic(),P.ic()),2&t&&(P.Pb(12),P.Hc("ngModel",i.invoiceNo))},directives:[et.u,et.x,et.t,nt.q,nt.a,nt.l,nt.o],styles:[""]}),t})();var ot=e("ZOsW"),at=e("lDzL");function rt(t,i){1&t&&(P.jc(0,"div"),P.jc(1,"h2",37),P.jd(2,"Add Invoice"),P.ic(),P.ic())}function dt(t,i){1&t&&(P.jc(0,"h2",37),P.jd(1,"Update Invoice"),P.ic())}function st(t,i){if(1&t&&(P.jc(0,"ng-option",38),P.jd(1),P.ic()),2&t){const t=i.$implicit;P.Hc("value",t.id),P.Pb(1),P.kd(t.partyName)}}function lt(t,i){1&t&&(P.jc(0,"div",39),P.jc(1,"span"),P.jd(2,"Party name is required"),P.ic(),P.ic())}function ht(t,i){1&t&&(P.jc(0,"div",39),P.jc(1,"span"),P.jd(2,"Discount is required"),P.ic(),P.ic())}const gt=function(t){return{"is-invalid":t}};function pt(t,i){if(1&t){const t=P.kc();P.jc(0,"div",40),P.jc(1,"label",16),P.jd(2,"Discount %"),P.ic(),P.jc(3,"input",41,42),P.uc("ngModelChange",(function(i){return P.Xc(t),P.yc().discountChange=i})),P.ic(),P.hd(5,ht,3,0,"div",20),P.ic()}if(2&t){const t=P.Uc(4),i=P.yc();P.Pb(3),P.Hc("ngModel",i.discountChange)("ngClass",P.Nc(3,gt,t.invalid&&(i.formSubmitted||t.touched))),P.Pb(2),P.Hc("ngIf",i.formSubmitted&&t.invalid||t.invalid&&t.touched)}}function bt(t,i){if(1&t){const t=P.kc();P.jc(0,"div",40),P.jc(1,"label"),P.jd(2,"Remark"),P.ic(),P.jc(3,"input",43,44),P.uc("ngModelChange",(function(i){return P.Xc(t),P.yc().remark=i})),P.ic(),P.ic()}if(2&t){const t=P.yc();P.Pb(3),P.Hc("ngModel",t.remark)}}function ut(t,i){if(1&t&&(P.jc(0,"ng-option",38),P.jd(1),P.ic()),2&t){const t=i.$implicit;P.Hc("value",t.value),P.Pb(1),P.kd(t.name)}}function mt(t,i){1&t&&(P.jc(0,"div",39),P.jc(1,"span"),P.jd(2,"Delivery Mode is required"),P.ic(),P.ic())}function jt(t,i){if(1&t){const t=P.kc();P.jc(0,"div",14),P.jc(1,"div",15),P.jc(2,"label",16),P.jd(3,"Delivery Mode"),P.ic(),P.jc(4,"ng-select",45,46),P.uc("ngModelChange",(function(i){return P.Xc(t),P.yc().deliveryMode=i})),P.hd(6,ut,2,2,"ng-option",19),P.ic(),P.hd(7,mt,3,0,"div",20),P.ic(),P.ic()}if(2&t){const t=P.Uc(5),i=P.yc();P.Pb(4),P.Hc("ngModel",i.deliveryMode)("ngClass",P.Nc(4,gt,t.invalid&&(i.formSubmitted||t.touched))),P.Pb(2),P.Hc("ngForOf",i.deliveryList),P.Pb(1),P.Hc("ngIf",i.formSubmitted&&t.invalid||t.invalid&&t.touched)}}function ft(t,i){1&t&&(P.jc(0,"div",50),P.jc(1,"span"),P.jd(2,"Required"),P.ic(),P.ic())}function vt(t,i){if(1&t){const t=P.kc();P.jc(0,"input",47,48),P.uc("ngModelChange",(function(e){return P.Xc(t),i.row.rate=e}))("keyup",(function(e){P.Xc(t);const n=i.rowIndex;return P.yc().enterClicked(n,e)})),P.ic(),P.hd(2,ft,3,0,"div",49)}if(2&t){const t=i.row,e=i.rowIndex,n=P.Uc(1),c=P.yc();P.Jc("name","rateChnage",e,""),P.Hc("ngModel",t.rate)("id","invoice"+e+"-rateChange"),P.Pb(2),P.Hc("ngIf",c.formSubmitted&&n.invalid)}}let Pt=(()=>{class t{constructor(t,i,e,n,c,o,a,r){this.generateInvoiceService=t,this.partyService=i,this.route=e,this._route=n,this.toastr=c,this.jwt=o,this.commonService=a,this.modalService=r,this.deliveryMode=null,this.discountFlag=!1,this.obj={batchAndStockIdList:[],createdBy:null,invoiceNo:null,userHeadId:null},this.invoiceObj={batchAndStockIdList:[]},this.finalcheckedrows=[],this.finalbatch=[],this.deliveryList=[{name:"Hand Delivery",value:"hand"},{name:"Tempo Delivery",value:"tempo"}],this.disableButton=!1,this.errorData=s,this.mtr=[],this.invoiceValues=new l.a,this.formSubmitted=!1,this.loading=!1,this.merge=[],this.invoiceLotLimit=4,this.limitError=!1,this.destroy$=new d.a,this.final=[],this.selected=[]}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}ngOnInit(){this.userId=this.jwt.getDecodeToken("userId"),this.userHeadId=this.commonService.getUserHeadId().userHeadId,this.getPartyList(),this.getUserId(),this.currentInvoiceId&&this.getUpdateData()}getUserId(){this.currentInvoiceId=this._route.snapshot.paramMap.get("id")}getUpdateData(){this.loading=!0,null!=this.currentInvoiceId&&this.generateInvoiceService.getDataByInvoiceNumberByChallan(this.currentInvoiceId).pipe(Object(r.a)(this.destroy$)).subscribe(t=>{t.success?(this.invoiceValues.partyId=t.data.partyId,this.discountFlag=!0,this.discountChange=t.data.percentageDiscount,this.remark=t.data.remark,this.deliveryMode=t.data.deliveryMode,this.flag=t.data.isSendToParty,this.batch=t.data.batchWithControlIdList,this.finalbatch=[...this.batch],this.merge=[...this.finalbatch],this.loading=!1,this.disableButton=!1,this.selected=t.data.batchWithControlIdList,this.finalcheckedrows=[...this.selected]):(this.loading=!1,this.disableButton=!1,this.merge=[])},t=>{this.loading=!1,this.disableButton=!1,this.merge=[]}),this.disableButton=!1}getPartyList(){this.loading=!0,this.partyService.getAllPartyNameList().pipe(Object(r.a)(this.destroy$)).subscribe(t=>{t.success?(this.party=t.data,this.loading=!1):this.loading=!1},t=>{this.loading=!1})}getPChallanList(t){this.party.forEach(t=>{t.id==this.invoiceValues.partyId&&(this.discountChange=t.percentageDiscount)}),this.discountFlag=!0,this.loading=!0,null!=t?this.invoiceValues.partyId&&this.generateInvoiceService.getPChallanByParty(this.invoiceValues.partyId).pipe(Object(r.a)(this.destroy$)).subscribe(t=>{t.success?(this.finalbatch=t.data,this.finalbatch.forEach(t=>{t.wt=t.wt.toFixed(2)}),this.merge=this.finalbatch,this.finalcheckedrows=[],this.selected=[],this.loading=!1):(this.loading=!1,this.merge=[])},t=>{this.loading=!1,this.merge=[]}):this.loading=!1}addInvoice(t){if(this.limitError)return void this.toastr.error("Gr limit exceeds");if(!this.deliveryMode)return void this.toastr.error("Delivery Mode required");let i=this.party.filter(t=>t.id==this.invoiceValues.partyId);if(this.finalcheckedrows.length<=4){if(this.formSubmitted=!0,this.final=[],this.finalcheckedrows.length>0){this.finalcheckedrows.map(t=>{let i=new l.c;i.batchId=t.batchId,i.pchallanRef=t.pchallanRef,i.stockId=t.controlId,i.rate=t.rate,this.final.push(i)});let e={batchAndStockIdList:this.final,createdBy:this.userId,userHeadId:this.userHeadId,cgst:null,sgst:null,igst:null,percentageDiscount:this.discountChange,deliveryMode:this.deliveryMode,discount:null,taxAmt:null,netAmt:null,password:"",passwordFlag:null,remark:this.remark,createFlag:!0};if(i[0].pendingAmt>i[0].creditLimit)this.modalService.open(it.a).result.then(i=>{if(i){const n=this.modalService.open(tt,{size:"xl"});n.componentInstance.finalInvoice=e,n.componentInstance.previewFlag=!0,n.componentInstance.discount=this.discountChange,n.componentInstance.remark=this.remark,n.componentInstance.updateFlag=!1,n.result.then(n=>{n?(e.cgst=n.cgst,e.sgst=n.sgst,e.igst=n.igst,e.discount=n.discount,e.netAmt=Math.round(n.netAmt),e.taxAmt=n.taxAmt,e.password=i,e.passwordFlag=!0,t.valid?this.generateInvoiceService.addInvoicedataWithPchallan(e).pipe(Object(r.a)(this.destroy$)).subscribe(t=>Object(a.a)(this,void 0,void 0,(function*(){t.success?(this.invoiceNo=t.data,this.toastr.success(s.Add_Success),this.merge=[],this.disableButton=!1,"print"===n.print&&this.print(this.invoiceNo),this.limitError=!1,this.invoiceLotLimit=4):(this.disableButton=!1,this.toastr.error(s.Add_Error),this.merge=[])})),t=>{this.disableButton=!1,this.toastr.error(s.Serever_Error)}):this.disableButton=!1,this.invoiceValues.partyId=null,this.discountFlag=!1,this.discountChange=null,this.remark=""):this.disableButton=!1})}});else{const i=this.modalService.open(tt,{size:"xl"});i.componentInstance.finalInvoice=e,i.componentInstance.previewFlag=!0,i.componentInstance.discount=this.discountChange,i.componentInstance.deliveryMode=this.deliveryMode,i.componentInstance.remark=this.remark,i.componentInstance.updateFlag=!1,i.result.then(i=>{i?(e.cgst=i.cgst,e.sgst=i.sgst,e.igst=i.igst,e.discount=i.discount,e.netAmt=Math.round(i.netAmt),e.taxAmt=i.taxAmt,e.password="",e.passwordFlag=!1,t.valid?this.generateInvoiceService.addInvoicedataWithPchallan(e).pipe(Object(r.a)(this.destroy$)).subscribe(t=>Object(a.a)(this,void 0,void 0,(function*(){t.success?(this.invoiceNo=t.data,this.toastr.success(s.Add_Success),this.merge=[],this.disableButton=!1,this.limitError=!1,this.invoiceLotLimit=4,"print"===i.print&&this.print(this.invoiceNo)):(this.disableButton=!1,this.toastr.error(s.Add_Error),this.merge=[])})),t=>{this.disableButton=!1,this.toastr.error(s.Serever_Error)}):this.disableButton=!1,this.invoiceValues.partyId=null,this.discountFlag=!1,this.discountChange=null,this.remark=""):this.disableButton=!1})}}}else this.toastr.warning("Select upto 4 batches only")}print(t){const i={};i.invoice=t,this.route.navigate(["/pages/generate_invoice/print"],{queryParams:i})}updateInvoice(t){if(this.limitError)return void this.toastr.error("Gr limit exceeds");if(!this.deliveryMode)return void this.toastr.error("Delivery Mode required");let i=this.party.filter(t=>t.id==this.invoiceValues.partyId);if(this.finalcheckedrows.length<=4){this.disableButton=!0,this.formSubmitted=!0,this.final=[],this.finalcheckedrows.map((t,i)=>{let e=new l.c;e.batchId=t.batchId,e.pchallanRef=t.pchallanRef,e.stockId=t.controlId,e.rate=t.rate,this.final.push(e)});let e={batchAndStockIdList:this.final,createdBy:this.userId,userHeadId:this.userHeadId,invoiceNo:this.currentInvoiceId,cgst:null,sgst:null,igst:null,percentageDiscount:this.discountChange,deliveryMode:this.deliveryMode,discount:null,taxAmt:null,netAmt:null,password:"",passwordFlag:null,remark:this.remark,createFlag:!1};if(i[0].pendingAmt>i[0].creditLimit)this.modalService.open(it.a).result.then(i=>{if(i){const n=this.modalService.open(tt,{size:"xl"});n.componentInstance.finalInvoice=e,n.componentInstance.previewFlag=!0,n.componentInstance.discount=this.discountChange,n.componentInstance.deliveryMode=this.deliveryMode,n.componentInstance.remark=this.remark,n.componentInstance.updateFlag=!0,n.result.then(n=>{n?(e.cgst=n.cgst,e.sgst=n.sgst,e.igst=n.igst,e.discount=n.discount,e.netAmt=Math.round(n.netAmt),e.taxAmt=n.taxAmt,e.password=i,e.passwordFlag=!0,t.valid?this.generateInvoiceService.updateInvoiceWithPchallan(e).pipe(Object(r.a)(this.destroy$)).subscribe(t=>{t.success?(this.invoiceNo=t.data,"print"===n.print&&this.print(this.invoiceNo),this.limitError=!1,this.invoiceLotLimit=4,this.toastr.success(s.Update_Success),this.disableButton=!1):(this.disableButton=!1,this.toastr.error(s.Update_Error))},t=>{this.disableButton=!1,this.toastr.error(s.Serever_Error)}):this.disableButton=!1,this.invoiceValues.partyId=null,this.discountFlag=!1,this.discountChange=null,this.remark=""):this.disableButton=!1})}});else{const i=this.modalService.open(tt,{size:"xl"});i.componentInstance.finalInvoice=e,i.componentInstance.previewFlag=!0,i.componentInstance.discount=this.discountChange,i.componentInstance.remark=this.remark,i.componentInstance.updateFlag=!0,i.result.then(i=>{i?(e.cgst=i.cgst,e.sgst=i.sgst,e.igst=i.igst,e.discount=i.discount,e.netAmt=Math.round(i.netAmt),e.taxAmt=i.taxAmt,e.password="",e.passwordFlag=!1,t.valid?this.generateInvoiceService.updateInvoiceWithPchallan(e).pipe(Object(r.a)(this.destroy$)).subscribe(t=>{t.success?(this.invoiceNo=t.data,"print"===i.print&&this.print(this.invoiceNo),this.limitError=!1,this.invoiceLotLimit=4,this.toastr.success(s.Update_Success),this.disableButton=!1):(this.disableButton=!1,this.toastr.error(s.Update_Error))},t=>{this.disableButton=!1,this.toastr.error(s.Serever_Error)}):this.disableButton=!1,this.invoiceValues.partyId=null,this.discountFlag=!1,this.discountChange=null,this.remark=""):this.disableButton=!1})}}else this.toastr.warning("Select upto 4 batches only")}onSelect(t){this.limitError=!1,this.finalcheckedrows=[],this.invoiceLotLimit=4,t.selected.length<=4?(t.selected.forEach(t=>{t.totalPcs<=30?this.invoiceLotLimit>0?(this.finalcheckedrows.push(t),this.invoiceLotLimit--):this.limitError=!0:t.totalPcs>30&&t.totalPcs<=60?this.invoiceLotLimit>1?(this.finalcheckedrows.push(t),this.invoiceLotLimit-=2):this.limitError=!0:t.totalPcs>60&&t.totalPcs<=90?this.invoiceLotLimit>2?(this.finalcheckedrows.push(t),this.invoiceLotLimit-=3):this.limitError=!0:t.totalPcs>90&&t.totalPcs<=120&&(this.invoiceLotLimit>3?(this.finalcheckedrows.push(t),this.invoiceLotLimit-=4):this.limitError=!0)}),this.limitError&&this.toastr.error("Gr limit exceeds")):(this.limitError=!0,this.toastr.warning("Select upto 4 batches only"))}tableChange(t){"view table"===t?this.route.navigate(["/pages/generate_invoice/view"]):"report"===t?this.route.navigate(["/pages/all-report"]):"sign"==t?this.route.navigate(["/pages/generate_invoice/sign"]):"received"==t?this.route.navigate(["/pages/generate_invoice/sign/view"]):"print"==t?this.modalService.open(ct):"return"==t&&this.route.navigate(["/pages/stock-batch/return-lot"])}enterClicked(t,i){if(13==(i.keyCode?i.keyCode:i.which)&&t<this.merge.length){let i="invoice"+(t+1)+"-rateChange",e=setInterval(()=>{const t=document.getElementById(i);t&&(t.focus(),t.select(),clearInterval(e))})}}}return t.\u0275fac=function(i){return new(i||t)(P.dc(h.a),P.dc(p.a),P.dc(c.c),P.dc(c.a),P.dc(y.b),P.dc(g.a),P.dc(b.a),P.dc(O.e))},t.\u0275cmp=P.Xb({type:t,selectors:[["ngx-add-edit-invoice"]],decls:52,vars:20,consts:[[1,"nb-header"],[1,"row"],[1,"col-md-5","col-6","display-flex-start","max-width-device"],["placeholder","Select",1,"btn","btn-md",3,"change"],["value","view table"],["value","report"],["value","print"],["value","received"],["value","sign"],["value","return"],[1,"col-md-7","col-6"],[4,"ngIf","ngIfElse"],["updateS",""],["invoiceForm","ngForm"],[1,"col-md-3"],[1,"form-group"],[1,"required"],["name","partyId","appendTo","body","required","","placeholder","Party Name",1,"required-error-dropdown","dropdown-name",3,"ngModel","ngClass","readonly","ngModelChange","change"],["partyId1","ngModel"],[3,"value",4,"ngFor","ngForOf"],["class","input-required",4,"ngIf"],["class","form-group col-md-3",4,"ngIf"],["class","col-md-3",4,"ngIf"],[1,"material",3,"rows","headerHeight","footerHeight","selectionType","selected","select"],["name","Batch Id","prop","batchId",3,"headerCheckboxable","checkboxable","maxWidth"],["name","Pchallan","prop","pchallanRef"],["name","MTR","prop","mtr"],["name","WT","prop","wt"],["name","Quality Id","prop","qualityId"],["name","Quality Name","prop","qualityName"],["name","Rate","prop","rate"],["ngx-datatable-cell-template",""],["name","Total Finish Mtr","prop","totalFinishMtr"],["name","Total Pcs","prop","totalPcs"],[1,"col-md-12","mobile-btn-center","text-btn-right"],[1,"padding-bt-tp"],["type","button",1,"btn","btn-primary","btn-sm","btn-design-save","button-base","ripple",2,"margin-right","20px",3,"click"],[1,"nb-text"],[3,"value"],[1,"input-required"],[1,"form-group","col-md-3"],["type","number","id","percentageDiscount","nbinput","","fullwidth","","fieldsize","small","name","percentageDiscount","placeholder","Discount",1,"form-control","size-small",3,"ngModel","ngClass","ngModelChange"],["disChange","ngModel"],["type","text","id","remark","nbinput","","fullwidth","","fieldsize","small","name","remark","placeholder","Remark",1,"form-control","size-small",3,"ngModel","ngModelChange"],["remarkInvoice","ngModel"],["name","delivery","appendTo","body","required","","placeholder","Delivery Mode",1,"required-error-dropdown","dropdown-name",3,"ngModel","ngClass","ngModelChange"],["delivery1","ngModel"],["type","number","id","rateChnage","min","0",1,"tableForm","line-height-subtable",3,"name","ngModel","id","ngModelChange","keyup"],["rateChnage","ngModel"],["class","input-required display-inlineblock",4,"ngIf"],[1,"input-required","display-inlineblock"]],template:function(t,i){if(1&t){const t=P.kc();P.jc(0,"nb-card"),P.jc(1,"nb-card-header",0),P.jc(2,"div",1),P.jc(3,"div",2),P.jc(4,"ng-select",3),P.uc("change",(function(t){return i.tableChange(t)})),P.jc(5,"ng-option",4),P.jd(6,"View Table"),P.ic(),P.jc(7,"ng-option",5),P.jd(8,"Report"),P.ic(),P.jc(9,"ng-option",6),P.jd(10,"Print Invoice"),P.ic(),P.jc(11,"ng-option",7),P.jd(12,"Received Invoices"),P.ic(),P.jc(13,"ng-option",8),P.jd(14,"Sign New Invoices"),P.ic(),P.jc(15,"ng-option",9),P.jd(16,"Lot return"),P.ic(),P.ic(),P.ic(),P.jc(17,"div",10),P.hd(18,rt,3,0,"div",11),P.hd(19,dt,2,0,"ng-template",null,12,P.id),P.ic(),P.ic(),P.ic(),P.jc(21,"nb-card-body"),P.jc(22,"form",null,13),P.jc(24,"div",1),P.jc(25,"div",14),P.jc(26,"div",15),P.jc(27,"label",16),P.jd(28,"Party Name"),P.ic(),P.jc(29,"ng-select",17,18),P.uc("ngModelChange",(function(t){return i.invoiceValues.partyId=t}))("change",(function(t){return i.getPChallanList(t)})),P.hd(31,st,2,2,"ng-option",19),P.ic(),P.hd(32,lt,3,0,"div",20),P.ic(),P.ic(),P.hd(33,pt,6,5,"div",21),P.hd(34,bt,5,1,"div",21),P.hd(35,jt,8,6,"div",22),P.ic(),P.jc(36,"ngx-datatable",23),P.uc("select",(function(t){return i.onSelect(t)})),P.ec(37,"ngx-datatable-column",24),P.ec(38,"ngx-datatable-column",25),P.ec(39,"ngx-datatable-column",26),P.ec(40,"ngx-datatable-column",27),P.ec(41,"ngx-datatable-column",28),P.ec(42,"ngx-datatable-column",29),P.jc(43,"ngx-datatable-column",30),P.hd(44,vt,3,4,"ng-template",31),P.ic(),P.ec(45,"ngx-datatable-column",32),P.ec(46,"ngx-datatable-column",33),P.ic(),P.jc(47,"div",1),P.jc(48,"div",34),P.jc(49,"div",35),P.jc(50,"button",36),P.uc("click",(function(){P.Xc(t);const e=P.Uc(23);return null==i.currentInvoiceId?i.addInvoice(e):i.updateInvoice(e)})),P.jd(51,"Generate Invoice"),P.ic(),P.ic(),P.ic(),P.ic(),P.ic(),P.ic(),P.ic()}if(2&t){const t=P.Uc(20),e=P.Uc(30);P.Pb(18),P.Hc("ngIf",null==i.currentInvoiceId)("ngIfElse",t),P.Pb(11),P.Hc("ngModel",i.invoiceValues.partyId)("ngClass",P.Nc(18,gt,e.invalid&&(i.formSubmitted||e.touched)))("readonly",null!=i.currentInvoiceId),P.Pb(2),P.Hc("ngForOf",i.party),P.Pb(1),P.Hc("ngIf",i.formSubmitted&&e.invalid||e.invalid&&e.touched),P.Pb(1),P.Hc("ngIf",i.discountFlag),P.Pb(1),P.Hc("ngIf",i.discountFlag),P.Pb(1),P.Hc("ngIf",i.discountFlag),P.Pb(1),P.Hc("rows",i.merge)("headerHeight",31)("footerHeight",31)("selectionType","checkbox")("selected",i.selected),P.Pb(1),P.Hc("headerCheckboxable",!0)("checkboxable",!0)("maxWidth",150)}},directives:[et.u,et.x,ot.a,ot.c,n.n,et.t,nt.x,nt.m,nt.n,nt.t,nt.l,nt.o,n.l,n.m,at.e,at.b,at.a,nt.q,nt.a],styles:[""]}),t})();var Mt=e("3jao"),Ct=e("dfbw"),yt=e("klsY"),Ot=e("qZsz"),xt=e("+lss");const _t=["searchfilter"];function It(t,i){if(1&t){const t=P.kc();P.jc(0,"div",39),P.jc(1,"span",40),P.jd(2),P.ic(),P.jd(3," : "),P.jc(4,"span",41),P.jd(5),P.ic(),P.jc(6,"span",42),P.uc("click",(function(){P.Xc(t);const e=i.$implicit;return P.yc(2).onClear(e.field[0])})),P.jc(7,"strong"),P.jd(8,"x"),P.ic(),P.ic(),P.ic()}if(2&t){const t=i.$implicit;P.Pb(2),P.kd(t.field[0]),P.Pb(3),P.kd(t.value)}}function wt(t,i){if(1&t){const t=P.kc();P.hc(0),P.jc(1,"div",33),P.jc(2,"label",34),P.jd(3,"Filter By : "),P.ic(),P.jc(4,"div",35),P.jc(5,"div",36),P.hd(6,It,9,2,"div",37),P.jc(7,"div",38),P.uc("click",(function(){return P.Xc(t),P.yc().onClearFilter()})),P.jd(8,"Clear All"),P.ic(),P.ic(),P.ic(),P.ic(),P.gc()}if(2&t){const t=P.yc();P.Pb(6),P.Hc("ngForOf",t.requestData.data.parameters)}}const kt=function(){return{type:"zoom"}},Dt=function(t){return{animation:t}},St=function(t){return["/pages/generate_invoice/edit",t]};function Ft(t,i){if(1&t&&P.ec(0,"nb-icon",46),2&t){const t=P.yc().row;P.Hc("options",P.Nc(3,Dt,P.Mc(2,kt)))("routerLink",P.Nc(5,St,t.invoiceNo))}}function At(t,i){if(1&t){const t=P.kc();P.jc(0,"nb-icon",43),P.uc("click",(function(e){P.Xc(t);const n=i.row;return P.yc().printCurrentInvoice(e,n)})),P.ic(),P.hd(1,Ft,1,7,"nb-icon",44),P.jc(2,"nb-icon",45),P.uc("click",(function(){P.Xc(t);const e=i.row;return P.yc().deleteInvoice(e.invoiceNo)})),P.ic()}if(2&t){const t=i.row;P.Hc("options",P.Nc(4,Dt,P.Mc(3,kt))),P.Pb(1),P.Hc("ngIf",!t.signByParty),P.Pb(1),P.Hc("options",P.Nc(7,Dt,P.Mc(6,kt)))}}function Lt(t,i){if(1&t){const t=P.kc();P.jd(0,"Invoice No "),P.jc(1,"div",47),P.jc(2,"nb-icon",48),P.uc("click",(function(){return P.Xc(t),P.yc().onOpenFilter("invoiceNo")})),P.ic(),P.ic()}if(2&t){P.yc();const t=P.Uc(56);P.Pb(2),P.Hc("nbPopover",t)}}function Nt(t,i){if(1&t){const t=P.kc();P.jd(0,"Party Name "),P.jc(1,"div",47),P.jc(2,"nb-icon",48),P.uc("click",(function(){return P.Xc(t),P.yc().onOpenFilter("partyName")})),P.ic(),P.ic()}if(2&t){P.yc();const t=P.Uc(56);P.Pb(2),P.Hc("nbPopover",t)}}function Ht(t,i){if(1&t){const t=P.kc();P.jd(0,"Batch "),P.jc(1,"div",47),P.jc(2,"nb-icon",48),P.uc("click",(function(){return P.Xc(t),P.yc().onOpenFilter("batchList")})),P.ic(),P.ic()}if(2&t){P.yc();const t=P.Uc(56);P.Pb(2),P.Hc("nbPopover",t)}}function zt(t,i){if(1&t&&(P.hc(0),P.jc(1,"span",50),P.jd(2),P.ic(),P.gc()),2&t){const t=i.$implicit;P.Pb(2),P.ld("",t.batchId," ")}}function Tt(t,i){1&t&&P.hd(0,zt,3,1,"ng-container",49),2&t&&P.Hc("ngForOf",i.row.batchList)}function qt(t,i){1&t&&P.jd(0,"Total Mtr ")}function Et(t,i){1&t&&P.jd(0,"Total Finish Mtr ")}function Wt(t,i){if(1&t){const t=P.kc();P.jd(0,"Net Amt "),P.jc(1,"div",47),P.jc(2,"nb-icon",48),P.uc("click",(function(){return P.Xc(t),P.yc().onOpenFilter("netAmt")})),P.ic(),P.ic()}if(2&t){P.yc();const t=P.Uc(56);P.Pb(2),P.Hc("nbPopover",t)}}function Bt(t,i){if(1&t){const t=P.kc();P.jd(0,"Created Date "),P.jc(1,"div",47),P.jc(2,"nb-icon",48),P.uc("click",(function(){return P.Xc(t),P.yc().onOpenFilter("date")})),P.ic(),P.ic()}if(2&t){P.yc();const t=P.Uc(56);P.Pb(2),P.Hc("nbPopover",t)}}function Rt(t,i){1&t&&P.jd(0),2&t&&P.ld(" ",i.row.date," ")}function $t(t,i){if(1&t&&(P.jc(0,"option",51),P.jd(1),P.ic()),2&t){const t=i.$implicit;P.Hc("value",t),P.Pb(1),P.kd(t)}}function Gt(t,i){if(1&t){const t=P.kc();P.hc(0),P.jc(1,"ng-select",63),P.uc("ngModelChange",(function(i){return P.Xc(t),P.yc(2).operatorSelected=i})),P.jc(2,"ng-option",64),P.jd(3,"Conatins"),P.ic(),P.jc(4,"ng-option",65),P.jd(5,"Equals"),P.ic(),P.jc(6,"ng-option",66),P.jd(7,"Not Equals"),P.ic(),P.jc(8,"ng-option",67),P.jd(9,"Starts With"),P.ic(),P.jc(10,"ng-option",68),P.jd(11,"Ends With"),P.ic(),P.ic(),P.gc()}if(2&t){const t=P.yc(2);P.Pb(1),P.Hc("ngModel",t.operatorSelected)}}function Xt(t,i){if(1&t){const t=P.kc();P.hc(0),P.jc(1,"ng-select",63),P.uc("ngModelChange",(function(i){return P.Xc(t),P.yc(2).operatorSelected=i})),P.jc(2,"ng-option",69),P.jd(3,"Greater Than"),P.ic(),P.jc(4,"ng-option",70),P.jd(5,"Less Than"),P.ic(),P.jc(6,"ng-option",65),P.jd(7,"Equals"),P.ic(),P.jc(8,"ng-option",66),P.jd(9,"Not Equals"),P.ic(),P.ic(),P.gc()}if(2&t){const t=P.yc(2);P.Pb(1),P.Hc("ngModel",t.operatorSelected)}}function Ut(t,i){if(1&t){const t=P.kc();P.jc(0,"div",52),P.jc(1,"div",53),P.jc(2,"div",54),P.jc(3,"span",55),P.jd(4,"Filter"),P.ic(),P.ic(),P.jc(5,"div",56),P.jc(6,"div",57),P.uc("click",(function(){return P.Xc(t),P.yc().closeFilterPopover()})),P.jc(7,"strong"),P.jd(8,"X"),P.ic(),P.ic(),P.ic(),P.ic(),P.jc(9,"div",58),P.jc(10,"div",59),P.hd(11,Gt,12,1,"ng-container",17),P.hd(12,Xt,10,1,"ng-container",17),P.ic(),P.jc(13,"div",59),P.jc(14,"input",60),P.uc("ngModelChange",(function(i){return P.Xc(t),P.yc().filterWord=i})),P.ic(),P.ic(),P.ic(),P.jc(15,"button",61),P.uc("click",(function(){return P.Xc(t),P.yc().onApplyFilter()})),P.jd(16,"Apply"),P.ic(),P.jc(17,"button",62),P.uc("click",(function(){return P.Xc(t),P.yc().closeFilterPopover()})),P.jd(18,"Close"),P.ic(),P.ic()}if(2&t){const t=P.yc();P.Pb(11),P.Hc("ngIf",t.stringFlag),P.Pb(1),P.Hc("ngIf",t.numberFlag),P.Pb(2),P.Hc("ngModel",t.filterWord)}}const Vt=function(){return["/pages/generate_invoice"]};let Kt=(()=>{class t{constructor(t,i,e,n,c){this.generateInvoiceService=t,this.router=i,this.modalService=e,this.toastr=n,this.datePipe=c,this.checked=!1,this.in=2,this.loading=!1,this.InvoiceList=[],this.copyInvoiceList=[],this.Invoice=[],this.finalcheckedrows=[],this.hidden=!0,this.hiddenEdit=!0,this.hiddenView=!0,this.numberFlag=!1,this.stringFlag=!1,this.pageSizes=[10,20,50,100],this.selectedPageSize=20,this.requestData=new Ct.a,this.filterWord="",this.selectedColumnForFilter="",this.operatorSelected=null,this.tableHeaders=["invoiceNo","partyName","batchList","totalMtr","finishMtr","netAmt","date"],this.searchStr="",this.searchANDCondition=!1,this.destroy$=new d.a}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}ngOnInit(){this.requestData.data=new Mt.a,this.requestData.getBy="all",this.getAllInvoice()}filter(t){const i=t.toString().toLowerCase().trim(),e=Object.keys(this.copyInvoiceList[0]);this.InvoiceList=this.copyInvoiceList.filter(t=>{for(let n=0;n<e.length;n++)if("batchList"==e[n]){for(let c=0;c<t[e[n]].length;c++)if(t[e[n]][c].batchId&&-1!==t[e[n]][c].batchId.toString().toLowerCase().indexOf(i)||!i)return!0}else if(t[e[n]]&&-1!==t[e[n]].toString().toLowerCase().indexOf(i)||!i)return!0})}getAllInvoice(){this.loading=!0,this.generateInvoiceService.getAllDipatchV1(this.requestData).pipe(Object(r.a)(this.destroy$)).subscribe(t=>{if(t.success){const i=t.data;this.InvoiceList=i.data,this.requestData.data.total=i.total,this.InvoiceList.forEach(t=>{t.netAmt=t.netAmt.toFixed(2),t.date=this.datePipe.transform(t.date,"dd/MM/yyyy")}),this.copyInvoiceList=i.data,this.copyInvoiceList.forEach(t=>{t.netAmt=Number(t.netAmt).toFixed(2)}),this.Invoice=this.InvoiceList.map(t=>({date:t.date,id:t.id,invoiceNo:t.invoiceNo,partyName:t.partyName,isSendToParty:t.isSendToParty,netAmt:t.netAmt,totalMtr:t.totalMtr,finishMtr:t.finishMtr})),this.copyInvoiceList=this.InvoiceList.map(t=>({id:t.id,date:t.date,invoiceNo:t.invoiceNo,partyName:t.partyName,isSendToParty:t.isSendToParty,netAmt:t.netAmt,totalMtr:t.totalMtr,finishMtr:t.finishMtr}))}this.loading=!1},t=>{this.loading=!1})}print(){const t={},i=this.finalcheckedrows;0!=i.length&&(t.myArray=JSON.stringify(i),this.router.navigate(["/pages/generate_invoice/print/"],{queryParams:t}))}goToReport(){this.router.navigate(["/pages/generate_invoice/report"])}onSelect(t){this.finalcheckedrows=[],t.selected.forEach(t=>{this.finalcheckedrows.push(t.invoiceNo)})}printCurrentInvoice(t,i){this.finalcheckedrows=[],this.finalcheckedrows.push(i.invoiceNo),this.print()}deleteInvoice(t){const i=this.modalService.open(yt.c,{size:"sm"});i.componentInstance.title="Delete Invoice",i.result.then(i=>{i&&(this.loading=!0,this.generateInvoiceService.deleteByInvoiceNo(t).pipe(Object(r.a)(this.destroy$)).subscribe(t=>{t.success?(this.toastr.success("Deleted Successfully."),this.getAllInvoice(),this.loading=!1):this.loading=!1}))})}setPage(t){this.requestData.data.pageIndex=t.offset,this.getAllInvoice()}pageSizeChanged(){this.requestData.data.pageSize=Number(this.selectedPageSize),this.getAllInvoice()}onOpenFilter(t){"invoiceNo"==t||"partyName"==t||"createdAt"==t?(this.stringFlag=!0,this.numberFlag=!1):(this.numberFlag=!0,this.stringFlag=!1);const i=this.requestData.data.parameters.findIndex(i=>i.field.find(i=>i==t));i>-1?(this.filterWord=this.requestData.data.parameters[i].value,this.operatorSelected=this.requestData.data.parameters[i].operator):(this.filterWord="",this.operatorSelected=null),this.selectedColumnForFilter=t,this.popover.show()}onApplyFilter(){this.popover.hide();const t=this.requestData.data.parameters.findIndex(t=>t.field.find(t=>t==this.selectedColumnForFilter));if(t>-1)this.requestData.data.parameters[t].operator=this.operatorSelected,this.requestData.data.parameters[t].value=this.filterWord;else{let t=new Ot.a;t.field=[this.selectedColumnForFilter],t.value=this.filterWord,t.operator=this.operatorSelected,this.requestData.data.parameters.push(t)}this.requestData.data.pageIndex=0,this.getAllInvoice()}onClear(t){let i;i=this.requestData.data.parameters.findIndex(t?i=>i.field.find(i=>i==t):t=>t.field.find(t=>t==this.selectedColumnForFilter)),i>-1&&(this.filterWord="",this.operatorSelected=null,this.requestData.data.parameters.splice(i,1),this.requestData.data.pageIndex=0,this.getAllInvoice())}closeFilterPopover(){this.popover.hide()}onClearFilter(){this.popover.hide(),this.requestData.data.parameters.length>0&&(this.requestData.data.parameters=[],this.getAllInvoice())}}return t.\u0275fac=function(i){return new(i||t)(P.dc(h.a),P.dc(c.c),P.dc(O.e),P.dc(y.b),P.dc(n.e))},t.\u0275cmp=P.Xb({type:t,selectors:[["ngx-generate-invoice"]],viewQuery:function(t,i){var e;1&t&&(P.cd(_t,!0),P.nd(et.ab,!0)),2&t&&(P.Tc(e=P.vc())&&(i.filterTextBox=e.first),P.Tc(e=P.vc())&&(i.popover=e.first))},decls:57,vars:30,consts:[[1,"nb-style"],[1,"nb-header"],[1,"row"],[1,"col-md-2","col-3","display-flex-start","max-width-device"],[1,"btn","btn-primary","btn-md","btn-design","txt-ov-elips",3,"routerLink"],[1,"col-md-8","col-3"],[1,"nb-text","txt-ov-elips"],[1,"col-md-1","col-2","display-flex-start","desktop-justify-flexend","mobile-pd-0"],[1,"btn","btn-primary","btn-md","btn-design",3,"click"],[1,"col-md-6"],[1,"col-md-4"],[2,"display","flex"],[2,"margin-top","4px","margin-right","2px"],["status","primary","labelPosition","start","name","shift",3,"ngModel","checkedChange","ngModelChange"],[2,"margin-top","4px","margin-left","2px"],[1,"col-md-8"],["type","text","placeholder","Search","aria-label","Search","aria-describedby","basic-addon1",1,"form-control",3,"ngModel","ngModelChange"],[4,"ngIf"],[1,"material","table-responsive",3,"rows","ngClass","headerHeight","footerHeight","externalPaging","count","offset","limit","page"],["name","Action","sortable","false","prop","id",3,"headerCheckboxable","checkboxable","maxWidth"],["ngx-datatable-cell-template",""],["name","Invoice No","prop","invoiceNo",3,"maxWidth"],["ngx-datatable-header-template",""],["name","Party Name","prop","partyName",3,"maxWidth"],["name","Batch","prop","batchList",3,"maxWidth"],["name","Total Mtr","prop","totalMtr",3,"maxWidth"],["name","Total Finish Mtr","prop","finishMtr",3,"maxWidth"],["name","Net Amt","prop","netAmt",3,"maxWidth"],["name","Created Date","prop","date",3,"maxWidth"],[1,"page-sizer","d-flex"],["name","pageSizer",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],["templateRef",""],[1,"filter-by-row"],["for",""],[1,"filter-by-col"],[1,"tag-style-con"],["class","tag-style",4,"ngFor","ngForOf"],[1,"filter-by-clear-all",3,"click"],[1,"tag-style"],[1,"filter-by-title"],[1,"filter-by-val"],[2,"cursor","pointer",3,"click"],["icon","clipboard","nbTooltip","Print","nbTooltipStatus","primary","status","danger",3,"options","click"],["icon","edit","status","primary",3,"options","routerLink",4,"ngIf"],["status","danger","icon","trash",3,"options","click"],["icon","edit","status","primary",3,"options","routerLink"],[1,"filter-icon"],["icon","menu-outline","nbPopoverTrigger","noop",1,"nb-icon-filter",3,"nbPopover","click"],[4,"ngFor","ngForOf"],[1,"invpice-batch-style"],[3,"value"],["id","filterDiv",2,"padding","2px 14px","width","250px"],[1,"row",2,"background-color","#aa3634"],[1,"col-md-10"],[2,"color","white"],[1,"col-md-2",2,"margin-top","3px","color","white"],[2,"cursor","pointer","text-align","center",3,"click"],[1,"row",2,"margin-top","8px"],[1,"col-md-12","mb-1"],["type","text","placeholder","Filter...",1,"form-control",3,"ngModel","ngModelChange"],["nbButton","","status","primary",2,"margin-right","5px",3,"click"],["nbButton","","status","danger",3,"click"],["appendTo","body","placeholder","Select Filter",1,"popup-select",3,"ngModel","ngModelChange"],["value","LIKE"],["value","EQUALS"],["value","NOT_EQUALS"],["value","START_WITH"],["value","END_WITH"],["value","GREATER_THAN"],["value","LESS_THAN"]],template:function(t,i){1&t&&(P.jc(0,"nb-card",0),P.jc(1,"nb-card-header",1),P.jc(2,"div",2),P.jc(3,"div",3),P.jc(4,"button",4),P.jd(5,"Generate Invoice"),P.ic(),P.ic(),P.jc(6,"div",5),P.jc(7,"h2",6),P.jd(8,"Generate Invoice"),P.ic(),P.ic(),P.jc(9,"div",7),P.jc(10,"button",8),P.uc("click",(function(){return i.goToReport()})),P.jd(11,"REPORT"),P.ic(),P.ic(),P.jc(12,"div",7),P.jc(13,"button",8),P.uc("click",(function(){return i.print()})),P.jd(14,"PRINT"),P.ic(),P.ic(),P.ic(),P.ic(),P.jc(15,"nb-card-body"),P.jc(16,"div",2),P.jc(17,"div",9),P.jc(18,"div",2),P.jc(19,"div",10),P.jc(20,"div",11),P.jc(21,"p",12),P.jd(22,"OR"),P.ic(),P.jc(23,"nb-toggle",13),P.uc("checkedChange",(function(){return i.getAllInvoice()}))("ngModelChange",(function(t){return i.requestData.data.isAnd=t})),P.ic(),P.jc(24,"p",14),P.jd(25,"AND"),P.ic(),P.ic(),P.ic(),P.jc(26,"div",15),P.jc(27,"input",16),P.uc("ngModelChange",(function(t){return i.searchStr=t})),P.ic(),P.ic(),P.ic(),P.ic(),P.ic(),P.jc(28,"div",2),P.hd(29,wt,9,1,"ng-container",17),P.ic(),P.jc(30,"ngx-datatable",18),P.uc("page",(function(t){return i.setPage(t)})),P.zc(31,"searchInTable"),P.jc(32,"ngx-datatable-column",19),P.hd(33,At,3,9,"ng-template",20),P.ic(),P.jc(34,"ngx-datatable-column",21),P.hd(35,Lt,3,1,"ng-template",22),P.ic(),P.jc(36,"ngx-datatable-column",23),P.hd(37,Nt,3,1,"ng-template",22),P.ic(),P.jc(38,"ngx-datatable-column",24),P.hd(39,Ht,3,1,"ng-template",22),P.hd(40,Tt,1,1,"ng-template",20),P.ic(),P.jc(41,"ngx-datatable-column",25),P.hd(42,qt,1,0,"ng-template",22),P.ic(),P.jc(43,"ngx-datatable-column",26),P.hd(44,Et,1,0,"ng-template",22),P.ic(),P.jc(45,"ngx-datatable-column",27),P.hd(46,Wt,3,1,"ng-template",22),P.ic(),P.jc(47,"ngx-datatable-column",28),P.hd(48,Bt,3,1,"ng-template",22),P.hd(49,Rt,1,1,"ng-template",20),P.ic(),P.ic(),P.jc(50,"div",29),P.jc(51,"span"),P.jd(52,"Page Size: "),P.ic(),P.jc(53,"select",30),P.uc("ngModelChange",(function(t){return i.selectedPageSize=t}))("change",(function(){return i.pageSizeChanged()})),P.hd(54,$t,2,2,"option",31),P.ic(),P.ic(),P.ic(),P.ic(),P.hd(55,Ut,19,3,"ng-template",null,32,P.id)),2&t&&(P.Pb(4),P.Hc("routerLink",P.Mc(29,Vt)),P.Pb(19),P.Hc("ngModel",i.requestData.data.isAnd),P.Pb(4),P.Hc("ngModel",i.searchStr),P.Pb(2),P.Hc("ngIf",i.requestData.data.parameters&&i.requestData.data.parameters.length),P.Pb(1),P.Hc("rows",P.Dc(31,24,i.InvoiceList,i.searchStr,i.requestData.data.isAnd,i.tableHeaders))("ngClass","bootstrap")("headerHeight",31)("footerHeight",40)("externalPaging",!0)("count",i.requestData.data.total)("offset",i.requestData.data.pageIndex)("limit",i.requestData.data.pageSize),P.Pb(2),P.Hc("headerCheckboxable",!0)("checkboxable",!0)("maxWidth",110),P.Pb(2),P.Hc("maxWidth",110),P.Pb(2),P.Hc("maxWidth",500),P.Pb(2),P.Hc("maxWidth",200),P.Pb(3),P.Hc("maxWidth",500),P.Pb(2),P.Hc("maxWidth",500),P.Pb(2),P.Hc("maxWidth",500),P.Pb(2),P.Hc("maxWidth",200),P.Pb(6),P.Hc("ngModel",i.selectedPageSize),P.Pb(1),P.Hc("ngForOf",i.pageSizes))},directives:[et.u,et.x,c.d,et.t,et.wb,nt.l,nt.o,nt.a,n.n,at.e,n.l,at.b,at.a,at.c,nt.u,n.m,et.I,et.yb,et.ab,nt.p,nt.w,et.q,ot.a,ot.c],pipes:[xt.a],styles:[""]}),t})();var Qt=e("U498"),Yt=e("LvDl"),Zt=e("kF6S");const Jt=["searchfilter"],ti=function(){return{type:"zoom"}},ii=function(t){return{animation:t}};function ei(t,i){if(1&t){const t=P.kc();P.jc(0,"nb-icon",26),P.uc("click",(function(){P.Xc(t);const e=i.row;return P.yc().deleteSignedInvoice(e.invoiceNo)})),P.ic(),P.jd(1,"\xa0\xa0 ")}2&t&&P.Hc("options",P.Nc(2,ii,P.Mc(1,ti)))}function ni(t,i){if(1&t){const t=P.kc();P.jd(0,"Invoice No "),P.jc(1,"div",27),P.jc(2,"nb-icon",28),P.uc("click",(function(){return P.Xc(t),P.yc().onOpenFilter("invoiceNo")})),P.ic(),P.ic()}if(2&t){P.yc();const t=P.Uc(39);P.Pb(2),P.Hc("nbPopover",t)}}function ci(t,i){if(1&t){const t=P.kc();P.jd(0,"Party Name "),P.jc(1,"div",27),P.jc(2,"nb-icon",28),P.uc("click",(function(){return P.Xc(t),P.yc().onOpenFilter("partyName")})),P.ic(),P.ic()}if(2&t){P.yc();const t=P.Uc(39);P.Pb(2),P.Hc("nbPopover",t)}}function oi(t,i){if(1&t&&(P.hc(0),P.jc(1,"span",30),P.jd(2),P.ic(),P.gc()),2&t){const t=i.$implicit;P.Pb(2),P.ld("",t.batchId," ")}}function ai(t,i){1&t&&P.hd(0,oi,3,1,"ng-container",29),2&t&&P.Hc("ngForOf",i.row.batchList)}function ri(t,i){if(1&t){const t=P.kc();P.jd(0,"Net Amt "),P.jc(1,"div",27),P.jc(2,"nb-icon",28),P.uc("click",(function(){return P.Xc(t),P.yc().onOpenFilter("netAmt")})),P.ic(),P.ic()}if(2&t){P.yc();const t=P.Uc(39);P.Pb(2),P.Hc("nbPopover",t)}}function di(t,i){if(1&t){const t=P.kc();P.jd(0,"Created Date "),P.jc(1,"div",27),P.jc(2,"nb-icon",28),P.uc("click",(function(){return P.Xc(t),P.yc().onOpenFilter("date")})),P.ic(),P.ic()}if(2&t){P.yc();const t=P.Uc(39);P.Pb(2),P.Hc("nbPopover",t)}}function si(t,i){1&t&&(P.jd(0),P.zc(1,"date")),2&t&&P.ld(" ",P.Bc(1,1,i.row.date,"fullDate")," ")}function li(t,i){if(1&t&&(P.jc(0,"option",31),P.jd(1),P.ic()),2&t){const t=i.$implicit;P.Hc("value",t),P.Pb(1),P.kd(t)}}function hi(t,i){if(1&t){const t=P.kc();P.hc(0),P.jc(1,"ng-select",44),P.uc("ngModelChange",(function(i){return P.Xc(t),P.yc(2).operatorSelected=i})),P.jc(2,"ng-option",45),P.jd(3,"Conatins"),P.ic(),P.jc(4,"ng-option",46),P.jd(5,"Equals"),P.ic(),P.jc(6,"ng-option",47),P.jd(7,"Not Equals"),P.ic(),P.jc(8,"ng-option",48),P.jd(9,"Starts With"),P.ic(),P.jc(10,"ng-option",49),P.jd(11,"Ends With"),P.ic(),P.ic(),P.gc()}if(2&t){const t=P.yc(2);P.Pb(1),P.Hc("ngModel",t.operatorSelected)}}function gi(t,i){if(1&t){const t=P.kc();P.hc(0),P.jc(1,"ng-select",44),P.uc("ngModelChange",(function(i){return P.Xc(t),P.yc(2).operatorSelected=i})),P.jc(2,"ng-option",50),P.jd(3,"Greater Than"),P.ic(),P.jc(4,"ng-option",51),P.jd(5,"Less Than"),P.ic(),P.jc(6,"ng-option",46),P.jd(7,"Equals"),P.ic(),P.jc(8,"ng-option",47),P.jd(9,"Not Equals"),P.ic(),P.ic(),P.gc()}if(2&t){const t=P.yc(2);P.Pb(1),P.Hc("ngModel",t.operatorSelected)}}function pi(t,i){if(1&t){const t=P.kc();P.jc(0,"div",32),P.jc(1,"div",33),P.jc(2,"div",34),P.jc(3,"span",35),P.jd(4,"Filter"),P.ic(),P.ic(),P.jc(5,"div",36),P.jc(6,"div",37),P.uc("click",(function(){return P.Xc(t),P.yc().closeFilterPopover()})),P.jc(7,"strong"),P.jd(8,"X"),P.ic(),P.ic(),P.ic(),P.ic(),P.jc(9,"div",38),P.jc(10,"div",39),P.hd(11,hi,12,1,"ng-container",40),P.hd(12,gi,10,1,"ng-container",40),P.ic(),P.jc(13,"div",39),P.jc(14,"input",41),P.uc("ngModelChange",(function(i){return P.Xc(t),P.yc().filterWord=i})),P.ic(),P.ic(),P.ic(),P.jc(15,"button",42),P.uc("click",(function(){return P.Xc(t),P.yc().onApplyFilter()})),P.jd(16,"Apply"),P.ic(),P.jc(17,"button",43),P.uc("click",(function(){return P.Xc(t),P.yc().closeFilterPopover()})),P.jd(18,"Close"),P.ic(),P.ic()}if(2&t){const t=P.yc();P.Pb(11),P.Hc("ngIf",t.stringFlag),P.Pb(1),P.Hc("ngIf",t.numberFlag),P.Pb(2),P.Hc("ngModel",t.filterWord)}}let bi=(()=>{class t{constructor(t,i,e,n){this.route=t,this.generateInvoiceService=i,this.toastr=e,this.modalService=n,this.InvoiceList=[],this.copyInvoiceList=[],this.loading=!1,this.destroy$=new d.a,this.numberFlag=!1,this.stringFlag=!1,this.pageSizes=[10,20,50,100],this.selectedPageSize=20,this.requestData=new Ct.a,this.filterWord="",this.selectedColumnForFilter="",this.operatorSelected=null,this.tableHeaders=["invoiceNo","partyName","batchList","totalMtr","finishMtr","netAmt","date"],this.searchStr="",this.searchANDCondition=!1}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}ngOnInit(){this.requestData.data=new Mt.a,this.requestData.getBy="all",this.getAllInvoice()}tableChange(t){"sign"===t?this.route.navigate(["/pages/generate_invoice/sign"]):"generate"===t&&this.route.navigate(["/pages/generate_invoice/"])}deleteSignedInvoice(t){this.modalService.open(Zt.a,{size:"sm"}).result.then(i=>{i&&this.generateInvoiceService.saveNewSignedInvoice([{invoiceNo:t,signByParty:!1}]).pipe(Object(r.a)(this.destroy$)).subscribe(t=>{t.success?(this.toastr.success(t.msg),this.getAllInvoice()):this.toastr.error(t.msg),this.loading=!1},t=>{this.loading=!1})})}filter(t){const i=t.toString().toLowerCase().trim();this.InvoiceList=i?this.copyInvoiceList.filter(t=>this.matchString(t,"partyName",i)||this.matchString(t,"invoiceNo",i)||this.matchString(t,"totalMtr",i)||this.matchString(t,"batchList",i)||this.matchString(t,"finishMtr",i)||this.matchString(t,"netAmt",i)):Object(Yt.cloneDeep)(this.copyInvoiceList)}matchString(t,i,e){return"batchList"==i?t[i].filter(t=>t.batchId.toLowerCase().includes(e)).length>0:t[i].toString().toLowerCase().includes(e)}getAllInvoice(){this.loading=!0,this.InvoiceList=[],this.copyInvoiceList=[],this.generateInvoiceService.getAllDipatchV1(this.requestData,"signed").pipe(Object(r.a)(this.destroy$)).subscribe(t=>{if(t.success){const i=t.data;this.InvoiceList=i.data,this.requestData.data.total=i.total,this.InvoiceList.forEach(t=>{t.netAmt=t.netAmt.toFixed(2)}),this.copyInvoiceList=t.data}this.loading=!1},t=>{this.loading=!1})}setPage(t){this.requestData.data.pageIndex=t.offset,this.getAllInvoice()}pageSizeChanged(){this.requestData.data.pageSize=Number(this.selectedPageSize),this.getAllInvoice()}onOpenFilter(t){"invoiceNo"==t||"partyName"==t||"createdAt"==t?(this.stringFlag=!0,this.numberFlag=!1):(this.numberFlag=!0,this.stringFlag=!1);const i=this.requestData.data.parameters.findIndex(i=>i.field.find(i=>i==t));i>-1?(this.filterWord=this.requestData.data.parameters[i].value,this.operatorSelected=this.requestData.data.parameters[i].operator):(this.filterWord="",this.operatorSelected=null),this.selectedColumnForFilter=t,this.popover.show()}onApplyFilter(){this.popover.hide();const t=this.requestData.data.parameters.findIndex(t=>t.field.find(t=>t==this.selectedColumnForFilter));if(t>-1)this.requestData.data.parameters[t].operator=this.operatorSelected,this.requestData.data.parameters[t].value=this.filterWord;else{let t=new Ot.a;t.field=[this.selectedColumnForFilter],t.value=this.filterWord,t.operator=this.operatorSelected,this.requestData.data.parameters.push(t)}this.requestData.data.pageIndex=0,this.getAllInvoice()}onClear(t){let i;i=this.requestData.data.parameters.findIndex(t?i=>i.field.find(i=>i==t):t=>t.field.find(t=>t==this.selectedColumnForFilter)),i>-1&&(this.filterWord="",this.operatorSelected=null,this.requestData.data.parameters.splice(i,1),this.requestData.data.pageIndex=0,this.getAllInvoice())}closeFilterPopover(){this.popover.hide()}onClearFilter(){this.popover.hide(),this.requestData.data.parameters.length>0&&(this.requestData.data.parameters=[],this.getAllInvoice())}}return t.\u0275fac=function(i){return new(i||t)(P.dc(c.c),P.dc(h.a),P.dc(y.b),P.dc(O.e))},t.\u0275cmp=P.Xb({type:t,selectors:[["ngx-received-invoice"]],viewQuery:function(t,i){var e;1&t&&(P.cd(Jt,!0),P.nd(et.ab,!0)),2&t&&(P.Tc(e=P.vc())&&(i.filterTextBox=e.first),P.Tc(e=P.vc())&&(i.popover=e.first))},decls:40,vars:24,consts:[[1,"nb-style"],[1,"nb-header"],[1,"row"],[1,"col-md-2","col-3","display-flex-start","max-width-device"],["placeholder","Select",1,"btn","btn-md",3,"change"],["value","sign"],["value","generate"],[1,"col-md-5","col-3","display-flex-start","max-width-device"],[1,"nb-text","txt-ov-elips"],[1,"col-md-6"],["type","text","placeholder","Search","aria-label","Search","aria-describedby","basic-addon1",1,"form-control",3,"keyup"],["let","","index","",1,"material","table-responsive",3,"rows","ngClass","headerHeight","footerHeight","externalPaging","count","offset","limit","selectionType","page"],["name","Action","sortable","false","prop","id",3,"maxWidth"],["ngx-datatable-cell-template",""],["name","Invoice No","prop","invoiceNo",3,"maxWidth"],["ngx-datatable-header-template",""],["name","Party Name","prop","partyName",3,"maxWidth"],["name","Batch","prop","batchList",3,"maxWidth"],["name","Total Mtr","prop","totalMtr",3,"maxWidth"],["name","Total Finish Mtr","prop","finishMtr",3,"maxWidth"],["name","Net Amt","prop","netAmt",3,"maxWidth"],["name","Created Date","prop","date",3,"maxWidth"],[1,"page-sizer","d-flex"],["name","pageSizer",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],["templateRef",""],["icon","trash","status","danger",3,"options","click"],[1,"filter-icon"],["icon","menu-outline","nbPopoverTrigger","noop",1,"nb-icon-filter",3,"nbPopover","click"],[4,"ngFor","ngForOf"],[1,"invpice-batch-style"],[3,"value"],["id","filterDiv",2,"padding","2px 14px","width","250px"],[1,"row",2,"background-color","#aa3634"],[1,"col-md-10"],[2,"color","white"],[1,"col-md-2",2,"margin-top","3px","color","white"],[2,"cursor","pointer","text-align","center",3,"click"],[1,"row",2,"margin-top","8px"],[1,"col-md-12","mb-1"],[4,"ngIf"],["type","text","placeholder","Filter...",1,"form-control",3,"ngModel","ngModelChange"],["nbButton","","status","primary",2,"margin-right","5px",3,"click"],["nbButton","","status","danger",3,"click"],["appendTo","body","placeholder","Select Filter",1,"popup-select",3,"ngModel","ngModelChange"],["value","LIKE"],["value","EQUALS"],["value","NOT_EQUALS"],["value","START_WITH"],["value","END_WITH"],["value","GREATER_THAN"],["value","LESS_THAN"]],template:function(t,i){1&t&&(P.jc(0,"nb-card",0),P.jc(1,"nb-card-header",1),P.jc(2,"div",2),P.jc(3,"div",3),P.jc(4,"ng-select",4),P.uc("change",(function(t){return i.tableChange(t)})),P.jc(5,"ng-option",5),P.jd(6,"Sign New Invoices"),P.ic(),P.jc(7,"ng-option",6),P.jd(8,"Generate Invoice"),P.ic(),P.ic(),P.ic(),P.jc(9,"div",7),P.jc(10,"h2",8),P.jd(11,"Signed Invoice"),P.ic(),P.ic(),P.ic(),P.ic(),P.jc(12,"nb-card-body"),P.jc(13,"div",2),P.jc(14,"div",9),P.jc(15,"input",10),P.uc("keyup",(function(t){return i.filter(t.target.value)})),P.ic(),P.ic(),P.ic(),P.jc(16,"ngx-datatable",11),P.uc("page",(function(t){return i.setPage(t)})),P.zc(17,"searchInTable"),P.jc(18,"ngx-datatable-column",12),P.hd(19,ei,2,4,"ng-template",13),P.ic(),P.jc(20,"ngx-datatable-column",14),P.hd(21,ni,3,1,"ng-template",15),P.ic(),P.jc(22,"ngx-datatable-column",16),P.hd(23,ci,3,1,"ng-template",15),P.ic(),P.jc(24,"ngx-datatable-column",17),P.hd(25,ai,1,1,"ng-template",13),P.ic(),P.ec(26,"ngx-datatable-column",18),P.ec(27,"ngx-datatable-column",19),P.jc(28,"ngx-datatable-column",20),P.hd(29,ri,3,1,"ng-template",15),P.ic(),P.jc(30,"ngx-datatable-column",21),P.hd(31,di,3,1,"ng-template",15),P.hd(32,si,2,4,"ng-template",13),P.ic(),P.ic(),P.jc(33,"div",22),P.jc(34,"span"),P.jd(35,"Page Size: "),P.ic(),P.jc(36,"select",23),P.uc("ngModelChange",(function(t){return i.selectedPageSize=t}))("change",(function(){return i.pageSizeChanged()})),P.hd(37,li,2,2,"option",24),P.ic(),P.ic(),P.ic(),P.ic(),P.hd(38,pi,19,3,"ng-template",null,25,P.id)),2&t&&(P.Pb(16),P.Hc("rows",P.Dc(17,19,i.InvoiceList,i.searchStr,i.requestData.data.isAnd,i.tableHeaders))("ngClass","bootstrap")("headerHeight",31)("footerHeight",40)("externalPaging",!0)("count",i.requestData.data.total)("offset",i.requestData.data.pageIndex)("limit",i.requestData.data.pageSize)("selectionType","checkbox"),P.Pb(2),P.Hc("maxWidth",110),P.Pb(2),P.Hc("maxWidth",110),P.Pb(2),P.Hc("maxWidth",500),P.Pb(2),P.Hc("maxWidth",200),P.Pb(2),P.Hc("maxWidth",500),P.Pb(1),P.Hc("maxWidth",500),P.Pb(1),P.Hc("maxWidth",500),P.Pb(2),P.Hc("maxWidth",200),P.Pb(6),P.Hc("ngModel",i.selectedPageSize),P.Pb(1),P.Hc("ngForOf",i.pageSizes))},directives:[et.u,et.x,ot.a,ot.c,et.t,at.e,n.l,at.b,at.a,at.c,nt.u,nt.l,nt.o,n.m,et.I,et.ab,nt.p,nt.w,n.n,nt.a,et.q],pipes:[xt.a,n.e],styles:[""]}),t})();var ui=e("qC+V");const mi=["searchfilter"];function ji(t,i){if(1&t){const t=P.kc();P.jd(0,"Invoice No "),P.jc(1,"div",29),P.jc(2,"nb-icon",30),P.uc("click",(function(){return P.Xc(t),P.yc().onOpenFilter("invoiceNo")})),P.ic(),P.ic()}if(2&t){P.yc();const t=P.Uc(43);P.Pb(2),P.Hc("nbPopover",t)}}function fi(t,i){if(1&t){const t=P.kc();P.jd(0,"Party Name "),P.jc(1,"div",29),P.jc(2,"nb-icon",30),P.uc("click",(function(){return P.Xc(t),P.yc().onOpenFilter("partyName")})),P.ic(),P.ic()}if(2&t){P.yc();const t=P.Uc(43);P.Pb(2),P.Hc("nbPopover",t)}}function vi(t,i){if(1&t){const t=P.kc();P.jd(0,"Batch "),P.jc(1,"div",29),P.jc(2,"nb-icon",30),P.uc("click",(function(){return P.Xc(t),P.yc().onOpenFilter("batchList")})),P.ic(),P.ic()}if(2&t){P.yc();const t=P.Uc(43);P.Pb(2),P.Hc("nbPopover",t)}}function Pi(t,i){if(1&t){const t=P.kc();P.jd(0,"Batch "),P.jc(1,"div",29),P.jc(2,"nb-icon",30),P.uc("click",(function(){return P.Xc(t),P.yc(2).onOpenFilter("batchList")})),P.ic(),P.ic()}if(2&t){P.yc(2);const t=P.Uc(43);P.Pb(2),P.Hc("nbPopover",t)}}function Mi(t,i){if(1&t&&(P.hc(0),P.jc(1,"span",32),P.jd(2),P.ic(),P.gc()),2&t){const t=i.$implicit;P.Pb(2),P.ld("",t.batchId," ")}}function Ci(t,i){if(1&t&&(P.hd(0,Pi,3,1,"ng-template",14),P.hd(1,Mi,3,1,"ng-container",31)),2&t){const t=i.row;P.Pb(1),P.Hc("ngForOf",t.batchList)}}function yi(t,i){if(1&t){const t=P.kc();P.jd(0,"Net Amt "),P.jc(1,"div",29),P.jc(2,"nb-icon",30),P.uc("click",(function(){return P.Xc(t),P.yc().onOpenFilter("netAmt")})),P.ic(),P.ic()}if(2&t){P.yc();const t=P.Uc(43);P.Pb(2),P.Hc("nbPopover",t)}}function Oi(t,i){if(1&t){const t=P.kc();P.jd(0,"Created Date "),P.jc(1,"div",29),P.jc(2,"nb-icon",30),P.uc("click",(function(){return P.Xc(t),P.yc().onOpenFilter("date")})),P.ic(),P.ic()}if(2&t){P.yc();const t=P.Uc(43);P.Pb(2),P.Hc("nbPopover",t)}}function xi(t,i){if(1&t&&(P.jc(0,"option",33),P.jd(1),P.ic()),2&t){const t=i.$implicit;P.Hc("value",t),P.Pb(1),P.kd(t)}}function _i(t,i){if(1&t){const t=P.kc();P.hc(0),P.jc(1,"ng-select",46),P.uc("ngModelChange",(function(i){return P.Xc(t),P.yc(2).operatorSelected=i})),P.jc(2,"ng-option",47),P.jd(3,"Conatins"),P.ic(),P.jc(4,"ng-option",48),P.jd(5,"Equals"),P.ic(),P.jc(6,"ng-option",49),P.jd(7,"Not Equals"),P.ic(),P.jc(8,"ng-option",50),P.jd(9,"Starts With"),P.ic(),P.jc(10,"ng-option",51),P.jd(11,"Ends With"),P.ic(),P.ic(),P.gc()}if(2&t){const t=P.yc(2);P.Pb(1),P.Hc("ngModel",t.operatorSelected)}}function Ii(t,i){if(1&t){const t=P.kc();P.hc(0),P.jc(1,"ng-select",46),P.uc("ngModelChange",(function(i){return P.Xc(t),P.yc(2).operatorSelected=i})),P.jc(2,"ng-option",52),P.jd(3,"Greater Than"),P.ic(),P.jc(4,"ng-option",53),P.jd(5,"Less Than"),P.ic(),P.jc(6,"ng-option",48),P.jd(7,"Equals"),P.ic(),P.jc(8,"ng-option",49),P.jd(9,"Not Equals"),P.ic(),P.ic(),P.gc()}if(2&t){const t=P.yc(2);P.Pb(1),P.Hc("ngModel",t.operatorSelected)}}function wi(t,i){if(1&t){const t=P.kc();P.jc(0,"div",34),P.jc(1,"div",35),P.jc(2,"div",36),P.jc(3,"span",37),P.jd(4,"Filter"),P.ic(),P.ic(),P.jc(5,"div",38),P.jc(6,"div",39),P.uc("click",(function(){return P.Xc(t),P.yc().closeFilterPopover()})),P.jc(7,"strong"),P.jd(8,"X"),P.ic(),P.ic(),P.ic(),P.ic(),P.jc(9,"div",40),P.jc(10,"div",41),P.hd(11,_i,12,1,"ng-container",42),P.hd(12,Ii,10,1,"ng-container",42),P.ic(),P.jc(13,"div",41),P.jc(14,"input",43),P.uc("ngModelChange",(function(i){return P.Xc(t),P.yc().filterWord=i})),P.ic(),P.ic(),P.ic(),P.jc(15,"button",44),P.uc("click",(function(){return P.Xc(t),P.yc().onApplyFilter()})),P.jd(16,"Apply"),P.ic(),P.jc(17,"button",45),P.uc("click",(function(){return P.Xc(t),P.yc().closeFilterPopover()})),P.jd(18,"Close"),P.ic(),P.ic()}if(2&t){const t=P.yc();P.Pb(11),P.Hc("ngIf",t.stringFlag),P.Pb(1),P.Hc("ngIf",t.numberFlag),P.Pb(2),P.Hc("ngModel",t.filterWord)}}const ki=[{path:"",component:Pt,canActivate:[o.a],canLoad:[o.a],data:{PermissionName:["add"]}},{path:"view",component:Kt,canActivate:[o.a],canLoad:[o.a],data:{PermissionName:["view","view group","view all"]}},{path:"sign/view",component:bi,canActivate:[o.a],canLoad:[o.a],data:{PermissionName:["view","view group","view all"]}},{path:"edit/:id",component:Pt,canActivate:[o.a],canLoad:[o.a],data:{PermissionName:["edit","edit group","edit all"]}},{path:"sign",component:(()=>{class t{constructor(t,i,e,n){this.route=t,this.generateInvoiceService=i,this.toastr=e,this.datePipe=n,this.finalcheckedrows=[],this.InvoiceList=[],this.copyInvoiceList=[],this.loading=!1,this.destroy$=new d.a,this.numberFlag=!1,this.stringFlag=!1,this.pageSizes=[10,20,50,100],this.selectedPageSize=20,this.requestData=new Ct.a,this.filterWord="",this.selectedColumnForFilter="",this.operatorSelected=null,this.tableHeaders=["invoiceNo","partyName","batchList","totalMtr","finishMtr","netAmt","date"],this.searchStr="",this.searchANDCondition=!1}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}ngOnInit(){this.requestData.data=new Mt.a,this.requestData.getBy="all",this.getAllInvoice()}tableChange(t){"received"===t?this.route.navigate(["/pages/generate_invoice/sign/view"]):"generate"===t&&this.route.navigate(["/pages/generate_invoice/"])}signNewInvoice(){if(this.finalcheckedrows.length){this.loading=!0;let t=[];this.finalcheckedrows.forEach(i=>{t.push({invoiceNo:i.invoiceNo,signByParty:!0})}),this.generateInvoiceService.saveNewSignedInvoice(t).pipe(Object(r.a)(this.destroy$)).subscribe(t=>{t.success?(this.toastr.success(t.msg),this.getAllInvoice()):this.toastr.error(t.msg),this.loading=!1},t=>{this.loading=!1})}else this.toastr.error("Select at least one invoice.")}onSelect(t){this.finalcheckedrows=[],this.finalcheckedrows=t.selected}getAllInvoice(){this.loading=!0,this.finalcheckedrows=[],this.InvoiceList=[],this.copyInvoiceList=[],this.generateInvoiceService.getAllDipatchV1(this.requestData,"unsigned").pipe(Object(r.a)(this.destroy$)).subscribe(t=>{if(t.success){const i=t.data;this.InvoiceList=i.data,this.requestData.data.total=i.total,this.InvoiceList.forEach(t=>{t.netAmt=t.netAmt.toFixed(2),t.date=this.datePipe.transform(t.date,"dd/MM/yyyy")}),this.copyInvoiceList=Object(Yt.cloneDeep)(this.InvoiceList)}this.loading=!1},t=>{this.loading=!1})}filter(t){const i=t.toString().toLowerCase().trim();this.InvoiceList=i?this.copyInvoiceList.filter(t=>this.matchString(t,"partyName",i)||this.matchString(t,"invoiceNo",i)||this.matchString(t,"totalMtr",i)||this.matchString(t,"batchList",i)||this.matchString(t,"finishMtr",i)||this.matchString(t,"netAmt",i)):Object(Yt.cloneDeep)(this.copyInvoiceList)}matchString(t,i,e){return"batchList"==i?t[i].filter(t=>t.batchId.toLowerCase().includes(e)).length>0:t[i].toString().toLowerCase().includes(e)}setPage(t){this.requestData.data.pageIndex=t.offset,this.getAllInvoice()}pageSizeChanged(){this.requestData.data.pageSize=Number(this.selectedPageSize),this.getAllInvoice()}onOpenFilter(t){"invoiceNo"==t||"partyName"==t||"createdAt"==t?(this.stringFlag=!0,this.numberFlag=!1):(this.numberFlag=!0,this.stringFlag=!1);const i=this.requestData.data.parameters.findIndex(i=>i.field.find(i=>i==t));i>-1?(this.filterWord=this.requestData.data.parameters[i].value,this.operatorSelected=this.requestData.data.parameters[i].operator):(this.filterWord="",this.operatorSelected=null),this.selectedColumnForFilter=t,this.popover.show()}onApplyFilter(){this.popover.hide();const t=this.requestData.data.parameters.findIndex(t=>t.field.find(t=>t==this.selectedColumnForFilter));if(t>-1)this.requestData.data.parameters[t].operator=this.operatorSelected,this.requestData.data.parameters[t].value=this.filterWord;else{let t=new Ot.a;t.field=[this.selectedColumnForFilter],t.value=this.filterWord,t.operator=this.operatorSelected,this.requestData.data.parameters.push(t)}this.requestData.data.pageIndex=0,this.getAllInvoice()}onClear(t){let i;i=this.requestData.data.parameters.findIndex(t?i=>i.field.find(i=>i==t):t=>t.field.find(t=>t==this.selectedColumnForFilter)),i>-1&&(this.filterWord="",this.operatorSelected=null,this.requestData.data.parameters.splice(i,1),this.requestData.data.pageIndex=0,this.getAllInvoice())}closeFilterPopover(){this.popover.hide()}onClearFilter(){this.popover.hide(),this.requestData.data.parameters.length>0&&(this.requestData.data.parameters=[],this.getAllInvoice())}}return t.\u0275fac=function(i){return new(i||t)(P.dc(c.c),P.dc(h.a),P.dc(y.b),P.dc(n.e))},t.\u0275cmp=P.Xb({type:t,selectors:[["ngx-sign-invoice"]],viewQuery:function(t,i){var e;1&t&&(P.cd(mi,!0),P.nd(et.ab,!0)),2&t&&(P.Tc(e=P.vc())&&(i.filterTextBox=e.first),P.Tc(e=P.vc())&&(i.popover=e.first))},decls:44,vars:26,consts:[[1,"nb-style"],[1,"nb-header"],[1,"row"],[1,"col-md-2","col-3","display-flex-start","max-width-device"],["placeholder","Select",1,"btn","btn-md",3,"change"],["value","received"],["value","generate"],[1,"col-md-5","col-3","display-flex-start","max-width-device"],[1,"nb-text","txt-ov-elips"],[3,"show"],[1,"col-md-6"],["type","text","placeholder","Search","aria-label","Search","aria-describedby","basic-addon1",1,"form-control",3,"keyup"],["let","","index","",1,"material","table-responsive",3,"rows","ngClass","headerHeight","footerHeight","externalPaging","count","offset","limit","selectionType","page"],["name","Invoice No","prop","invoiceNo",3,"headerCheckboxable","checkboxable","maxWidth"],["ngx-datatable-header-template",""],["name","Party Name","prop","partyName",3,"maxWidth"],["name","Batch","prop","batchList",3,"maxWidth"],["ngx-datatable-cell-template",""],["name","Total Mtr","prop","totalMtr",3,"maxWidth"],["name","Total Finish Mtr","prop","finishMtr",3,"maxWidth"],["name","Net Amt","prop","netAmt",3,"maxWidth"],["name","Created Date","prop","date",3,"maxWidth"],[1,"page-sizer","d-flex"],["name","pageSizer",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-12","mobile-btn-center","text-btn-right"],[1,"padding-bt-tp"],["type","button",1,"btn","btn-primary","btn-sm","btn-design-save","button-base","ripple",2,"margin-right","20px",3,"click"],["templateRef",""],[1,"filter-icon"],["icon","menu-outline","nbPopoverTrigger","noop",1,"nb-icon-filter",3,"nbPopover","click"],[4,"ngFor","ngForOf"],[1,"invpice-batch-style"],[3,"value"],["id","filterDiv",2,"padding","2px 14px","width","250px"],[1,"row",2,"background-color","#aa3634"],[1,"col-md-10"],[2,"color","white"],[1,"col-md-2",2,"margin-top","3px","color","white"],[2,"cursor","pointer","text-align","center",3,"click"],[1,"row",2,"margin-top","8px"],[1,"col-md-12","mb-1"],[4,"ngIf"],["type","text","placeholder","Filter...",1,"form-control",3,"ngModel","ngModelChange"],["nbButton","","status","primary",2,"margin-right","5px",3,"click"],["nbButton","","status","danger",3,"click"],["appendTo","body","placeholder","Select Filter",1,"popup-select",3,"ngModel","ngModelChange"],["value","LIKE"],["value","EQUALS"],["value","NOT_EQUALS"],["value","START_WITH"],["value","END_WITH"],["value","GREATER_THAN"],["value","LESS_THAN"]],template:function(t,i){1&t&&(P.jc(0,"nb-card",0),P.jc(1,"nb-card-header",1),P.jc(2,"div",2),P.jc(3,"div",3),P.jc(4,"ng-select",4),P.uc("change",(function(t){return i.tableChange(t)})),P.jc(5,"ng-option",5),P.jd(6,"View Signed Invoices"),P.ic(),P.jc(7,"ng-option",6),P.jd(8,"Generate Invoice"),P.ic(),P.ic(),P.ic(),P.jc(9,"div",7),P.jc(10,"h2",8),P.jd(11,"Sign Invoice"),P.ic(),P.ic(),P.ic(),P.ic(),P.jc(12,"nb-card-body"),P.ec(13,"ngx-loading",9),P.jc(14,"div",2),P.jc(15,"div",10),P.jc(16,"input",11),P.uc("keyup",(function(t){return i.filter(t.target.value)})),P.ic(),P.ic(),P.ic(),P.jc(17,"ngx-datatable",12),P.uc("page",(function(t){return i.setPage(t)})),P.zc(18,"searchInTable"),P.jc(19,"ngx-datatable-column",13),P.hd(20,ji,3,1,"ng-template",14),P.ic(),P.jc(21,"ngx-datatable-column",15),P.hd(22,fi,3,1,"ng-template",14),P.ic(),P.jc(23,"ngx-datatable-column",16),P.hd(24,vi,3,1,"ng-template",14),P.hd(25,Ci,2,1,"ng-template",17),P.ic(),P.ec(26,"ngx-datatable-column",18),P.ec(27,"ngx-datatable-column",19),P.jc(28,"ngx-datatable-column",20),P.hd(29,yi,3,1,"ng-template",14),P.ic(),P.jc(30,"ngx-datatable-column",21),P.hd(31,Oi,3,1,"ng-template",14),P.ic(),P.ic(),P.jc(32,"div",22),P.jc(33,"span"),P.jd(34,"Page Size: "),P.ic(),P.jc(35,"select",23),P.uc("ngModelChange",(function(t){return i.selectedPageSize=t}))("change",(function(){return i.pageSizeChanged()})),P.hd(36,xi,2,2,"option",24),P.ic(),P.ic(),P.jc(37,"div",2),P.jc(38,"div",25),P.jc(39,"div",26),P.jc(40,"button",27),P.uc("click",(function(){return i.signNewInvoice()})),P.jd(41,"Sign"),P.ic(),P.ic(),P.ic(),P.ic(),P.ic(),P.ic(),P.hd(42,wi,19,3,"ng-template",null,28,P.id)),2&t&&(P.Pb(13),P.Hc("show",i.loading),P.Pb(4),P.Hc("rows",P.Dc(18,21,i.InvoiceList,i.searchStr,i.requestData.data.isAnd,i.tableHeaders))("ngClass","bootstrap")("headerHeight",31)("footerHeight",40)("externalPaging",!0)("count",i.requestData.data.total)("offset",i.requestData.data.pageIndex)("limit",i.requestData.data.pageSize)("selectionType","checkbox"),P.Pb(2),P.Hc("headerCheckboxable",!0)("checkboxable",!0)("maxWidth",110),P.Pb(2),P.Hc("maxWidth",500),P.Pb(2),P.Hc("maxWidth",200),P.Pb(3),P.Hc("maxWidth",500),P.Pb(1),P.Hc("maxWidth",500),P.Pb(1),P.Hc("maxWidth",500),P.Pb(2),P.Hc("maxWidth",200),P.Pb(5),P.Hc("ngModel",i.selectedPageSize),P.Pb(1),P.Hc("ngForOf",i.pageSizes))},directives:[et.u,et.x,ot.a,ot.c,et.t,ui.a,at.e,n.l,at.b,at.c,at.a,nt.u,nt.l,nt.o,n.m,et.I,et.ab,nt.p,nt.w,n.n,nt.a,et.q],pipes:[xt.a],styles:[""]}),t})(),canActivate:[o.a],canLoad:[o.a],data:{PermissionName:["edit","edit group","edit all"]}},{path:"report",component:Qt.a},{path:"print",component:tt}];let Di=(()=>{class t{}return t.\u0275mod=P.bc({type:t}),t.\u0275inj=P.ac({factory:function(i){return new(i||t)},imports:[[c.g.forChild(ki)],c.g]}),t})();var Si=e("yzeJ"),Fi=e("vTDv");let Ai=(()=>{class t{}return t.\u0275mod=P.bc({type:t}),t.\u0275inj=P.ac({factory:function(i){return new(i||t)},providers:[O.a],imports:[[n.c,Di,Si.a,O.f,Fi.a]]}),t})()},U498:function(t,i,e){"use strict";e.d(i,"a",(function(){return u}));var n=e("tcrU"),c=e("LvDl"),o=e("fXoL"),a=e("ofXK"),r=e("aceb"),d=e("3Pt+");function s(t,i){if(1&t&&(o.jc(0,"span"),o.jd(1),o.ic()),2&t){const t=i.$implicit,e=i.index,n=o.yc().$implicit,c=o.yc(2);o.Pb(1),o.md(" ",t," : ",n[c.copyHeaderKeys[e]]," , ")}}function l(t,i){if(1&t&&(o.jc(0,"th"),o.jd(1),o.ic()),2&t){const t=i.$implicit;o.Pb(1),o.kd(t)}}function h(t,i){if(1&t&&(o.jc(0,"td"),o.jd(1),o.ic()),2&t){const t=i.$implicit,e=o.yc().$implicit;o.Pb(1),o.kd(e[t])}}function g(t,i){if(1&t&&(o.jc(0,"tr"),o.hd(1,h,2,1,"td",16),o.ic()),2&t){const t=i.index,e=o.yc(3);o.ed("background",t%2==0?"#ffffff":"#f2f2f2"),o.Pb(1),o.Hc("ngForOf",e.headerArray)}}function p(t,i){if(1&t&&(o.jc(0,"div",12),o.jc(1,"div",13),o.jc(2,"div",14),o.jc(3,"h5",15),o.hd(4,s,2,2,"span",16),o.ic(),o.ic(),o.jc(5,"table",17),o.jc(6,"tr"),o.hd(7,l,2,1,"th",16),o.ic(),o.hd(8,g,2,3,"tr",18),o.ic(),o.ic(),o.ic()),2&t){const t=i.$implicit,e=o.yc(2);o.Pb(4),o.Hc("ngForOf",e.headerKeys),o.Pb(3),o.Hc("ngForOf",e.headers),o.Pb(1),o.Hc("ngForOf",t.list)}}function b(t,i){if(1&t&&(o.jc(0,"div",2),o.jc(1,"div",3),o.jc(2,"div",4),o.jc(3,"span"),o.jc(4,"h3"),o.jd(5,"INVOICE REPORT"),o.ic(),o.jc(6,"span",5),o.jd(7),o.zc(8,"date"),o.ic(),o.ic(),o.ic(),o.ic(),o.jc(9,"div",6),o.jc(10,"div",7),o.ec(11,"div",8),o.jc(12,"div",9),o.jc(13,"span",10),o.jc(14,"h3"),o.jd(15),o.zc(16,"number"),o.ic(),o.ic(),o.ic(),o.jc(17,"div",9),o.jc(18,"span",10),o.jc(19,"h3"),o.jd(20),o.zc(21,"number"),o.ic(),o.ic(),o.ic(),o.jc(22,"div",9),o.jc(23,"span",10),o.jc(24,"h3"),o.jd(25),o.zc(26,"number"),o.ic(),o.ic(),o.ic(),o.ic(),o.ic(),o.hd(27,p,9,3,"div",11),o.ec(28,"br"),o.ec(29,"br"),o.jc(30,"div",6),o.jc(31,"div",7),o.ec(32,"div",8),o.jc(33,"div",9),o.jc(34,"span",10),o.jc(35,"h3"),o.jd(36),o.zc(37,"number"),o.ic(),o.ic(),o.ic(),o.jc(38,"div",9),o.jc(39,"span",10),o.jc(40,"h3"),o.jd(41),o.zc(42,"number"),o.ic(),o.ic(),o.ic(),o.jc(43,"div",9),o.jc(44,"span",10),o.jc(45,"h3"),o.jd(46),o.zc(47,"number"),o.ic(),o.ic(),o.ic(),o.ic(),o.ic(),o.ic()),2&t){const t=o.yc();o.Pb(7),o.kd(o.Bc(8,8,t.currentDate,"dd/MM/yyyy")),o.Pb(8),o.ld(" Total Grey Meter - ",o.Bc(16,11,t.totalGrayMeter,"1.2-2")," "),o.Pb(5),o.ld(" Total Finished Meter - ",o.Bc(21,14,t.totalFinishedMeter,"1.2-2")," "),o.Pb(5),o.ld("Total Amount - ",o.Bc(26,17,t.totalAmount,"1.2-2"),""),o.Pb(2),o.Hc("ngForOf",t.shortReport),o.Pb(9),o.ld(" Total Grey Meter - ",o.Bc(37,20,t.totalGrayMeter,"1.2-2")," "),o.Pb(5),o.ld(" Total Finished Meter - ",o.Bc(42,23,t.totalFinishedMeter,"1.2-2")," "),o.Pb(5),o.ld("Total Amount - ",o.Bc(47,26,t.totalAmount,"1.2-2"),"")}}let u=(()=>{class t{constructor(t){this.datepipe=t,this.currentDate=new Date,this.shortReport=[],this.headerArray=[],this.headerKeys=[],this.copyHeaderKeys=[]}ngOnInit(){this.maxDate=new Date(this.currentDate.getFullYear(),this.currentDate.getMonth(),this.currentDate.getDate(),23,59),this.getShortReport()}getShortReport(){if(this.totalAmount=0,this.totalFinishedMeter=0,this.totalGrayMeter=0,this.shortReport&&this.shortReport.length){let t=/([A-Z])([A-Z])([a-z])|([a-z])([A-Z])/g;this.copyHeaderKeys=Object.keys(this.shortReport[0]);let i=[];if(this.copyHeaderKeys.forEach((e,n)=>{i.push(e.replace(t,"$1$4 $2$3$5")),i[n]=i[n].charAt(0).toUpperCase()+i[n].slice(1)}),i=i.filter(t=>"List"!==t),this.copyHeaderKeys=this.copyHeaderKeys.filter(t=>"list"!==t),this.headerKeys=[...i],this.shortReport[0].list&&this.shortReport[0].list.length){let t=/([A-Z])([A-Z])([a-z])|([a-z])([A-Z])/g;this.headerArray=Object.keys(this.shortReport[0].list[0]);let i=[];this.headerArray.forEach((e,n)=>{i.push(e.replace(t,"$1$4 $2$3$5")),i[n]=i[n].charAt(0).toUpperCase()+i[n].slice(1)}),this.headers=[...i],this.shortReport.forEach(t=>{t.list.forEach(t=>{this.totalFinishedMeter+=t.totalFinishMtr,this.totalGrayMeter+=t.totalMtr,this.totalAmount+=t.taxAmt})})}this.shortReport=Object(c.sortBy)(this.shortReport,"invoiceNo"),this.printReport()}}printReport(){let t=new n.PrintDocument({title:""});t.append('<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/paper-css/0.3.0/paper.css">'),t.append('<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">'),t.append('<link href="https://cdn.grapecity.com/wijmo/5.latest/styles/wijmo.min.css" rel="stylesheet">');let i=setInterval(()=>{let e=document.getElementById("shortReport");null!=e&&(t.append(e),clearInterval(i),setTimeout(()=>{t.print(),this.shortReport=[]},1e3))},10)}}return t.\u0275fac=function(i){return new(i||t)(o.dc(a.e))},t.\u0275cmp=o.Xb({type:t,selectors:[["ngx-invoice-report"]],inputs:{shortReport:"shortReport"},decls:5,vars:1,consts:[["invoiceForm","ngForm"],["id","shortReport","class","print-body",4,"ngIf"],["id","shortReport",1,"print-body"],[1,"row","report-header"],[1,"col-md-12","print-layout-report"],[1,"font-20"],[1,"row","align-item-right","justify-content-end","mr-5"],[1,"justify-content-space-between"],[1,"col-sm-3"],[1,"text-right","table-bordered"],[2,"font-size","large"],["class","mb-5",4,"ngFor","ngForOf"],[1,"mb-5"],[1,"print-body"],[1,"invoice-no-heading",2,"width","fit-content"],[1,"bold-invoice",2,"font-size","18px"],[4,"ngFor","ngForOf"],[1,"print-layout-report","table-bordered","table-striped","table-process-fnt","width-100",2,"font-size","large"],[3,"background",4,"ngFor","ngForOf"]],template:function(t,i){1&t&&(o.jc(0,"nb-card"),o.jc(1,"nb-card-body"),o.jc(2,"form",null,0),o.hd(4,b,48,29,"div",1),o.ic(),o.ic(),o.ic()),2&t&&(o.Pb(4),o.Hc("ngIf",i.shortReport&&i.shortReport.length>0))},directives:[r.u,r.t,d.x,d.m,d.n,a.n,a.m],pipes:[a.e,a.f],styles:[".font-styles[_ngcontent-%COMP%]{font-size:large}.report-header[_ngcontent-%COMP%]{background:#c6d9f1;color:#4f6072}.invoice-no-heading[_ngcontent-%COMP%]{padding:2px;border:1px solid #000}.print-body[_ngcontent-%COMP%]{margin:10px}.bold-invoice[_ngcontent-%COMP%]{font-weight:700}.tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#90ee90}"]}),t})()}}]);