(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{GiSl:function(i,t,e){"use strict";e.r(t),e.d(t,"AdditionSlipModule",(function(){return bi}));var n=e("ofXK"),c=e("3Pt+"),a=e("yzeJ"),d=e("tyNb"),o=e("iwgK"),s=e("1G5W"),l=e("XNiG"),r=e("kF6S"),p=e("O1SP"),h=e("8k+d"),g=e("g+Ya"),u=e("PW/x"),m=e("RNo3"),y=e("SapW"),b=e("IM7N"),S=e("mrSG"),j=e("yodA"),f=e("iLL0"),v=e("tcrU"),I=e("LvDl"),D=e("fXoL"),P=e("1kSV"),C=e("5eHb"),M=e("aceb"),q=e("ZOsW"),w=e("qre9"),x=e("xFGO");function k(i,t){1&i&&(D.jc(0,"div",9),D.jc(1,"h2",10),D.jd(2,"Generate slip"),D.ic(),D.ic())}function O(i,t){1&i&&(D.jc(0,"div",34),D.jc(1,"h3",35),D.jd(2,"Addition"),D.ic(),D.ic())}function A(i,t){1&i&&(D.jc(0,"div",36),D.jc(1,"span"),D.jd(2,"Temperarture is required"),D.ic(),D.ic())}function N(i,t){1&i&&(D.jc(0,"div",36),D.jc(1,"span"),D.jd(2,"Hold Time is required"),D.ic(),D.ic())}function L(i,t){1&i&&(D.jc(0,"div",36),D.jc(1,"span"),D.jd(2,"Liquor ratio is required"),D.ic(),D.ic())}function F(i,t){if(1&i&&(D.jc(0,"ng-option",43),D.jd(1),D.ic()),2&i){const i=t.$implicit;D.Hc("value",i.itemId),D.Pb(1),D.md(" ",i.itemName," - ",i.supplierName,"")}}const H=function(){return{type:"zoom"}},B=function(i){return{animation:i}};function T(i,t){if(1&i){const i=D.kc();D.jc(0,"tr"),D.jc(1,"td"),D.jc(2,"ng-select",37,38),D.uc("ngModelChange",(function(e){return D.Xc(i),t.$implicit.itemId=e}))("change",(function(e){D.Xc(i);const n=t.index;return D.yc(2).itemSelected1(e,n)})),D.hd(5,F,2,3,"ng-option",39),D.zc(6,"filterOutSelectedSupplier"),D.ic(),D.ic(),D.jc(7,"td"),D.jc(8,"input",40,41),D.uc("keypress",(function(t){return D.Xc(i),D.yc(2).numberOnly(t)}))("ngModelChange",(function(e){return D.Xc(i),t.$implicit.qty=e}))("keyup",(function(e){D.Xc(i);const n=t.index;return D.yc(2).onKeyUp1(e,n,1,"quantity")})),D.ic(),D.ic(),D.jc(10,"td"),D.jc(11,"nb-icon",42),D.uc("click",(function(){D.Xc(i);const e=t.index;return D.yc(2).removeItem1(e)})),D.ic(),D.ic(),D.ic()}if(2&i){const i=t.$implicit,e=t.index,n=D.yc(2);D.Pb(2),D.Kc("name","itemId",i._id,"",e,""),D.Hc("ngModel",i.itemId),D.Pb(3),D.Hc("ngForOf",D.Cc(6,9,n.itemListArray,n.itemList,i.itemId)),D.Pb(3),D.Kc("name","qty",i._id,"",e,""),D.Hc("ngModel",i.qty)("id","itemList"+e+"-1"),D.Pb(3),D.Hc("options",D.Nc(14,B,D.Mc(13,H)))}}const _=function(i){return{"is-invalid":i}};function $(i,t){if(1&i){const i=D.kc();D.jc(0,"div",11),D.jc(1,"nb-card-body",12),D.jc(2,"div"),D.jc(3,"div",13),D.jc(4,"div"),D.jc(5,"form",null,14),D.jc(7,"div"),D.jc(8,"div",2),D.hd(9,O,3,0,"div",15),D.jc(10,"div",16),D.jc(11,"label",17),D.jd(12,"Temperature"),D.ic(),D.jc(13,"input",18,19),D.uc("keypress",(function(t){return D.Xc(i),D.yc().numberOnly(t)}))("ngModelChange",(function(t){return D.Xc(i),D.yc().temp=t})),D.ic(),D.hd(15,A,3,0,"div",20),D.ic(),D.jc(16,"div",16),D.jc(17,"label",17),D.jd(18,"Hold Time"),D.ic(),D.jc(19,"input",21,22),D.uc("keypress",(function(t){return D.Xc(i),D.yc().numberOnly(t)}))("ngModelChange",(function(t){return D.Xc(i),D.yc().holdTime=t})),D.ic(),D.hd(21,N,3,0,"div",20),D.ic(),D.jc(22,"div",16),D.jc(23,"label",17),D.jd(24,"Liqure Ratio"),D.ic(),D.jc(25,"input",23,24),D.uc("keypress",(function(t){return D.Xc(i),D.yc().numberOnly(t)}))("ngModelChange",(function(t){return D.Xc(i),D.yc().liquorRatio=t})),D.ic(),D.hd(27,L,3,0,"div",20),D.ic(),D.jc(28,"div",25),D.jc(29,"nb-checkbox",26),D.uc("ngModelChange",(function(t){return D.Xc(i),D.yc().isColor=t})),D.ic(),D.jd(30," \xa0"),D.jc(31,"label",27),D.jd(32,"Color"),D.ic(),D.ic(),D.jc(33,"div",28),D.jc(34,"table",29),D.jc(35,"tr"),D.jc(36,"th"),D.jd(37,"Item name"),D.ic(),D.jc(38,"th"),D.jd(39,"Quantity"),D.ic(),D.jc(40,"th"),D.jd(41,"Action"),D.ic(),D.ic(),D.hd(42,T,12,16,"tr",30),D.zc(43,"filterByIsColor"),D.ic(),D.ic(),D.ic(),D.ic(),D.jc(44,"div",2),D.jc(45,"div",31),D.jc(46,"button",32),D.uc("click",(function(){return D.Xc(i),D.yc().activeModal.close(!1)})),D.jd(47,"CANCEL"),D.ic(),D.jc(48,"button",33),D.uc("click",(function(){D.Xc(i);const t=D.Uc(6),e=D.yc();return e.additionSlipSaveFlag=!0,e.saveSlipData(t)})),D.jd(49,"SAVE"),D.ic(),D.jc(50,"button",33),D.uc("click",(function(){D.Xc(i);const t=D.Uc(6);return D.yc().printSlip(t)})),D.jd(51,"Save And Print"),D.ic(),D.ic(),D.ic(),D.ic(),D.ic(),D.ic(),D.ic(),D.ic(),D.ic()}if(2&i){const i=D.Uc(14),t=D.Uc(20),e=D.Uc(26),n=D.yc();D.Pb(9),D.Hc("ngIf",n.additionSlipFlag),D.Pb(4),D.Hc("ngModel",n.temp)("ngClass",D.Nc(17,_,i.invalid&&(n.formSubmitted||i.touched))),D.Pb(2),D.Hc("ngIf",i.invalid&&(n.formSubmitted||i.touched)),D.Pb(4),D.Hc("ngModel",n.holdTime)("ngClass",D.Nc(19,_,t.invalid&&(n.formSubmitted||t.touched))),D.Pb(2),D.Hc("ngIf",t.invalid&&(n.formSubmitted||t.touched)),D.Pb(4),D.Hc("ngModel",n.liquorRatio)("ngClass",D.Nc(21,_,e.invalid&&(n.formSubmitted||e.touched))),D.Pb(2),D.Hc("ngIf",e.invalid&&(n.formSubmitted||e.touched)),D.Pb(2),D.Hc("ngModel",n.isColor),D.Pb(13),D.Hc("ngForOf",D.Cc(43,13,n.itemList,n.isColor,!1))("ngForTrackBy",n.trackByFn)}}function R(i,t){if(1&i&&(D.jc(0,"tr"),D.jc(1,"td",65),D.jc(2,"p",49),D.jd(3),D.ic(),D.ic(),D.jc(4,"td",65),D.jc(5,"p",49),D.jd(6),D.ic(),D.ic(),D.jc(7,"td",65),D.jc(8,"p",49),D.jd(9),D.ic(),D.ic(),D.ic()),2&i){const i=t.$implicit;D.Pb(3),D.kd(i.itemName),D.Pb(3),D.kd(i.qty),D.Pb(3),D.kd(i.supplierName)}}function E(i,t){if(1&i&&(D.jc(0,"div"),D.jc(1,"div",46),D.jc(2,"div",47),D.jc(3,"div",2),D.jc(4,"div",48),D.jc(5,"label",49),D.jd(6,"Lot No:"),D.ic(),D.jc(7,"span",50),D.jd(8),D.ic(),D.ic(),D.jc(9,"div",48),D.jc(10,"label",49),D.jd(11,"Mc No:"),D.ic(),D.jc(12,"span",50),D.jd(13),D.ic(),D.ic(),D.ic(),D.ic(),D.jc(14,"div",47),D.jc(15,"div",2),D.jc(16,"div",48),D.jc(17,"label",49),D.jd(18,"Lot Wt:"),D.ic(),D.jc(19,"span",51),D.jd(20),D.ic(),D.ic(),D.jc(21,"div",48),D.jc(22,"label",49),D.jd(23,"Date:"),D.ic(),D.jc(24,"span",51),D.jd(25),D.ic(),D.ic(),D.ic(),D.ic(),D.jc(26,"div",47),D.jc(27,"div",2),D.jc(28,"div",48),D.jc(29,"label",49),D.jd(30,"QualityId:"),D.ic(),D.jc(31,"span",51),D.jd(32),D.ic(),D.ic(),D.jc(33,"div",48),D.jc(34,"label",49),D.jd(35,"Party Shade No:"),D.ic(),D.jc(36,"span",51),D.jd(37),D.ic(),D.ic(),D.ic(),D.ic(),D.jc(38,"div",47),D.jc(39,"div",2),D.jc(40,"div",48),D.jc(41,"label",49),D.jd(42,"Taka/Cone:"),D.ic(),D.jc(43,"span",51),D.jd(44),D.ic(),D.ic(),D.jc(45,"div",48),D.jc(46,"label",49),D.jd(47,"Color Tone:"),D.ic(),D.jc(48,"span",51),D.jd(49),D.ic(),D.ic(),D.ic(),D.ic(),D.ic(),D.jc(50,"div",52),D.jc(51,"div",53),D.jc(52,"div",54),D.jc(53,"div",55),D.jc(54,"h3",56),D.jd(55,"Addition"),D.ic(),D.ic(),D.jc(56,"div",57),D.jc(57,"label",58),D.jd(58,"Temperature:"),D.ic(),D.jd(59,"\xa0 "),D.jc(60,"div",59),D.jd(61),D.ic(),D.jd(62,"\xa0 "),D.ic(),D.jc(63,"div",60),D.jc(64,"label",58),D.jd(65,"Hold Time:"),D.ic(),D.jc(66,"div",59),D.jd(67),D.ic(),D.ic(),D.jc(68,"div",61),D.jc(69,"label",58),D.jd(70,"Liquor Ratio:"),D.ic(),D.jc(71,"div",62),D.jd(72),D.ic(),D.ic(),D.ic(),D.jc(73,"div",28),D.jc(74,"table",63),D.jc(75,"tr"),D.jc(76,"th",49),D.jd(77,"Item name"),D.ic(),D.jc(78,"th",49),D.jd(79,"Quantity"),D.ic(),D.jc(80,"th",49),D.jd(81,"Supplier Name"),D.ic(),D.ic(),D.hd(82,R,10,3,"tr",64),D.ic(),D.ic(),D.ic(),D.ic(),D.ic()),2&i){const i=D.yc(3);D.Pb(8),D.kd(i.slipData.batchId),D.Pb(5),D.kd(i.slipData.jetId),D.Pb(7),D.kd(i.slipData.totalWt),D.Pb(5),D.kd(i.myDate),D.Pb(7),D.kd(i.slipData.qualityId),D.Pb(5),D.kd(i.slipData.partyShadeNo),D.Pb(7),D.kd(i.slipData.batchCount),D.Pb(5),D.kd(i.slipData.colorTone),D.Pb(12),D.ld(" ",i.temp,""),D.Pb(6),D.ld(" ",i.holdTime,""),D.Pb(5),D.ld(" ",i.liquorRatio,""),D.Pb(10),D.Hc("ngForOf",i.itemList)}}function X(i,t){if(1&i&&(D.jc(0,"div"),D.hd(1,E,83,12,"div",45),D.ic()),2&i){const i=D.yc(2);D.Pb(1),D.Hc("ngIf",i.slipData.dyeingSlipDataList)}}function W(i,t){if(1&i&&(D.jc(0,"div",44),D.jc(1,"nb-card-body"),D.hd(2,X,2,1,"div",45),D.ic(),D.ic()),2&i){const i=D.yc();D.Pb(2),D.Hc("ngIf",i.slipData)}}let z=(()=>{class i{constructor(i,t,e,n,c){this.activeModal=i,this.toastr=t,this.datePipe=e,this.DyeingProcessService=n,this.planningSlipService=c,this.processTypes=["Scouring","Dyeing","RC","Cold Wash","Addition"],this.isPrinting=!0,this.itemListArray=[],this.itemList=[],this.quantityNullFlag=!1,this.formSubmitted=!1,this.disableButton=!1,this.isSavedForPrint=!1,this.additionSlipSaveFlag=!1,this.saveClicked=!1,this.refreshPipe=0,this.destroy$=new l.a,this.myDate=new Date,this.myDate=this.datePipe.transform(this.myDate,"dd-MM-yyyy"),this.itemList.push(new j.a)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}ngOnInit(){return Object(S.a)(this,void 0,void 0,(function*(){yield this.getItemData(),this.batchId&&this.stockId&&(yield this.getSlipDataFromBatch()),this.isPrintDirect&&(yield this.printSlip()),this.editAdditionFlag&&this.getUpdateDataForAdditionSlip()}))}getItemData(){this.DyeingProcessService.getAllItemWithSupplier().pipe(Object(s.a)(this.destroy$)).subscribe(i=>{i.success&&(this.itemListArray=i.data)},i=>{})}getSlipDataFromBatch(){this.planningSlipService.getSlipDataByBatchStockId(this.batchId,this.stockId).pipe(Object(s.a)(this.destroy$)).subscribe(i=>{i.success&&(this.slipData=i.data,this.slipData&&(this.slipData.dyeingSlipDataList.forEach(i=>{i.dyeingSlipItemData.forEach(i=>{i.qty=i.qty?i.qty.toFixed(3):i.qty}),this.slipData.totalWt=Number(this.slipData.totalWt).toFixed(3)}),this.slipData.dyeingSlipDataList=Object(I.sortBy)(this.slipData.dyeingSlipDataList,"sequence"),this.isPrintDirect&&this.printNOW()))},i=>{})}getUpdateDataForAdditionSlip(){let i=this.additionSlipData.dyeingSlipData;this.temp=i.temp,this.holdTime=i.holdTime,this.isColor=i.isColor,this.liquorRatio=i.liquerRation,this.itemList=i.dyeingSlipItemData,this.id=i.id}printSlip(i){if(i&&!i.valid||this.quantityNullFlag)return this.toastr.error("Fill empty fields."),void(this.quantityNullFlag=!1);if(this.isPrintDirect?this.isSavedForPrint=!0:this.saveSlipData(i,!0),!this.isPrintDirect&&this.editAdditionFlag){let i=setInterval(()=>{this.slipData&&this.isSavedForPrint&&(clearInterval(i),this.printNOW(),clearInterval(i))},10);this.quantityNullFlag=!1}}printNOW(){this.isPrinting=!1;let i=new v.PrintDocument({title:""});i.append('<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/paper-css/0.3.0/paper.css">'),i.append('<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">'),i.append('<link href="https://cdn.grapecity.com/wijmo/5.latest/styles/wijmo.min.css" rel="stylesheet">'),i.append('<link href="./planning-slip.component.scss" rel="stylesheet">');let t=!1,e=setInterval(()=>{let n=document.getElementById("print-slip");n&&(i.append(n),i.print(),t=!0,clearInterval(e),this.activeModal.close(this.slipObj))},10)}numberOnly(i){var t=i.which?i.which:i.keyCode;return 46==t||!(t>31&&(t<48||t>57)||69==t)}itemSelected1(i,t){let e=i;this.itemListArray.forEach(i=>{i.itemId==e&&(this.itemList[t].itemName=i.itemName,this.itemList[t].supplierId=i.supplierId,this.itemList[t].supplierName=i.supplierName,this.itemList[t].itemType=i.itemType)})}onKeyUp1(i,t,e,n){if(13==(i.keyCode?i.keyCode:i.which))if(this.index="itemList"+(t+1)+"-1",t===this.itemList.length-1){let i=this.itemList[t];if(i.itemName&&i.qty){let i=new j.a;this.itemList.push(i);let t=setInterval(()=>{let i=document.getElementById(this.index);null!=i&&(i.focus(),clearInterval(t))},10)}else this.toastr.error("Fill empty fields")}else{this.index="itemList"+(t+1)+"-"+e;let i=setInterval(()=>{let t=document.getElementById(this.index);null!=t&&(t.focus(),clearInterval(i))},10)}}removeItem1(i){1==this.itemList.length?(this.itemList=[],this.itemList.push(new j.a)):this.itemList.splice(i,1)}trackByFn(i,t){return t?t._id||t:i}colorSelected(i,t){this.refreshPipe++,this.refreshPipe>10&&(this.refreshPipe=1)}saveSlipData(i,t=!1){if(this.checkItemListAndValue(),this.formSubmitted=!0,!i.valid||this.quantityNullFlag)return this.formSubmitted=!1,void this.toastr.error("Fill empty fields.");this.disableButton=!0,this.additionSlipFlag?(this.slipObj={id:this.id,temp:i.value.temp,holdTime:i.value.holdTime,liquorRatio:i.value.liquorRatio,isColor:i.value.isColor,items:this.itemList,printAlso:t},this.isSavedForPrint=!0,(this.additionSlipSaveFlag||t&&!this.editAdditionFlag)&&this.activeModal.close(this.slipObj)):this.planningSlipService.updateSlipData(this.slipData).pipe(Object(s.a)(this.destroy$)).subscribe(i=>{i.success?(this.isSavedForPrint=!0,this.toastr.success(i.msg),this.saveClicked&&this.activeModal.close(!0)):this.toastr.error(i.msg),this.disableButton=!1},i=>{this.disableButton=!1})}checkItemListAndValue(){this.quantityNullFlag=!1,this.slipData&&this.slipData.dyeingSlipDataList.forEach(i=>{i.dyeingSlipItemData.forEach(i=>{null!=i.qty||(this.quantityNullFlag=!0)})})}}return i.\u0275fac=function(t){return new(t||i)(D.dc(P.a),D.dc(C.b),D.dc(n.e),D.dc(f.a),D.dc(g.a))},i.\u0275cmp=D.Xb({type:i,selectors:[["ngx-slip-dialog"]],inputs:{additionSlipFlag:"additionSlipFlag",isPrintDirect:"isPrintDirect",batchId:"batchId",stockId:"stockId",editAdditionFlag:"editAdditionFlag",additionSlipData:"additionSlipData"},decls:11,vars:3,consts:[[1,"nb-style","pr-mr-0"],[1,"nb-header"],[1,"row"],["class","col-md-11",4,"ngIf"],[1,"col-md-1","user-per-check-display"],["aria-label","Close",1,"close","btn-foucs-none",3,"click"],["aria-hidden","true",1,"close-icon"],["id","addition-slip",4,"ngIf"],["id","print-slip","class","jet-slip size-A5",4,"ngIf"],[1,"col-md-11"],[1,"nb-text"],["id","addition-slip"],[1,"pr-pd-0"],[1,"container"],["myForm","ngForm"],["class","col-md-12",4,"ngIf"],[1,"form-group","col-md-4"],[1,"required","font-13"],["type","number","min","0","name","temp","required","",1,"form-control",3,"ngModel","ngClass","keypress","ngModelChange"],["temp1","ngModel"],["class","required-class",4,"ngIf"],["type","number","min","0","name","holdTime","required","",1,"form-control",3,"ngModel","ngClass","keypress","ngModelChange"],["hTime1","ngModel"],["type","number","min","0","name","liquorRatio","required","",1,"form-control",3,"ngModel","ngClass","keypress","ngModelChange"],["lRatio1","ngModel"],[1,"form-group","col-md-3","display-flex-start"],["id","iscolor","name","isColor",1,"status-basic","nb-transition",3,"ngModel","ngModelChange"],[1,"font-13"],[1,"form-group","col-md-12"],[1,"table","table-bordered","table-striped","table-process-fnt","text-center"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"col-md-12","mobile-btn-center","text-btn-right"],["type","button",1,"btn","btn-primary","btn-sm","btn-design-cancel",3,"click"],["type","button",1,"btn","btn-primary","btn-sm","btn-design-save",3,"click"],[1,"col-md-12"],[1,"name-print"],[1,"required-class"],["itemId1","ngModel","appendTo","body","required","","appendTo","body","required","",1,"ng-select-br-none",3,"name","ngModel","ngModelChange","change"],["data","","itemId1","ngModel"],["placeholder","Select Item",3,"value",4,"ngFor","ngForOf"],["type","number","min","0","required","",1,"tableForm","line-height-subtable",3,"name","ngModel","id","keypress","ngModelChange","keyup"],["quantity1","ngModel"],["icon","trash","status","danger",3,"options","click"],["placeholder","Select Item",3,"value"],["id","print-slip",1,"jet-slip","size-A5"],[4,"ngIf"],[1,"container","print-container","mr-bt-50"],[1,"mb-1","print-text-center","pd-bt-25"],[1,"col-md-6","wth-50"],[1,"font-25"],[1,"slip-value","rd-color"],[1,"slip-value"],[1,"container","print-container","mr-bt-50","jet-print-style-changes"],[1,"row","print-wth-100","background-c6daf0","mr-top-bottom-15"],[1,"col-md-12","width-100"],[1,"form-group","col-md-4","width-20","form-style-print"],[1,"font-30"],[1,"form-group","col-md-4","width-28","form-style-print"],[1,"mr-right","font-25","font-weight-bold"],[1,"print-data","width-30","color-000"],[1,"form-group","col-md-4","width-25","form-style-print"],[1,"form-group","col-md-4","form-style-print","width-27"],[1,"print-data","width-30","color-000","border-left-1px"],["id","border-table",1,"table","table-bordered","table-process-fnt","text-center","print-bg-transperent"],[4,"ngFor","ngForOf"],[1,"pd-bt","mr-top-5"]],template:function(i,t){1&i&&(D.jc(0,"nb-card",0),D.jc(1,"nb-card-header",1),D.jc(2,"div",2),D.hd(3,k,3,0,"div",3),D.jc(4,"div",4),D.jc(5,"button",5),D.uc("click",(function(){return t.activeModal.close(!1)})),D.jc(6,"span",6),D.jd(7,"\xd7"),D.ic(),D.ic(),D.ic(),D.ic(),D.ic(),D.jc(8,"nb-card-body"),D.hd(9,$,52,23,"div",7),D.ic(),D.hd(10,W,3,1,"div",8),D.ic()),2&i&&(D.Pb(3),D.Hc("ngIf",t.additionSlipFlag),D.Pb(6),D.Hc("ngIf",t.additionSlipFlag),D.Pb(1),D.Hc("ngIf",t.additionSlipFlag&&!t.isPrinting&&t.slipData))},directives:[M.u,M.x,n.n,M.t,c.x,c.m,c.n,c.q,c.a,c.t,c.l,c.o,n.l,M.A,n.m,q.a,M.I,q.c],pipes:[w.a,x.a],styles:[".print-slip[_ngcontent-%COMP%]{width:100%;height:100%;padding-top:10%}@page{size[_ngcontent-%COMP%]:A5;margin:0}.wth-50[_ngcontent-%COMP%]{width:50%;display:flex;justify-content:space-between}.pd-bt[_ngcontent-%COMP%]{padding-top:0;padding-bottom:0}.slip-value[_ngcontent-%COMP%]{border-style:groove;width:150px}.slip-background[_ngcontent-%COMP%]{display:flex;background-color:#5f9ea0!important}.print-data[_ngcontent-%COMP%]{color:#aa3634!important;border-style:groove;width:50px}.pick-color-row[_ngcontent-%COMP%]{width:100%!important}@media print{.size-A5[_ngcontent-%COMP%]{size:A5}.mr-top-30[_ngcontent-%COMP%]{margin-top:30px}.mr-bottom-30[_ngcontent-%COMP%]{margin-bottom:30px}.border-style-solid[_ngcontent-%COMP%]{border-style:solid}.pd-top-10[_ngcontent-%COMP%]{padding-top:10px}.slip-value[_ngcontent-%COMP%]{width:60%}.rd-color[_ngcontent-%COMP%]{color:red}.jet-print-style-changes[_ngcontent-%COMP%]{margin:0!important}.jet-print-style-changes[_ngcontent-%COMP%], .main-jet-p-changes[_ngcontent-%COMP%]{width:100%!important;border-style:solid;background-color:c6daf0}.main-jet-p-changes[_ngcontent-%COMP%]{margin-bottom:20px!important}.width-100[_ngcontent-%COMP%]{width:100%!important}.width-20[_ngcontent-%COMP%]{width:20%!important}.width-28[_ngcontent-%COMP%]{width:28%!important}.width-25[_ngcontent-%COMP%]{width:25%!important}.width-27[_ngcontent-%COMP%]{width:27%!important}.width-30[_ngcontent-%COMP%]{width:30%!important}.color-000[_ngcontent-%COMP%]{color:#000!important}.form-style-print[_ngcontent-%COMP%]{padding:0;display:inline-flex;justify-content:flex-start;align-items:center}.pd-15[_ngcontent-%COMP%]{padding-top:15px;padding-bottom:15px}.font-25[_ngcontent-%COMP%]{font-size:25px!important}.mr-top-bottom-15[_ngcontent-%COMP%]{margin-top:15px;margin-bottom:15px}.font-weight-bold[_ngcontent-%COMP%]{font-weight:700}.font-30[_ngcontent-%COMP%]{font-size:30px}.border-left-1px[_ngcontent-%COMP%]{border-left:1px solid}.print-bg-transperent[_ngcontent-%COMP%]{background-color:transparent}.print-color-media[_ngcontent-%COMP%]{width:auto;color:#000!important}.font-40[_ngcontent-%COMP%]{font-size:40px}}"]}),i})();var Q=e("lDzL"),U=e("+lss");function G(i,t){if(1&i&&(D.jc(0,"ng-option",39),D.jd(1),D.ic()),2&i){const i=t.$implicit;D.Hc("value",i),D.Pb(1),D.ld("",i.batchId," ")}}const K=function(){return{type:"zoom"}},V=function(i){return{animation:i}};function J(i,t){if(1&i){const i=D.kc();D.jc(0,"nb-icon",40),D.uc("click",(function(){D.Xc(i);const e=t.row;return D.yc().editSlip(e.id)})),D.ic(),D.jc(1,"nb-icon",41),D.uc("click",(function(){D.Xc(i);const e=t.row;return D.yc().deleteSlip(e.id)})),D.ic(),D.jc(2,"nb-icon",42),D.uc("click",(function(){D.Xc(i);const e=t.row;return D.yc().editSlip(e.id,!0)})),D.ic()}2&i&&(D.Hc("options",D.Nc(4,V,D.Mc(3,K))),D.Pb(1),D.Hc("options",D.Nc(7,V,D.Mc(6,K))),D.Pb(1),D.Hc("options",D.Nc(10,V,D.Mc(9,K))))}function Y(i,t){if(1&i&&(D.jc(0,"ng-option",39),D.jc(1,"div",4),D.jc(2,"div",30),D.jc(3,"div",31),D.jd(4),D.ic(),D.ic(),D.jc(5,"div",30),D.jc(6,"div",32),D.jd(7),D.ic(),D.ic(),D.ic(),D.ic()),2&i){const i=t.$implicit;D.Hc("value",i.id),D.Pb(4),D.ld(" ",i.partyName,""),D.Pb(3),D.ld(" ",i.partyCode,"")}}function Z(i,t){if(1&i&&(D.jc(0,"ng-option",39),D.jc(1,"div",4),D.jc(2,"div",30),D.jc(3,"div",31),D.jd(4),D.ic(),D.ic(),D.jc(5,"div",30),D.jc(6,"div",32),D.jd(7),D.ic(),D.ic(),D.ic(),D.ic()),2&i){const i=t.$implicit;D.Hc("value",i.qualityEntryId),D.Pb(4),D.ld(" ",i.qualityId,""),D.Pb(3),D.ld(" ",i.qualityName,"")}}function ii(i,t){if(1&i){const i=D.kc();D.jc(0,"button",43),D.uc("click",(function(){D.Xc(i);const e=t.$implicit;return D.yc().onBatchSelect(e)})),D.jd(1),D.ic()}if(2&i){const i=t.$implicit;D.Pb(1),D.ld(" ",i.batchId," ")}}const ti=function(i){return{"is-invalid":i}};class ei{}class ni{}class ci{}class ai{}let di=(()=>{class i{constructor(i,t,e,n,c,a,d,o){this.modalService=i,this.batchService=t,this.partyService=e,this.qualityService=n,this.planningService=c,this.programService=a,this.route=d,this.toastr=o,this.directSlipFlag=!1,this.formSubmitted=!1,this.directBatchList=[],this.batchList=[],this.partyList=[],this.qualityList=[],this.additionSlipList=[],this.copyAdditionalSlip=[],this.addition=[],this.additionList=[{batchId:null,holdTime:null,liquorRatio:null,temperature:null}],this.loading=!0,this.tableStyle="bootstrap",this.additionSlipArray=[],this.additionSlip=new ei,this.dyeingSlipData=new ci,this.directSlip=new ni,this.dyeingSlipItemData=new ai,this.directSlipBatchId=null,this.directSlipStockId=null,this.directSlipPartyId=null,this.directSlipQualityId=null,this.printNow=!1,this.destroy$=new l.a,this.tableHeaders=["batchId","holdTime","liquerRation","temp"],this.searchStr="",this.searchANDCondition=!1}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}ngOnInit(){this.getAllParty(),this.getAllQuality(),this.getAllBatch(),this.getAllBatchData(),this.getAllAdditionSlip(()=>{})}getAllParty(){this.loading=!0,this.partyService.getAllPartyNameList().pipe(Object(s.a)(this.destroy$)).subscribe(i=>{i.success?(this.partyList=i.data,this.loading=!1):this.loading=!1},i=>{this.loading=!1})}getAllQuality(){this.loading=!0,this.qualityService.getQualityNameData().pipe(Object(s.a)(this.destroy$)).subscribe(i=>{i.success?(this.qualityList=i.data,this.loading=!1):this.loading=!1},i=>{this.loading=!1})}getAllBatch(){this.batchService.getAllBatchForAdditionSlip().pipe(Object(s.a)(this.destroy$)).subscribe(i=>{i.success?(this.batchList=i.data,this.loading=!1):this.loading=!1},i=>{this.loading=!1})}getAllBatchData(){this.directBatchList=[],this.batchService.getAllBatch().pipe(Object(s.a)(this.destroy$)).subscribe(i=>{i.success&&(this.directBatchList=i.data)},i=>{this.toastr.error(p.Serever_Error)})}partySelected(i){this.loading=!0,this.directSlip.qualityEntryId=null,i&&this.directSlip.partyId&&this.programService.getQualityByParty(this.directSlip.partyId).pipe(Object(s.a)(this.destroy$)).subscribe(i=>{i.success?this.qualityList=i.data.qualityDataList:(this.directSlip.qualityEntryId=null,this.qualityList=[]),this.loading=!1},i=>{this.qualityList=[],this.loading=!1}),i?(this.directBatchList=[],this.directSlip.partyId&&this.programService.getBatchByParty(this.directSlip.partyId).pipe(Object(s.a)(this.destroy$)).subscribe(i=>{i.success?(this.directBatchList=i.data,this.directBatchList&&(this.directBatchList=this.directBatchList.filter(i=>!i.productionPlanned)),this.loading=!1):this.loading=!1},i=>{this.loading=!1})):(this.directBatchList=[],this.directSlip.partyId=null,this.directSlip.qualityEntryId=null,this.getAllParty(),this.getAllQuality(),this.getAllBatchData(),this.loading=!1)}qualitySelected(i){this.loading=!0,null!=i&&(this.directSlip.qualityEntryId&&this.qualityList.forEach(i=>{i.id==this.directSlip.qualityEntryId&&(this.p_id=i.partyId,this.q_id=i.qualityId,this.directSlip.qualityEntryId=i.id)}),this.directSlip.qualityEntryId&&(this.batchList=[],this.programService.getBatchByQuality(this.directSlip.qualityEntryId).pipe(Object(s.a)(this.destroy$)).subscribe(i=>{i.success?(this.directBatchList=i.data,this.batchList&&(this.directBatchList=this.directBatchList.filter(i=>!i.productionPlanned)),this.loading=!1):this.loading=!1},i=>{this.loading=!1})))}onBatchSelect(i){i&&(this.directSlipFlag=!0);const t=this.modalService.open(b.a);t.componentInstance.isPrintDirect=!1,this.directSlipFlag&&(this.directSlipBatchId=i.batchId,this.directSlipStockId=i.controlId,this.directSlipPartyId=i.partyId,this.directSlipQualityId=i.qualityEntryId,t.componentInstance.partyId=i.partyId,t.componentInstance.qualityId=i.qualityEntryId,t.componentInstance.directSlipFlag=!0,t.componentInstance.batchId=i.batchId,t.componentInstance.stockId=null==i?void 0:i.controlId),t.result.then(i=>{i&&(this.dyeingSlipData=new ci,this.dyeingSlipData.dyeingSlipItemData=[],this.dyeingSlipData.processType="directDyeing",this.directSlip.jetId=i.jetId,this.dyeingSlipData.holdTime=i.holdTime,this.dyeingSlipData.liquerRation=i.liquorRatio,this.dyeingSlipData.temp=i.temp,i.items.forEach((i,t)=>{this.dyeingSlipData.dyeingSlipItemData[t]||this.dyeingSlipData.dyeingSlipItemData.push(new ai),this.dyeingSlipData.dyeingSlipItemData[t].itemId=i.itemId,this.dyeingSlipData.dyeingSlipItemData[t].itemName=i.itemName,this.dyeingSlipData.dyeingSlipItemData[t].qty=i.qty,this.dyeingSlipData.dyeingSlipItemData[t].supplierId=i.supplierId,this.dyeingSlipData.dyeingSlipItemData[t].supplierName=i.supplierName}),this.directSlip.dyeingSlipData=this.dyeingSlipData,this.directSlip.batchId=this.directSlipBatchId,this.directSlip.stockId=this.directSlipStockId,this.directSlip.partyId=this.directSlipPartyId,this.directSlip.qualityEntryId=this.directSlipQualityId,this.printNow=i.print,i.shadeId&&(this.directSlip.shadeId=i.shadeId),this.saveDirectSlip())})}printDirect(i){}batchSelected(i){this.additionSlip.batchId=i.batchId,this.additionSlip.productionId=i.productionId;const t=this.modalService.open(z);t.componentInstance.isPrintDirect=!1,t.componentInstance.additionSlipFlag=!0,t.componentInstance.batchId=i.batchId,t.componentInstance.stockId=i.productionId,t.result.then(i=>{i&&this.saveAdditionSlip(i)})}saveDirectSlip(){this.planningService.saveDirectSlip(this.directSlip).pipe(Object(s.a)(this.destroy$)).subscribe(i=>{if(i.success){if(this.toastr.success(p.Add_Success),this.directSlip.shadeId=null,this.printNow){const t=this.modalService.open(b.a);t.componentInstance.isPrintDirect=!0,t.componentInstance.batchId=this.directSlipBatchId,t.componentInstance.stockId=i.data,t.componentInstance.additionSlipFlag=!1,t.result.then(i=>{}).catch(i=>{})}this.ngOnInit()}else this.toastr.error(i.msg)},i=>{})}editSlip(i,t){let e,n;this.additionSlipList.forEach(t=>{t.id==i&&(e=t.productionId,n=t.batchId,this.additionSlip.batchId=n,this.additionSlip.productionId=e)});let c=!1;t&&(c=!0),this.getAdditionSlipDataById(i,n,e,c)}getAdditionSlipDataById(i,t,e,n){this.planningService.getAlladditionSlipById(i).pipe(Object(s.a)(this.destroy$)).subscribe(c=>{if(c.success&&(this.additionSlipData=c.data,this.additionSlipData)){const c=this.modalService.open(z);c.componentInstance.isPrintDirect=n,c.componentInstance.batchId=t,c.componentInstance.editAdditionFlag=!0,c.componentInstance.additionSlipFlag=!0,c.componentInstance.stockId=e,c.componentInstance.additionSlipData=this.additionSlipData,c.result.then(t=>{t&&this.updateAdditionSlip(t,i)})}this.loading=!1},i=>{this.loading=!1})}deleteSlip(i){this.modalService.open(r.a,{size:"sm"}).result.then(t=>{t&&this.planningService.deleteAdditionSlip(i).pipe(Object(s.a)(this.destroy$)).subscribe(i=>{this.getAllAdditionSlip(()=>{}),this.toastr.success(p.Delete)},i=>{})})}updateAdditionSlip(i,t){this.dyeingSlipData=new ci,this.additionSlip.id=t,this.additionSlip.dyeingSlipData=this.dyeingSlipData,this.additionSlip.dyeingSlipData.holdTime=i.holdTime,this.additionSlip.dyeingSlipData.temp=i.temp,this.additionSlip.dyeingSlipData.isColor=i.isColor,this.additionSlip.dyeingSlipData.liquerRation=i.liquorRatio,this.additionSlip.dyeingSlipData.processType="addition",this.additionSlip.dyeingSlipData.id=i.id,this.additionSlip.dyeingSlipData.dyeingSlipItemData=i.items,this.planningService.updateAdditionDyeingSlip(this.additionSlip).pipe(Object(s.a)(this.destroy$)).subscribe(i=>{i.success?(this.getAllAdditionSlip(()=>{}),this.toastr.success(p.Update_Success)):this.toastr.error(p.Update_Error)},i=>{})}saveAdditionSlip(i){this.dyeingSlipData.holdTime=i.holdTime,this.dyeingSlipData.temp=i.temp,this.dyeingSlipData.isColor=i.isColor,this.dyeingSlipData.liquerRation=i.liquorRatio,this.dyeingSlipData.processType="addition",this.dyeingSlipData.dyeingSlipItemData=i.items,this.additionSlip.dyeingSlipData=this.dyeingSlipData,this.planningService.saveadditionSlip(this.additionSlip).pipe(Object(s.a)(this.destroy$)).subscribe(t=>{t.success?(this.route.navigate(["/pages/addition-slip"]),this.toastr.success(p.Add_Success),this.getAllAdditionSlip(()=>{i.printAlso&&this.editSlip(t.data,!0)}),this.getAllBatch()):this.toastr.error(p.Add_Error)},i=>{})}getAllAdditionSlip(i=(()=>{})){this.additionSlipList=[],this.planningService.getAlladditionSlip().pipe(Object(s.a)(this.destroy$)).subscribe(t=>{t.success&&(this.additionSlipList=t.data,this.addition=this.additionSlipList.map(i=>({id:i.id,batchId:i.batchId,holdTime:i.dyeingSlipData.holdTime,liquerRation:i.dyeingSlipData.liquerRation,temp:i.dyeingSlipData.temp})),this.copyAdditionalSlip=this.additionSlipList.map(i=>({id:i.id,batchId:i.batchId,holdTime:i.dyeingSlipData.holdTime,liquerRation:i.dyeingSlipData.liquerRation,temp:i.dyeingSlipData.temp})),i()),this.loading=!1},i=>{this.loading=!1})}filter(i){const t=i.toString().toLowerCase().trim(),e=Object.keys(this.copyAdditionalSlip[0]);this.addition=this.copyAdditionalSlip.filter(i=>{for(let n=0;n<e.length;n++)if(i[e[n]]&&i[e[n]].toString().toLowerCase().includes(t)||!t)return!0})}}return i.\u0275fac=function(t){return new(t||i)(D.dc(P.e),D.dc(y.a),D.dc(h.a),D.dc(m.a),D.dc(g.a),D.dc(u.a),D.dc(d.c),D.dc(C.b))},i.\u0275cmp=D.Xb({type:i,selectors:[["ngx-addition-slip"]],decls:75,vars:28,consts:[[1,"nb-style"],["fullWidth","",1,"boiler-thermopack-tabheader"],["tabTitle","Addition slip"],["myForm","ngForm"],[1,"row"],[1,"col-md-4"],[1,"form-group"],[1,"required"],["appendTo","body","appendTo","body","name","batchNo","placeholder","Batch No",1,"required-error-dropdown",3,"ngModel","ngModelChange","change"],["batchNo1","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-8",2,"position","relative","top","26px"],[2,"display","flex"],[2,"margin-top","4px","margin-right","2px"],["status","primary","labelPosition","start","name","shift",3,"ngModel","ngModelChange"],[2,"margin-top","4px","margin-left","2px"],[1,"col-md-8"],["type","text","placeholder","Search","aria-label","Search","aria-describedby","basic-addon1",1,"form-control",3,"ngModel","ngModelChange"],[1,"material",3,"rows","ngClass","headerHeight","footerHeight"],["name","Action","sortable","false","prop","id",3,"maxWidth"],["ngx-datatable-cell-template",""],["name","Batch No.","prop","batchId",3,"maxWidth"],["name","Hold Time","prop","holdTime"],["name","Liquor Ratio","prop","liquerRation",3,"maxWidth"],["name","Temperature","prop","temp",3,"maxWidth"],["tabTitle","Direct slip"],[1,"col-md-4","mobile-mr-bt"],["appendTo","body","placeholder","Select Party Name","name","partyId",1,"required-error-dropdown","dropdown-name",3,"ngModel","ngClass","ngModelChange","change"],["partyId1","ngModel"],["disabled","true"],[1,"col-md-6","col-6"],[1,"text-left","txt-ov-elips"],[1,"text-right","txt-ov-elips"],["appendTo","body","placeholder","Select Quality Name","name","qualityId",1,"required-error-dropdown","dropdown-name",3,"ngModel","ngClass","ngModelChange","change"],["qualityId1","ngModel"],[1,"col-md-12"],[1,"addition-direct-batch"],["nbButton","","size","small","class","p-badge-design",3,"click",4,"ngFor","ngForOf"],["tabTitle","Re-Dyeing slip"],[3,"value"],["icon","edit","status","primary",3,"options","click"],["icon","trash","status","danger",3,"options","click"],["icon","clipboard","nbTooltip","Print","nbTooltipStatus","primary","status","danger",3,"options","click"],["nbButton","","size","small",1,"p-badge-design",3,"click"]],template:function(i,t){if(1&i&&(D.jc(0,"nb-card",0),D.jc(1,"nb-card-body"),D.jc(2,"nb-tabset",1),D.jc(3,"nb-tab",2),D.jc(4,"div"),D.jc(5,"form",null,3),D.jc(7,"div",4),D.jc(8,"div",5),D.jc(9,"div",6),D.jc(10,"label",7),D.jd(11,"Batch No:"),D.ic(),D.jc(12,"ng-select",8,9),D.uc("ngModelChange",(function(i){return t.batchNo=i}))("change",(function(i){return t.batchSelected(i)})),D.hd(14,G,2,2,"ng-option",10),D.ic(),D.ic(),D.ic(),D.jc(15,"div",11),D.jc(16,"div",4),D.jc(17,"div",5),D.jc(18,"div",12),D.jc(19,"p",13),D.jd(20,"OR"),D.ic(),D.jc(21,"nb-toggle",14),D.uc("ngModelChange",(function(i){return t.searchANDCondition=i})),D.ic(),D.jc(22,"p",15),D.jd(23,"AND"),D.ic(),D.ic(),D.ic(),D.jc(24,"div",16),D.jc(25,"input",17),D.uc("ngModelChange",(function(i){return t.searchStr=i})),D.ic(),D.ic(),D.ic(),D.ic(),D.ic(),D.jc(26,"ngx-datatable",18),D.zc(27,"searchInTable"),D.jc(28,"ngx-datatable-column",19),D.hd(29,J,3,12,"ng-template",20),D.ic(),D.ec(30,"ngx-datatable-column",21),D.ec(31,"ngx-datatable-column",22),D.ec(32,"ngx-datatable-column",23),D.ec(33,"ngx-datatable-column",24),D.ic(),D.ic(),D.ic(),D.ic(),D.jc(34,"nb-tab",25),D.jc(35,"div"),D.jc(36,"form",null,3),D.jc(38,"div",4),D.jc(39,"div",26),D.jc(40,"div",6),D.jc(41,"label",7),D.jd(42,"Party Name"),D.ic(),D.jc(43,"ng-select",27,28),D.uc("ngModelChange",(function(i){return t.directSlip.partyId=i}))("change",(function(i){return t.partySelected(i)})),D.jc(45,"ng-option",29),D.jc(46,"div",4),D.jc(47,"div",30),D.jc(48,"div",31),D.jd(49,"Party Name "),D.ic(),D.ic(),D.jc(50,"div",30),D.jc(51,"div",32),D.jd(52," Party Code"),D.ic(),D.ic(),D.ic(),D.ic(),D.hd(53,Y,8,3,"ng-option",10),D.ic(),D.ic(),D.ic(),D.jc(54,"div",26),D.jc(55,"div",6),D.jc(56,"label",7),D.jd(57,"Quality Name"),D.ic(),D.jc(58,"ng-select",33,34),D.uc("ngModelChange",(function(i){return t.directSlip.qualityEntryId=i}))("change",(function(i){return t.qualitySelected(i)})),D.jc(60,"ng-option",29),D.jc(61,"div",4),D.jc(62,"div",30),D.jc(63,"div",31),D.jd(64,"Quality Id "),D.ic(),D.ic(),D.jc(65,"div",30),D.jc(66,"div",32),D.jd(67," Quality Name"),D.ic(),D.ic(),D.ic(),D.ic(),D.hd(68,Z,8,3,"ng-option",10),D.ic(),D.ic(),D.ic(),D.jc(69,"div",35),D.jc(70,"div",36),D.hd(71,ii,2,1,"button",37),D.ic(),D.ic(),D.ic(),D.ic(),D.ic(),D.ic(),D.jc(72,"nb-tab",38),D.jc(73,"h1"),D.jd(74,"re-dyeing slip"),D.ic(),D.ic(),D.ic(),D.ic(),D.ic()),2&i){const i=D.Uc(44),e=D.Uc(59);D.Pb(12),D.Hc("ngModel",t.batchNo),D.Pb(2),D.Hc("ngForOf",t.batchList),D.Pb(7),D.Hc("ngModel",t.searchANDCondition),D.Pb(4),D.Hc("ngModel",t.searchStr),D.Pb(1),D.Hc("rows",D.Dc(27,19,t.addition,t.searchStr,t.searchANDCondition,t.tableHeaders))("ngClass",t.tableStyle)("headerHeight",31)("footerHeight",40),D.Pb(2),D.Hc("maxWidth",90),D.Pb(2),D.Hc("maxWidth",110),D.Pb(2),D.Hc("maxWidth",120),D.Pb(1),D.Hc("maxWidth",115),D.Pb(10),D.Hc("ngModel",t.directSlip.partyId)("ngClass",D.Nc(24,ti,i.invalid&&(t.formSubmitted||i.touched))),D.Pb(10),D.Hc("ngForOf",t.partyList),D.Pb(5),D.Hc("ngModel",t.directSlip.qualityEntryId)("ngClass",D.Nc(26,ti,e.invalid&&(t.formSubmitted||e.touched))),D.Pb(10),D.Hc("ngForOf",t.qualityList),D.Pb(3),D.Hc("ngForOf",t.directBatchList)}},directives:[M.u,M.t,M.rb,M.qb,c.x,c.m,c.n,q.a,c.l,c.o,n.m,M.wb,c.a,Q.e,n.l,Q.b,Q.a,q.c,M.I,M.yb,M.q],pipes:[U.a],styles:[""]}),i})();var oi=e("4/8P"),si=e("Cma1"),li=e("qC+V");const ri=function(){return{type:"zoom"}},pi=function(i){return{animation:i}};function hi(i,t){if(1&i){const i=D.kc();D.jc(0,"nb-icon",25),D.uc("click",(function(e){D.Xc(i);const n=t.row;return D.yc().printDyeingSlip(e,n)})),D.ic()}2&i&&D.Hc("options",D.Nc(2,pi,D.Mc(1,ri)))}function gi(i,t){1&i&&(D.jd(0," Quality Id "),D.jc(1,"div",26),D.ec(2,"nb-icon",27),D.ic())}const ui=[{path:"",component:di,canActivate:[o.a],canLoad:[o.a],data:{PermissionName:["view","view group","view all"]}},{path:"dyeingSlip",component:(()=>{class i{constructor(i,t,e,n,c){this.dyeingService=i,this.commonService=t,this.modalService=e,this.changeRef=n,this.toastr=c,this.loading=!1,this.errorData=p,this.tablestyle="bootstrap",this.dyeingSlip=[],this.copydyeingSlip=[],this.module="dyeingSlip",this.headers=["batch Id"],this.flag=!1,this.destroy$=new l.a,this.dyeSlip=[],this.tableHeaders=["qualityId","partyShadeNo","colorName","jetName","batchId"],this.searchStr="",this.searchANDCondition=!1}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}ngOnInit(){return Object(S.a)(this,void 0,void 0,(function*(){this.getDyeingSlipData()}))}getDyeingSlipData(){this.dyeingService.getDyeingSlipData().subscribe(i=>{i.success&&(this.dyeingSlip=i.data,this.rowData=this.dyeingSlip,this.copydyeingSlip=i.data)},i=>{})}filter(i){const t=i.toString().toLowerCase().trim();t?this.dyeingSlip=this.copydyeingSlip.filter(i=>this.matchString(i,"qualityId",t)||this.matchString(i,"partyShadeNo",t)||this.matchString(i,"colorName",t)||this.matchString(i,"jetName",t)||this.matchString(i,"batchId",t)):this.dyeSlip=[...this.copydyeingSlip]}matchString(i,t,e){return!!i[t]&&i[t].toLowerCase().includes(e)}open(){this.flag=!0;const i=this.modalService.open(si.a);i.componentInstance.headers=this.headers,i.componentInstance.list=this.dyeSlip,i.componentInstance.moduleName=this.module}printDyeingSlip(i,t){const e=this.modalService.open(b.a);e.componentInstance.isPrintDirect=!0,e.componentInstance.batchId=t.batchId,e.componentInstance.stockId=t.productionId,e.componentInstance.additionSlipFlag=!1,e.result.then(i=>{}).catch(i=>{})}}return i.\u0275fac=function(t){return new(t||i)(D.dc(f.a),D.dc(oi.a),D.dc(P.e),D.dc(D.i),D.dc(C.b))},i.\u0275cmp=D.Xb({type:i,selectors:[["ngx-dyeing-slip"]],decls:33,vars:13,consts:[[3,"show"],[1,"row"],[1,"col-lg-12"],[1,"nb-style"],[1,"nb-header"],[1,"col-md-9","col-9"],[1,"nb-text"],[1,"col-md-2","col-1","display-flex-start","desktop-justify-flexend"],[1,"btn","btn-md","btn-design",3,"click"],[1,"col-md-4"],[2,"display","flex"],[2,"margin-top","4px","margin-right","2px"],["status","primary","labelPosition","start","name","shift",3,"ngModel","ngModelChange"],[2,"margin-top","4px","margin-left","2px"],[1,"col-md-8"],["type","text","placeholder","Search","aria-label","Search","aria-describedby","basic-addon1",1,"form-control",3,"ngModel","ngModelChange"],[1,"material",3,"rows","ngClass","headerHeight","footerHeight"],["name","Actions","sortable","false","props","id",3,"maxWidth"],["ngx-datatable-cell-template",""],["name","Quality Id","props","qualityId"],["ngx-datatable-header-template",""],["name","Party Shade No","props","partyShadeNo"],["name","Color Name","props","colorName"],["name","jetName","props","jetName"],["name","Batch Id","props","batchId"],["icon","clipboard","nbTooltip","Print","nbTooltipStatus","primary","status","danger",3,"options","click"],["id","onclickFilter",1,"filter-icon"],["icon","menu-outline",1,"nb-icon-filter"]],template:function(i,t){1&i&&(D.ec(0,"ngx-loading",0),D.jc(1,"div",1),D.jc(2,"div",2),D.jc(3,"nb-card",3),D.jc(4,"nb-card-header",4),D.jc(5,"div",1),D.jc(6,"div",5),D.jc(7,"h2",6),D.jd(8,"Dyeing Slip"),D.ic(),D.ic(),D.jc(9,"div",7),D.jc(10,"button",8),D.uc("click",(function(){return t.open()})),D.jd(11,"EXPORT"),D.ic(),D.ic(),D.ic(),D.ic(),D.jc(12,"nb-card-body"),D.jc(13,"div",1),D.jc(14,"div",9),D.jc(15,"div",10),D.jc(16,"p",11),D.jd(17,"OR"),D.ic(),D.jc(18,"nb-toggle",12),D.uc("ngModelChange",(function(i){return t.searchANDCondition=i})),D.ic(),D.jc(19,"p",13),D.jd(20,"AND"),D.ic(),D.ic(),D.ic(),D.jc(21,"div",14),D.jc(22,"input",15),D.uc("ngModelChange",(function(i){return t.searchStr=i})),D.ic(),D.ic(),D.ic(),D.jc(23,"ngx-datatable",16),D.zc(24,"searchInTable"),D.jc(25,"ngx-datatable-column",17),D.hd(26,hi,1,4,"ng-template",18),D.ic(),D.jc(27,"ngx-datatable-column",19),D.hd(28,gi,3,0,"ng-template",20),D.ic(),D.ec(29,"ngx-datatable-column",21),D.ec(30,"ngx-datatable-column",22),D.ec(31,"ngx-datatable-column",23),D.ec(32,"ngx-datatable-column",24),D.ic(),D.ic(),D.ic(),D.ic(),D.ic()),2&i&&(D.Hc("show",t.loading),D.Pb(18),D.Hc("ngModel",t.searchANDCondition),D.Pb(4),D.Hc("ngModel",t.searchStr),D.Pb(1),D.Hc("rows",D.Dc(24,8,t.dyeingSlip,t.searchStr,t.searchANDCondition,t.tableHeaders))("ngClass",t.tablestyle)("headerHeight",31)("footerHeight",31),D.Pb(2),D.Hc("maxWidth",90))},directives:[li.a,M.u,M.x,M.t,M.wb,c.l,c.o,c.a,Q.e,n.l,Q.b,Q.a,Q.c,M.I,M.yb],pipes:[U.a],styles:[""]}),i})(),canActivate:[o.a],canLoad:[o.a],data:{PermissionName:["view","view group","view all"]}}];let mi=(()=>{class i{}return i.\u0275mod=D.bc({type:i}),i.\u0275inj=D.ac({factory:function(t){return new(t||i)},imports:[[d.g.forChild(ui)],d.g]}),i})();var yi=e("vTDv");let bi=(()=>{class i{}return i.\u0275mod=D.bc({type:i}),i.\u0275inj=D.ac({factory:function(t){return new(t||i)},imports:[[n.c,mi,a.a,c.g,yi.a]]}),i})()}}]);