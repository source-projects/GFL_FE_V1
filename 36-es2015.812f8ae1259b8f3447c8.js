(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{"5l3K":function(t,e,i){"use strict";i.r(e),i.d(e,"ProductionPlanningModule",(function(){return yt}));var c=i("ofXK"),n=i("tyNb"),a=i("1gpn"),s=i("5+WD"),o=i("XNiG"),d=i("1G5W"),r=i("pLZG"),l=i("lJxs"),h=i("kF6S"),p=i("O1SP"),u=i("8OcI"),g=i("4hYF"),j=i("4/8P"),b=i("qwwJ"),m=i("8k+d"),f=i("8eFm"),y=i("PW/x"),I=i("RNo3"),v=i("SapW"),P=i("IM7N"),D=i("fxD4"),S=i("fXoL"),q=i("1kSV"),x=i("5eHb"),C=i("ZOsW"),O=i("3Pt+");function k(t,e){if(1&t&&(S.jc(0,"ng-option",13),S.jd(1),S.ic()),2&t){const t=e.$implicit;S.Hc("value",t.id),S.Pb(1),S.md("",t.name," - ",t.capacity," ")}}function w(t,e){1&t&&(S.jc(0,"div",14),S.jc(1,"span"),S.jd(2,"Weight is greater than selected jet capacity"),S.ic(),S.ic())}let M=(()=>{class t{constructor(t,e,i,c){this._NgbActiveModal=t,this.productionPlanningService=e,this.toastr=i,this.jetPlanningService=c,this.loading=!1,this.jetList=[],this.weight=0,this.jetCapacity=!1,this.jetSelectedFlag=!1,this.destroy$=new o.a,this.newJetId=null}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}ngAfterViewInit(){this.getAllJets(),this.getWeightByStockAndBatch()}get activeModal(){return this._NgbActiveModal}onOkClick(){this.newJetId?this.activeModal.close({from:{jetId:this.jetId,sequence:this.currentSequence+1,productionId:this.prodId},to:{jetId:this.newJetId,sequence:this.selectedJetSequence+1,productionId:this.prodId}}):this.toastr.error("Select Jet")}getAllJets(){this.jetList=[],this.jetPlanningService.getAllJetDataV1().pipe(Object(d.a)(this.destroy$)).subscribe(t=>{t.success&&(this.jetList=t.data)},t=>{})}getWeightByStockAndBatch(){this.batchId&&this.batchControlId&&this.productionPlanningService.getWeightByStockIdAndBatchId(this.batchId,this.batchControlId).pipe(Object(d.a)(this.destroy$)).subscribe(t=>{t.success&&(this.weight=t.data.totalwt)})}jetSelected(t){this.jetCapacity=!1;const e=this.jetList.filter(e=>e.id==t)||[];e&&e.length&&(e[0].capacity>this.weight?(this.selectedJetSequence=e[0].jetDataList&&e[0].jetDataList.length?e[0].jetDataList.length:0,this.jetSelectedFlag=!!this.selectedJetSequence):(this.jetCapacity=!0,this.jetSelectedFlag=!1,this.newJetId=null))}}return t.\u0275fac=function(e){return new(e||t)(S.dc(q.a),S.dc(f.a),S.dc(x.b),S.dc(b.a))},t.\u0275cmp=S.Xb({type:t,selectors:[["ngx-change-jet"]],inputs:{batchId:"batchId",batchControlId:"batchControlId",jetId:"jetId",currentSequence:"currentSequence",prodId:"prodId"},decls:20,vars:3,consts:[[1,"modal-header","nb-header"],[1,"modal-title","nb-text"],["aria-label","Close",1,"close","btn-foucs-none",3,"click"],["aria-hidden","true",1,"close-icon"],[1,"modal-body","mb-4"],[1,"form-group"],[1,"required"],["name","jet","required","","placeholder","Jet Number",3,"ngModel","ngModelChange","change"],["jet1","ngModel"],[3,"value",4,"ngFor","ngForOf"],["class","required-class",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-primary","btn-sm","btn-design-save",3,"click"],[3,"value"],[1,"required-class"]],template:function(t,e){1&t&&(S.jc(0,"div"),S.jc(1,"div",0),S.jc(2,"h4",1),S.jd(3,"Change Jet"),S.ic(),S.jc(4,"button",2),S.uc("click",(function(){return e.activeModal.close(!1)})),S.jc(5,"span",3),S.jd(6,"\xd7"),S.ic(),S.ic(),S.ic(),S.jc(7,"div",4),S.jc(8,"div",5),S.jc(9,"label",6),S.jd(10,"Select Jet: "),S.ic(),S.jc(11,"ng-select",7,8),S.uc("ngModelChange",(function(t){return e.newJetId=t}))("change",(function(t){return e.jetSelected(t)})),S.hd(13,k,2,3,"ng-option",9),S.ic(),S.hd(14,w,3,0,"div",10),S.ic(),S.ic(),S.jc(15,"div",11),S.jc(16,"button",12),S.uc("click",(function(){return e.onOkClick()})),S.jd(17,"Ok"),S.ic(),S.jc(18,"button",12),S.uc("click",(function(){return e.activeModal.close(!1)})),S.jd(19,"Cancel"),S.ic(),S.ic(),S.ic()),2&t&&(S.Pb(11),S.Hc("ngModel",e.newJetId),S.Pb(2),S.Hc("ngForOf",e.jetList),S.Pb(1),S.Hc("ngIf",e.jetCapacity&&e.newJetId))},directives:[C.a,O.t,O.l,O.o,c.m,c.n,C.c],styles:[""]}),t})();var L=i("dfbw"),F=i("3jao"),B=i("qZsz"),N=i("yodA"),A=i("iLL0"),J=i("g+Ya"),$=i("tcrU"),E=i("LvDl"),_=i("aceb");function R(t,e){if(1&t&&(S.jc(0,"h3",29),S.jd(1),S.ic()),2&t){const t=S.yc().$implicit;S.Pb(1),S.ld(" ",t.processType,"")}}function H(t,e){1&t&&(S.jc(0,"h3",29),S.jd(1,"Direct"),S.ic())}function T(t,e){if(1&t&&(S.jc(0,"tr"),S.jc(1,"td",30),S.jc(2,"p",10),S.jd(3),S.ic(),S.ic(),S.jc(4,"td",30),S.jc(5,"p",10),S.jd(6),S.zc(7,"number"),S.ic(),S.ic(),S.jc(8,"td",30),S.jc(9,"p",10),S.jd(10),S.ic(),S.ic(),S.ic()),2&t){const t=e.$implicit;S.Pb(3),S.kd(t.itemName),S.Pb(3),S.kd(S.Bc(7,3,t.qty,"1.3-3")),S.Pb(4),S.kd(t.supplierName)}}function z(t,e){if(1&t&&(S.jc(0,"div",15),S.jc(1,"div",16),S.jc(2,"div",17),S.jc(3,"div",18),S.hd(4,R,2,1,"h3",19),S.hd(5,H,2,0,"h3",19),S.ic(),S.jc(6,"div",20),S.jc(7,"label",21),S.jd(8,"Temperature:"),S.ic(),S.jd(9,"\xa0 "),S.jc(10,"div",22),S.jd(11),S.ic(),S.ic(),S.jc(12,"div",23),S.jc(13,"label",24),S.jd(14,"Hold Time:"),S.ic(),S.jd(15,"\xa0 "),S.jc(16,"div",22),S.jd(17),S.ic(),S.ic(),S.jc(18,"div",25),S.jc(19,"label",21),S.jd(20,"Liquor Ratio:"),S.ic(),S.jd(21,"\xa0 "),S.jc(22,"div",26),S.jd(23),S.ic(),S.ic(),S.ic(),S.jc(24,"div",27),S.jc(25,"table",28),S.jc(26,"tr"),S.jc(27,"th",10),S.jd(28,"Item name"),S.ic(),S.jc(29,"th",10),S.jd(30,"Quantity"),S.ic(),S.jc(31,"th",10),S.jd(32,"Supplier name"),S.ic(),S.ic(),S.hd(33,T,11,6,"tr",3),S.ic(),S.ic(),S.ic(),S.ic()),2&t){const t=e.$implicit;S.Pb(4),S.Hc("ngIf","directDyeing"!=t.processType),S.Pb(1),S.Hc("ngIf","directDyeing"==t.processType),S.Pb(6),S.ld(" ",t.temp,""),S.Pb(6),S.ld(" ",t.holdTime,""),S.Pb(6),S.ld(" ",t.liquerRation,""),S.Pb(10),S.Hc("ngForOf",t.dyeingSlipItemData)}}function X(t,e){if(1&t&&(S.jc(0,"div"),S.jc(1,"div",6),S.jc(2,"div",7),S.jc(3,"div",8),S.jc(4,"div",9),S.jc(5,"label",10),S.jd(6,"Lot No:"),S.ic(),S.jc(7,"span",11),S.jd(8),S.ic(),S.ic(),S.jc(9,"div",12),S.jc(10,"label",10),S.jd(11,"Mc No:"),S.ic(),S.jc(12,"span",11),S.jd(13),S.ic(),S.ic(),S.ic(),S.ic(),S.jc(14,"div",7),S.jc(15,"div",8),S.jc(16,"div",9),S.jc(17,"label",10),S.jd(18,"Lot Meter :"),S.ic(),S.jc(19,"span",13),S.jd(20),S.zc(21,"number"),S.ic(),S.ic(),S.jc(22,"div",12),S.jc(23,"label",10),S.jd(24,"Date:"),S.ic(),S.jc(25,"span",13),S.jd(26),S.ic(),S.ic(),S.ic(),S.ic(),S.jc(27,"div",7),S.jc(28,"div",8),S.jc(29,"div",9),S.jc(30,"label",10),S.jd(31,"Lot Wt:"),S.ic(),S.jc(32,"span",13),S.jd(33),S.zc(34,"number"),S.ic(),S.ic(),S.jc(35,"div",12),S.jc(36,"label",10),S.jd(37,"Party Name:"),S.ic(),S.jc(38,"span",13),S.jd(39),S.ic(),S.ic(),S.ic(),S.ic(),S.jc(40,"div",7),S.jc(41,"div",8),S.jc(42,"div",9),S.jc(43,"label",10),S.jd(44,"QualityId:"),S.ic(),S.jc(45,"span",13),S.jd(46),S.ic(),S.ic(),S.jc(47,"div",12),S.jc(48,"label",10),S.jd(49,"Party Shade No:"),S.ic(),S.jc(50,"span",13),S.jd(51),S.ic(),S.ic(),S.ic(),S.ic(),S.jc(52,"div",7),S.jc(53,"div",8),S.jc(54,"div",9),S.jc(55,"label",10),S.jd(56,"Taka/Cone:"),S.ic(),S.jc(57,"span",13),S.jd(58),S.ic(),S.ic(),S.jc(59,"div",12),S.jc(60,"label",10),S.jd(61,"Color Name:"),S.ic(),S.jc(62,"span",13),S.jd(63),S.ic(),S.ic(),S.ic(),S.ic(),S.ic(),S.hd(64,z,34,6,"div",14),S.ic()),2&t){const t=S.yc(3).$implicit,e=S.yc();S.Pb(8),S.kd(t.batchId),S.Pb(5),S.kd(t.jetName),S.Pb(7),S.kd(S.Bc(21,11,t.totalMeter,"1.2-2")),S.Pb(6),S.kd(e.myDate),S.Pb(7),S.kd(S.Bc(34,14,t.totalWt,"1.2-2")),S.Pb(6),S.kd(t.partyName),S.Pb(7),S.kd(t.qualityId),S.Pb(5),S.kd(t.partyShadeNo),S.Pb(7),S.kd(t.batchCount),S.Pb(5),S.kd(t.colorName),S.Pb(1),S.Hc("ngForOf",t.dyeingSlipDataList)}}function W(t,e){if(1&t&&(S.jc(0,"div"),S.hd(1,X,65,17,"div",5),S.ic()),2&t){const t=S.yc(2).$implicit;S.Pb(1),S.Hc("ngIf",null!=t.dyeingSlipDataList)}}function Q(t,e){if(1&t&&(S.jc(0,"nb-card-body"),S.hd(1,W,2,1,"div",5),S.ic()),2&t){const t=S.yc().$implicit;S.Pb(1),S.Hc("ngIf",null!=t||null!=t)}}function U(t,e){if(1&t&&(S.jc(0,"div"),S.jc(1,"div",4),S.hd(2,Q,2,1,"nb-card-body",5),S.ic(),S.ic()),2&t){const t=e.index,i=S.yc();S.Pb(1),S.Jc("id","print-slip",t,""),S.Pb(1),S.Hc("ngIf",i.directPrintFromJet)}}let V=(()=>{class t{constructor(t,e,i,c,n,a,s){this.activeModal=t,this.toastr=e,this.datePipe=i,this.productionPlanningService=c,this.DyeingProcessService=n,this.planningSlipService=a,this.modalService=s,this.arrayForBatchesForPrint=[],this.directPrintFromJet=!1,this.objToPassInRequest={},this.allData=[],this.itemList=[],this.itemListArray=[],this.itemListArrayCopy=[],this.loading=!1,this.myDate=new Date,this.myDate=this.datePipe.transform(this.myDate,"dd/MM/yyyy"),this.itemList.push(new N.a)}ngOnInit(){this.loading=!0,this.getItemData(),this.getSlipDataFromBatch()}getSlipDataFromBatch(){this.planningSlipService.getAllSlipDataByBatchStockId(this.objToPassInRequest).subscribe(t=>{t.success&&(this.allData=t.data,this.allData&&this.allData.length&&(this.allData.forEach(t=>{t.dyeingSlipDataList.forEach(e=>{e.dyeingSlipItemData.forEach(t=>{t.qty=t.qty?t.qty.toFixed(3):t.qty}),console.log(t),t.dyeingSlipDataList=Object(E.sortBy)(t.dyeingSlipDataList,"sequence"),t.totalWt=Number(t.totalWt).toFixed(3)})}),this.loading=!1,this.directPrintFromJet&&this.printNOW()))},t=>{})}getItemData(){this.DyeingProcessService.getAllItemWithSupplier().subscribe(t=>{t.success&&(this.itemListArray=t.data,this.itemListArrayCopy=this.itemListArray)},t=>{})}printNOW(){let t=new $.PrintDocument({title:""});t.append('<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/paper-css/0.3.0/paper.css">'),t.append('<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">'),t.append('<link href="https://cdn.grapecity.com/wijmo/5.latest/styles/wijmo.min.css" rel="stylesheet">'),t.append('<link href="./planning-slip.component.scss" rel="stylesheet">');let e=!1;for(let i=0;i<this.allData.length;i++){let c=setInterval(()=>{let n=document.getElementById("print-slip"+i);n&&(t.append(n),e=!0,clearInterval(c))},10)}setTimeout(()=>{t.print(),this.activeModal.close()},1e3)}}return t.\u0275fac=function(e){return new(e||t)(S.dc(q.a),S.dc(x.b),S.dc(c.e),S.dc(f.a),S.dc(A.a),S.dc(J.a),S.dc(q.e))},t.\u0275cmp=S.Xb({type:t,selectors:[["ngx-slip-from-jet"]],inputs:{arrayForBatchesForPrint:"arrayForBatchesForPrint",directPrintFromJet:"directPrintFromJet",objToPassInRequest:"objToPassInRequest"},decls:6,vars:2,consts:[["nbSpinnerSize","large","nbSpinnerStatus","primary",3,"nbSpinner"],[1,"nb-header"],[1,"nb-text"],[4,"ngFor","ngForOf"],[1,"jet-slip","size-A5",3,"id"],[4,"ngIf"],[1,"container","print-container","mr-top-30","mr-bottom-30","border-style-solid","pd-top-10"],[1,"mb-1","print-text-center","pd-bt-25"],[1,"row"],[1,"col-md-4","wth-50"],[1,"font-25"],[1,"slip-value","rd-color",2,"color","red !important"],[1,"col-md-8","wth-50"],[1,"slip-value"],["style","background-color: rgb(144, 179, 212) !important;","class","container print-container mr-bt-50 width-100\n                                main-jet-p-changes",4,"ngFor","ngForOf"],[1,"container","print-container","mr-bt-50","width-100","main-jet-p-changes",2,"background-color","rgb(144, 179, 212) !important"],[1,"row","print-wth-100"],[1,"col-md-12","width-100","pd-15"],[1,"form-group","col-md-3","width-20","form-style-print"],["class","font-40",4,"ngIf"],[1,"form-group","col-md-3","width-28","form-style-print"],[1,"mr-right","font-25","font-weight-bold"],[1,"print-data","print-text-center","print-color-media"],[1,"form-group","col-md-3","width-25","form-style-print"],[1,"mr-righ","font-25","font-weight-boldt"],[1,"form-group","col-md-3","width-27","form-style-print"],[1,"print-data","print-text-center","print-color-media","border-left-1px"],[1,"form-group","col-md-12","wth-100"],[1,"table","table-bordered","table-process-fnt","text-center","wth-100",2,"border-radius","5px"],[1,"font-40"],[1,"pd-bt","mr-top-5"]],template:function(t,e){1&t&&(S.jc(0,"nb-card",0),S.jc(1,"nb-card-header",1),S.jc(2,"h2",2),S.jd(3,"Generate slip"),S.ic(),S.ic(),S.jc(4,"nb-card-body"),S.hd(5,U,3,2,"div",3),S.ic(),S.ic()),2&t&&(S.Hc("nbSpinner",e.loading),S.Pb(5),S.Hc("ngForOf",e.allData))},directives:[_.u,_.mb,_.x,_.t,c.m,c.n],pipes:[c.f],styles:[".print-slip[_ngcontent-%COMP%]{width:100%;height:100%;padding-top:10%}@page{size[_ngcontent-%COMP%]:A5;margin:0}.wth-50[_ngcontent-%COMP%]{width:50%;display:flex;justify-content:space-between}.pd-bt[_ngcontent-%COMP%]{padding-top:0;padding-bottom:0}.slip-value[_ngcontent-%COMP%]{border-style:groove;width:150px}.slip-background[_ngcontent-%COMP%]{display:flex;background-color:#5f9ea0!important}.print-data[_ngcontent-%COMP%]{color:#aa3634!important;border-style:groove;width:50px}.pick-color-row[_ngcontent-%COMP%]{width:100%!important}@media print{.size-A5[_ngcontent-%COMP%]{size:A5}.mr-top-30[_ngcontent-%COMP%]{margin-top:30px}.mr-bottom-30[_ngcontent-%COMP%]{margin-bottom:30px}.border-style-solid[_ngcontent-%COMP%]{border-style:solid}.pd-top-10[_ngcontent-%COMP%]{padding-top:10px}.slip-value[_ngcontent-%COMP%]{width:60%}.rd-color[_ngcontent-%COMP%]{color:red}.jet-print-style-changes[_ngcontent-%COMP%]{margin:0!important}.jet-print-style-changes[_ngcontent-%COMP%], .main-jet-p-changes[_ngcontent-%COMP%]{width:100%!important;border-style:solid;background-color:c6daf0}.main-jet-p-changes[_ngcontent-%COMP%]{margin-bottom:20px!important}.width-100[_ngcontent-%COMP%]{width:100%!important}.width-20[_ngcontent-%COMP%]{width:20%!important}.width-28[_ngcontent-%COMP%]{width:28%!important}.width-25[_ngcontent-%COMP%]{width:25%!important}.width-27[_ngcontent-%COMP%]{width:27%!important}.width-30[_ngcontent-%COMP%]{width:30%!important}.color-000[_ngcontent-%COMP%]{color:#000!important}.form-style-print[_ngcontent-%COMP%]{padding:0;display:inline-flex;justify-content:flex-start;align-items:center}.pd-15[_ngcontent-%COMP%]{padding-top:15px;padding-bottom:15px}.font-25[_ngcontent-%COMP%]{font-size:25px!important}.mr-top-bottom-15[_ngcontent-%COMP%]{margin-top:15px;margin-bottom:15px}.font-weight-bold[_ngcontent-%COMP%]{font-weight:700}.font-30[_ngcontent-%COMP%]{font-size:30px}.border-left-1px[_ngcontent-%COMP%]{border-left:1px solid}.print-bg-transperent[_ngcontent-%COMP%]{background-color:transparent}.print-color-media[_ngcontent-%COMP%]{width:auto;color:#000!important}.font-40[_ngcontent-%COMP%]{font-size:40px}}"]}),t})();function K(t,e){if(1&t&&(S.jc(0,"ng-option",66),S.jc(1,"div",8),S.jc(2,"div",16),S.jc(3,"div",17),S.jd(4),S.ic(),S.ic(),S.jc(5,"div",16),S.jc(6,"div",18),S.jd(7),S.ic(),S.ic(),S.ic(),S.ic()),2&t){const t=e.$implicit;S.Hc("value",t.id),S.Pb(4),S.ld(" ",t.partyName," "),S.Pb(3),S.ld(" ",t.partyCode," ")}}function G(t,e){if(1&t&&(S.jc(0,"ng-option",66),S.jc(1,"div",8),S.jc(2,"div",16),S.jc(3,"div",17),S.jd(4),S.ic(),S.ic(),S.jc(5,"div",16),S.jc(6,"div",18),S.jd(7),S.ic(),S.ic(),S.ic(),S.ic()),2&t){const t=e.$implicit;S.Hc("value",t.qualityId),S.Pb(4),S.ld(" ",t.qualityId," "),S.Pb(3),S.ld(" ",t.partyName," ")}}function Z(t,e){if(1&t){const t=S.kc();S.jc(0,"button",67),S.uc("mouseenter",(function(i){S.Xc(t);const c=e.$implicit;return S.yc().getAllDetailsOfBatch(i,c)}))("mouseout",(function(e){return S.Xc(t),S.yc().resetDetailsOfBatch(e)}))("click",(function(){S.Xc(t);const i=e.$implicit;return S.yc().onBatchSelect(i.batchId)})),S.jd(1),S.ic()}if(2&t){const t=e.$implicit;S.Pb(1),S.ld(" ",t.batchId," ")}}function Y(t,e){if(1&t){const t=S.kc();S.jc(0,"ngb-pagination",68),S.uc("pageChange",(function(e){return S.Xc(t),S.yc().pageChanged(e)})),S.ic()}if(2&t){const t=S.yc();S.Hc("pageSize",t.requestData.data.pageSize)("maxSize",5)("collectionSize",t.requestData.data.total)("page",t.requestData.data.pageIndex)}}function tt(t,e){if(1&t){const t=S.kc();S.hc(0),S.jc(1,"button",69),S.uc("mouseenter",(function(i){S.Xc(t);const c=e.$implicit;return S.yc().getAllDetailsOfBatch(i,c)}))("mouseout",(function(e){return S.Xc(t),S.yc().resetDetailsOfBatch(e)}))("click",(function(e){return S.Xc(t),S.yc().batchSelectedFromProductionList(e)})),S.jd(2),S.jc(3,"nb-icon",70),S.uc("click",(function(){S.Xc(t);const i=e.$implicit;return S.yc().remove(i)})),S.ic(),S.ic(),S.gc()}if(2&t){const t=e.$implicit;S.Pb(1),S.ed("background",t.colorTone),S.Hc("value",t.id),S.Pb(1),S.ld(" ",t.batchId," ")}}function et(t,e){if(1&t){const t=S.kc();S.jc(0,"ngb-pagination",68),S.uc("pageChange",(function(e){return S.Xc(t),S.yc().prodPageChanged(e)})),S.ic()}if(2&t){const t=S.yc();S.Hc("pageSize",t.prodRequestData.data.pageSize)("maxSize",5)("collectionSize",t.prodRequestData.data.total)("page",t.prodRequestData.data.pageIndex)}}function it(t,e){if(1&t&&(S.jc(0,"ng-option",66),S.jd(1),S.ic()),2&t){const t=e.$implicit;S.Hc("value",t.id),S.Pb(1),S.ld(" ",t.name," ")}}function ct(t,e){if(1&t){const t=S.kc();S.jc(0,"div",55),S.jc(1,"ng-select",71),S.uc("ngModelChange",(function(e){return S.Xc(t),S.yc().selectedPrintOption=e})),S.jc(2,"ng-option",72),S.jd(3," All"),S.ic(),S.jc(4,"ng-option",73),S.jd(5," Color"),S.ic(),S.jc(6,"ng-option",74),S.jd(7," Chemical"),S.ic(),S.ic(),S.ic()}if(2&t){const t=S.yc();S.Pb(1),S.Hc("ngModel",t.selectedPrintOption)}}function nt(t,e){1&t&&S.ec(0,"div",55)}function at(t,e){if(1&t){const t=S.kc();S.jc(0,"button",40),S.uc("click",(function(){return S.Xc(t),S.yc().callPrintSlipApi()})),S.jd(1,"Print Color"),S.ic()}}function st(t,e){if(1&t){const t=S.kc();S.jc(0,"button",40),S.uc("click",(function(){return S.Xc(t),S.yc().callPrintSlipApi()})),S.jd(1,"Print Chemical"),S.ic()}}function ot(t,e){if(1&t){const t=S.kc();S.jc(0,"button",40),S.uc("click",(function(){return S.Xc(t),S.yc().callPrintSlipApi()})),S.jd(1,"Print Both"),S.ic()}}function dt(t,e){if(1&t){const t=S.kc();S.jc(0,"nb-checkbox",83),S.uc("checkedChange",(function(e){S.Xc(t);const i=S.yc().$implicit,c=S.yc().$implicit;return S.yc().selectedBatches(e,i,c)}))("ngModelChange",(function(e){return S.Xc(t),S.yc().$implicit.isChecked=e})),S.ic()}if(2&t){const t=S.yc(),e=t.$implicit;S.Jc("name","check-",t.index,""),S.Hc("ngModel",e.isChecked)}}function rt(t,e){if(1&t){const t=S.kc();S.jc(0,"button",84),S.uc("mouseenter",(function(e){S.Xc(t);const i=S.yc().$implicit;return S.yc(2).getAllDetailsOfBatch(e,i)}))("mouseout",(function(e){return S.Xc(t),S.yc(3).resetDetailsOfBatch(e)})),S.jd(1),S.ic()}if(2&t){const t=S.yc().$implicit,e=S.yc(2);S.ed("color",t.colorTone?"#ffffff":"#000000"),S.Hc("nbContextMenu",e.items),S.Pb(1),S.ld(" ",t.batchId," ")}}function lt(t,e){if(1&t){const t=S.kc();S.jc(0,"button",84),S.uc("mouseenter",(function(e){S.Xc(t);const i=S.yc().$implicit;return S.yc(2).getAllDetailsOfBatch(e,i)}))("mouseout",(function(e){return S.Xc(t),S.yc(3).resetDetailsOfBatch(e)})),S.jd(1),S.ic()}if(2&t){const t=S.yc().$implicit,e=S.yc(2);S.ed("color",t.colorTone?"#ffffff":"#000000"),S.Hc("nbContextMenu",e.items),S.Pb(1),S.ld(" ",t.batchId," ")}}function ht(t,e){if(1&t){const t=S.kc();S.jc(0,"button",85),S.uc("mouseenter",(function(e){S.Xc(t);const i=S.yc().$implicit;return S.yc(2).getAllDetailsOfBatch(e,i)}))("mouseout",(function(e){return S.Xc(t),S.yc(3).resetDetailsOfBatch(e)}))("click",(function(){S.Xc(t);const e=S.yc().$implicit,i=S.yc().$implicit;return S.yc().openShadeModal(i,e)})),S.jd(1),S.ic()}if(2&t){const t=S.yc().$implicit;S.ed("color",t.colorTone?"#ffffff":"#000000"),S.Pb(1),S.ld(" ",t.batchId," ")}}function pt(t,e){if(1&t){const t=S.kc();S.jc(0,"div",79),S.uc("click",(function(){S.Xc(t);const i=e.$implicit,c=e.index,n=S.yc().$implicit;return S.yc().setIndexForSlip(i,n,c)})),S.hd(1,dt,1,2,"nb-checkbox",80),S.hd(2,rt,2,4,"button",81),S.hd(3,lt,2,4,"button",81),S.hd(4,ht,2,3,"button",82),S.ic()}if(2&t){const t=e.$implicit;S.ed("background",t.colorTone?t.colorTone:"#ffffff"),S.Pb(1),S.Hc("ngIf",t.shadeId||t.isDirect),S.Pb(1),S.Hc("ngIf",t.shadeId),S.Pb(1),S.Hc("ngIf",!t.shadeId&&t.isDirect),S.Pb(1),S.Hc("ngIf",!t.shadeId&&!t.isDirect)}}function ut(t,e){if(1&t){const t=S.kc();S.jc(0,"tr"),S.jc(1,"td"),S.jd(2),S.ic(),S.jc(3,"td"),S.jd(4),S.ic(),S.jc(5,"td",75),S.jc(6,"input",76),S.uc("ngModelChange",(function(i){return S.Xc(t),e.$implicit.lotNo=i}))("keypress",(function(i){S.Xc(t);const c=e.$implicit;return S.yc().lotNoEntered(i,c)})),S.ic(),S.ic(),S.jc(7,"td"),S.jc(8,"div",77),S.uc("cdkDropListDropped",(function(i){S.Xc(t);const c=e.index;return S.yc().drop(i,c)})),S.hd(9,pt,5,6,"div",78),S.ic(),S.ic(),S.ic()}if(2&t){const t=e.$implicit,i=e.index;S.Pb(2),S.kd(t.name),S.Pb(2),S.kd(t.capacity),S.Pb(2),S.Jc("name","lotNo-",i,""),S.Hc("ngModel",t.lotNo),S.Pb(2),S.Hc("cdkDropListData",t.jetDataList),S.Pb(1),S.Hc("ngForOf",t.jetDataList)}}const gt=[{path:"",component:(()=>{class t{constructor(t,e,i,c,n,a,s,h,j,b,m){this.partyService=t,this.qualityService=e,this.productionPlanningService=i,this.commonService=c,this.toastr=n,this.stockBatchService=a,this.programService=s,this.modalService=h,this.jetService=j,this.menuService=b,this.cdr=m,this.errorData=p,this.loading=!1,this.formSubmitted=!1,this.batchListCopy=[],this.deleteIcon=!1,this.productionPlanning=new g.b,this.editProductionPlanFlag=!1,this.isJetDiv=!1,this.connectedTo=[],this.detailsList=[],this.destroy$=new o.a,this.changeStatusShow=!1,this.count=0,this.countArr=[],this.jetPlanning=new u.b,this.jetDataList=new u.a,this.JetDataListArray=[],this.detailsFlag=!1,this.showMenuFlag=!1,this.items=[{title:"Start"},{title:"Complete"},{title:"Remove"},{title:"Print"},{title:"Edit And Print"},{title:"Change Jet"}],this.color="red",this.allBatchList=[],this.jetData1={controlId:null,productionId:null,sequence:null},this.selectedJets=[],this.selectedPrintOption=null,this.requestData=new L.a,this.prodRequestData=new L.a,this.selectedBatchForPrint=[],this.productionData={productionId:null,batchId:null,partyId:null,qualityEntryId:null,shadeId:null,stockId:null,jetId:0},this.flipped=!1,this.jetList=[],this.productionBatchDetail=new g.a,this.menuService.onItemClick().pipe(Object(d.a)(this.destroy$),Object(r.a)(({tag:t})=>"my-context-menu"===t),Object(l.a)(({item:{title:t}})=>t)).subscribe(t=>{"Print"===t?this.generateSlip(!0):"Edit And Print"===t?this.generateSlip(!1):"Start"===t?this.startJet():"Complete"===t?this.completeChangeStatus():"Remove"===t?this.removeBatchFromJet():"Change Jet"==t?this.changeJet():"Write"==t?this.writeClick():"SCO ON"==t?this.SCOClickON():"Dose Nylon ON"==t?this.doseNylonClickON():"SCO OFF"==t?this.SCOClickOFF():"Dose Nylon OFF"==t&&this.doseNylonClickOFF()})}ngOnInit(){this.requestData.getBy="all",this.requestData.data=new F.a,this.requestData.data.isAnd=!0,this.prodRequestData.getBy="all",this.prodRequestData.data=new F.a,this.prodRequestData.data.isAnd=!0,this.getCurrentId(),this.getPartyList(),this.getQualityList(),this.getAllBatchData(),this.plannedProductionListForDataTable()}getCurrentId(){this.user=this.commonService.getUser(),this.userHead=this.commonService.getUserHeadId()}getPartyList(){this.loading=!0,this.partyService.getAllPartyNameList().pipe(Object(d.a)(this.destroy$)).subscribe(t=>{t.success?(this.partyList=t.data,this.loading=!1):this.loading=!1},t=>{this.loading=!1})}getQualityList(){this.loading=!0,this.qualityService.getQualityNameData().pipe(Object(d.a)(this.destroy$)).subscribe(t=>{t.success?(this.qualityList=t.data,this.loading=!1):this.loading=!1},t=>{this.loading=!1})}getAllBatchData(){this.batchList=[],this.productionPlanningService.getAllBatchListForProdV1(this.requestData,!1).pipe(Object(d.a)(this.destroy$)).subscribe(t=>{if(t.success){const e=t.data;this.batchList=e.data,this.requestData.data.total=e.total,this.batchListCopy=e.data}},t=>{this.toastr.error(p.Serever_Error)})}partySelected(t){if(!this.flipped)if(t){this.requestData.data.parameters=this.requestData.data.parameters.filter(t=>"qualityEntryId"!=t.field[0]);const t=this.requestData.data.parameters.findIndex(t=>t.field.find(t=>"partyId"==t));if(t>-1)this.requestData.data.parameters[t].field=["partyId"],this.requestData.data.parameters[t].operator="EQUALS",this.requestData.data.parameters[t].value=String(this.productionPlanning.partyId);else{let t=new B.a;t.field=["partyId"],t.value=String(this.productionPlanning.partyId),t.operator="EQUALS",this.requestData.data.parameters.push(t)}this.requestData.data.pageIndex=0,this.getAllBatchData(),this.prodRequestData.data.parameters=this.prodRequestData.data.parameters.filter(t=>"qualityEntryId"!=t.field[0]);const e=this.prodRequestData.data.parameters.findIndex(t=>t.field.find(t=>"partyId"==t));if(e>-1)this.prodRequestData.data.parameters[e].field=["partyId"],this.prodRequestData.data.parameters[e].operator="EQUALS",this.prodRequestData.data.parameters[e].value=String(this.productionPlanning.partyId);else{let t=new B.a;t.field=["partyId"],t.value=String(this.productionPlanning.partyId),t.operator="EQUALS",this.prodRequestData.data.parameters.push(t)}this.prodRequestData.data.pageIndex=0,this.plannedProductionListForDataTable()}else this.requestData.data.parameters=this.requestData.data.parameters.filter(t=>"qualityEntryId"!=t.field[0]&&"partyId"!=t.field[0]),this.requestData.data.pageIndex=0,this.getAllBatchData(),this.prodRequestData.data.parameters=this.prodRequestData.data.parameters.filter(t=>"qualityEntryId"!=t.field[0]&&"partyId"!=t.field[0]),this.prodRequestData.data.pageIndex=0,this.plannedProductionListForDataTable();this.loading=!0,this.productionPlanning.qualityId=null,t&&this.productionPlanning.partyId&&this.programService.getQualityByParty(this.productionPlanning.partyId).pipe(Object(d.a)(this.destroy$)).subscribe(t=>{t.success?this.qualityList=t.data.qualityDataList:(this.productionPlanning.qualityId=null,this.qualityList=[]),this.loading=!1},t=>{this.qualityList=[],this.loading=!1}),t||(this.batchList=[],this.batchListCopy=[],this.productionPlanning.partyId=null,this.productionPlanning.qualityId=null,this.getPartyList(),this.getQualityList(),this.loading=!1)}qualitySelected(t){if(this.loading=!0,null!=t){if(this.productionPlanning.qualityId)if(this.qualityList.forEach(t=>{t.qualityId==this.productionPlanning.qualityId&&(this.p_id=t.partyId,this.productionPlanning.qualityEntryId=t.id||t.qualityEntryId)}),this.flipped)this.requestData.data.parameters=this.requestData.data.parameters.filter(t=>"qualityEntryId"!=t.field[0]),this.requestData.data.pageIndex=0,this.getAllBatchData(),this.prodRequestData.data.parameters=this.prodRequestData.data.parameters.filter(t=>"qualityEntryId"!=t.field[0]),this.prodRequestData.data.pageIndex=0,this.plannedProductionListForDataTable();else{const t=this.requestData.data.parameters.findIndex(t=>t.field.find(t=>"qualityEntryId"==t));if(t>-1)this.requestData.data.parameters[t].field=["qualityEntryId"],this.requestData.data.parameters[t].operator="EQUALS",this.requestData.data.parameters[t].value=String(this.productionPlanning.qualityEntryId);else{let t=new B.a;t.field=["qualityEntryId"],t.value=String(this.productionPlanning.qualityEntryId),t.operator="EQUALS",this.requestData.data.parameters.push(t)}this.requestData.data.pageIndex=0,this.getAllBatchData();const e=this.prodRequestData.data.parameters.findIndex(t=>t.field.find(t=>"qualityEntryId"==t));if(e>-1)this.prodRequestData.data.parameters[e].field=["qualityEntryId"],this.prodRequestData.data.parameters[e].operator="EQUALS",this.prodRequestData.data.parameters[e].value=String(this.productionPlanning.qualityEntryId);else{let t=new B.a;t.field=["qualityEntryId"],t.value=String(this.productionPlanning.qualityEntryId),t.operator="EQUALS",this.prodRequestData.data.parameters.push(t)}this.prodRequestData.data.pageIndex=0,this.plannedProductionListForDataTable()}}else this.requestData.data.parameters=this.requestData.data.parameters.filter(t=>"qualityEntryId"!=t.field[0]),this.requestData.data.pageIndex=0,this.getAllBatchData(),this.prodRequestData.data.parameters=this.prodRequestData.data.parameters.filter(t=>"qualityEntryId"!=t.field[0]),this.prodRequestData.data.pageIndex=0,this.plannedProductionListForDataTable()}filter(t){if(this.batch){const t=this.requestData.data.parameters.findIndex(t=>t.field.find(t=>"batchId"==t));if(t>-1)this.requestData.data.parameters[t].field=["batchId"],this.requestData.data.parameters[t].operator="LIKE",this.requestData.data.parameters[t].value=String(this.batch);else{let t=new B.a;t.field=["batchId"],t.value=String(this.batch),t.operator="LIKE",this.requestData.data.parameters.push(t)}this.requestData.data.pageIndex=0,this.getAllBatchData();const e=this.prodRequestData.data.parameters.findIndex(t=>t.field.find(t=>"batchId"==t));if(e>-1)this.prodRequestData.data.parameters[e].field=["batchId"],this.prodRequestData.data.parameters[e].operator="LIKE",this.prodRequestData.data.parameters[e].value=String(this.batch);else{let t=new B.a;t.field=["batchId"],t.value=String(this.batch),t.operator="LIKE",this.prodRequestData.data.parameters.push(t)}this.prodRequestData.data.pageIndex=0,this.plannedProductionListForDataTable()}else this.requestData.data.parameters=this.requestData.data.parameters.filter(t=>"batchId"!=t.field[0]),this.requestData.data.pageIndex=0,this.getAllBatchData(),this.prodRequestData.data.parameters=this.prodRequestData.data.parameters.filter(t=>"batchId"!=t.field[0]),this.prodRequestData.data.pageIndex=0,this.plannedProductionListForDataTable()}onBatchSelect(t){let e,i,c,n,a;this.editProductionPlanFlag&&this.plannedProductionList.forEach(s=>{s.batchId==t&&(e=s.stockId,i=s.partyId,c=s.qualityEntryId,n=s.shadeId,a=s.colorTone)}),this.batchList.forEach(n=>{n.batchId==t&&(e=n.controlId,i=n.partyId,c=n.qualityEntryId)});const s=this.modalService.open(D.a,{size:"lg"});null==(this.productionPlanning.partyId&&this.productionPlanning.qualityId)?(s.componentInstance.party=i,s.componentInstance.quality=c):(s.componentInstance.party=this.p_id,s.componentInstance.quality=this.productionPlanning.qualityEntryId),s.componentInstance.productionBatchDetail=this.productionBatchDetail,s.componentInstance.batch=t,s.componentInstance.batchControl=e,s.componentInstance.shadeId=n,s.componentInstance.colorTone=a,s.componentInstance.editProductionPlanFlag=this.editProductionPlanFlag,s.result.then(t=>{t&&(this.ngOnInit(),this.productionPlanning.partyId=null,this.productionPlanning.qualityId=null,this.editProductionPlanFlag=!1)}).catch(t=>{})}updateProduction(t){this.productionPlanningService.updateProductionPlan(t).pipe(Object(d.a)(this.destroy$)).subscribe(t=>{t.success?this.toastr.success(p.Update_Success):this.toastr.error(p.Update_Error),this.loading=!1},t=>{this.toastr.error(p.Serever_Error),this.loading=!1})}plannedProductionListForDataTable(){this.plannedProductionList=[],this.productionPlanningService.getAllBatchForProd(this.prodRequestData).pipe(Object(d.a)(this.destroy$)).subscribe(t=>{if(t.success){const e=t.data;this.plannedProductionList=e.data,this.prodRequestData.data.total=e.total}},t=>{})}editProductionPlan(t){this.editProductionPlanFlag=!0,this.onBatchSelect(t.batchId)}removeItem(t){this.productionPlanningService.deleteProduction(this.plannedProductionList[t].id).pipe(Object(d.a)(this.destroy$)).subscribe(t=>{t.success&&(this.ngOnInit(),this.toastr.success("Deleted Successfully"))},t=>{})}toggleView(){this.flipped=!this.flipped,this.flipped?this.getAllJets():(this.productionPlanning.partyId=null,this.productionPlanning.qualityId=null,this.requestData.data.pageIndex=0,this.prodRequestData.data.pageIndex=0,this.getAllBatchData(),this.plannedProductionListForDataTable())}getAllJets(){this.jetList=[],this.jetService.getAllJetDataV1().pipe(Object(d.a)(this.destroy$)).subscribe(t=>{t.success&&(this.jetList=t.data)},t=>{})}getJetData(){this.jet=[],this.loading=!0,this.jetService.getAllJetData().pipe(Object(d.a)(this.destroy$)).subscribe(t=>{t.success?(this.jet=t.data,this.jet.forEach(t=>{t.lotNo="",t.forEach(t=>{t.isChecked=!1})})):this.loading=!1},t=>{this.loading=!1})}setIndexForSlip(t,e,i){if(this.items=this.items.filter(t=>"Write"!=t.title),this.items=this.items.filter(t=>"SCO ON"!=t.title),this.items=this.items.filter(t=>"Dose Nylon ON"!=t.title),this.items=this.items.filter(t=>"SCO OFF"!=t.title),this.items=this.items.filter(t=>"Dose Nylon OFF"!=t.title),this.sendBatchId=t.batchId,this.sendSotckId=t.productionId,this.sendControlId=t.controlId,this.sendJetId=e.id,this.currentBatchSequence=i,"start"===t.status)this.items=this.items.filter(t=>"Start"!=t.title),this.items.push({title:"SCO ON"}),this.items.push({title:"Dose Nylon ON"}),this.items.push({title:"Write"});else{let t=this.items.filter(t=>"Start"==t.title);t&&t.length||this.items.splice(0,0,{title:"Start"})}1==t.sco&&(this.items=this.items.filter(t=>"SCO ON"!=t.title),this.items.push({title:"SCO OFF"})),1==t.doseNylone&&(this.items=this.items.filter(t=>"Dose Nylon ON"!=t.title),this.items.push({title:"Dose Nylon OFF"}))}getBatchDetails(){return this.jetService.getBatchedDetailByProductionId(this.sendSotckId,this.sendBatchId).pipe(Object(d.a)(this.destroy$)).subscribe(t=>{t.success?(this.detailsList=t.data,this.loading=!1):this.loading=!1},t=>{this.loading=!1}),this.detailsList}generateSlip(t){const e=this.modalService.open(P.a);e.componentInstance.isPrintDirect=t,e.componentInstance.batchId=this.sendBatchId,e.componentInstance.stockId=this.sendSotckId,e.componentInstance.additionSlipFlag=!1,e.result.then(t=>{}).catch(t=>{})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.autoScrollDownInterval&&clearInterval(this.autoScrollDownInterval),this.autoScrollUpInterval&&clearInterval(this.autoScrollUpInterval)}pauseChangeStatus(){this.jetStatus="pause",this.changeJetStatusApiCall({controlId:this.sendControlId,prodcutionId:this.sendSotckId,status:this.jetStatus})}startJet(){this.loading=!0,this.jetService.startJetProcess({jetNo:this.sendControlId,productionId:this.sendSotckId}).pipe(Object(d.a)(this.destroy$)).subscribe(t=>{t.success?(this.toastr.success(t.msg),this.jetsSelected()):this.toastr.error(t.msg),this.loading=!1},t=>{this.loading=!1})}SCOClickON(){this.jetService.updateSCOandDoseNylon({jetId:this.sendControlId,productionId:this.sendSotckId,sco:!0,doseNylon:null}).pipe(Object(d.a)(this.destroy$)).subscribe(t=>{t.success?(this.toastr.success(t.msg),this.jetsSelected()):this.toastr.error(t.msg)},t=>{})}doseNylonClickON(){this.jetService.updateSCOandDoseNylon({jetId:this.sendControlId,productionId:this.sendSotckId,sco:null,doseNylon:!0}).pipe(Object(d.a)(this.destroy$)).subscribe(t=>{t.success?(this.toastr.success(t.msg),this.jetsSelected()):this.toastr.error(t.msg)},t=>{})}SCOClickOFF(){this.jetService.updateSCOandDoseNylon({jetId:this.sendControlId,productionId:this.sendSotckId,sco:!1,doseNylon:null}).pipe(Object(d.a)(this.destroy$)).subscribe(t=>{t.success?(this.toastr.success(t.msg),this.jetsSelected()):this.toastr.error(t.msg)},t=>{})}doseNylonClickOFF(){this.jetService.updateSCOandDoseNylon({jetId:this.sendControlId,productionId:this.sendSotckId,sco:null,doseNylon:!1}).pipe(Object(d.a)(this.destroy$)).subscribe(t=>{t.success?(this.toastr.success(t.msg),this.jetsSelected()):this.toastr.error(t.msg)},t=>{})}writeClick(){this.loading=!0,this.productionPlanningService.writeModBust(this.sendControlId).pipe(Object(d.a)(this.destroy$)).subscribe(t=>{t.success?this.toastr.success(t.msg):this.toastr.error(t.msg),this.loading=!1},t=>{this.loading=!1})}completeChangeStatus(){this.jetStatus="success",this.changeJetStatusApiCall({controlId:this.sendControlId,prodcutionId:this.sendSotckId,status:this.jetStatus})}changeJet(){const t=this.modalService.open(M,{size:"lg"});t.componentInstance.batchId=this.sendBatchId,t.componentInstance.jetId=this.sendJetId,t.componentInstance.batchControlId=this.sendControlId,t.componentInstance.currentSequence=this.currentBatchSequence,t.componentInstance.prodId=this.sendSotckId,t.result.then(t=>{t&&this.jetService.updateJetData(t).pipe(Object(d.a)(this.destroy$)).subscribe(t=>{t.success&&(this.toastr.success(p.Add_Success),this.jetsSelected())})}).catch(t=>{})}changeJetStatusApiCall(t){this.jetService.updateStatus(t).pipe(Object(d.a)(this.destroy$)).subscribe(t=>{t.success?(this.toastr.success(t.msg),this.jetsSelected()):this.toastr.error(t.msg)},t=>{})}showMenu(){this.showMenuFlag=!0}removeBatchFromJet(){this.modalService.open(h.a,{size:"sm"}).result.then(t=>{t&&this.jetService.removeProductionFromJet(this.sendControlId,this.sendSotckId).pipe(Object(d.a)(this.destroy$)).subscribe(t=>{this.toastr.success(p.Delete),this.jetsSelected(),this.getAllBatchWithShade()},t=>{this.toastr.error(p.Serever_Error)})}).catch(t=>{})}getAllBatchWithShade(){this.loading=!0,this.productionPlanningService.getAllProductionPlan().pipe(Object(d.a)(this.destroy$)).subscribe(t=>{t.success?(this.batchList=t.data,this.allBatchList=t.data):this.loading=!1},t=>{this.loading=!1})}batchSelectedFromProductionList(t){let e;e=t.target?Number(t.target.value):t;let i=this.plannedProductionList.filter(e=>e.id==Number(t.target.value));if(i.length){const t=this.modalService.open(D.a,{size:"lg"});t.componentInstance.productionId1=i[0].id,t.componentInstance.productionBatchDetail=this.productionBatchDetail,t.componentInstance.party=i[0].partyId,t.componentInstance.quality=i[0].qualityEntryId,t.componentInstance.batch=i[0].batchId,t.componentInstance.batchControl=i[0].stockId,t.componentInstance.shadeId=i[0].shadeId,t.componentInstance.colorTone=i[0].colorTone,t.componentInstance.editProductionPlanFlag=!0,t.result.then(t=>{t&&(this.ngOnInit(),this.editProductionPlanFlag=!1)}).catch(t=>{})}}getAllDetailsOfBatch(t,e){this.deleteIcon=!0,this.productionBatchDetail=Object.assign({},e),this.autoScrollDownInterval=setInterval(()=>{var t=document.getElementById("scroll-auto");t.scrollTop=t.scrollHeight},2e3),this.autoScrollUpInterval=setInterval(()=>{document.getElementById("scroll-auto").scrollTop=0},4e3)}resetDetailsOfBatch(t){this.deleteIcon=!1,this.productionBatchDetail=new g.a,clearInterval(this.autoScrollDownInterval),clearInterval(this.autoScrollUpInterval)}drop(t,e){t.previousContainer===t.container?(Object(s.d)(this.jet[e].jetDataList,t.previousIndex,t.currentIndex),this.jetService.updateJetData({from:{jetId:this.jet[e].id,productionId:t.container.data[t.currentIndex].productionId,sequence:t.previousIndex+1},to:{jetId:this.jet[e].id,productionId:t.container.data[t.currentIndex].productionId,sequence:t.currentIndex+1}}).pipe(Object(d.a)(this.destroy$)).subscribe(t=>{t.success&&this.toastr.success(p.Add_Success)})):(Object(s.e)(t.previousContainer.data,t.container.data,t.previousIndex,t.currentIndex),this.jetService.updateJetData({from:{jetId:this.jet[e].id,productionId:t.container.data[t.currentIndex].productionId,sequence:t.previousIndex+1},to:{jetId:this.jet[e].id,productionId:t.container.data[t.currentIndex].productionId,sequence:t.currentIndex+1}}).pipe(Object(d.a)(this.destroy$)).subscribe(t=>{t.success&&this.toastr.success(p.Add_Success)}))}remove(t){this.modalService.open(h.a).result.then(e=>{e&&this.jetService.removeBatchFromList(t.batchId).pipe(Object(d.a)(this.destroy$)).subscribe(t=>{this.toastr.success(p.Delete),this.plannedProductionListForDataTable(),this.getAllBatchData()},t=>{this.toastr.error(p.Serever_Error)})})}pageChanged(t){this.requestData.data.pageIndex=t-1,this.getAllBatchData()}prodPageChanged(t){this.prodRequestData.data.pageIndex=t-1,this.plannedProductionListForDataTable()}jetsSelected(t){this.selectedJets=t&&t.length?t:this.selectedJets;let e={array:this.selectedJets};console.log(this.selectedJets),this.jetService.getJetDataById(e).pipe(Object(d.a)(this.destroy$)).subscribe(t=>{t.success&&(this.jet=t.data,this.jet&&this.jet.length?this.jet.forEach(t=>{t.lotNo="",t.jetDataList&&t.jetDataList.length&&t.jetDataList.forEach(t=>{t.isChecked=!1})}):this.jet=[],this.cdr.detectChanges())})}lotNoEntered(t,e){"Enter"==t.key&&(this.productionData.productionId=null,this.productionData.batchId=e.lotNo,this.productionData.shadeId=null,this.productionData.jetId=e.id,this.productionPlanningService.saveProductionPlan(this.productionData).pipe(Object(d.a)(this.destroy$)).subscribe(t=>{t.success?(this.jetsSelected(),this.toastr.success(t.msg)):this.toastr.error(t.msg)},t=>{this.loading=!1}),t.preventDefault())}openShadeModal(t,e){if(e){const i=this.modalService.open(D.a,{size:"lg"});i.componentInstance.productionId1=e.productionId,i.componentInstance.productionBatchDetail=this.productionBatchDetail,i.componentInstance.party=e.partyId,i.componentInstance.quality=e.qualityEntryId,i.componentInstance.batch=e.batchId,i.componentInstance.batchControl=e.stockId,i.componentInstance.jetid=t.id,i.componentInstance.editProductionPlanFlag=!0,i.componentInstance.fromJetComp=!0,i.result.then(t=>{t&&(this.editProductionPlanFlag=!1,this.jetsSelected())}).catch(t=>{})}}selectedBatches(t,e,i){this.selectedBatchForPrint=[],e.isChecked=t;let c=this.jet.map(t=>t.jetDataList),n=[];c.forEach(t=>{t.forEach(t=>{t.isChecked&&n.push(t)})}),console.log("batched : ",n),n&&n.length&&n.forEach(t=>{this.selectedBatchForPrint.push({batchId:t.batchId,productionId:t.productionId})}),console.log(this.selectedBatchForPrint)}callPrintSlipApi(){let t={type:this.selectedPrintOption,list:this.selectedBatchForPrint};const e=this.modalService.open(V);e.componentInstance.arrayForBatchesForPrint=this.selectedBatchForPrint,e.componentInstance.additionSlipFlag=!1,e.componentInstance.directPrintFromJet=!0,e.componentInstance.objToPassInRequest=t,e.result.then(t=>{}).catch(t=>{})}removeBatchFromJetManually(t){this.modalService.open(h.a,{size:"sm"}).result.then(e=>{e&&this.jetService.removeProductionFromJet(t.controlId,t.productionId).pipe(Object(d.a)(this.destroy$)).subscribe(t=>{this.toastr.success(p.Delete),this.jetsSelected()},t=>{this.toastr.error(p.Serever_Error)})}).catch(t=>{})}}return t.\u0275fac=function(e){return new(e||t)(S.dc(m.a),S.dc(I.a),S.dc(f.a),S.dc(j.a),S.dc(x.b),S.dc(v.a),S.dc(y.a),S.dc(q.e),S.dc(b.a),S.dc(_.Z),S.dc(S.i))},t.\u0275cmp=S.Xb({type:t,selectors:[["ngx-production-planning"]],decls:180,vars:27,consts:[["id","target"],[1,"nb-style"],[1,"nb-header"],[1,"nb-text"],[1,"batch-pd-top-16"],["myForm","ngForm"],[1,"batch-mb"],[1,"mr-bt-5"],[1,"row"],[1,"col-md-5"],[1,"border-right-batch"],[1,"form-group","mb-1"],[1,"col-md-3","col-12","display-flex-start","label-0"],[1,"col-md-9","col-12"],["name","partyId","appendTo","body","required","","placeholder","Party Name",3,"ngModel","ngModelChange","change"],["disabled","true"],[1,"col-md-6","col-6"],[1,"text-left","txt-ov-elips"],[1,"text-right","txt-ov-elips"],[3,"value",4,"ngFor","ngForOf"],["name","qualityId","appendTo","body","placeholder","Quality ID",3,"ngModel","ngModelChange","change"],["type","text","fieldsize","small","nbinput","","name","batch","required","","placeholder","Enter Batch",1,"form-control","size-small",3,"ngModel","ngModelChange","keyup"],["batchFilter1","ngModel"],[1,"col-md-7"],["id","scroll-auto",1,"jus-con-flex-start","scroll-auto-transition"],[1,"col-md-7","col-12","pd-0"],[1,"display-flex","mr-0"],[1,"batch-p-color","label-0"],[1,"party-name-text","text-center"],[1,"production-plan-text"],[1,"batch-p-color","label-0","text-Left"],[1,"col-md-4","col-12","pd-0"],[1,"overflow-hidden",3,"showToggleButton","flipped"],[1,"pd-left-15"],[1,"title-with-btn"],[1,"col-md-9","col-5"],[1,"batch-list-production"],[1,"nb-text","font-14","batch-mr-0"],[1,"col-md-3","col-7","display-flex-end"],[1,"jet-btn-production"],["type","button",1,"btn","btn-md","btn-design-save","font-14","btn-plan","mr-2",3,"click"],[1,"production-btn-list",2,"height","225px"],[1,"row","h-100"],[1,"col-md-12","h-100"],[1,"batch-list-3line","h-100"],["nbButton","","size","small","class","p-badge-design",3,"mouseenter","mouseout","click",4,"ngFor","ngForOf"],["id","custom-pagination","class","d-flex justify-content-end",3,"pageSize","maxSize","collectionSize","page","pageChange",4,"ngIf"],[1,"border-bt-after"],[1,"col-md-12"],[1,"production-btn-list"],[1,"form-group","batch-list-3line"],[4,"ngFor","ngForOf"],[1,"pd-left-15",2,"height","400px","overflow-y","auto"],["id","jetList"],[1,"col-md-1","col-5"],[1,"col-md-3","jet-display-center"],["id","jetSelected","name","jetSelected","multiple","true","placeholder","Select Jets",3,"ngModel","change","ngModelChange"],["class","col-md-3 jet-display-center",4,"ngIf"],["class","btn btn-md btn-design-save font-14 btn-plan mr-2","type","button",3,"click",4,"ngIf"],[1,"col-md-2","col-7","display-flex-end"],[1,"jet-btn-production","text-right"],[1,"user-per-table","table-jet"],["width","100%"],["width","5%"],["width","8%"],["width","82%"],[3,"value"],["nbButton","","size","small",1,"p-badge-design",3,"mouseenter","mouseout","click"],["id","custom-pagination",1,"d-flex","justify-content-end",3,"pageSize","maxSize","collectionSize","page","pageChange"],["nbButton","","size","small",1,"p-badge-design-production","jet-popup-display",2,"border","1px solid black",3,"value","mouseenter","mouseout","click"],["icon","close-circle-outline",1,"icon-pposition",3,"click"],["id","printOption","name","printOption","placeholder","Select Print Option",3,"ngModel","ngModelChange"],["value","all"],["value","color"],["value","chemical"],[2,"display","revert !important"],["placeholder","Enter Lol No","type","text","min","0",1,"form-control",2,"width","150px",3,"name","ngModel","ngModelChange","keypress"],["cdkDropList","","cdkDropListOrientation","horizontal",1,"example-list","main-table-drag",3,"cdkDropListData","cdkDropListDropped"],["class","example-box trans-box-drop-1 border-jet","cdkDrag","","style","display: flex;justify-content: left;",3,"background","click",4,"ngFor","ngForOf"],["cdkDrag","",1,"example-box","trans-box-drop-1","border-jet",2,"display","flex","justify-content","left",3,"click"],[3,"name","ngModel","checkedChange","ngModelChange",4,"ngIf"],["nbContextMenuTag","my-context-menu","nbContextMenuTrigger","click","class","jet-btn-changes btn-changes-jet ",3,"color","nbContextMenu","mouseenter","mouseout",4,"ngIf"],["class","jet-btn-changes btn-changes-jet ",3,"color","mouseenter","mouseout","click",4,"ngIf"],[3,"name","ngModel","checkedChange","ngModelChange"],["nbContextMenuTag","my-context-menu","nbContextMenuTrigger","click",1,"jet-btn-changes","btn-changes-jet",3,"nbContextMenu","mouseenter","mouseout"],[1,"jet-btn-changes","btn-changes-jet",3,"mouseenter","mouseout","click"]],template:function(t,e){1&t&&(S.ec(0,"div",0),S.jc(1,"nb-card",1),S.jc(2,"nb-card-header",2),S.jc(3,"h2",3),S.jd(4,"Production Planning"),S.ic(),S.ic(),S.jc(5,"nb-card-body",4),S.jc(6,"div"),S.jc(7,"form",null,5),S.jc(9,"div",6),S.jc(10,"div",7),S.jc(11,"div",8),S.jc(12,"div",9),S.jc(13,"div",10),S.jc(14,"div",11),S.jc(15,"div",8),S.jc(16,"div",12),S.jc(17,"label"),S.jd(18,"Party"),S.ic(),S.ic(),S.jc(19,"div",13),S.jc(20,"ng-select",14),S.uc("ngModelChange",(function(t){return e.productionPlanning.partyId=t}))("change",(function(t){return e.partySelected(t)})),S.jc(21,"ng-option",15),S.jc(22,"div",8),S.jc(23,"div",16),S.jc(24,"div",17),S.jd(25,"Party Name"),S.ic(),S.ic(),S.jc(26,"div",16),S.jc(27,"div",18),S.jd(28,"Party Code"),S.ic(),S.ic(),S.ic(),S.ic(),S.hd(29,K,8,3,"ng-option",19),S.ic(),S.ic(),S.ic(),S.ic(),S.jc(30,"div",11),S.jc(31,"div",8),S.jc(32,"div",12),S.jc(33,"label"),S.jd(34,"Quality"),S.ic(),S.ic(),S.jc(35,"div",13),S.jc(36,"ng-select",20),S.uc("ngModelChange",(function(t){return e.productionPlanning.qualityId=t}))("change",(function(t){return e.qualitySelected(t)})),S.jc(37,"ng-option",15),S.jc(38,"div",8),S.jc(39,"div",16),S.jc(40,"div",17),S.jd(41,"Quality Id"),S.ic(),S.ic(),S.jc(42,"div",16),S.jc(43,"div",18),S.jd(44,"Party Name"),S.ic(),S.ic(),S.ic(),S.ic(),S.hd(45,G,8,3,"ng-option",19),S.ic(),S.ic(),S.ic(),S.ic(),S.jc(46,"div",11),S.jc(47,"div",8),S.jc(48,"div",12),S.jc(49,"label"),S.jd(50,"Batch"),S.ic(),S.ic(),S.jc(51,"div",13),S.jc(52,"input",21,22),S.uc("ngModelChange",(function(t){return e.batch=t}))("keyup",(function(t){return e.filter(t)})),S.ic(),S.ic(),S.ic(),S.ic(),S.ic(),S.ic(),S.jc(54,"div",23),S.jc(55,"div",24),S.jc(56,"div",25),S.jc(57,"div",26),S.jc(58,"div",27),S.jc(59,"label"),S.jd(60,"Party Name"),S.ic(),S.ic(),S.jc(61,"div",28),S.jc(62,"h6",29),S.jd(63),S.ic(),S.ic(),S.ic(),S.jc(64,"div",26),S.jc(65,"div",30),S.jc(66,"label"),S.jd(67,"Quality Name"),S.ic(),S.ic(),S.jc(68,"div",28),S.jc(69,"h6",29),S.jd(70),S.ic(),S.ic(),S.ic(),S.jc(71,"div",26),S.jc(72,"div",30),S.jc(73,"label"),S.jd(74,"Quality Id"),S.ic(),S.ic(),S.jc(75,"div",28),S.jc(76,"h6",29),S.jd(77),S.ic(),S.ic(),S.ic(),S.jc(78,"div",26),S.jc(79,"div",30),S.jc(80,"label"),S.jd(81,"Process Name"),S.ic(),S.ic(),S.jc(82,"div",28),S.jc(83,"h6",29),S.jd(84),S.ic(),S.ic(),S.ic(),S.ic(),S.jc(85,"div",31),S.jc(86,"div",26),S.jc(87,"div",30),S.jc(88,"label"),S.jd(89,"Party Shade No."),S.ic(),S.ic(),S.jc(90,"div",28),S.jc(91,"h6",29),S.jd(92),S.ic(),S.ic(),S.ic(),S.jc(93,"div",26),S.jc(94,"div",30),S.jc(95,"label"),S.jd(96,"Lot Weight"),S.ic(),S.ic(),S.jc(97,"div",28),S.jc(98,"h6",29),S.jd(99),S.ic(),S.ic(),S.ic(),S.jc(100,"div",26),S.jc(101,"div",30),S.jc(102,"label"),S.jd(103,"Lot Meter"),S.ic(),S.ic(),S.jc(104,"div",28),S.jc(105,"h6",29),S.jd(106),S.ic(),S.ic(),S.ic(),S.jc(107,"div",26),S.jc(108,"div",30),S.jc(109,"label"),S.jd(110,"Batch ID"),S.ic(),S.ic(),S.jc(111,"div",28),S.jc(112,"h6",29),S.jd(113),S.ic(),S.ic(),S.ic(),S.ic(),S.ic(),S.ic(),S.ic(),S.ic(),S.jc(114,"nb-flip-card",32),S.jc(115,"nb-card-front"),S.jc(116,"nb-card",33),S.jc(117,"div",34),S.jc(118,"div",8),S.jc(119,"div",35),S.jc(120,"div",36),S.jc(121,"h2",37),S.jd(122,"Batch List:"),S.ic(),S.ic(),S.ic(),S.jc(123,"div",38),S.jc(124,"div",39),S.jc(125,"button",40),S.uc("click",(function(){return e.toggleView()})),S.jd(126,"Jet planning"),S.ic(),S.ic(),S.ic(),S.ic(),S.ic(),S.jc(127,"div",41),S.jc(128,"div",42),S.jc(129,"div",43),S.jc(130,"div",44),S.hd(131,Z,2,1,"button",45),S.hd(132,Y,1,4,"ngb-pagination",46),S.ic(),S.ic(),S.ic(),S.ic(),S.ec(133,"div",47),S.jc(134,"div",34),S.jc(135,"div",8),S.jc(136,"div",48),S.jc(137,"div",36),S.jc(138,"h2",37),S.jd(139,"Production Plan List:"),S.ic(),S.ic(),S.ic(),S.ic(),S.ic(),S.jc(140,"div",49),S.jc(141,"div",8),S.jc(142,"div",48),S.jc(143,"div",50),S.hd(144,tt,4,4,"ng-container",51),S.hd(145,et,1,4,"ngb-pagination",46),S.ic(),S.ic(),S.ic(),S.ic(),S.ic(),S.ic(),S.jc(146,"nb-card-back"),S.jc(147,"nb-card",52),S.jc(148,"div",53),S.jc(149,"div",34),S.jc(150,"div",8),S.jc(151,"div",54),S.jc(152,"div",36),S.jc(153,"h2",37),S.jd(154,"Jet List:"),S.ic(),S.ic(),S.ic(),S.jc(155,"div",55),S.jc(156,"ng-select",56),S.uc("change",(function(t){return e.jetsSelected(t)}))("ngModelChange",(function(t){return e.selectedJets=t})),S.hd(157,it,2,2,"ng-option",19),S.ic(),S.ic(),S.hd(158,ct,8,1,"div",57),S.hd(159,nt,1,0,"div",57),S.jc(160,"div",55),S.hd(161,at,2,0,"button",58),S.hd(162,st,2,0,"button",58),S.hd(163,ot,2,0,"button",58),S.ic(),S.jc(164,"div",59),S.jc(165,"div",39),S.jc(166,"div",60),S.jc(167,"button",40),S.uc("click",(function(){return e.toggleView()})),S.jd(168,"Production Plan"),S.ic(),S.ic(),S.ic(),S.ic(),S.ic(),S.ic(),S.jc(169,"table",61),S.jc(170,"tr",62),S.jc(171,"th",63),S.jd(172,"Jet"),S.ic(),S.jc(173,"th",64),S.jd(174,"Capacity"),S.ic(),S.jc(175,"th",64),S.jd(176,"Enter Lot No."),S.ic(),S.jc(177,"th",65),S.jd(178,"Sequence"),S.ic(),S.ic(),S.hd(179,ut,10,6,"tr",51),S.ic(),S.ic(),S.ic(),S.ic(),S.ic(),S.ic(),S.ic(),S.ic(),S.ic(),S.ic()),2&t&&(S.Pb(20),S.Hc("ngModel",e.productionPlanning.partyId),S.Pb(9),S.Hc("ngForOf",e.partyList),S.Pb(7),S.Hc("ngModel",e.productionPlanning.qualityId),S.Pb(9),S.Hc("ngForOf",e.qualityList),S.Pb(7),S.Hc("ngModel",e.batch),S.Pb(11),S.ld("",e.productionBatchDetail.partyName," "),S.Pb(7),S.ld("",e.productionBatchDetail.qualityName," "),S.Pb(7),S.ld("",e.productionBatchDetail.qualityId," "),S.Pb(7),S.ld("",e.productionBatchDetail.processName," "),S.Pb(8),S.ld("",e.productionBatchDetail.partyShadeNo," "),S.Pb(7),S.kd(e.productionBatchDetail.totalWt),S.Pb(7),S.kd(e.productionBatchDetail.totalMtr),S.Pb(7),S.kd(e.productionBatchDetail.batchId),S.Pb(1),S.Hc("showToggleButton",!1)("flipped",e.flipped),S.Pb(17),S.Hc("ngForOf",e.batchList),S.Pb(1),S.Hc("ngIf",e.requestData.data.total),S.Pb(12),S.Hc("ngForOf",e.plannedProductionList),S.Pb(1),S.Hc("ngIf",e.prodRequestData.data.total),S.Pb(11),S.Hc("ngModel",e.selectedJets),S.Pb(1),S.Hc("ngForOf",e.jetList),S.Pb(1),S.Hc("ngIf",e.selectedBatchForPrint.length>0),S.Pb(1),S.Hc("ngIf",0==e.selectedBatchForPrint.length),S.Pb(2),S.Hc("ngIf","color"==e.selectedPrintOption),S.Pb(1),S.Hc("ngIf","chemical"==e.selectedPrintOption),S.Pb(1),S.Hc("ngIf","all"==e.selectedPrintOption),S.Pb(16),S.Hc("ngForOf",e.jet))},directives:[_.u,_.x,_.t,O.x,O.m,O.n,C.a,O.t,O.l,O.o,C.c,c.m,O.a,_.G,_.w,c.n,_.s,_.q,q.g,_.I,s.b,s.a,_.A,_.C],styles:["table[_ngcontent-%COMP%]{font-family:arial,sans-serif;border-collapse:collapse;width:100%}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{border:1px solid #ddd;text-align:left;padding:8px}.icon-pposition[_ngcontent-%COMP%]{margin-top:-1px;margin-left:5px}.example-list[_ngcontent-%COMP%]{width:1000px;max-width:100%;border:1px solid #ccc;min-height:60px;border-radius:4px;overflow-x:auto}.example-box[_ngcontent-%COMP%], .example-list[_ngcontent-%COMP%]{display:flex;flex-direction:row;background:#fff}.example-box[_ngcontent-%COMP%]{padding:2px;border-right:1px solid #ccc;color:rgba(0,0,0,.87);align-items:center;justify-content:center;box-sizing:border-box;cursor:move;font-size:14px;flex-grow:1;flex-basis:0}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.example-box[_ngcontent-%COMP%]:last-child{border:none}.example-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .example-box[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.scroll-auto-transition[_ngcontent-%COMP%]{overflow-y:scroll;scroll-behavior:smooth;max-height:100px}.batch-list-3line[_ngcontent-%COMP%]{position:relative}#custom-pagination[_ngcontent-%COMP%]{position:absolute;bottom:7px;right:5px}.jet-display-center[_ngcontent-%COMP%]{display:flex;align-items:center}"]}),t})(),canActivate:[a.a],canLoad:[a.a],data:{PermissionName:["view","view group","view all"]}}];let jt=(()=>{class t{}return t.\u0275mod=S.bc({type:t}),t.\u0275inj=S.ac({factory:function(e){return new(e||t)},imports:[[n.g.forChild(gt)],n.g]}),t})();var bt=i("yzeJ"),mt=i("uwqZ"),ft=i("vTDv");let yt=(()=>{class t{}return t.\u0275mod=S.bc({type:t}),t.\u0275inj=S.ac({factory:function(e){return new(e||t)},imports:[[c.c,jt,bt.a,O.g,s.c,mt.JetPlanningModule,ft.a]]}),t})()}}]);