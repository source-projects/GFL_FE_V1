!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var i=0;i<t.length;i++){var c=t[i];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(e,c.key,c)}}function i(e,i,c){return i&&t(e.prototype,i),c&&t(e,c),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{"7YGY":function(t,c,n){"use strict";n.r(c),n.d(c,"AttendanceModule",(function(){return T}));var a=n("ofXK"),o=n("tyNb"),d=n("rrQ7"),s=n("1G5W"),r=n("O1SP"),l=n("Nd6e"),u=n("XNiG"),m=n("fXoL"),h=n("5eHb"),p=n("qC+V"),g=n("aceb"),f=n("3Pt+"),v=n("IyRd");function j(e,t){if(1&e){var i=m.kc();m.jc(0,"section",19),m.jc(1,"div"),m.jc(2,"small"),m.jd(3,"Result"),m.ic(),m.jc(4,"strong"),m.jd(5),m.ic(),m.ic(),m.jc(6,"button",20),m.uc("click",(function(){return m.Xc(i),m.yc(2).clearResult()})),m.jd(7,"\xd7"),m.ic(),m.ic()}if(2&e){var c=m.yc(2);m.Pb(5),m.kd(c.qrResultString)}}function b(e,t){if(1&e){var i=m.kc();m.hc(0),m.jc(1,"zxing-scanner",17),m.uc("scanSuccess",(function(e){return m.Xc(i),m.yc().onCodeResult(e)})),m.ic(),m.hd(2,j,8,1,"section",18),m.gc()}if(2&e){var c=m.yc();m.Pb(2),m.Hc("ngIf",c.qrResultString)}}function y(e,t){1&e&&(m.hc(0),m.jc(1,"a",21),m.jd(2,"No Permission"),m.ic(),m.gc())}var w,k=((w=function(){function t(i,c,n){e(this,t),this.registrationService=i,this.route=c,this.toastr=n,this.loading=!1,this.formSubmitted=!1,this.list=[],this.permissionDenied=!1,this.destroy$=new u.a}return i(t,[{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}},{key:"ngOnInit",value:function(){var e=this;navigator.permissions.query({name:"camera"}).then((function(t){e.permissionDenied="denied"===t.state})).catch((function(e){}))}},{key:"clearResult",value:function(){this.qrResultString=null}},{key:"onCodeResult",value:function(e){this.qrResultString=e,window.location.href=this.qrResultString}},{key:"searchSelected",value:function(e){var t=this;Number(e.value.empid)&&this.registrationService.empIdExistOrNot(e.value.empid).pipe(Object(s.a)(this.destroy$)).subscribe((function(e){e.success?e.data[0]?t.route.navigate(["/pages/attendance/",t.employee]):(t.employee="",t.toastr.error("Employee does not exist")):t.toastr.error(e.msg)}),(function(e){t.toastr.error(r.Serever_Error)}))}}]),t}()).\u0275fac=function(e){return new(e||w)(m.dc(l.a),m.dc(o.c),m.dc(h.b))},w.\u0275cmp=m.Xb({type:w,selectors:[["ngx-scan-qr"]],decls:28,vars:4,consts:[[3,"show"],["id","target"],[1,"nb-style"],[1,"nb-header"],[1,"row"],[1,"col-md-7","col-5","display-flex-start","max-width-device"],[1,"nb-text","mobile-mr-lf-0"],["empForm","ngForm"],[1,"col-md-4","col-12"],[1,"form-group","mobile-txt-center"],["type","number","name","empid",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-md-2","col-12","jus-con-center"],[1,"text-center","or-style"],[1,"col-md-4","col-12","jus-con-center"],[4,"ngIf"],[1,"col-md-4"],["type","submit",1,"btn","btn-primary","btn-sm","btn-design-save","button-base","ripple",3,"click"],[3,"scanSuccess"],["class","results",4,"ngIf"],[1,"results"],["mat-icon-button","",3,"click"],["href","https://support.google.com/chrome/answer/2693767?co=GENIE.Platform%3DDesktop&hl=en"]],template:function(e,t){if(1&e){var i=m.kc();m.ec(0,"ngx-loading",0),m.ec(1,"div",1),m.jc(2,"nb-card",2),m.jc(3,"nb-card-header",3),m.jc(4,"div",4),m.jc(5,"div",5),m.jc(6,"div"),m.jc(7,"h2",6),m.jd(8,"Scan"),m.ic(),m.ic(),m.ic(),m.ic(),m.ic(),m.jc(9,"nb-card-body"),m.jc(10,"div"),m.jc(11,"form",null,7),m.jc(13,"div",4),m.jc(14,"div",8),m.jc(15,"div",9),m.jc(16,"input",10),m.uc("ngModelChange",(function(e){return t.employee=e})),m.ic(),m.ic(),m.ic(),m.jc(17,"div",11),m.jc(18,"span",12),m.jc(19,"b"),m.jd(20,"OR"),m.ic(),m.ic(),m.ic(),m.jc(21,"div",13),m.hd(22,b,3,1,"ng-container",14),m.hd(23,y,3,0,"ng-container",14),m.ic(),m.ic(),m.jc(24,"div",4),m.jc(25,"div",15),m.jc(26,"button",16),m.uc("click",(function(){m.Xc(i);var e=m.Uc(12);return t.searchSelected(e)})),m.jd(27,"ENTER"),m.ic(),m.ic(),m.ic(),m.ic(),m.ic(),m.ic(),m.ic()}2&e&&(m.Hc("show",t.loading),m.Pb(16),m.Hc("ngModel",t.employee),m.Pb(6),m.Hc("ngIf",!t.permissionDenied),m.Pb(1),m.Hc("ngIf",t.permissionDenied))},directives:[p.a,g.u,g.x,g.t,f.x,f.m,f.n,f.q,f.a,f.l,f.o,a.n,v.a],styles:["zxing-scanner[_ngcontent-%COMP%]{max-width:50%}header[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;top:0;padding:10px;background:#333;display:flex}header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:8px}header[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:25%;font-weight:700}header[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]     .mat-form-field-wrapper{padding:0}header[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]     .mat-form-field-wrapper .mat-form-field-flex{padding-top:0}header[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]     .mat-form-field-underline{bottom:0}header[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{padding:10px;line-height:2;background:#474747;color:#fff}.results[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;bottom:0;padding:15px;background:#02c3c3;color:#fff;display:flex;align-items:center;justify-content:space-between}.results[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-weight:bolder;display:block;font-size:60%;margin:-.6em 0 0}.results[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:none;border:none;line-height:1;font-weight:bolder;font-size:120%;float:right;color:#fff;margin:-8px -8px -8px 8px}h2[_ngcontent-%COMP%]{padding:0 16px}"]}),w),D=n("4/8P"),P=function(){return["/pages/attendance"]};function O(e,t){if(1&e){var i=m.kc();m.jc(0,"nb-card",3),m.jc(1,"nb-card-header",4),m.jc(2,"div",5),m.jc(3,"div",6),m.jc(4,"button",7),m.jd(5,"Scan"),m.ic(),m.ic(),m.jc(6,"div",8),m.jc(7,"div",9),m.jc(8,"h2",10),m.jd(9,"Add Attendance"),m.ic(),m.ic(),m.ic(),m.ic(),m.ic(),m.jc(10,"nb-card-body",11),m.jc(11,"div"),m.jc(12,"form",null,12),m.jc(14,"div",5),m.jc(15,"div",13),m.jc(16,"div",5),m.jc(17,"div",14),m.jc(18,"div",15),m.jc(19,"div",16),m.ec(20,"img",17),m.ic(),m.ic(),m.ic(),m.ic(),m.ic(),m.jc(21,"div",18),m.jc(22,"div",5),m.jc(23,"div",19),m.jc(24,"div",20),m.jc(25,"div",5),m.jc(26,"div",21),m.jc(27,"span",22),m.jd(28,"Employee Name: "),m.ic(),m.ic(),m.jc(29,"div",21),m.jc(30,"span",23),m.jd(31),m.ic(),m.ic(),m.ic(),m.ic(),m.ic(),m.jc(32,"div",19),m.jc(33,"div",20),m.jc(34,"div",5),m.jc(35,"div",21),m.jc(36,"span",22),m.jd(37,"Phone No: "),m.ic(),m.ic(),m.jc(38,"div",21),m.jc(39,"span",23),m.jd(40),m.ic(),m.ic(),m.ic(),m.ic(),m.ic(),m.jc(41,"div",19),m.jc(42,"div",20),m.jc(43,"div",5),m.jc(44,"div",21),m.jc(45,"span",22),m.jd(46,"Aadhar Card No: "),m.ic(),m.ic(),m.jc(47,"div",21),m.jc(48,"span",23),m.jd(49),m.ic(),m.ic(),m.ic(),m.ic(),m.ic(),m.jc(50,"div",19),m.jc(51,"div",20),m.jc(52,"div",5),m.jc(53,"div",21),m.jc(54,"span",22),m.jd(55,"Date: "),m.ic(),m.ic(),m.jc(56,"div",21),m.jc(57,"label"),m.jd(58),m.ic(),m.ic(),m.ic(),m.ic(),m.ic(),m.jc(59,"div",19),m.jc(60,"div",24),m.jc(61,"div",5),m.jc(62,"div",21),m.jc(63,"span",22),m.jd(64,"In Time: "),m.ic(),m.ic(),m.jc(65,"div",21),m.jc(66,"span",23),m.jd(67),m.zc(68,"date"),m.ic(),m.ic(),m.ic(),m.ic(),m.ic(),m.jc(69,"div",19),m.jc(70,"div",24),m.jc(71,"div",5),m.jc(72,"div",21),m.jc(73,"span",22),m.jd(74,"Out Time: "),m.ic(),m.ic(),m.jc(75,"div",21),m.jc(76,"span",23),m.jd(77),m.zc(78,"date"),m.ic(),m.ic(),m.ic(),m.ic(),m.ic(),m.ic(),m.ic(),m.jc(79,"div",13),m.jc(80,"div",5),m.jc(81,"div",14),m.jc(82,"div",25),m.jc(83,"div",26),m.jc(84,"button",27),m.uc("click",(function(){return m.Xc(i),m.yc().inClick()})),m.jd(85,"In"),m.ic(),m.ic(),m.jc(86,"div",26),m.jc(87,"button",28),m.uc("click",(function(){return m.Xc(i),m.yc().outClick()})),m.jd(88,"Out"),m.ic(),m.ic(),m.ic(),m.ic(),m.ic(),m.ic(),m.ic(),m.ic(),m.ic(),m.ic(),m.ic()}if(2&e){var c=m.yc();m.Pb(4),m.Hc("routerLink",m.Mc(16,P)),m.Pb(16),m.Hc("src",c.profileUrl,m.Zc),m.Pb(11),m.kd(c.employeeDetail.name),m.Pb(9),m.kd(c.employeeDetail.contact),m.Pb(9),m.kd(c.employeeDetail.aadhaar),m.Pb(9),m.kd(c.maxDate),m.Pb(9),m.kd(m.Bc(68,10,c.attendance.inTime,"shortTime")),m.Pb(10),m.kd(m.Bc(78,13,c.attendance.outTime,"shortTime")),m.Pb(7),m.Hc("disabled",c.disableIn),m.Pb(3),m.Hc("disabled",c.disableOut)}}var x,M,C,I=function t(){e(this,t),this.date=new Date,this.shift=!1},S=[{path:":id",component:(x=function(){function t(i,c,n,a,o){e(this,t),this.commonService=i,this._route=c,this.registrationService=n,this.toastr=a,this.route=o,this.loading=!1,this.formSubmitted=!1,this.disableButton=!1,this.disableIn=!1,this.disableOut=!1,this.currentDate=new Date,this.dateForPicker=new Date,this.attendance=new I,this.destroy$=new u.a}return i(t,[{key:"ngOnInit",value:function(){this.getUserId()}},{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}},{key:"getUserId",value:function(){this.user=this.commonService.getUser(),this.attendance.createdBy=this.user.userId,this.currentEmpId=this._route.snapshot.paramMap.get("id"),this.maxDate=new Date;var e=String(this.maxDate.getDate()).padStart(2,"0"),t=String(this.maxDate.getMonth()+1).padStart(2,"0"),i=this.maxDate.getFullYear();this.maxDate=e+"-"+t+"-"+i,this.modifiedToday=t+"-"+e+"-"+i,this.attendance.date=new Date(this.modifiedToday),this.selectedDate=this.modifiedToday,this.getEmployeeById()}},{key:"getEmployeeById",value:function(){var e=this,t={date:this.setTimeAndDateForInAndOut(),empId:this.currentEmpId,saveFlag:!1};this.registrationService.getAttendanceByDateAndSaveeFlag(t).pipe(Object(s.a)(this.destroy$)).subscribe((function(t){t.success?(e.employeeDetail=t.data.employeeMast,e.attendance=t.data.attendanceLatest,e.disableIn=!!e.attendance.inTime,e.disableOut=!!e.attendance.outTime,e.employeeDetail.employeeDocumentList.forEach((function(t){"profile"==t.type&&(e.profileUrl=t.url)}))):e.toastr.error(t.msg)}))}},{key:"setTimeAndDateForInAndOut",value:function(){var e=new Date;return e.setDate(new Date(this.selectedDate).getDate()),e.setMonth(new Date(this.selectedDate).getMonth()),e.setFullYear(new Date(this.selectedDate).getFullYear()),e.setHours(e.getHours()),e.setMinutes(e.getMinutes()),e.setSeconds(e.getSeconds()),e}},{key:"inClick",value:function(){this.attendance.date=new Date(this.selectedDate),this.attendance.inTime=this.setTimeAndDateForInAndOut(),this.addAttendance(),this.disableIn=!0,this.route.navigate(["/pages/attendance/"])}},{key:"outClick",value:function(){this.attendance.outTime=this.setTimeAndDateForInAndOut(),this.addAttendance(),this.disableOut=!0,this.route.navigate(["/pages/attendance/"])}},{key:"addAttendance",value:function(){var e=this,t={date:this.setTimeAndDateForInAndOut(),empId:this.currentEmpId,saveFlag:!0,url:"photoUrl"};this.registrationService.getAttendanceByDateAndSaveeFlag(t).pipe(Object(s.a)(this.destroy$)).subscribe((function(t){t.success&&(e.toastr.success(t.msg),e.attendance.id=t.data)}),(function(e){}))}}]),t}(),x.\u0275fac=function(e){return new(e||x)(m.dc(D.a),m.dc(o.a),m.dc(l.a),m.dc(h.b),m.dc(o.c))},x.\u0275cmp=m.Xb({type:x,selectors:[["ngx-attendance"]],decls:3,vars:2,consts:[[3,"show"],["id","target"],["class","nb-style",4,"ngIf"],[1,"nb-style"],[1,"nb-header"],[1,"row"],[1,"col-md-1","col-4","display-flex-start","max-width-device"],[1,"btn","btn-md","btn-design",3,"routerLink"],[1,"col-md-11","col-8"],[1,""],[1,"nb-text"],[1,"view-registrations-style"],["empForm","ngForm"],[1,"col-md-2"],[1,"col-md-12"],[1,"form-group","text-center"],[1,"profile-img"],["width","100","height","100",3,"src"],[1,"col-md-8","display-fl-center"],[1,"col-md-3","col-12"],[1,"form-group","pd-bt"],[1,"col-md-12","col-6","mobile-pdl-0"],[1,"view-title"],[1,"view-ans"],[1,"pd-bt"],[1,"display-space-evenly","desktop-display-block"],[1,"reg-inout"],[1,"btn-reg-inout","btn","btn-success",3,"disabled","click"],[1,"btn-reg-inout","btn","btn-danger",3,"disabled","click"]],template:function(e,t){1&e&&(m.ec(0,"ngx-loading",0),m.ec(1,"div",1),m.hd(2,O,89,17,"nb-card",2)),2&e&&(m.Hc("show",t.loading),m.Pb(2),m.Hc("ngIf",t.employeeDetail&&t.attendance))},directives:[p.a,a.n,g.u,g.x,o.d,g.t,f.x,f.m,f.n],pipes:[a.e],styles:[""]}),x),canActivate:[d.a],canLoad:[d.a],data:{PermissionName:["view","view all","view group"]}},{path:"",component:k,canActivate:[d.a],canLoad:[d.a],data:{PermissionName:["view","view all","view group"]}}],_=((M=function t(){e(this,t)}).\u0275mod=m.bc({type:M}),M.\u0275inj=m.ac({factory:function(e){return new(e||M)},imports:[[o.g.forChild(S)],o.g]}),M),A=n("yzeJ"),T=((C=function t(){e(this,t)}).\u0275mod=m.bc({type:C}),C.\u0275inj=m.ac({factory:function(e){return new(e||C)},imports:[[a.c,_,A.a]]}),C)}}])}();