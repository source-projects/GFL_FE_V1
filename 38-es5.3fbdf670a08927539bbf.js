!function(){function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,i){if(!e)return;if("string"==typeof e)return t(e,i);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return t(e,i)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function i(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function n(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{z6fL:function(t,i,o){"use strict";o.r(i),o.d(i,"RegistrationModule",(function(){return ye}));var r=o("ofXK"),a=o("yzeJ"),d=o("vTDv"),s=o("tyNb"),l=o("1G5W"),u=o("XNiG"),p=o("tk/3"),m=o("hiuq"),h=o("+TCe"),g=o("O1SP"),f=function e(){c(this,e)},b=o("4/8P"),v=o("Nd6e"),y=o("fXoL"),j=o("5eHb"),w=o("X9o6"),x=o("qC+V"),I=o("aceb"),k=o("ZOsW"),U=o("3Pt+"),A=o("K1R0"),F=o("Vwsh");function P(e,t){1&e&&(y.jc(0,"div"),y.jc(1,"h2",19),y.jd(2,"Add Employee"),y.ic(),y.ic())}function C(e,t){1&e&&(y.jc(0,"h2",19),y.jd(1,"Update Employee"),y.ic())}function S(e,t){1&e&&(y.jc(0,"div",44),y.jc(1,"span"),y.jd(2,"Profile is required"),y.ic(),y.ic())}function E(e,t){1&e&&(y.jc(0,"div",44),y.jc(1,"span"),y.jd(2,"Employee Name is required"),y.ic(),y.ic())}function H(e,t){1&e&&(y.jc(0,"div",44),y.jd(1," Enter 10 digit valid contact "),y.ic())}function M(e,t){if(1&e&&(y.hc(0,45),y.ec(1,"circle-progress",46),y.gc()),2&e){var i=y.yc(2);y.Pb(1),y.Hc("showInnerStroke",!1)("percent",i.processValue)("outerStrokeColor","#005ec2")("innerStrokeColor","#C7E596")("animation",!0)("animationDuration",300)("radius",10)("titleFontSize",6)("unitsFontSize",6)("outerStrokeWidth",2)("titleFontWeight",900)("unitsFontWeight",900)("showSubtitle",!1)}}function D(e,t){1&e&&(y.jc(0,"div",44),y.jc(1,"span"),y.jd(2,"Document is required"),y.ic(),y.ic())}function L(e,t){1&e&&(y.jc(0,"div",44),y.jc(1,"span"),y.jd(2,"Department is required."),y.ic(),y.ic())}function q(e,t){if(1&e){var i=y.kc();y.jc(0,"div",57),y.ec(1,"img",58),y.jc(2,"nb-icon",59),y.uc("click",(function(){y.Xc(i);var e=y.yc(4);return e.removeImage("docAdd",e.imageIndexFordocAdd)})),y.ic(),y.ic()}if(2&e){var n=t.$implicit;y.Pb(1),y.Hc("src",n,y.Zc)}}function O(e,t){if(1&e){var i=y.kc();y.hc(0),y.jc(1,"div",47),y.hd(2,q,3,1,"div",48),y.zc(3,"imagePreviewPipe"),y.jc(4,"div",49),y.jc(5,"div",50),y.jc(6,"nb-icon",51),y.uc("click",(function(){return y.Xc(i),y.yc(3).previous("docAdd")})),y.ic(),y.ic(),y.jc(7,"div",52),y.jc(8,"nb-icon",53),y.uc("click",(function(){return y.Xc(i),y.yc(3).next("docAdd")})),y.ic(),y.ic(),y.ic(),y.ic(),y.jc(9,"div"),y.jc(10,"div",54),y.jc(11,"div",55),y.jc(12,"span",56),y.jd(13),y.ic(),y.ic(),y.ic(),y.ic(),y.gc()}if(2&e){var n=y.yc(3);y.Pb(2),y.Hc("ngForOf",y.Bc(3,3,n.docAdd,n.imageIndexFordocAdd)),y.Pb(11),y.md(" ",n.imageIndexFordocAdd+1," / ",n.docAdd.length," ")}}function N(e,t){if(1&e&&(y.hc(0),y.hd(1,O,14,6,"ng-container",13),y.gc()),2&e){var i=y.yc(2);y.Pb(1),y.Hc("ngIf",i.imagePreviewFordocAdd&&i.docAdd.length)}}function T(e,t){if(1&e){var i=y.kc();y.jc(0,"div",57),y.ec(1,"img",58),y.jc(2,"nb-icon",59),y.uc("click",(function(){y.Xc(i);var e=y.yc(4);return e.removeImage("docUpdate",e.imageIndexFordocUpdate)})),y.ic(),y.ic()}if(2&e){var n=t.$implicit;y.Pb(1),y.Hc("src",n,y.Zc)}}function _(e,t){if(1&e){var i=y.kc();y.hc(0),y.jc(1,"div",47),y.hd(2,T,3,1,"div",48),y.zc(3,"imagePreviewPipe"),y.jc(4,"div",49),y.jc(5,"div",50),y.jc(6,"nb-icon",51),y.uc("click",(function(){return y.Xc(i),y.yc(3).previous("docUpdate")})),y.ic(),y.ic(),y.jc(7,"div",52),y.jc(8,"nb-icon",53),y.uc("click",(function(){return y.Xc(i),y.yc(3).next("docUpdate")})),y.ic(),y.ic(),y.ic(),y.ic(),y.jc(9,"div"),y.jc(10,"div",54),y.jc(11,"div",55),y.jc(12,"span",56),y.jd(13),y.ic(),y.ic(),y.ic(),y.ic(),y.gc()}if(2&e){var n=y.yc(3);y.Pb(2),y.Hc("ngForOf",y.Bc(3,3,n.docUpdate,n.imageIndexFordocUpdate)),y.Pb(11),y.md(" ",n.imageIndexFordocUpdate+1," / ",n.docUpdate.length," ")}}function R(e,t){if(1&e&&(y.hc(0),y.hd(1,_,14,6,"ng-container",13),y.gc()),2&e){var i=y.yc(2);y.Pb(1),y.Hc("ngIf",i.imagePreviewFordocUpdate&&i.docUpdate.length)}}var X=function(e){return{"background-image":e}},z=function(e){return{"is-invalid":e}};function B(e,t){if(1&e){var i=y.kc();y.jc(0,"div",4),y.jc(1,"div",20),y.jc(2,"div",21),y.jc(3,"div",22),y.jc(4,"input",23,24),y.uc("ngModelChange",(function(e){return y.Xc(i),y.yc().profile=e}))("change",(function(e){return y.Xc(i),y.yc().handleFileInput(e.target.files,"profile")})),y.ic(),y.hd(6,S,3,0,"div",25),y.ic(),y.jc(7,"label"),y.jd(8,"Profile"),y.ic(),y.ic(),y.ic(),y.jc(9,"div",20),y.jc(10,"div",26),y.jc(11,"label",27),y.jd(12,"Employee Name"),y.ic(),y.jc(13,"input",28,29),y.uc("ngModelChange",(function(e){return y.Xc(i),y.yc().registration.name=e})),y.ic(),y.hd(15,E,3,0,"div",25),y.ic(),y.ic(),y.jc(16,"div",20),y.jc(17,"div",26),y.jc(18,"label"),y.jd(19,"Phone No"),y.ic(),y.jc(20,"input",30,31),y.uc("ngModelChange",(function(e){return y.Xc(i),y.yc().registration.contact=e})),y.ic(),y.hd(22,H,2,0,"div",25),y.ic(),y.ic(),y.jc(23,"div",20),y.jc(24,"div",26),y.jc(25,"label"),y.jd(26,"Aadhar Card No"),y.ic(),y.jc(27,"input",32,33),y.uc("ngModelChange",(function(e){return y.Xc(i),y.yc().registration.aadhaar=e})),y.ic(),y.ic(),y.ic(),y.jc(29,"div",20),y.jc(30,"div",26),y.jc(31,"label",27),y.jd(32,"Document"),y.ic(),y.hd(33,M,2,13,"ng-container",34),y.jc(34,"input",35,36),y.uc("ngModelChange",(function(e){return y.Xc(i),y.yc().document=e}))("change",(function(e){return y.Xc(i),y.yc().handleFileInput(e.target.files,"document")})),y.ic(),y.hd(36,D,3,0,"div",25),y.ic(),y.ic(),y.jc(37,"div",20),y.jc(38,"div",26),y.jc(39,"label"),y.jd(40,"Department"),y.ic(),y.jc(41,"ng-select",37,38),y.uc("ngModelChange",(function(e){return y.Xc(i),y.yc().registration.departmentId=e})),y.ic(),y.hd(43,L,3,0,"div",25),y.ic(),y.ic(),y.jc(44,"div",20),y.jc(45,"div",26),y.jc(46,"label"),y.jd(47,"Remark2"),y.ic(),y.jc(48,"input",39,40),y.uc("ngModelChange",(function(e){return y.Xc(i),y.yc().registration.remark2=e})),y.ic(),y.ic(),y.ic(),y.jc(50,"div",20),y.jc(51,"div",26),y.jc(52,"label"),y.jd(53,"Remark3"),y.ic(),y.jc(54,"input",41,42),y.uc("ngModelChange",(function(e){return y.Xc(i),y.yc().registration.remark3=e})),y.ic(),y.ic(),y.ic(),y.jc(56,"div",43),y.hd(57,N,2,1,"ng-container",13),y.hd(58,R,2,1,"ng-container",13),y.ic(),y.ic()}if(2&e){var n=y.Uc(5),c=y.Uc(14),o=y.Uc(21),r=y.Uc(35),a=y.Uc(42),d=y.yc();y.Pb(4),y.Hc("ngStyle",y.Nc(24,X,"url("+d.imageUrl+")"))("ngModel",d.profile)("crossOrigin","anonymous")("ngClass",y.Nc(26,z,n.invalid&&(d.formSubmitted||n.touched))),y.Pb(2),y.Hc("ngIf",n.invalid&&(d.formSubmitted||n.touched)),y.Pb(7),y.Hc("ngModel",d.registration.name)("ngClass",y.Nc(28,z,c.invalid&&(d.formSubmitted||c.touched))),y.Pb(2),y.Hc("ngIf",c.invalid&&(d.formSubmitted||c.touched)),y.Pb(5),y.Hc("ngModel",d.registration.contact)("ngClass",y.Nc(30,z,o.invalid&&(d.formSubmitted||o.touched))),y.Pb(2),y.Hc("ngIf",o.invalid&&(d.formSubmitted||o.touched)),y.Pb(5),y.Hc("ngModel",d.registration.aadhaar),y.Pb(6),y.Hc("ngIf",d.uploadFlag),y.Pb(1),y.Hc("ngModel",d.document)("ngClass",y.Nc(32,z,r.invalid&&(d.formSubmitted||r.touched))),y.Pb(2),y.Hc("ngIf",r.invalid&&(d.formSubmitted||r.touched)),y.Pb(5),y.Hc("ngModel",d.registration.departmentId)("items",d.departmentList)("ngClass",y.Nc(34,z,a.invalid&&(d.formSubmitted||a.touched))),y.Pb(2),y.Hc("ngIf",a.invalid&&(d.formSubmitted||a.touched)),y.Pb(5),y.Hc("ngModel",d.registration.remark2),y.Pb(6),y.Hc("ngModel",d.registration.remark3),y.Pb(3),y.Hc("ngIf",!d.currentEmpId),y.Pb(1),y.Hc("ngIf",d.currentEmpId)}}function $(e,t){if(1&e){var i=y.kc();y.jc(0,"div"),y.ec(1,"ngx-qrcode",60),y.jc(2,"div",4),y.jc(3,"div",61),y.jc(4,"div",62),y.jc(5,"span",63),y.jd(6),y.ic(),y.jc(7,"div",64),y.jc(8,"div",65),y.jc(9,"a",66),y.uc("click",(function(){return y.Xc(i),y.yc().downloadImage()})),y.ec(10,"nb-icon",67),y.ic(),y.ic(),y.jc(11,"div",68),y.jc(12,"nb-icon",69),y.uc("click",(function(){return y.Xc(i),y.yc().shareImage()})),y.ic(),y.ic(),y.ic(),y.ic(),y.ic(),y.ic(),y.ic()}if(2&e){var n=y.yc();y.Pb(1),y.Hc("elementType",n.elementType)("errorCorrectionLevel",n.correctionLevel)("value",n.value),y.Pb(5),y.kd(n.emp_id),y.Pb(3),y.Hc("href",n.href,y.Zc)}}function W(e,t){if(1&e){var i=y.kc();y.jc(0,"button",70),y.uc("click",(function(){y.Xc(i);var e=y.yc(),t=y.Uc(16);return e.reset(t)})),y.jd(1,"CANCEL"),y.ic()}}var V=function(){return["/pages/registration/view"]};function Q(e,t){1&e&&(y.jc(0,"button",71),y.jd(1,"CANCEL"),y.ic()),2&e&&y.Hc("routerLink",y.Mc(1,V))}function G(e,t){if(1&e){var i=y.kc();y.jc(0,"button",72),y.uc("click",(function(){y.Xc(i);var e=y.yc(),t=y.Uc(16);return e.updateEmployee(t)})),y.jd(1,"UPDATE"),y.ic()}if(2&e){var n=y.yc();y.Hc("disabled",n.disableButton)}}function Z(e,t){if(1&e){var i=y.kc();y.jc(0,"button",72),y.uc("click",(function(){y.Xc(i);var e=y.yc(),t=y.Uc(16);return e.addEmployee(t)})),y.jd(1,"SAVE"),y.ic()}if(2&e){var n=y.yc();y.Hc("disabled",n.disableButton)}}var J,K=((J=function(){function t(e,i,n,o,r,a,d,s){c(this,t),this.commonService=e,this._route=i,this.registrationService=n,this.toastr=o,this.route=r,this.imageCompress=a,this.httpClient=d,this.userService=s,this.docAdd=[],this.docUpdate=[],this.imageIndexFordocAdd=0,this.imageIndexFordocUpdate=0,this.imagePreviewFordocAdd=!1,this.imagePreviewFordocUpdate=!1,this.imgLoading=!1,this.processValue=0,this.uploadFlag=!1,this.progress=0,this.registration=new f,this.employeeDocumentArray=[],this.loading=!1,this.fileToUpload=null,this.formSubmitted=!1,this.disableButton=!1,this.disableForm=!1,this.qrFlag=!1,this.elementType=m.b.URL,this.correctionLevel=m.c.HIGH,this.imageUrl="../../../../assets/scan/user-new.png",this.currentEmpData=[],this.docList=[],this.imageFile=null,this.destroy$=new u.a}return n(t,[{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}},{key:"ngOnInit",value:function(){var e=window.location.href.split("registration");this.url=e[0],this.uploadFlag=!1,this.getUserId(),this.getAllDepartment(),this.currentEmpId&&this.getCurrentEmpData(),this.imagePreviewFordocAdd=!1}},{key:"getAllDepartment",value:function(){var e=this;this.userService.getAllDepartmentData().pipe(Object(l.a)(this.destroy$)).subscribe((function(t){t.success&&(e.departmentList=t.data)}),(function(e){}))}},{key:"getUserId",value:function(){this.user=this.commonService.getUser(),this.userHead=this.commonService.getUserHeadId(),this.currentEmpId=this._route.snapshot.paramMap.get("id")}},{key:"getCurrentEmpData",value:function(){var e=this;this.docUpdate=[],this.registrationService.getEmployeeById(this.currentEmpId).pipe(Object(l.a)(this.destroy$)).subscribe((function(t){t.success&&(e.registration=t.data,e.docList=e.registration.employeeDocumentList,e.registration.employeeDocumentList.forEach((function(t){"profile"==t.type?e.imageUrl=t.url:e.docUpdate.push(t.url)})),e.imagePreviewFordocUpdate=!0)}))}},{key:"compressFile",value:function(e){var t=this;"profile"==e?this.imageCompress.compressFile(this.imageUrl,-1,50,50).then((function(e){t.imgResultAfterCompress=e,t.dataURItoBlob(t.imgResultAfterCompress.split(",")[1]),t.imageFile=new File([e],t.fileToUpload.name,{type:"image/jpeg"}),t.fileUpload()})):this.imageCompress.compressFile(this.docUrl,-1,50,50).then((function(e){t.imgResultAfterCompress=e,t.dataURItoBlob(t.imgResultAfterCompress.split(",")[1]),t.imageFile=new File([e],t.fileToUpload.name,{type:"image/jpeg"}),t.fileUpload()}))}},{key:"dataURItoBlob",value:function(e){for(var t=window.atob(e),i=new ArrayBuffer(t.length),n=new Uint8Array(i),c=0;c<t.length;c++)n[c]=t.charCodeAt(c);return new Blob([n],{type:"image/jpeg"})}},{key:"fileUpload",value:function(){var e=this;if(this.docAdd=[],this.docUpdate=[],this.imageFile){this.fileToUpload=this.imageFile;var t=new FormData;t.append("file",this.fileToUpload),t.append("upload_preset","gfl_upload"),t.append("cloud_name","dpemsdha5"),this.uploadFlag&&(this.processValue=0,this.httpClient.post("https://api.cloudinary.com/v1_1/dpemsdha5/image/upload",t,{reportProgress:!0,observe:"events"}).pipe(Object(l.a)(this.destroy$)).subscribe((function(t){t&&t.type===p.e.UploadProgress&&(e.processValue=Math.round(100*t.loaded/t.total))}),(function(e){}))),this.registrationService.uploadImage(t).pipe(Object(l.a)(this.destroy$)).subscribe((function(t){if(t){var i={id:null,name:e.fileToUpload.name,type:e.docType,url:t.secure_url,controlId:null};e.employeeDocumentArray.push(i),e.docList.push(i),e.docList.forEach((function(t){e.currentEmpId?"document"==t.type&&(-1==e.docUpdate.indexOf(t.url)&&e.docUpdate.push(t.url),e.imageIndexFordocUpdate=0):("document"==t.type&&(-1==e.docAdd.indexOf(t.url)&&e.docAdd.push(t.url),e.imageIndexFordocAdd=0),e.imagePreviewFordocAdd=!0)}))}}))}}},{key:"handleFileInput",value:function(e,t){var i=this;if(this.uploadFlag=!1,"document"==t&&(this.uploadFlag=!0),this.fileToUpload=e.item(0),this.uploadFlag&&(this.document=this.fileToUpload.name),this.docType=t,this.document=this.fileToUpload.name,"profile"==t){var n=new FileReader;n.onload=function(){i.imageUrl=n.result,i.compressFile(t)},n.readAsDataURL(this.fileToUpload)}else for(var c=function(n){i.fileToUpload=e.item(n);var c=new FileReader;c.onload=function(){i.docUrl=c.result,i.compressFile(t)},c.readAsDataURL(i.fileToUpload)},o=0;o<e.length;o++)c(o)}},{key:"reset",value:function(e){e.reset(),this.formSubmitted=!1,this.imageUrl="../../../../assets/scan/user-new.png"}},{key:"updateEmployee",value:function(e){var t=this;this.formSubmitted=!0,this.disableButton=!0,this.docUpdate.length&&this.registration.name?(this.registration.id=this.currentEmpId,this.docList.length>0&&this.docList.forEach((function(e,i){("profile"==e.type||"document"==e.type)&&(t.docList[i]=e)})),this.registration.employeeDocumentList=this.docList,this.registrationService.updateEmployee(this.registration).pipe(Object(l.a)(this.destroy$)).subscribe((function(e){e.success?(t.formSubmitted=!1,t.toastr.success(e.msg),t.route.navigate(["/pages/registration"])):t.toastr.error(e.msg),t.disableButton=!1}),(function(e){t.toastr.error(g.Serever_Error)}))):this.disableButton=!1}},{key:"downloadImage",value:function(){this.href=document.getElementsByTagName("img")[0].src}},{key:"shareImage",value:function(){var e=this;this.href=document.getElementsByTagName("img")[0].src;var t=new FormData;t.append("upload_preset","gfl_upload"),t.append("cloud_name","dpemsdha5"),t.append("file",this.href),this.registrationService.uploadImage(t).pipe(Object(l.a)(this.destroy$)).subscribe((function(t){if(t){e.employeeDocumentArray.push({id:null,name:e.emp_id,type:"qr",url:t.secure_url,controlId:null});var i=t.secure_url;window.innerWidth>=1024?window.location.href="https://web.whatsapp.com/send?phone=+91"+e.registration.contact+"&text="+i:window.location.href="whatsapp://send?phone=+91"+e.registration.contact+"&text="+i}}))}},{key:"addEmployee",value:function(e){var t=this;this.uploadFlag=!1,this.formSubmitted=!0,e.valid&&(this.loading=!0,this.disableButton=!0,this.registration.id=0,this.registration.employeeDocumentList=this.employeeDocumentArray,this.registrationService.addEmployee(this.registration).pipe(Object(l.a)(this.destroy$)).subscribe((function(e){e.success?(t.emp_id=e.data,t.formSubmitted=!1,t.disableButton=!1,t.toastr.success(e.msg),t.docAdd=[],t.generateQR(t.emp_id),t.processValue=0,t.loading=!1,t.qrFlag=!0):t.toastr.error(e.msg),t.disableButton=!1}),(function(e){t.toastr.error(g.Serever_Error),t.disableButton=!1})))}},{key:"generateQR",value:function(e){this.value=this.url+"attendance/"+e,this.addQR(this.value),this.fileUpload()}},{key:"addQR",value:function(e){var t=this,i={url:e,type:"qr",controlId:this.emp_id};this.employeeDocumentArray.push({id:null,name:this.emp_id,type:"qr",url:e,controlId:null}),this.registrationService.addQr(i).pipe(Object(l.a)(this.destroy$)).subscribe((function(e){e.success?(t.formSubmitted=!1,t.disableButton=!1,t.toastr.success(e.msg)):t.toastr.error(e.msg),t.disableButton=!1}),(function(e){t.toastr.error(g.Serever_Error),t.disableButton=!1}))}},{key:"removeImage",value:function(t,i){var n=this;if("docAdd"==t){var c=this.docAdd.splice(i,1);this.docList.forEach((function(e,t){e.url==c&&n.docList.splice(t,1)})),this.docAdd.length==i&&this.imageIndexFordocAdd--,this.docAdd=e(this.docAdd)}else if("docUpdate"==t){var o=this.docUpdate.splice(i,1);this.docList.forEach((function(e,t){e.url==o&&n.docList.splice(t,1)})),this.docUpdate.length==i&&this.imageIndexFordocUpdate--,this.docUpdate=e(this.docUpdate)}}},{key:"previous",value:function(e){"docAdd"==e?this.imageIndexFordocAdd?this.imageIndexFordocAdd--:this.imageIndexFordocAdd=this.docAdd.length-1:"docUpdate"==e&&(this.imageIndexFordocUpdate?this.imageIndexFordocUpdate--:this.imageIndexFordocUpdate=this.docUpdate.length-1)}},{key:"next",value:function(e){"docAdd"==e?this.imageIndexFordocAdd<this.docAdd.length-1?this.imageIndexFordocAdd++:this.imageIndexFordocAdd=0:"docUpdate"==e&&(this.imageIndexFordocUpdate<this.docUpdate.length-1?this.imageIndexFordocUpdate++:this.imageIndexFordocUpdate=0)}},{key:"tableChange",value:function(e){"view table"===e&&this.route.navigate(["/pages/registration/view"])}}]),t}()).\u0275fac=function(e){return new(e||J)(y.dc(b.a),y.dc(s.a),y.dc(v.a),y.dc(j.b),y.dc(s.c),y.dc(w.a),y.dc(p.b),y.dc(h.a))},J.\u0275cmp=y.Xb({type:J,selectors:[["ngx-add-edit-registration"]],decls:26,vars:9,consts:[[3,"show"],["id","target"],[1,"nb-style"],[1,"nb-header"],[1,"row"],[1,"col-md-5","col-6","display-flex-start","max-width-device"],["placeholder","Select",1,"btn","btn-md",3,"change"],["value","view table"],[1,"col-md-7","col-5"],[4,"ngIf","ngIfElse"],["updateS",""],["empForm","ngForm"],["class","row",4,"ngIf"],[4,"ngIf"],[1,"col-md-12","mobile-btn-center","text-btn-right"],[1,"document-padding-bt-tp"],["class","btn btn-primary btn-sm btn-design-cancel","type","button",3,"click",4,"ngIf"],["class","btn btn-primary btn-sm btn-design-cancel","type","button",3,"routerLink",4,"ngIf"],["type","button","class","btn btn-primary btn-sm btn-design-save button-base ripple",3,"disabled","click",4,"ngIf"],[1,"nb-text","txt-ov-elips","mob-font-13"],[1,"col-md-3","col-12"],[1,"form-group","text-center"],[1,"display-flex-center"],["type","file","name","profile","id","profile","placeholder","Upload profile","accept","image/x-png,image/gif,image/jpeg",1,"form-control","size-small","registration-document","filepicker",2,"position","relative","overflow","hidden","background-color","#ffff","z-index","0",3,"ngStyle","ngModel","crossOrigin","ngClass","ngModelChange","change"],["profile1","ngModel"],["class","input-required",4,"ngIf"],[1,"form-group"],[1,"required"],["type","text","name","name","fieldsize","small","nbinput","","placeholder","Employee Name","required","",1,"form-control","size-small",3,"ngModel","ngClass","ngModelChange"],["name1","ngModel"],["type","number","fieldsize","small","nbinput","","name","contact","maxlength","10","minlength","10","ng-pattern-restrict","[A-Za-z]","pattern","[6-9]{1}[0-9]{9}","placeholder","Contact No",1,"form-control","size-small",3,"ngModel","ngClass","ngModelChange"],["contact1","ngModel"],["type","text","fieldsize","small","nbinput","","name","aadhar","placeholder","Aadhar Card No",1,"form-control","size-small",3,"ngModel","ngModelChange"],["aadhar1","ngModel"],["class","mar-left-for-prog",4,"ngIf"],["type","file","multiple","","name","document","id","file","placeholder","Upload document","required","","accept","image/x-png,image/gif,image/jpeg",1,"form-control","size-small","registration-document",2,"color","transparent",3,"ngModel","ngClass","ngModelChange","change"],["document1","ngModel"],["name","departmenty","appendTo","body","bindLabel","name","bindValue","id","placeholder","Select Department","required","",1,"required-error-dropdown","dropdown-name",3,"ngModel","items","ngClass","ngModelChange"],["department1","ngModel"],["type","text","fieldsize","small","nbinput","","name","remark2","placeholder","Remark",1,"form-control","size-small",3,"ngModel","ngModelChange"],["remark2","ngModel"],["type","text","fieldsize","small","nbinput","","name","remark3","placeholder","Remark",1,"form-control","size-small",3,"ngModel","ngModelChange"],["remark3","ngModel"],[1,"col-md-6","col-12"],[1,"input-required"],[1,"mar-left-for-prog"],[3,"showInnerStroke","percent","outerStrokeColor","innerStrokeColor","animation","animationDuration","radius","titleFontSize","unitsFontSize","outerStrokeWidth","titleFontWeight","unitsFontWeight","showSubtitle"],[1,"max-popup-purchase","mobile-width-100"],["class","text-center mobile-100 display-flex-purchase-view",4,"ngFor","ngForOf"],[1,"next-previous-btn"],[1,"back-btn"],["icon","arrow-back-outline",3,"click"],[1,"next-btn"],["icon","arrow-forward-outline",3,"click"],[1,"row","text-center","mt-3"],[1,"col-md-12"],[1,"bottom-count-img"],[1,"text-center","mobile-100","display-flex-purchase-view"],[3,"src"],["icon","close-circle-outline",1,"purchase-close-img",3,"click"],["cssClass","bshadow",1,"text-center",3,"elementType","errorCorrectionLevel","value"],[1,"col-md-12","col-12"],[1,"text-center"],[1,"scan-id-style"],[1,"qr-share-opt","display-qr-evenly"],[1,"download-qr"],["download","",3,"href","click"],["icon","cloud-download-outline",1,"icon-qr-wd-height"],[1,"share-qr"],["icon","share-outline",1,"icon-qr-wd-height",3,"click"],["type","button",1,"btn","btn-primary","btn-sm","btn-design-cancel",3,"click"],["type","button",1,"btn","btn-primary","btn-sm","btn-design-cancel",3,"routerLink"],["type","button",1,"btn","btn-primary","btn-sm","btn-design-save","button-base","ripple",3,"disabled","click"]],template:function(e,t){if(1&e&&(y.ec(0,"ngx-loading",0),y.ec(1,"div",1),y.jc(2,"nb-card",2),y.jc(3,"nb-card-header",3),y.jc(4,"div",4),y.jc(5,"div",5),y.jc(6,"ng-select",6),y.uc("change",(function(e){return t.tableChange(e)})),y.jc(7,"ng-option",7),y.jd(8,"View Table"),y.ic(),y.ic(),y.ic(),y.jc(9,"div",8),y.hd(10,P,3,0,"div",9),y.hd(11,C,2,0,"ng-template",null,10,y.id),y.ic(),y.ic(),y.ic(),y.jc(13,"nb-card-body"),y.jc(14,"div"),y.jc(15,"form",null,11),y.hd(17,B,59,36,"div",12),y.hd(18,$,13,5,"div",13),y.jc(19,"div",4),y.jc(20,"div",14),y.jc(21,"div",15),y.hd(22,W,2,0,"button",16),y.hd(23,Q,2,2,"button",17),y.hd(24,G,2,1,"button",18),y.hd(25,Z,2,1,"button",18),y.ic(),y.ic(),y.ic(),y.ic(),y.ic(),y.ic(),y.ic()),2&e){var i=y.Uc(12);y.Hc("show",t.loading),y.Pb(10),y.Hc("ngIf",null==t.currentEmpId)("ngIfElse",i),y.Pb(7),y.Hc("ngIf",!t.qrFlag),y.Pb(1),y.Hc("ngIf",t.qrFlag),y.Pb(4),y.Hc("ngIf",!t.currentEmpId&&!t.qrFlag),y.Pb(1),y.Hc("ngIf",t.currentEmpId&&!t.qrFlag),y.Pb(1),y.Hc("ngIf",t.currentEmpId),y.Pb(1),y.Hc("ngIf",!t.currentEmpId&&!t.qrFlag)}},directives:[x.a,I.u,I.x,k.a,k.c,r.n,I.t,U.x,U.m,U.n,U.a,r.o,U.l,U.o,r.l,U.t,U.q,U.h,U.i,U.r,A.a,r.m,I.I,m.d,s.d],pipes:[F.a],styles:[".bshadow[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;filter:drop-shadow(5px 5px 5px #222222);opacity:.5}textarea[_ngcontent-%COMP%]{margin-top:15px;display:block;margin-left:auto;margin-right:auto;width:250px;opacity:.5}.imageURL[_ngcontent-%COMP%]{height:50px;width:50px}.filepicker[_ngcontent-%COMP%]{-webkit-appearance:none;position:absolute;width:87px;height:87px!important;text-indent:100em;background-size:cover;overflow:hidden;outline:none;padding:0;border:0}@media (max-width:767px){.filepicker[_ngcontent-%COMP%]{width:100px;height:100px!important}}"]}),J),Y=o("kF6S"),ee=o("Czu6"),te=o("1kSV"),ie=o("lDzL"),ne=o("+lss"),ce=function(){return{type:"zoom"}},oe=function(e){return{animation:e}},re=function(e){return["/pages/registration/edit",e]};function ae(e,t){if(1&e){var i=y.kc();y.ec(0,"nb-icon",25),y.jd(1,"\xa0\xa0 "),y.jc(2,"nb-icon",26),y.uc("click",(function(){y.Xc(i);var e=t.row;return y.yc(2).deleteEmp(e.id)})),y.ic(),y.jc(3,"nb-icon",27),y.uc("click",(function(e){y.Xc(i);var n=t.row;return y.yc(2).generateQR(e,n)})),y.ic()}if(2&e){var n=t.row,c=y.yc(2);y.Hc("options",y.Nc(7,oe,y.Mc(6,ce)))("hidden",c.hiddenEdit)("routerLink",y.Nc(9,re,n.id)),y.Pb(2),y.Hc("options",y.Nc(12,oe,y.Mc(11,ce)))("hidden",c.hiddenDelete),y.Pb(1),y.Hc("options",y.Nc(15,oe,y.Mc(14,ce)))}}function de(e,t){1&e&&(y.jc(0,"ngx-datatable-column",24),y.hd(1,ae,4,17,"ng-template",20),y.ic()),2&e&&y.Hc("maxWidth",90)}function se(e,t){if(1&e&&(y.jc(0,"span",33),y.ec(1,"img",34),y.ic()),2&e){var i=y.yc().$implicit;y.Pb(1),y.Hc("src",i.url,y.Zc)}}function le(e,t){if(1&e&&(y.hc(0),y.hd(1,se,2,1,"span",32),y.gc()),2&e){var i=t.$implicit;y.Pb(1),y.Hc("ngIf","profile"==i.type)}}function ue(e,t){if(1&e&&(y.jc(0,"div",28),y.jc(1,"div",29),y.hd(2,le,2,1,"ng-container",30),y.ic(),y.jc(3,"div",31),y.jc(4,"span"),y.jd(5),y.ic(),y.ic(),y.ic()),2&e){var i=t.row;y.Pb(2),y.Hc("ngForOf",i.employeeDocumentList),y.Pb(3),y.kd(i.name)}}function pe(e,t){if(1&e){var i=y.kc();y.jc(0,"div"),y.ec(1,"ngx-qrcode",35),y.jc(2,"div",1),y.jc(3,"div",36),y.jc(4,"div",37),y.jc(5,"span",38),y.jd(6),y.ic(),y.jc(7,"div",39),y.jc(8,"div",40),y.jc(9,"a",41),y.uc("click",(function(){return y.Xc(i),y.yc().downloadImage()})),y.ec(10,"nb-icon",42),y.ic(),y.ic(),y.jc(11,"div",43),y.jc(12,"nb-icon",44),y.uc("click",(function(){return y.Xc(i),y.yc().shareImage()})),y.ic(),y.ic(),y.ic(),y.ic(),y.ic(),y.ic(),y.ic()}if(2&e){var n=y.yc();y.Pb(1),y.Hc("elementType",n.elementType)("errorCorrectionLevel",n.correctionLevel)("value",n.value),y.Pb(5),y.kd(n.emp_id),y.Pb(3),y.Hc("href",n.href,y.Zc)}}var me,he,ge,fe=function(){return["/pages/registration"]},be=[{path:"",component:K,canActivate:[ee.a],canLoad:[ee.a],data:{PermissionName:["add"]}},{path:"view",component:(me=function(){function e(t,i,n,o){c(this,e),this.registrationService=t,this.toastr=i,this.modalService=n,this.registrationGuard=o,this.empData=[],this.copyEmpData=[],this.profileData=[],this.loading=!1,this.qrFlag=!1,this.tablestyle="bootstrap",this.hiddenAdd=!0,this.hiddenEdit=!0,this.hiddenDelete=!0,this.destroy$=new u.a,this.tableHeaders=["empId","name","contact","aadhaar"],this.searchStr="",this.searchANDCondition=!1}return n(e,[{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}},{key:"ngOnInit",value:function(){this.getAccess(),this.getAllEmployee();var e=window.location.href.split("registration");this.url=e[0]}},{key:"getAccess",value:function(){this.registrationGuard.accessRights("add")&&(this.hiddenAdd=!1),this.registrationGuard.accessRights("delete")&&(this.hiddenDelete=!1),this.registrationGuard.accessRights("edit")&&(this.hiddenEdit=!1)}},{key:"getAllEmployee",value:function(){var e=this;this.loading=!0,this.registrationService.getAllEmployee().pipe(Object(l.a)(this.destroy$)).subscribe((function(t){t.success&&(e.empData=t.data,e.copyEmpData=e.empData.map((function(e){return{id:e.id,empId:e.empId,name:e.name,contact:e.contact,aadhaar:e.aadhaar,employeeDocumentList:e.employeeDocumentList}}))),e.loading=!1}),(function(t){e.toastr.error(g.Serever_Error)}))}},{key:"filter",value:function(e){var t=e.toString().toLowerCase().trim(),i=Object.keys(this.copyEmpData[0]);this.empData=this.copyEmpData.filter((function(e){for(var n=0;n<i.length;n++)if(e[i[n]]&&-1!==e[i[n]].toString().toLowerCase().indexOf(t)||!t)return!0}))}},{key:"deleteEmp",value:function(e){var t=this;this.modalService.open(Y.a,{size:"sm"}).result.then((function(i){i&&t.registrationService.deleteEmployee(e).pipe(Object(l.a)(t.destroy$)).subscribe((function(e){e.success?(t.toastr.success(e.msg),t.getAllEmployee()):t.toastr.error(e.msg)}),(function(e){}))}))}},{key:"generateQR",value:function(e,t){var i=this;this.emp_id=t.empId,t.employeeDocumentList&&t.employeeDocumentList.forEach((function(e){"qr"==e.type&&(i.value=e.url)})),this.qrFlag=!0}},{key:"downloadImage",value:function(){this.href=document.getElementsByTagName("img")[0].src}},{key:"shareImage",value:function(){var e=this;this.href=document.getElementsByTagName("img")[0].src;var t=new FormData;t.append("upload_preset","gfl_upload"),t.append("cloud_name","dpemsdha5"),t.append("file",this.href),this.registrationService.uploadImage(t).pipe(Object(l.a)(this.destroy$)).subscribe((function(t){if(t){var i=t.secure_url;window.innerWidth>=1024?window.location.href="https://web.whatsapp.com/send?phone=+91"+e.contact+"&text="+i:window.location.href="whatsapp://send?phone=+91"+e.contact+"&text="+i}}))}}]),e}(),me.\u0275fac=function(e){return new(e||me)(y.dc(v.a),y.dc(j.b),y.dc(te.e),y.dc(ee.a))},me.\u0275cmp=y.Xb({type:me,selectors:[["ngx-registration"]],decls:32,vars:21,consts:[[3,"show"],[1,"row"],[1,"col-lg-12"],[1,"nb-style"],[1,"nb-header"],[1,"col-md-1","col-3","display-flex-start","max-width-device"],[1,"btn","btn-md","btn-design",3,"routerLink","disabled"],[1,"col-md-9","col-7"],[1,"nb-text"],[1,"col-md-4"],[2,"display","flex"],[2,"margin-top","4px","margin-right","2px"],["status","primary","labelPosition","start","name","shift",3,"ngModel","ngModelChange"],[2,"margin-top","4px","margin-left","2px"],[1,"col-md-8"],["type","text","placeholder","Search","aria-label","Search","aria-describedby","basic-addon1",1,"form-control",3,"ngModel","ngModelChange"],[1,"material",3,"rows","ngClass","headerHeight","footerHeight"],["name","Actions","sortable","false","props","id",3,"maxWidth",4,"ngIf"],["name","Employee Id","prop","empId",3,"maxWidth"],["name","Name","prop","name",3,"maxWidth"],["ngx-datatable-cell-template",""],["name","Contact","prop","contact",3,"maxWidth"],["name","Aadhar No.","prop","aadhaar",3,"maxWidth"],[4,"ngIf"],["name","Actions","sortable","false","props","id",3,"maxWidth"],["status","primary","icon","edit",3,"options","hidden","routerLink"],["status","danger","icon","trash",3,"options","hidden","click"],["icon","camera-outline","nbTooltip","QR","nbTooltipStatus","primary","status","danger",3,"options","click"],[1,"row","width-100"],[1,"col-md-3","col-3"],[4,"ngFor","ngForOf"],[1,"col-md-9","col-9"],["class","ngx-profile-table",4,"ngIf"],[1,"ngx-profile-table"],[1,"imageURL",3,"src"],["cssClass","bshadow",1,"text-center",3,"elementType","errorCorrectionLevel","value"],[1,"col-md-12","col-12"],[1,"text-center"],[1,"scan-id-style"],[1,"qr-share-opt","display-qr-evenly"],[1,"download-qr"],["download","",3,"href","click"],["icon","cloud-download-outline",1,"icon-qr-wd-height"],[1,"share-qr"],["icon","share-outline",1,"icon-qr-wd-height",3,"click"]],template:function(e,t){1&e&&(y.ec(0,"ngx-loading",0),y.jc(1,"div",1),y.jc(2,"div",2),y.jc(3,"nb-card",3),y.jc(4,"nb-card-header",4),y.jc(5,"div",1),y.jc(6,"div",5),y.jc(7,"button",6),y.jd(8,"ADD"),y.ic(),y.ic(),y.jc(9,"div",7),y.jc(10,"h2",8),y.jd(11,"Employee"),y.ic(),y.ic(),y.ic(),y.ic(),y.jc(12,"nb-card-body"),y.jc(13,"div",1),y.jc(14,"div",9),y.jc(15,"div",10),y.jc(16,"p",11),y.jd(17,"OR"),y.ic(),y.jc(18,"nb-toggle",12),y.uc("ngModelChange",(function(e){return t.searchANDCondition=e})),y.ic(),y.jc(19,"p",13),y.jd(20,"AND"),y.ic(),y.ic(),y.ic(),y.jc(21,"div",14),y.jc(22,"input",15),y.uc("ngModelChange",(function(e){return t.searchStr=e})),y.ic(),y.ic(),y.ic(),y.jc(23,"ngx-datatable",16),y.zc(24,"searchInTable"),y.hd(25,de,2,1,"ngx-datatable-column",17),y.ec(26,"ngx-datatable-column",18),y.jc(27,"ngx-datatable-column",19),y.hd(28,ue,6,2,"ng-template",20),y.ic(),y.ec(29,"ngx-datatable-column",21),y.ec(30,"ngx-datatable-column",22),y.ic(),y.hd(31,pe,13,5,"div",23),y.ic(),y.ic(),y.ic(),y.ic()),2&e&&(y.Hc("show",t.loading),y.Pb(7),y.Hc("routerLink",y.Mc(20,fe))("disabled",t.hiddenAdd),y.Pb(11),y.Hc("ngModel",t.searchANDCondition),y.Pb(4),y.Hc("ngModel",t.searchStr),y.Pb(1),y.Hc("rows",y.Dc(24,15,t.empData,t.searchStr,t.searchANDCondition,t.tableHeaders))("ngClass",t.tablestyle)("headerHeight",31)("footerHeight",31),y.Pb(2),y.Hc("ngIf",!t.hiddenEdit||!t.hiddenDelete),y.Pb(1),y.Hc("maxWidth",200),y.Pb(1),y.Hc("maxWidth",300),y.Pb(2),y.Hc("maxWidth",200),y.Pb(1),y.Hc("maxWidth",200),y.Pb(1),y.Hc("ngIf",t.qrFlag))},directives:[x.a,I.u,I.x,s.d,I.t,I.wb,U.l,U.o,U.a,ie.e,r.l,r.n,ie.b,ie.a,I.I,I.yb,r.m,m.d],pipes:[ne.a],styles:[".imageURL[_ngcontent-%COMP%]{height:30px;width:30px}"]}),me),canActivate:[ee.a],canLoad:[ee.a],data:{PermissionName:["view","view group","view all"]}},{path:"edit/:id",component:K,canActivate:[ee.a],canLoad:[ee.a],data:{PermissionName:["edit","edit group","edit all"]}}],ve=((ge=function e(){c(this,e)}).\u0275mod=y.bc({type:ge}),ge.\u0275inj=y.ac({factory:function(e){return new(e||ge)},imports:[[s.g.forChild(be)],s.g]}),ge),ye=((he=function e(){c(this,e)}).\u0275mod=y.bc({type:he}),he.\u0275inj=y.ac({factory:function(e){return new(e||he)},imports:[[r.c,ve,d.a,a.a,U.g]]}),he)}}])}();